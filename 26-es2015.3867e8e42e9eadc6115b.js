(window.webpackJsonp=window.webpackJsonp||[]).push([[26,79],{"/gN3":function(t,e,n){"use strict";var l=n("tFIl");class a extends l.a{constructor(t={}){super(),this.momentIsUtc=!1,this.fillAll(t,["order","name","width","minWidth","pinned","field","tooltipField","align","labelFormat","filter","drillIndex","editable","hide","children","valueGetter","valueFormatter","valueSetter","valueParser","momentFormat","momentIsUtc","customFormatter","cellRenderer","cellEditor","cellEditorParams","cellRendererFramework","cellRendererParams","cellClass","data"])}get hasDrill(){return null!==this.drillIndex}get hasNumericFormat(){return this.labelFormat!==o.Date&&this.labelFormat!==o.Moment&&this.labelFormat!==o.Default&&this.labelFormat!==o.Custom}get hasDefaultFormat(){return this.labelFormat===o.Default}get hasMoneyFormat(){return this.labelFormat===o.Money||this.labelFormat===o.Money2}get hasPercentageFormat(){return this.labelFormat===o.Percentage||this.labelFormat===o.Percentage1DecWithZeroMantissa||this.labelFormat===o.Percentage2DecWithZeroMantissa}}var o=function(t){return t[t.Date=0]="Date",t[t.Moment=1]="Moment",t[t.Money=2]="Money",t[t.Money2=3]="Money2",t[t.MoneyAbbr=4]="MoneyAbbr",t[t.Integer=5]="Integer",t[t.Float=6]="Float",t[t.FloatWithTwoDecimalPlaces=7]="FloatWithTwoDecimalPlaces",t[t.FloatWithOneDecimalPlace=8]="FloatWithOneDecimalPlace",t[t.Cnt=9]="Cnt",t[t.Percentage=10]="Percentage",t[t.Percentage1DecWithZeroMantissa=11]="Percentage1DecWithZeroMantissa",t[t.Percentage2DecWithZeroMantissa=12]="Percentage2DecWithZeroMantissa",t[t.Custom=13]="Custom",t[t.Default=14]="Default",t}({}),i=function(t){return t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t}({}),r=function(t){return t[t.None=0]="None",t[t.String=1]="String",t[t.NumberRange=2]="NumberRange",t[t.DateRange=3]="DateRange",t[t.MultiChoice=4]="MultiChoice",t}({});class s{constructor(t={}){Object.keys(t).forEach(e=>this[e]=new.target.value(t[e]))}static value(t,e=null){return null==t?e:t}}n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"e",(function(){return s}))},"OTv+":function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n("/kTj");class l{constructor(t,e){this.formatter=t,this.debug=e.factory(new.target.name)}transform(t,e,n){if(null===t)return 0;switch(Array.isArray(t)&&"from-array"!==e&&(t="%"===t[1]&&"from-array-abbr"!==e?t[0]/100:t[0]),"from-array-abbr"===e&&(e="abbr"),e){case"money":case"amt":return this.formatter.money(t);case"amt2":return this.formatter.money(t,{fractional:2,noZeroMantissa:!1,currencySign:"$"});case"per":return this.formatter.percentage(t);case"per1":return this.formatter.percentage(t,1,!1);case"per2":return this.formatter.percentage(t,2,!1);case"per-3f":return this.formatter.percentage(t,3);case"per-round":return this.formatter.percentage(t,0);case"number":case"cnt":return this.formatter.number(t,{fractional:0});case"cnt0":this.formatter.number(t,{fractional:0,thousandDelimiter:""});case"abbr":return this.formatter.abbrNum(t,n);case"abbr-money":return this.formatter.abbrMoney(t,n);case"from-array":return this.formatter.fromArray(t,n);default:return this.debug.warn("Unknown format: %s. Value: %s",e,t),this.formatter.number(t,{fractional:0})}}}},bftJ:function(t,e,n){"use strict";n.r(e);var l=n("8Y7J");const a="cabinet.schedules.by-store.";class o{constructor(t){t.addLoaderWithPrefixedTranslations("/cabinet/schedules/by-store",a)}}var i=n("pMnS"),r=n("NcP4"),s=n("t68o"),d=n("zbXB"),c=n("GsI2"),u=n("eliu"),p=n("0Xvm"),g=n("VOAG"),h=n("aYrz"),m=n("tfhy"),f=n("HOtD"),b=n("ubcW"),C=n("Mz6y"),x=n("QQfA"),v=n("hOhj"),M=n("/HVE"),y=n("5GAg"),O=n("IP0z"),_=n("cUpR"),w=n("TSSN"),P=n("SVse"),D=n("MlvX"),k=n("Xd0L"),T=n("Azqq"),R=n("JjoW"),F=n("s7LF"),S=n("HsOI"),A=n("dJrM"),E=n("omvX"),N=n("OTv+"),I=n("eeq/"),L=n("/kTj"),j=n("mS0u"),G=n("MmlZ"),$=n("fFD9"),V=n("ZdYK");class B{constructor(t,e,n){this.translate=t,this.filterData=e,this.dataService=n,this.i18n=a,this.isOpened=!0,this.chartClick=new l.EventEmitter,this.editTotalFields=new l.EventEmitter,this.subs=[]}get hasEditTotalButton(){return this.totals&&this.totals.length>1}set sub(t){this.subs.push(t)}ngOnInit(){this.data$=this.dataService.bottomBarData$,this.initSubscriptions()}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}onToggle(){this.isOpened=!this.isOpened}onChartClick(t){this.chartClick.emit(t.data)}onEditTotalFields(){this.editTotalFields.emit()}onFilterChange(t,e){switch(t){case"viewType":this.dataService.setBottomBarViewType(e)}}initSubscriptions(){this.sub=this.translate.get(["bottom-bar.filters.view.label","bottom-bar.filters.view.by-age-range.label","bottom-bar.filters.view.by-model.label","bottom-bar.filters.view.by-make.label"].map(t=>a+t)).pipe(Object($.a)(this.dataService.bottomBarViewType$,this.filterData.selectedReport$)).subscribe(([t,e,n])=>{this.filters=null;const l=this.filterData.isReportNewUsed(n),o=this.filterData.isReportWithData(n),i={label:t[a+"bottom-bar.filters.view.label"],name:"viewType",items:[]};o&&(i.items.push({label:t[a+"bottom-bar.filters.view.by-age-range.label"],value:V.c.ByAgeRange}),l&&i.items.push({label:t[a+"bottom-bar.filters.view.by-model.label"],value:V.c.ByModel},{label:t[a+"bottom-bar.filters.view.by-make.label"],value:V.c.ByMake})),i.items.length&&(i.value=e,this.filters=[i])})}}var z=n("VZOB"),q=n("2Vo4"),Z=n("itXk"),W=n("pLZG"),X=n("/uUt"),K=n("zp1y"),U=n("Kj3r"),H=n("lJxs"),J=n("w1tV"),Y=n("vkgz"),Q=n("eIep"),tt=n("nYR2");class et{constructor(t,e,n,l){this.filterData=t,this.dataApi=e,this.translate=n,this.formatter=l,this.defaultViewType=V.c.ByAgeRange,this._data$=new q.a(void 0),this._loading$=new q.a(void 0),this._bottomBarData$=new q.a(void 0),this._bottomBarViewType$=new q.a(this.defaultViewType),this._pageType$=new q.a(void 0),this.subs=[],this.initInternal()}set sub(t){this.subs.push(t)}destroy(){this.subs.forEach(t=>t.unsubscribe()),this.subs=[],this._data$.next(void 0),this._bottomBarData$.next(void 0),this._bottomBarViewType$.next(this.defaultViewType),this._pageType$.next(void 0)}init(){this.initSubscriptions()}setBottomBarViewType(t){this._bottomBarViewType$.next(t)}setPageType(t){this._pageType$.next(t)}initInternal(){this.data$=this._data$.pipe(Object(W.a)(t=>!!t)),this.loading$=this._loading$.asObservable(),this.bottomBarViewType$=this._bottomBarViewType$.pipe(Object(W.a)(t=>!!t),Object(X.a)()),this.bottomBarData$=Object(Z.b)([this._bottomBarData$.pipe(Object(W.a)(t=>!!t)),this.translate.get(["bottom-bar.chart.amount.label","bottom-bar.chart.count.label"].map(t=>a+t))]).pipe(Object(K.a)(this.bottomBarViewType$),Object(U.a)(100),Object(H.a)(([[t,e],n])=>{const l={data:[],labels:[],colors:[],barData:[],tooltip:{titles:[],labels:[]}},o=["green","green-light","yellow","red","strong-red","deep-red"];return t.forEach((t,i)=>{l.data.push(+t.amt),l.labels.push(t.daystitle),l.colors.push(n===V.c.ByAgeRange?o[i]:"green"),l.barData.push({filter:{type:n,value:t.daystitle}}),l.tooltip.titles.push(t.daystitle),l.tooltip.labels.push(e[a+"bottom-bar.chart.amount.label"]+": "+this.formatter.abbrMoney(+t.amt,{K:1,M:1})+" | "+e[a+"bottom-bar.chart.count.label"]+": "+this.formatter.number(+t.cnt,{noZeroMantissa:!0}))}),l}),Object(J.a)())}initSubscriptions(){this.sub=Object(Z.b)([this.filterData.value$,this._pageType$.pipe(Object(W.a)(t=>!!t))]).pipe(Object(U.a)(100),Object(Y.a)(()=>this._loading$.next(!0)),Object(Q.a)(([t,e])=>e===V.a.ByAge?this.dataApi.getByAge(t):e===V.a.ByStore?this.dataApi.getByStore(t):this.dataApi.getByAcct(t)),Object(tt.a)(()=>this._loading$.next(!1))).subscribe(t=>{this._data$.next(t),this._loading$.next(!1)}),this.sub=Object(Z.b)([this.filterData.value$,this.bottomBarViewType$]).pipe(Object(U.a)(100)).subscribe(([{store:t,report:e,date:n},l])=>{this.dataApi.getStoreTrendData({store:t,report:e,date:n,viewType:l}).subscribe(({data:t})=>{this._bottomBarData$.next(t),this._loading$.next(!1)})}),this.sub=this.filterData.viewTypeFilter$.pipe(Object(W.a)(t=>!!t)).subscribe(({type:t})=>{this.setBottomBarViewType(t),this._loading$.next(!1)})}}var nt=l["\u0275crt"]({encapsulation:0,styles:[[".grid-wrapper[_ngcontent-%COMP%]{width:100%;flex:1 1 100%;height:100%;max-width:100%;background-color:#fff;box-shadow:2px 2px 5px 1px #c1bebe}.top-controls-block[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:space-between}.top-controls-block-left[_ngcontent-%COMP%]{width:calc(100% - 160px);flex:1 1 calc(100% - 160px);padding:20px 20px 10px;display:flex;align-items:center}.top-controls-block-right[_ngcontent-%COMP%]{width:160px;flex:1 0 160px;padding:20px 20px 10px;display:flex;align-items:center;justify-content:flex-end}.top-controls-block-heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#404040;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.filters-block[_ngcontent-%COMP%]{height:70px;padding:10px 20px 20px}.grid-block[_ngcontent-%COMP%]{display:flex;height:calc(100% - 60px - 70px)}.grid-block-content[_ngcontent-%COMP%]{width:calc(100% - 40px);flex:1 0 calc(100% - 40px);position:relative}.grid-block-content[_ngcontent-%COMP%]   app-default-grid[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;will-change:auto;transition:all .5s ease;transform:translate3d(0,0,0)}.grid-block-sidebar[_ngcontent-%COMP%]{width:40px;flex:0 0 40px;border-left:1px solid #ddd}.grid-block-more-info-trigger[_ngcontent-%COMP%]{display:block;height:60px;cursor:pointer;position:relative}.grid-block-more-info-trigger[_ngcontent-%COMP%]:before{content:'\\E5D4';font-family:\"Material Icons\";font-size:24px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.grid-block-more-info-trigger.opened[_ngcontent-%COMP%]:before{content:'\\E5D3'}.top-control-btn[_ngcontent-%COMP%]{color:#5b5b5b;cursor:pointer;margin-left:20px;margin-top:-2px;display:inline-block}.top-control-label[_ngcontent-%COMP%]{color:#747474;font-size:14px;margin-left:10px}.mat-checked[_ngcontent-%COMP%]   .top-control-label[_ngcontent-%COMP%]{color:#2196f3}.tabs-block[_ngcontent-%COMP%]{height:60px;padding:10px 20px 16px}.tab[_ngcontent-%COMP%]{display:inline-block;height:34px;line-height:34px;border-radius:17px;padding-left:15px;padding-right:15px;color:#404040;font-size:14px;font-weight:500;background-color:#e5e5e5;cursor:pointer}.tab.active[_ngcontent-%COMP%], .tab[_ngcontent-%COMP%]:hover{color:#3498db;background-color:#e2eff8}.tab[_ngcontent-%COMP%]:not(:last-child){margin-right:15px}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 0 10px;height:45px}.modal-header-right[_ngcontent-%COMP%]   .top-control-btn[_ngcontent-%COMP%]:last-child{margin-right:-4px}.modal-header.with-outer-padding-overwrite[_ngcontent-%COMP%]{margin-top:-19px;margin-left:-19px;margin-right:-19px;padding:10px 20px}.modal-header.with-padding[_ngcontent-%COMP%]{padding:10px 20px}.modal-body[_ngcontent-%COMP%]{height:calc(100% - 45px);position:relative}.modal-body.with-footer[_ngcontent-%COMP%]{height:calc(100% - 45px - 50px)}.modal-body.full-height[_ngcontent-%COMP%]{height:100%}.modal-body.with-min-size[_ngcontent-%COMP%]{min-width:850px;min-height:300px;margin-left:-19px;margin-right:-19px}.modal-body.with-outer-padding-overwrite[_ngcontent-%COMP%]{margin-left:-19px;margin-right:-19px;margin-bottom:-19px}.modal-body[_ngcontent-%COMP%]   app-default-grid[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0}.modal-footer[_ngcontent-%COMP%]{height:50px;display:flex;align-items:center;justify-content:flex-end;background:#eee;margin:0 -19px -19px;padding:0 19px}.modal-footer-text[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#404040;padding-right:15px}.modal-footer-text.last[_ngcontent-%COMP%]{padding-left:15px;padding-right:0}.modal-footer-text.last[_ngcontent-%COMP%]:before{content:'|';position:relative;left:-13px}.modal-heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.fi-list[_ngcontent-%COMP%]{display:flex;margin:25px 0;padding:15px 0;border-bottom:1px solid #ddd}.fi-list.single[_ngcontent-%COMP%]{padding:5px 0;margin:0;border-bottom:0}.fi-list-item[_ngcontent-%COMP%]{width:33%;flex:0 0 33%;padding:0 5px}.single[_ngcontent-%COMP%]   .fi-list-item[_ngcontent-%COMP%]:nth-of-type(1){padding-left:0}.single[_ngcontent-%COMP%]   .fi-list-item[_ngcontent-%COMP%]:nth-of-type(3){padding-right:0}.penetration-list.horizontal[_ngcontent-%COMP%]{display:flex;align-items:center}.penetration-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin:25px 0;padding:15px 0 30px;border-bottom:1px solid #ddd}.horizontal[_ngcontent-%COMP%]   .penetration-item[_ngcontent-%COMP%]{width:50%;flex:0 0 50%;padding:10px 15px 10px 0;margin:0;border-bottom:none}.penetration-title[_ngcontent-%COMP%]{width:30%;flex:0 0 30%;font-size:14px;color:#404040;padding-right:5px;overflow:hidden;text-overflow:ellipsis}.penetration-graph[_ngcontent-%COMP%]{width:50%;flex:0 0 50%;padding:0 5px}.penetration-rank[_ngcontent-%COMP%]{width:20%;flex:0 0 20%;padding:0 5px;text-align:center}.chargeback[_ngcontent-%COMP%]{text-align:center;margin:50px 0 30px}.chargeback[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{margin:0 0 5px;font-size:20px;font-weight:600}.chargeback-value[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#404040}.control-btn-settings[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;position:relative;cursor:pointer}.control-btn-settings[_ngcontent-%COMP%]:before{content:'\\e8b8';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#5b5b5b;font-size:24px;font-family:\"Material Icons\"}.drill-info[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;list-style:none;padding:0;margin:0}.drill-info-item[_ngcontent-%COMP%]{color:#404040;font-size:14px;margin-right:25px}.drill-info-label[_ngcontent-%COMP%]{font-weight:400}.drill-info-value[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]{display:block;flex:0 0 50px;transition:flex .5s ease}.opened[_nghost-%COMP%]{flex:0 0 275px}.bottom-bar-header[_ngcontent-%COMP%]{height:50px;padding:5px 20px;display:flex;align-items:center;justify-content:space-between;border-top:1px solid #ddd}  .opened .bottom-bar-header{border-top:none;border-bottom:1px solid #ddd}.bottom-bar-header-left[_ngcontent-%COMP%], .bottom-bar-header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.bottom-bar-body[_ngcontent-%COMP%]{height:0;overflow:hidden;transition:height .5s ease}  .opened .bottom-bar-body{height:calc(100% - 50px)}.bottom-bar-trigger[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:#747474;cursor:pointer;position:relative;padding-left:24px;text-transform:uppercase}.bottom-bar-trigger[_ngcontent-%COMP%]:before{content:'\\e316';font-family:\"Material Icons\";font-size:24px;color:inherit;cursor:inherit;display:inline-block;position:absolute;left:0;top:50%;transform:translateY(-54%)}  .opened .bottom-bar-trigger:before{content:'\\e313'}.bottom-bar-label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#404040;margin-right:20px}.store-details[_ngcontent-%COMP%]{height:100%}.store-details-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;padding:20px 20px 10px;height:80px}.store-details-body[_ngcontent-%COMP%]{height:calc(100% - 80px);padding:10px 20px 20px}.store-details-heading[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:500;color:#404040}app-bar-chart[_ngcontent-%COMP%]{max-height:125px}"]],data:{}});function lt(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"span",[["class","bottom-bar-label"]],null,null,null,null,null)),(t()(),l["\u0275ted"](1,null,["",": ",""])),l["\u0275ppd"](2,2)],null,(function(t,e){var n=e.parent.context.$implicit.label,a=l["\u0275unv"](e,1,1,t(e,2,0,l["\u0275nov"](e.parent.parent,0),e.parent.context.$implicit.value,e.parent.context.$implicit.format));t(e,1,0,n,a)}))}function at(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,lt)),l["\u0275did"](2,16384,null,0,P.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](0,null,null,0))],(function(t,e){t(e,2,0,e.context.$implicit.visible)}),null)}function ot(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,16777216,null,null,2,"button",[["class","control-btn-settings"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(t,e,n){var a=!0,o=t.component;return"longpress"===e&&(a=!1!==l["\u0275nov"](t,1).show()&&a),"keydown"===e&&(a=!1!==l["\u0275nov"](t,1)._handleKeydown(n)&&a),"touchend"===e&&(a=!1!==l["\u0275nov"](t,1)._handleTouchend()&&a),"click"===e&&(a=!1!==o.onEditTotalFields()&&a),a}),null,null)),l["\u0275did"](1,212992,null,0,C.d,[x.c,l.ElementRef,v.e,l.ViewContainerRef,l.NgZone,M.a,y.c,y.h,C.b,[2,O.b],[2,C.a],[2,_.f]],{message:[0,"message"]},null),l["\u0275pid"](131072,w.i,[w.j,l.ChangeDetectorRef]),(t()(),l["\u0275and"](0,null,null,0))],(function(t,e){var n=e.component;t(e,1,0,l["\u0275unv"](e,1,0,l["\u0275nov"](e,2).transform(n.i18n+"edit-total-fields.button.tooltip")))}),null)}function it(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(t,e,n){var a=!0;return"click"===e&&(a=!1!==l["\u0275nov"](t,1)._selectViaInteraction()&&a),"keydown"===e&&(a=!1!==l["\u0275nov"](t,1)._handleKeydown(n)&&a),a}),D.b,D.a)),l["\u0275did"](1,8568832,[[10,4]],0,k.p,[l.ElementRef,l.ChangeDetectorRef,[2,k.j],[2,k.o]],{value:[0,"value"]},null),(t()(),l["\u0275ted"](2,0,[" "," "]))],(function(t,e){t(e,1,0,e.context.$implicit.value)}),(function(t,e){t(e,0,0,l["\u0275nov"](e,1)._getTabIndex(),l["\u0275nov"](e,1).selected,l["\u0275nov"](e,1).multiple,l["\u0275nov"](e,1).active,l["\u0275nov"](e,1).id,l["\u0275nov"](e,1)._getAriaSelected(),l["\u0275nov"](e,1).disabled.toString(),l["\u0275nov"](e,1).disabled),t(e,2,0,e.context.$implicit.label)}))}function rt(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,11,"mat-select",[["class","mat-select"],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],(function(t,e,n){var a=!0,o=t.component;return"keydown"===e&&(a=!1!==l["\u0275nov"](t,5)._handleKeydown(n)&&a),"focus"===e&&(a=!1!==l["\u0275nov"](t,5)._onFocus()&&a),"blur"===e&&(a=!1!==l["\u0275nov"](t,5)._onBlur()&&a),"ngModelChange"===e&&(a=!1!==o.onFilterChange(t.context.$implicit.name,n)&&a),a}),T.b,T.a)),l["\u0275prd"](6144,null,k.j,null,[R.c]),l["\u0275did"](2,671744,null,0,F.v,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,F.r,null,[F.v]),l["\u0275did"](4,16384,null,0,F.s,[[4,F.r]],null,null),l["\u0275did"](5,2080768,null,3,R.c,[v.i,l.ChangeDetectorRef,l.NgZone,k.b,l.ElementRef,[2,O.b],[2,F.u],[2,F.k],[2,S.c],[6,F.r],[8,null],R.a,y.j],{placeholder:[0,"placeholder"]},null),l["\u0275qud"](603979776,10,{options:1}),l["\u0275qud"](603979776,11,{optionGroups:1}),l["\u0275qud"](603979776,12,{customTrigger:0}),l["\u0275prd"](2048,[[1,4],[2,4]],S.d,null,[R.c]),(t()(),l["\u0275and"](16777216,null,1,1,null,it)),l["\u0275did"](11,278528,null,0,P.m,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,2,0,e.context.$implicit.value),t(e,5,0,e.context.$implicit.label),t(e,11,0,e.context.$implicit.items)}),(function(t,e){t(e,0,1,[l["\u0275nov"](e,4).ngClassUntouched,l["\u0275nov"](e,4).ngClassTouched,l["\u0275nov"](e,4).ngClassPristine,l["\u0275nov"](e,4).ngClassDirty,l["\u0275nov"](e,4).ngClassValid,l["\u0275nov"](e,4).ngClassInvalid,l["\u0275nov"](e,4).ngClassPending,l["\u0275nov"](e,5).id,l["\u0275nov"](e,5).tabIndex,l["\u0275nov"](e,5)._getAriaLabel(),l["\u0275nov"](e,5)._getAriaLabelledby(),l["\u0275nov"](e,5).required.toString(),l["\u0275nov"](e,5).disabled.toString(),l["\u0275nov"](e,5).errorState,l["\u0275nov"](e,5).panelOpen?l["\u0275nov"](e,5)._optionIds:null,l["\u0275nov"](e,5).multiple,l["\u0275nov"](e,5)._ariaDescribedby||null,l["\u0275nov"](e,5)._getAriaActiveDescendant(),l["\u0275nov"](e,5).disabled,l["\u0275nov"](e,5).errorState,l["\u0275nov"](e,5).required,l["\u0275nov"](e,5).empty])}))}function st(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,12,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,A.b,A.a)),l["\u0275did"](1,7520256,null,9,S.c,[l.ElementRef,l.ChangeDetectorRef,[2,k.h],[2,O.b],[2,S.a],M.a,l.NgZone,[2,E.a]],null,null),l["\u0275qud"](603979776,1,{_controlNonStatic:0}),l["\u0275qud"](335544320,2,{_controlStatic:0}),l["\u0275qud"](603979776,3,{_labelChildNonStatic:0}),l["\u0275qud"](335544320,4,{_labelChildStatic:0}),l["\u0275qud"](603979776,5,{_placeholderChild:0}),l["\u0275qud"](603979776,6,{_errorChildren:1}),l["\u0275qud"](603979776,7,{_hintChildren:1}),l["\u0275qud"](603979776,8,{_prefixChildren:1}),l["\u0275qud"](603979776,9,{_suffixChildren:1}),(t()(),l["\u0275and"](16777216,null,1,1,null,rt)),l["\u0275did"](12,278528,null,0,P.m,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,12,0,e.component.filters)}),(function(t,e){t(e,0,1,["standard"==l["\u0275nov"](e,1).appearance,"fill"==l["\u0275nov"](e,1).appearance,"outline"==l["\u0275nov"](e,1).appearance,"legacy"==l["\u0275nov"](e,1).appearance,l["\u0275nov"](e,1)._control.errorState,l["\u0275nov"](e,1)._canLabelFloat,l["\u0275nov"](e,1)._shouldLabelFloat(),l["\u0275nov"](e,1)._hasFloatingLabel(),l["\u0275nov"](e,1)._hideControlPlaceholder(),l["\u0275nov"](e,1)._control.disabled,l["\u0275nov"](e,1)._control.autofilled,l["\u0275nov"](e,1)._control.focused,"accent"==l["\u0275nov"](e,1).color,"warn"==l["\u0275nov"](e,1).color,l["\u0275nov"](e,1)._shouldForward("untouched"),l["\u0275nov"](e,1)._shouldForward("touched"),l["\u0275nov"](e,1)._shouldForward("pristine"),l["\u0275nov"](e,1)._shouldForward("dirty"),l["\u0275nov"](e,1)._shouldForward("valid"),l["\u0275nov"](e,1)._shouldForward("invalid"),l["\u0275nov"](e,1)._shouldForward("pending"),!l["\u0275nov"](e,1)._animationsEnabled])}))}function dt(t){return l["\u0275vid"](0,[l["\u0275pid"](0,N.a,[I.a,L.b]),(t()(),l["\u0275eld"](1,0,null,null,9,"div",[["class","bottom-bar-header"]],null,null,null,null,null)),(t()(),l["\u0275eld"](2,0,null,null,3,"div",[["class","bottom-bar-header-left"]],null,null,null,null,null)),(t()(),l["\u0275eld"](3,0,null,null,2,"button",[["class","bottom-bar-trigger"]],null,[[null,"click"]],(function(t,e,n){var l=!0;return"click"===e&&(l=!1!==t.component.onToggle()&&l),l}),null,null)),(t()(),l["\u0275ted"](4,null,["",""])),l["\u0275pid"](131072,w.i,[w.j,l.ChangeDetectorRef]),(t()(),l["\u0275eld"](6,0,null,null,4,"div",[["class","bottom-bar-header-right"]],null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,at)),l["\u0275did"](8,278528,null,0,P.m,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,ot)),l["\u0275did"](10,16384,null,0,P.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275eld"](11,0,null,null,10,"div",[["class","bottom-bar-body"]],null,null,null,null,null)),(t()(),l["\u0275eld"](12,0,null,null,9,"div",[["class","store-details"]],null,null,null,null,null)),(t()(),l["\u0275eld"](13,0,null,null,4,"div",[["class","store-details-header"]],null,null,null,null,null)),(t()(),l["\u0275eld"](14,0,null,null,2,"div",[["class","store-details-header-left"]],null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,st)),l["\u0275did"](16,16384,null,0,P.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275eld"](17,0,null,null,0,"div",[["class","store-details-header-right"]],null,null,null,null,null)),(t()(),l["\u0275eld"](18,0,null,null,3,"div",[["class","store-details-body"]],null,null,null,null,null)),(t()(),l["\u0275eld"](19,0,null,null,2,"app-bar-chart",[],null,[[null,"chartClick"]],(function(t,e,n){var l=!0;return"chartClick"===e&&(l=!1!==t.component.onChartClick(n)&&l),l}),j.b,j.a)),l["\u0275did"](20,638976,null,0,G.a,[l.ElementRef,I.a],{config:[0,"config"]},{chartClick:"chartClick"}),l["\u0275pid"](131072,P.b,[l.ChangeDetectorRef])],(function(t,e){var n=e.component;t(e,8,0,n.totals),t(e,10,0,n.hasEditTotalButton),t(e,16,0,n.filters),t(e,20,0,l["\u0275unv"](e,20,0,l["\u0275nov"](e,21).transform(n.data$)))}),(function(t,e){var n=e.component;t(e,4,0,l["\u0275unv"](e,4,0,l["\u0275nov"](e,5).transform(n.i18n+(n.isOpened?"bottom-bar.expand.label":"bottom-bar.collapse.label"))))}))}var ct=n("FpoO"),ut=n("JNvI"),pt=n("pGru"),gt=n("YbeN"),ht=n("RiRU"),mt=n("bujt"),ft=n("Fwaw"),bt=n("S5eV"),Ct=n("zeHk"),xt=n("+bil"),vt=n("S+vS"),Mt=n("ChPW"),yt=n("Lxd7"),Ot=n("IqdZ"),_t=n("TUN4"),wt=n("K5C0"),Pt=n("mvzq"),Dt=n("+2T5"),kt=n("LvDl"),Tt=n("/gN3"),Rt=n("k48M");class Ft{constructor(t,e,n,l,o,i,r){this.document=t,this.translate=e,this.dialog=n,this.dataApi=l,this.filterData=o,this.session=i,this.confirmDialog=r,this.i18n=a,this.loading=!1,this.isAllowed=!1,this.newReportName="",this.subs=[]}get isEdit(){return!!this.actionType}get isCreate(){return"add"===this.actionType}get reportName(){return this.report&&this.report.label}set sub(t){this.subs.push(t)}ngOnInit(){this.initGridOptions(),this.initSubscriptions(),this.initData()}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}edit(){this.actionType="upd",this.updateColums(),this.defGrid.agGrid.columnApi.setColumnsVisible(["SCH"],!1)}create(){this.actionType="add",this.defData=[{Id:null,reportName:this.reportName,SchedNumber:""}],this.glData=[{Id:null,reportName:this.reportName,GL:0,GLSpecCol:""}],this.updateColums()}reset(){this.initData(),this.updateColums()}onRemove(t,e){console.log("remove ",t,e),this.confirmDialog.openDialog({title:"Remove Setup",text:"Are you sure to delete this setup?",cancelBtnText:"CANCEL",okBtnText:"OK"}).subscribe(n=>{"YES"===n&&this.dataApi.removeSetup(+this.report.value,+this.store.value,t.data.Id,"GL"===e?t.data.GL:t.data.SchedNumber,e).subscribe(t=>{t&&(this.dialog.successT(),this.initData())})})}save(){this.sub=this.translate.get(["schedule-setup.message.duplicated-schedules","schedule-setup.message.duplicated-gl"].map(t=>a+t)).subscribe(t=>{const e=(t,e)=>kt.filter(kt.uniq(kt.map(t,n=>kt.filter(t,{[e]:n[e]}).length>1&&n[e])),t=>t),n=e("add"===this.actionType?[...this.defData,...this.defDataOriginal].map(t=>(t.SchedNumber=+t.SchedNumber,t)):this.defData.map(t=>(t.SchedNumber=+t.SchedNumber,t)),"SchedNumber"),l=e("add"===this.actionType?[...this.glData,...this.glDataOriginal].map(t=>(t.GL=t.GL.toString().trim(),t)):this.glData.map(t=>(t.GL=t.GL.toString().trim(),t)),"GL");if(n.length)this.dialog.warning(t[a+"schedule-setup.message.duplicated-schedules"]+" "+n[0]);else if(l.length)this.dialog.warning(t[a+"schedule-setup.message.duplicated-gl"]+" "+l[0]);else{const t={reportid:this.report.value,storeid:this.store.value,actionsetup:this.actionType,type:"setupSchedules",valuesschdef:this.defData.map(t=>({Id:t.Id,oldSchedNumber:t.SchedNumber,newSchedNumber:t.SchedNumber,oldLineDesc:this.report.label,newLineDesc:this.newReportName})),valuesgl:this.glData.map(t=>({Id:t.Id,newGL:t.GL,oldGL:t.GL,newGLSpecCol:t.GLSpecCol,oldGLSpecCol:t.GLSpecCol}))};this.loading=!0,this.dataApi.saveSetup(t).subscribe(()=>{this.dialog.successT(a+"schedule-setup.message.success"),this.isCreate||this.newReportName===this.report.label||this.filterData.updateReport({label:this.newReportName,value:this.report.value}),this.reset()})}})}updateColums(){this.defColumns=this.defColumns.map(t=>(t.editable=this.isEdit&&!!t.cellEditor,t)),this.glColumns=this.glColumns.map(t=>(t.editable=this.isEdit&&!!t.cellEditor,t))}initData(){const t=this.report.value,e=this.store.value;this.newReportName=this.reportName,this.actionType=null,this.loading=!0,this.sub=this.dataApi.getSetupDef({report:t,store:e}).pipe(Object($.a)(this.dataApi.getSetupGl({report:t,store:e}))).subscribe(([t,e])=>{this.defData=t,this.glData=e,this.defDataOriginal=[...this.defData],this.glDataOriginal=[...e],this.loading=!1})}initSubscriptions(){this.sub=this.session.currentUser$.subscribe(t=>{this.isAllowed=t.AccessLevel>79}),this.sub=this.translate.get(["schedule-setup.modal.setup.grid.column.report","schedule-setup.modal.setup.grid.column.schedule-no","schedule-setup.modal.setup.grid.column.gl-acct","schedule-setup.modal.setup.grid.column.column-type"].map(t=>a+t)).subscribe(t=>{this.defColumns=[new Tt.a({field:"Id",name:"",hide:!0}),new Tt.a({field:"reportName",name:t[a+"schedule-setup.modal.setup.grid.column.report"],labelFormat:Tt.d.Default,filter:Tt.c.String,align:Tt.b.Left}),new Tt.a({field:"SchedNumber",name:t[a+"schedule-setup.modal.setup.grid.column.schedule-no"],labelFormat:Tt.d.Default,filter:Tt.c.String,align:Tt.b.Left,cellEditor:"customEditCellEditor",cellEditorParams:{showSaveButton:!1,regExp:/^\d+$| /}}),new Tt.a({field:"SCH",name:"",cellRenderer:this.mapColCellRenderer.call(this,"SCH"),hide:this.isCreate})],this.glColumns=[new Tt.a({field:"Id",name:"",hide:!0}),new Tt.a({field:"reportName",name:t[a+"schedule-setup.modal.setup.grid.column.report"],labelFormat:Tt.d.Default,filter:Tt.c.String,align:Tt.b.Left}),new Tt.a({field:"GL",name:t[a+"schedule-setup.modal.setup.grid.column.gl-acct"],labelFormat:Tt.d.Default,filter:Tt.c.String,align:Tt.b.Left,cellEditor:"customEditCellEditor",cellEditorParams:{showSaveButton:!1,regExp:/^[a-zA-Z0-9-]+$/}}),new Tt.a({field:"GLSpecCol",name:t[a+"schedule-setup.modal.setup.grid.column.column-type"],labelFormat:Tt.d.Default,filter:Tt.c.String,align:Tt.b.Left,cellEditor:"customEditCellEditor",cellEditorParams:{showSaveButton:!1,regExp:/^[NF0-9]$|F1/}}),new Tt.a({field:"GL2",name:"",cellRenderer:this.mapColCellRenderer.call(this,"GL"),hide:this.isCreate})]})}initGridOptions(){this.options={frameworkComponents:{customEditCellEditor:Rt.a}}}mapColCellRenderer(t){return{GL:e=>{const n=this.document.createElement("span");return n.innerHTML='<i title="remove" class="material-icons"\n          style="color: #C70039; cursor: pointer">delete</i>',n.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.onRemove(e,t)}),this.isCreate?"":n}}.GL}}var St=n("uenX"),At=n("4asF"),Et=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.setup-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.setup-header-left[_ngcontent-%COMP%], .setup-header-right[_ngcontent-%COMP%]{width:50%;flex:0 0 50%}.setup-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:500px;width:100%;height:400px;margin:0 -19px -19px}.setup-body-grid-container[_ngcontent-%COMP%]{position:relative}.setup-body-grid-container[_ngcontent-%COMP%]:nth-child(1){flex:1 1 160px}.setup-body-grid-container[_ngcontent-%COMP%]:nth-child(2){flex:1 1 240px}.setup-body[_ngcontent-%COMP%]   app-default-grid[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0}.setup-label[_ngcontent-%COMP%]{font-size:12px;color:#747474}.setup-input[_ngcontent-%COMP%]{border:1px solid #ddd;color:#747474;font-size:12px;padding-left:5px;padding-right:5px}.setup-input.highlighted[_ngcontent-%COMP%]{background-color:#5faee3}.setup-report-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#404040;margin:0}.control[_ngcontent-%COMP%]{display:inline-block;position:relative;width:24px;height:24px;cursor:pointer}.control[_ngcontent-%COMP%]:not(:last-of-type){margin-right:20px}.control[_ngcontent-%COMP%]:before{content:'';font-size:24px;font-family:\"Material Icons\";color:#747474;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.control-edit[_ngcontent-%COMP%]:before{content:'\\e3c9'}.control-create[_ngcontent-%COMP%]:before{content:'\\e145'}.mat-button[_ngcontent-%COMP%]     .mat-button-wrapper{font-weight:400;text-transform:uppercase}  .ag-theme-material .ag-cell-highlighted{background-color:#5faee3}"]],data:{}});function Nt(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","setup-label"]],null,null,null,null,null)),(t()(),l["\u0275ted"](1,null,["",""]))],null,(function(t,e){t(e,1,0,e.component.reportName)}))}function It(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,5,"input",[["class","setup-input"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var a=!0,o=t.component;return"input"===e&&(a=!1!==l["\u0275nov"](t,1)._handleInput(n.target.value)&&a),"blur"===e&&(a=!1!==l["\u0275nov"](t,1).onTouched()&&a),"compositionstart"===e&&(a=!1!==l["\u0275nov"](t,1)._compositionStart()&&a),"compositionend"===e&&(a=!1!==l["\u0275nov"](t,1)._compositionEnd(n.target.value)&&a),"ngModelChange"===e&&(a=!1!==(o.newReportName=n)&&a),a}),null,null)),l["\u0275did"](1,16384,null,0,F.e,[l.Renderer2,l.ElementRef,[2,F.a]],null,null),l["\u0275prd"](1024,null,F.q,(function(t){return[t]}),[F.e]),l["\u0275did"](3,671744,null,0,F.v,[[8,null],[8,null],[8,null],[6,F.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,F.r,null,[F.v]),l["\u0275did"](5,16384,null,0,F.s,[[4,F.r]],null,null)],(function(t,e){var n=e.component;t(e,3,0,n.loading,n.newReportName)}),(function(t,e){t(e,0,0,l["\u0275nov"](e,5).ngClassUntouched,l["\u0275nov"](e,5).ngClassTouched,l["\u0275nov"](e,5).ngClassPristine,l["\u0275nov"](e,5).ngClassDirty,l["\u0275nov"](e,5).ngClassValid,l["\u0275nov"](e,5).ngClassInvalid,l["\u0275nov"](e,5).ngClassPending)}))}function Lt(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,0,"button",[["class","control control-edit"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(t,e,n){var l=!0;return"click"===e&&(l=!1!==t.component.edit()&&l),l}),null,null)),(t()(),l["\u0275eld"](2,0,null,null,0,"button",[["class","control control-create"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(t,e,n){var l=!0;return"click"===e&&(l=!1!==t.component.create()&&l),l}),null,null))],null,(function(t,e){var n=e.component;t(e,1,0,n.loading),t(e,2,0,n.loading)}))}function jt(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,8,null,null,null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,3,"button",[["color","primary"],["mat-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var l=!0;return"click"===e&&(l=!1!==t.component.save()&&l),l}),mt.b,mt.a)),l["\u0275did"](2,180224,null,0,ft.b,[l.ElementRef,y.h,[2,E.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(t()(),l["\u0275ted"](3,0,["",""])),l["\u0275pid"](131072,w.i,[w.j,l.ChangeDetectorRef]),(t()(),l["\u0275eld"](5,0,null,null,3,"button",[["color","primary"],["mat-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var l=!0;return"click"===e&&(l=!1!==t.component.reset()&&l),l}),mt.b,mt.a)),l["\u0275did"](6,180224,null,0,ft.b,[l.ElementRef,y.h,[2,E.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(t()(),l["\u0275ted"](7,0,["",""])),l["\u0275pid"](131072,w.i,[w.j,l.ChangeDetectorRef])],(function(t,e){var n=e.component;t(e,2,0,n.loading,"primary"),t(e,6,0,n.loading,"primary")}),(function(t,e){var n=e.component;t(e,1,0,l["\u0275nov"](e,2).disabled||null,"NoopAnimations"===l["\u0275nov"](e,2)._animationMode),t(e,3,0,l["\u0275unv"](e,3,0,l["\u0275nov"](e,4).transform(n.i18n+"schedule-setup.modal.save-button"))),t(e,5,0,l["\u0275nov"](e,6).disabled||null,"NoopAnimations"===l["\u0275nov"](e,6)._animationMode),t(e,7,0,l["\u0275unv"](e,7,0,l["\u0275nov"](e,8).transform(n.i18n+"schedule-setup.modal.cancel-button")))}))}function Gt(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,Lt)),l["\u0275did"](2,16384,null,0,P.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,jt)),l["\u0275did"](4,16384,null,0,P.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,!n.isEdit),t(e,4,0,n.isEdit)}),null)}function $t(t){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{defGrid:0}),l["\u0275qud"](402653184,2,{glGrid:0}),(t()(),l["\u0275eld"](2,0,null,null,10,"div",[["class","setup-header"]],null,null,null,null,null)),(t()(),l["\u0275eld"](3,0,null,null,6,"div",[["class","setup-header-left"]],null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,Nt)),l["\u0275did"](5,16384,null,0,P.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,It)),l["\u0275did"](7,16384,null,0,P.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275eld"](8,0,null,null,1,"h4",[["class","setup-report-name"]],null,null,null,null,null)),(t()(),l["\u0275ted"](9,null,["",""])),(t()(),l["\u0275eld"](10,0,null,null,2,"div",[["class","setup-header-right"]],null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,Gt)),l["\u0275did"](12,16384,null,0,P.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275eld"](13,0,null,null,8,"div",[["class","setup-body"]],null,null,null,null,null)),(t()(),l["\u0275eld"](14,0,null,null,3,"div",[["class","setup-body-grid-container"]],null,null,null,null,null)),(t()(),l["\u0275eld"](15,0,null,null,2,"app-default-grid",[],null,null,null,bt.b,bt.a)),l["\u0275prd"](512,null,Ct.a,Ct.a,[xt.a,vt.a,Mt.a,w.j,yt.a]),l["\u0275did"](17,4964352,[[1,4],["defGrid",4]],0,Ot.a,[I.a,Ct.a,_t.a,wt.a,Pt.a,L.b,Dt.a],{data:[0,"data"],columns:[1,"columns"],customGridOptions:[2,"customGridOptions"],loading:[3,"loading"]},null),(t()(),l["\u0275eld"](18,0,null,null,3,"div",[["class","setup-body-grid-container"]],null,null,null,null,null)),(t()(),l["\u0275eld"](19,0,null,null,2,"app-default-grid",[],null,null,null,bt.b,bt.a)),l["\u0275prd"](512,null,Ct.a,Ct.a,[xt.a,vt.a,Mt.a,w.j,yt.a]),l["\u0275did"](21,4964352,[[2,4],["glGrid",4]],0,Ot.a,[I.a,Ct.a,_t.a,wt.a,Pt.a,L.b,Dt.a],{data:[0,"data"],columns:[1,"columns"],customGridOptions:[2,"customGridOptions"],loading:[3,"loading"]},null)],(function(t,e){var n=e.component;t(e,5,0,!n.isEdit),t(e,7,0,n.isEdit),t(e,12,0,n.isAllowed),t(e,17,0,n.defData,n.defColumns,n.options,n.loading),t(e,21,0,n.glData,n.glColumns,n.options,n.loading)}),(function(t,e){var n=e.component;t(e,9,0,null==n.store?null:n.store.label)}))}var Vt=n("zXMq"),Bt=n("2Vgt"),zt=n("zp2H"),qt=n("v67E"),Zt=n("2v1Z"),Wt=n("BFEL"),Xt=n("SxV6"),Kt=n("BTBr"),Ut=n("VHTt"),Ht=n("NAMS");class Jt{constructor(t,e,n,l,o,i,r,s,d,c){this.document=t,this.route=e,this.translate=n,this.dialog=l,this.tracking=o,this.filterData=i,this.dataApi=r,this.dataService=s,this.instanceAppSettingsApi=d,this.coreCache=c,this.i18n=a,this.allowPagination=!1,this.isCommentsView=!1,this.commentType=Ht.a.Schedules,this.isGLAcctActive=!1,this.isAgeActive=!1,this.isGlAcctDrilldown=!1,this.subs=[]}set sub(t){this.subs.push(t)}ngOnInit(){this.dataService.init(),this.filterData.showFilters(["store","report"]),this.loading$=this.dataService.loading$,this.loadInformation()}loadInformation(){this.initGridOptions(),this.initStreams(),this.initSubscriptions()}ngOnDestroy(){this.dataService.destroy(),this.subs.forEach(t=>t.unsubscribe())}filterTable(t){switch(t.type){case V.c.ByAgeRange:const e=t.value.replace("Over ","").replace("+","").split("-");this.table.filterByRange("days",e[0],e[1]);break;case V.c.ByModel:this.table.filterByText("VehModel",t.value);break;case V.c.ByMake:this.table.filterByText("VehMake",t.value)}}onTrackTableChanges(){this.trackAction(Kt.a.Load,this.table.grid)}onFilterChanged(){this.setTotals()}exportDataAs(t){const e=(new Date).toDateString(),n=this.filterData.getFiltersListItems();this.sub=this.translate.get(a+"byPage.export.file-name").subscribe(l=>{const a=l+" "+e;switch(t){case Ut.a.XLS:this.table.exportDataAsXls(a,n),this.trackAction(Kt.a.ExportXls,this.table.grid);break;case Ut.a.PDF:this.table.exportDataAsPdf(a,n,()=>this.trackAction(Kt.a.ExportPdf,this.table.grid),{max:10,fixed:"control1",invisible:["comment_count"]})}})}exportDetailsDataAs(t){this.sub=this.translate.get(a+"drill.modal.export.file-name").subscribe(e=>{const n=e+" "+this.selectedControl;switch(t){case Ut.a.XLS:this.detailsGrid.exportDataAsXls(n);break;case Ut.a.PDF:this.detailsGrid.exportDataAsPdf(n)}})}showSetupModal(){this.setupModal.showModal()}openEditTotalFieldsModal(){this.editTotalFieldsModal.showModal()}closeEditTotalFieldsModal(){this.editTotalFieldsModal.closeModal()}saveTotalFields(t){this.dataApi.saveTotalFields({report:this.report.value,fields:t}).subscribe(()=>{this.dialog.successT(a+"total-fields.message.success"),t.forEach(t=>{this.totals.forEach(e=>{e.field===t.field&&(e.visible=t.visible)}),this.columns.forEach(e=>{e.field===t.field&&e.data&&(e.data.isTotal=t.visible)})}),this.closeEditTotalFieldsModal()})}onCloseComments(){this.commentNode=null,this.isCommentsView=!1,this.table.agGrid.api.refreshCells(),this.hostClass="host-old"}onCommentsChange(t){this.commentNode.setDataValue("comment_last",t.last),this.commentNode.setDataValue("comment_count",t.total)}trackAction(t,e){const n=this.filterData.getFiltersListItems();this.tracking.log({page:Kt.b.Schedules,section:this.pageType,event:t,params:n,grid:e})}initStreams(){}initSubscriptions(){this.sub=this.route.data.subscribe(t=>{this.pageType=t.pageType,this.isGLAcctActive=this.pageType===V.a.ByAcct,this.isAgeActive=this.pageType===V.a.ByAge,this.filterData.showFilters(this.isGLAcctActive?["report"]:["store","report"]),this.dataService.setPageType(t.pageType),this.hostClass="host-old"}),this.sub=this.dataService.data$.pipe(Object(K.a)(this.filterData.selectedReport$,this.filterData.viewTypeFilter$,this.instanceAppSettingsApi.getByType("pages.all.main"),this.coreCache.storesById$.pipe(Object(Xt.a)()))).subscribe(([t,e,n,l,a])=>{this.settings=l,this.storeindex=a,this.columns=[],this.isGlAcctDrilldown=!1,t.data=t.data.filter(t=>this.storeindex.get(+t.storeid)),t.labels.forEach(t=>{this.columns.push(new Tt.a({field:t.datafield,name:t.headertext,labelFormat:this.mapColLabelFormat(t.datafield),filter:this.mapColFilter(t.datafield),cellRenderer:"ACCT"===String(t.datafield).substring(0,4).toLocaleUpperCase()?this.mapColCellRenderer("ACCT"):this.mapColCellRenderer(t.datafield),align:this.mapColAlign(t.datafield),data:{isTotal:+t.totalfield},pinned:"StoreName"===t.datafield?"left":void 0,width:"StoreName"===t.datafield?300:void 0}))}),this.isGLAcctActive?this.getStoreShortNames(t.data):this.data=t.data,this.allowPagination=this.data.length>1e3,n?(setTimeout(()=>{this.filterTable(n)}),this.filterData.setViewTypeFilter(void 0)):setTimeout(()=>{this.setTotals()}),this.trackAction(Kt.a.Load)}),this.sub=Object(Z.b)([this.filterData.selectedReport$,this.filterData.reports$]).pipe(Object(H.a)(([t,e])=>e.find(e=>e.value===t))).subscribe(t=>this.report=t),this.sub=Object(Z.b)([this.filterData.selectedStore$,this.filterData.stores$]).pipe(Object(H.a)(([t,e])=>e.find(e=>e.value===t))).subscribe(t=>this.store=t)}getStoreShortNames(t){this.data=t.map(t=>{const e=this.storeindex.get(+t.storeid);if(void 0!==e)return Object.assign({},t,{StoreName:e[this.settings?this.settings.storeNameType:"name"]})})}setTotals(){this.totals=[],this.columns.filter(t=>t.hasMoneyFormat&&!!this.data.find(e=>!!e[t.field]||0===e[t.field])).forEach(t=>{const e=this.data.reduce((e,n)=>+n[t.field]+e,0);this.totals.push({field:t.field,label:t.name,value:e,format:"amt2",visible:t.data&&t.data.isTotal})}),this.sub=this.translate.get(a+"table.total.count").subscribe(t=>{this.totals.push({field:"count",label:t,value:this.table.getCount(),format:"cnt",visible:!0})})}mapColLabelFormat(t){let e={days:Tt.d.Integer,Zero_Thirty:Tt.d.Money2,Thirty_Sixty:Tt.d.Money2,Sixty_Ninety:Tt.d.Money2,Ninety_Plus:Tt.d.Money2,Total:Tt.d.Money2}[t];return e||-1===(-1!==t.toLowerCase().indexOf("amount")||t.toLowerCase().indexOf("amt"))||(e=Tt.d.Money2),e||Tt.d.Default}mapColFilter(t){let e={days:Tt.c.NumberRange,VehYear:Tt.c.NumberRange,VehMake:Tt.c.MultiChoice,VehModel:Tt.c.MultiChoice,FIStatus:Tt.c.MultiChoice,controlAge:Tt.c.DateRange}[t];return e||-1===t.toLowerCase().indexOf("amount")||(e=Tt.c.NumberRange),e||Tt.c.String}mapColCellRenderer(t){return{control1:t=>{const e=this.document.createElement("span");return e.innerText=t.valueFormatted,e.className="link",e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.showDetailsModal(t)}),e},ACCT:t=>{if(this.isGlAcctDrilldown=!0,t.value){const e=this.document.createElement("span");return e.innerText=t.valueFormatted,e.className="link",e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.showDetailsModal(t,"ACCT")}),e}},days:t=>{const e=this.document.createElement("span");return e.innerText=t.valueFormatted,e.className=this.getDaysClassName(+t.value),e},comment_count:t=>{const e=this.document.createElement("span");return e.innerText=t.valueFormatted,e.className="ag-comments-trigger",e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.commentNode=t.node,this.commentSubType=t.data.comment_key,this.commentTitles=t.columnApi.getAllDisplayedColumns().filter(t=>-1===t.getColId().indexOf("comment_")).map(e=>({label:e.getColDef().headerName,value:e.getColDef().valueFormatter(t),data:"days"===e.getColId()&&{indicator:this.getDaysClassName(+t.data.days)}})),this.isCommentsView=!0,this.hostClass="host-new"}),e}}[t]}mapColAlign(t){return{comment_count:Tt.b.Right}[t]||Tt.b.Left}showDetailsModal(t,e){const n="ACCT"===e?t.value:t.data.control1,l=t.data.VehSerialN;if(!n)return;this.detailsData=null,this.detailsTotals=[],this.detailsLoading=!0,this.selectedControl=n,this.detailsModal.showModal();const o=["drill.modal.grid.column.gl-acc","drill.modal.grid.column.gl-date","drill.modal.grid.column.description","drill.modal.grid.column.post-amount","drill.modal.grid.column.jrn-id","drill.modal.grid.column.sched-no","drill.modal.grid.column.ref-id","drill.modal.grid.column.control2","drill.modal.footer.total.count"].map(t=>a+t);this.sub=this.translate.get(o).pipe(Object(K.a)(this.filterData.value$)).subscribe(([a,{report:i,store:r}])=>{const s={d:Tt.d.Date,PostAmount:Tt.d.Money2},d={d:Tt.c.DateRange,PostAmount:Tt.c.NumberRange};this.detailsColumns=["GLAcct","d","a","PostAmount","JournalID","ScheduleNumbers","b","Control2"].map((t,e)=>new Tt.a({field:t,name:a[o[e]],labelFormat:s[t]||Tt.d.Default,filter:d[t]||Tt.c.String,align:Tt.b.Right})),this.detailsTotalsFields=this.detailsColumns.filter(t=>t.hasNumericFormat).map(t=>t.field),"ACCT"===e?this.dataApi.getAcctdetailsbycontrol({report:i,store:t.data.storeid,glAcct:this.selectedControl}).subscribe(({data:t})=>{this.prepareDrillDetails(a,t)}):this.dataApi.getDetailsByControl({report:i,store:r,control:n,serial:l}).subscribe(({data:t})=>{this.prepareDrillDetails(a,t)})})}prepareDrillDetails(t,e){this.detailsData=e,this.detailsLoading=!1;const n=e.reduce((t,e)=>t+ +e.PostAmount,0);this.detailsTotals=[{label:t[a+"drill.modal.grid.column.post-amount"],value:n,format:"amt2"},{label:t[a+"drill.modal.footer.total.count"],value:e.length,format:"cnt"}]}initGridOptions(){this.gridOptions={}}getDaysClassName(t){let e="";switch(!0){case t<=30:e="greens";break;case t>=31&&t<=60:e="green-light";break;case t>=61&&t<=90:e="yellows";break;case t>=91&&t<=120:e="reds";break;case t>=121&&t<=150:e="strong-red";break;case t>=151:e="deep-red";break;default:e="greens"}return e}}var Yt=n("iInd"),Qt=n("XpwZ"),te=n("yK5/"),ee=l["\u0275crt"]({encapsulation:0,styles:[[".grid-wrapper[_ngcontent-%COMP%]{width:100%;flex:1 1 100%;height:100%;max-width:100%;background-color:#fff;box-shadow:2px 2px 5px 1px #c1bebe}.top-controls-block[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:space-between}.top-controls-block-left[_ngcontent-%COMP%]{width:calc(100% - 160px);flex:1 1 calc(100% - 160px);padding:20px 20px 10px;display:flex;align-items:center}.top-controls-block-right[_ngcontent-%COMP%]{width:160px;flex:1 0 160px;padding:20px 20px 10px;display:flex;align-items:center;justify-content:flex-end}.top-controls-block-heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#404040;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.filters-block[_ngcontent-%COMP%]{height:70px;padding:10px 20px 20px}.grid-block[_ngcontent-%COMP%]{display:flex}.grid-block-content[_ngcontent-%COMP%]{width:calc(100% - 40px);flex:1 0 calc(100% - 40px);position:relative}.grid-block-content[_ngcontent-%COMP%]   app-default-grid[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;will-change:auto;transition:all .5s ease;transform:translate3d(0,0,0)}.grid-block-sidebar[_ngcontent-%COMP%]{width:40px;flex:0 0 40px;border-left:1px solid #ddd}.grid-block-more-info-trigger[_ngcontent-%COMP%]{display:block;height:60px;cursor:pointer;position:relative}.grid-block-more-info-trigger[_ngcontent-%COMP%]:before{content:'\\E5D4';font-family:\"Material Icons\";font-size:24px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.grid-block-more-info-trigger.opened[_ngcontent-%COMP%]:before{content:'\\E5D3'}.top-control-btn[_ngcontent-%COMP%]{color:#5b5b5b;cursor:pointer;margin-left:20px;margin-top:-2px;display:inline-block}.top-control-label[_ngcontent-%COMP%]{color:#747474;font-size:14px;margin-left:10px}.mat-checked[_ngcontent-%COMP%]   .top-control-label[_ngcontent-%COMP%]{color:#2196f3}.tabs-block[_ngcontent-%COMP%]{height:60px;padding:10px 20px 16px}.tab[_ngcontent-%COMP%]{display:inline-block;height:34px;line-height:34px;border-radius:17px;padding-left:15px;padding-right:15px;color:#404040;font-size:14px;font-weight:500;background-color:#e5e5e5;cursor:pointer}.tab.active[_ngcontent-%COMP%], .tab[_ngcontent-%COMP%]:hover{color:#3498db;background-color:#e2eff8}.tab[_ngcontent-%COMP%]:not(:last-child){margin-right:15px}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 0 10px;height:45px}.modal-header-right[_ngcontent-%COMP%]   .top-control-btn[_ngcontent-%COMP%]:last-child{margin-right:-4px}.modal-header.with-outer-padding-overwrite[_ngcontent-%COMP%]{margin-top:-19px;margin-left:-19px;margin-right:-19px;padding:10px 20px}.modal-header.with-padding[_ngcontent-%COMP%]{padding:10px 20px}.modal-body[_ngcontent-%COMP%]{height:calc(100% - 45px);position:relative}.modal-body.with-footer[_ngcontent-%COMP%]{height:calc(100% - 45px - 50px)}.modal-body.full-height[_ngcontent-%COMP%]{height:100%}.modal-body.with-min-size[_ngcontent-%COMP%]{min-width:850px;min-height:300px;margin-left:-19px;margin-right:-19px}.modal-body.with-outer-padding-overwrite[_ngcontent-%COMP%]{margin-left:-19px;margin-right:-19px;margin-bottom:-19px}.modal-body[_ngcontent-%COMP%]   app-default-grid[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0}.modal-footer[_ngcontent-%COMP%]{height:50px;display:flex;align-items:center;justify-content:flex-end;background:#eee;margin:0 -19px -19px;padding:0 19px}.modal-footer-text[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#404040;padding-right:15px}.modal-footer-text.last[_ngcontent-%COMP%]{padding-left:15px;padding-right:0}.modal-footer-text.last[_ngcontent-%COMP%]:before{content:'|';position:relative;left:-13px}.modal-heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.fi-list[_ngcontent-%COMP%]{display:flex;margin:25px 0;padding:15px 0;border-bottom:1px solid #ddd}.fi-list.single[_ngcontent-%COMP%]{padding:5px 0;margin:0;border-bottom:0}.fi-list-item[_ngcontent-%COMP%]{width:33%;flex:0 0 33%;padding:0 5px}.single[_ngcontent-%COMP%]   .fi-list-item[_ngcontent-%COMP%]:nth-of-type(1){padding-left:0}.single[_ngcontent-%COMP%]   .fi-list-item[_ngcontent-%COMP%]:nth-of-type(3){padding-right:0}.penetration-list.horizontal[_ngcontent-%COMP%]{display:flex;align-items:center}.penetration-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin:25px 0;padding:15px 0 30px;border-bottom:1px solid #ddd}.horizontal[_ngcontent-%COMP%]   .penetration-item[_ngcontent-%COMP%]{width:50%;flex:0 0 50%;padding:10px 15px 10px 0;margin:0;border-bottom:none}.penetration-title[_ngcontent-%COMP%]{width:30%;flex:0 0 30%;font-size:14px;color:#404040;padding-right:5px;overflow:hidden;text-overflow:ellipsis}.penetration-graph[_ngcontent-%COMP%]{width:50%;flex:0 0 50%;padding:0 5px}.penetration-rank[_ngcontent-%COMP%]{width:20%;flex:0 0 20%;padding:0 5px;text-align:center}.chargeback[_ngcontent-%COMP%]{text-align:center;margin:50px 0 30px}.chargeback[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{margin:0 0 5px;font-size:20px;font-weight:600}.chargeback-value[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#404040}.control-btn-settings[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;position:relative;cursor:pointer}.control-btn-settings[_ngcontent-%COMP%]:before{content:'\\e8b8';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#5b5b5b;font-size:24px;font-family:\"Material Icons\"}.drill-info[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;list-style:none;padding:0;margin:0}.drill-info-item[_ngcontent-%COMP%]{color:#404040;font-size:14px;margin-right:25px}.drill-info-label[_ngcontent-%COMP%]{font-weight:400}.drill-info-value[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]{display:flex;height:100%;background-color:#fff}.host-new[_nghost-%COMP%]{flex:0 0 calc(100% - 450px)!important;width:calc(100% - 450px)!important}.host-old[_nghost-%COMP%]{flex:0 0 100%!important;width:100%!important}[_nghost-%COMP%]     .ag-theme-material .link{text-decoration:underline}[_nghost-%COMP%]     .ag-theme-material span.ag-group-contracted{flex:0 0 20px;margin-right:4px}[_nghost-%COMP%]     .ag-theme-material .blue, [_nghost-%COMP%]     .ag-theme-material .blue-light, [_nghost-%COMP%]     .ag-theme-material .deep-red, [_nghost-%COMP%]     .ag-theme-material .green, [_nghost-%COMP%]     .ag-theme-material .green-light, [_nghost-%COMP%]     .ag-theme-material .greens, [_nghost-%COMP%]     .ag-theme-material .orange, [_nghost-%COMP%]     .ag-theme-material .red, [_nghost-%COMP%]     .ag-theme-material .reds, [_nghost-%COMP%]     .ag-theme-material .strong-red, [_nghost-%COMP%]     .ag-theme-material .yellows{position:relative;padding-right:15px}[_nghost-%COMP%]     .ag-theme-material .blue-light:before, [_nghost-%COMP%]     .ag-theme-material .blue:before, [_nghost-%COMP%]     .ag-theme-material .deep-red:before, [_nghost-%COMP%]     .ag-theme-material .green-light:before, [_nghost-%COMP%]     .ag-theme-material .green:before, [_nghost-%COMP%]     .ag-theme-material .greens:before, [_nghost-%COMP%]     .ag-theme-material .orange:before, [_nghost-%COMP%]     .ag-theme-material .red:before, [_nghost-%COMP%]     .ag-theme-material .reds:before, [_nghost-%COMP%]     .ag-theme-material .strong-red:before, [_nghost-%COMP%]     .ag-theme-material .yellows:before{content:'';display:block;width:12px;height:12px;border-radius:50%;position:absolute;top:50%;right:0;transform:translateY(-50%)}[_nghost-%COMP%]     .ag-theme-material .yellows:before{background-color:#f0b213}[_nghost-%COMP%]     .ag-theme-material .orange:before{background-color:#e9910b}[_nghost-%COMP%]     .ag-theme-material .red:before{background-color:#d74901}[_nghost-%COMP%]     .ag-theme-material .green:before{background-color:#1e8700}[_nghost-%COMP%]     .ag-theme-material .green-light:before{background-color:#8aa309}[_nghost-%COMP%]     .ag-theme-material .reds:before{background-color:#d74901}[_nghost-%COMP%]     .ag-theme-material .greens:before{background-color:#1d8700}[_nghost-%COMP%]     .ag-theme-material .blue-light:before{background-color:#44b4d4}[_nghost-%COMP%]     .ag-theme-material .blue:before{background-color:#00458f}[_nghost-%COMP%]     .ag-theme-material .strong-red:before{background-color:#c00}[_nghost-%COMP%]     .ag-theme-material .deep-red:before{background-color:#830000}.grid-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100% - 60px);position:relative}.grid-block[_ngcontent-%COMP%]   app-default-grid[_ngcontent-%COMP%]{will-change:auto;transition:all .5s ease;transform:translate3d(0,0,0);flex:1 1 auto;overflow:hidden}.top-controls-block-right[_ngcontent-%COMP%]{align-items:flex-start}app-export-buttons[_ngcontent-%COMP%]{margin-right:20px}"]],data:{}});function ne(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,16777216,null,null,2,"button",[["class","control-btn-settings"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(t,e,n){var a=!0,o=t.component;return"longpress"===e&&(a=!1!==l["\u0275nov"](t,1).show()&&a),"keydown"===e&&(a=!1!==l["\u0275nov"](t,1)._handleKeydown(n)&&a),"touchend"===e&&(a=!1!==l["\u0275nov"](t,1)._handleTouchend()&&a),"click"===e&&(a=!1!==o.showSetupModal()&&a),a}),null,null)),l["\u0275did"](1,212992,null,0,C.d,[x.c,l.ElementRef,v.e,l.ViewContainerRef,l.NgZone,M.a,y.c,y.h,C.b,[2,O.b],[2,C.a],[2,_.f]],{message:[0,"message"]},null),l["\u0275pid"](131072,w.i,[w.j,l.ChangeDetectorRef]),(t()(),l["\u0275and"](0,null,null,0))],(function(t,e){var n=e.component;t(e,1,0,l["\u0275unv"](e,1,0,l["\u0275nov"](e,2).transform(n.i18n+"schedule-setup.button.tooltip")))}),null)}function le(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"app-bottom-bar",[],[[2,"opened",null]],[[null,"chartClick"],[null,"editTotalFields"]],(function(t,e,n){var l=!0,a=t.component;return"chartClick"===e&&(l=!1!==a.filterTable(n.filter)&&l),"editTotalFields"===e&&(l=!1!==a.openEditTotalFieldsModal()&&l),l}),dt,nt)),l["\u0275did"](1,245760,null,0,B,[w.j,z.a,et],{totals:[0,"totals"]},{chartClick:"chartClick",editTotalFields:"editTotalFields"})],(function(t,e){t(e,1,0,e.component.totals)}),(function(t,e){t(e,0,0,l["\u0275nov"](e,1).isOpened)}))}function ae(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"app-comments",[],[[8,"className",0]],[[null,"commentsClose"],[null,"commentsChange"]],(function(t,e,n){var l=!0,a=t.component;return"commentsClose"===e&&(l=!1!==a.onCloseComments()&&l),"commentsChange"===e&&(l=!1!==a.onCommentsChange(n)&&l),l}),ct.b,ct.a)),l["\u0275did"](1,4964352,null,0,ut.a,[pt.a,gt.a,ht.a,l.ChangeDetectorRef,L.b],{type:[0,"type"],subType:[1,"subType"],titles:[2,"titles"]},{commentsClose:"commentsClose",commentsChange:"commentsChange"})],(function(t,e){var n=e.component;t(e,1,0,n.commentType,n.commentSubType,n.commentTitles)}),(function(t,e){t(e,0,0,l["\u0275nov"](e,1).hostClass)}))}function oe(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"span",[["class","modal-footer-text"]],[[2,"last",null]],null,null,null,null)),(t()(),l["\u0275ted"](1,null,[" ",": "," "])),l["\u0275ppd"](2,2)],null,(function(t,e){t(e,0,0,e.context.last);var n=e.context.$implicit.label,a=l["\u0275unv"](e,1,1,t(e,2,0,l["\u0275nov"](e.parent,0),e.context.$implicit.value,e.context.$implicit.format));t(e,1,0,n,a)}))}function ie(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"app-schedule-setup",[],null,null,null,$t,Et)),l["\u0275did"](1,245760,null,0,Ft,[P.d,w.j,vt.a,St.a,z.a,Dt.a,At.a],{store:[0,"store"],report:[1,"report"]},null)],(function(t,e){var n=e.component;t(e,1,0,n.store,n.report)}),null)}function re(t){return l["\u0275vid"](0,[l["\u0275pid"](0,N.a,[I.a,L.b]),l["\u0275qud"](402653184,1,{table:0}),l["\u0275qud"](402653184,2,{setupModal:0}),l["\u0275qud"](402653184,3,{editTotalFieldsModal:0}),l["\u0275qud"](402653184,4,{detailsModal:0}),l["\u0275qud"](402653184,5,{detailsGrid:0}),(t()(),l["\u0275eld"](6,0,null,null,17,"div",[["class","grid-wrapper"]],null,null,null,null,null)),(t()(),l["\u0275eld"](7,0,null,null,9,"div",[["class","top-controls-block"]],null,null,null,null,null)),(t()(),l["\u0275eld"](8,0,null,null,2,"div",[["class","top-controls-block-left"]],null,null,null,null,null)),(t()(),l["\u0275eld"](9,0,null,null,1,"h3",[["class","top-controls-block-heading"]],null,null,null,null,null)),(t()(),l["\u0275ted"](10,null,["",""])),(t()(),l["\u0275eld"](11,0,null,null,5,"div",[["class","top-controls-block-right"]],null,null,null,null,null)),(t()(),l["\u0275eld"](12,0,null,null,2,"app-export-buttons",[],[[2,"small",null]],[[null,"dataExport"]],(function(t,e,n){var l=!0;return"dataExport"===e&&(l=!1!==t.component.exportDataAs(n)&&l),l}),Vt.b,Vt.a)),l["\u0275did"](13,114688,null,0,Bt.a,[Dt.a],{disabled:[0,"disabled"]},{dataExport:"dataExport"}),l["\u0275pid"](131072,P.b,[l.ChangeDetectorRef]),(t()(),l["\u0275and"](16777216,null,null,1,null,ne)),l["\u0275did"](16,16384,null,0,P.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275eld"](17,0,null,null,6,"div",[["class","grid-block"]],null,null,null,null,null)),(t()(),l["\u0275eld"](18,0,null,null,3,"app-default-grid",[],null,[[null,"onTrackChanges"],[null,"filterChanged"]],(function(t,e,n){var l=!0,a=t.component;return"onTrackChanges"===e&&(l=!1!==a.onTrackTableChanges()&&l),"filterChanged"===e&&(l=!1!==a.onFilterChanged()&&l),l}),bt.b,bt.a)),l["\u0275prd"](512,null,Ct.a,Ct.a,[xt.a,vt.a,Mt.a,w.j,yt.a]),l["\u0275did"](20,4964352,[[1,4],["table",4]],0,Ot.a,[I.a,Ct.a,_t.a,wt.a,Pt.a,L.b,Dt.a],{data:[0,"data"],columns:[1,"columns"],customGridOptions:[2,"customGridOptions"],loading:[3,"loading"],pagination:[4,"pagination"]},{onTrackChanges:"onTrackChanges",filterChanged:"filterChanged"}),l["\u0275pid"](131072,P.b,[l.ChangeDetectorRef]),(t()(),l["\u0275and"](16777216,null,null,1,null,le)),l["\u0275did"](23,16384,null,0,P.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,ae)),l["\u0275did"](25,16384,null,0,P.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275eld"](26,0,null,null,19,"app-modal",[["class","modal-generic"]],null,null,null,zt.b,zt.a)),l["\u0275prd"](512,null,qt.a,qt.a,[L.b]),l["\u0275did"](28,1228800,[[4,4],["detailsModal",4]],0,Zt.a,[qt.a,P.d,l.ElementRef,l.Renderer2,L.b],{modalTitle:[0,"modalTitle"]},null),l["\u0275pid"](131072,w.i,[w.j,l.ChangeDetectorRef]),(t()(),l["\u0275eld"](30,0,null,0,8,"div",[["class","modal-header"]],null,null,null,null,null)),(t()(),l["\u0275eld"](31,0,null,null,4,"div",[["class","modal-header-left"]],null,null,null,null,null)),(t()(),l["\u0275eld"](32,0,null,null,3,"h2",[["class","modal-heading"]],null,null,null,null,null)),(t()(),l["\u0275ted"](33,null,["",": ",""])),l["\u0275pid"](131072,w.i,[w.j,l.ChangeDetectorRef]),l["\u0275pid"](131072,w.i,[w.j,l.ChangeDetectorRef]),(t()(),l["\u0275eld"](36,0,null,null,2,"div",[["class","modal-header-right"]],null,null,null,null,null)),(t()(),l["\u0275eld"](37,0,null,null,1,"app-export-buttons",[],[[2,"small",null]],[[null,"dataExport"]],(function(t,e,n){var l=!0;return"dataExport"===e&&(l=!1!==t.component.exportDetailsDataAs(n)&&l),l}),Vt.b,Vt.a)),l["\u0275did"](38,114688,null,0,Bt.a,[Dt.a],null,{dataExport:"dataExport"}),(t()(),l["\u0275eld"](39,0,null,0,3,"div",[["class","modal-body with-footer with-min-size"]],null,null,null,null,null)),(t()(),l["\u0275eld"](40,0,null,null,2,"app-default-grid",[["style","height: 100%; width: 100%;"]],null,null,null,bt.b,bt.a)),l["\u0275prd"](512,null,Ct.a,Ct.a,[xt.a,vt.a,Mt.a,w.j,yt.a]),l["\u0275did"](42,4964352,[[5,4],["detailsGrid",4]],0,Ot.a,[I.a,Ct.a,_t.a,wt.a,Pt.a,L.b,Dt.a],{data:[0,"data"],columns:[1,"columns"],summaryFields:[2,"summaryFields"],customGridOptions:[3,"customGridOptions"],loading:[4,"loading"]},null),(t()(),l["\u0275eld"](43,0,null,0,2,"div",[["class","modal-footer"]],null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,oe)),l["\u0275did"](45,278528,null,0,P.m,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),l["\u0275eld"](46,0,null,null,5,"app-modal",[["class","modal-generic"]],null,null,null,zt.b,zt.a)),l["\u0275prd"](512,null,qt.a,qt.a,[L.b]),l["\u0275did"](48,1228800,[[2,4],["setupModal",4]],0,Zt.a,[qt.a,P.d,l.ElementRef,l.Renderer2,L.b],{modalTitle:[0,"modalTitle"]},null),l["\u0275pid"](131072,w.i,[w.j,l.ChangeDetectorRef]),(t()(),l["\u0275and"](16777216,null,0,1,null,ie)),l["\u0275did"](51,16384,null,0,P.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275eld"](52,0,null,null,5,"app-modal",[["class","modal-budget-form"]],null,null,null,zt.b,zt.a)),l["\u0275prd"](512,null,qt.a,qt.a,[L.b]),l["\u0275did"](54,1228800,[[3,4],["editTotalFieldsModal",4]],0,Zt.a,[qt.a,P.d,l.ElementRef,l.Renderer2,L.b],{modalTitle:[0,"modalTitle"]},null),l["\u0275pid"](131072,w.i,[w.j,l.ChangeDetectorRef]),(t()(),l["\u0275eld"](56,0,null,0,1,"app-edit-total-fields",[],null,[[null,"save"],[null,"cancel"]],(function(t,e,n){var l=!0,a=t.component;return"save"===e&&(l=!1!==a.saveTotalFields(n)&&l),"cancel"===e&&(l=!1!==a.closeEditTotalFieldsModal()&&l),l}),b.c,b.b)),l["\u0275did"](57,638976,null,0,Wt.a,[],{report:[0,"report"],data:[1,"data"]},{save:"save",cancel:"cancel"})],(function(t,e){var n=e.component;t(e,13,0,l["\u0275unv"](e,13,0,l["\u0275nov"](e,14).transform(n.loading$))),t(e,16,0,!n.isGLAcctActive),t(e,20,0,n.data,n.columns,n.gridOptions,l["\u0275unv"](e,20,3,l["\u0275nov"](e,21).transform(n.loading$)),n.allowPagination),t(e,23,0,!n.isGLAcctActive&&!n.isAgeActive),t(e,25,0,n.isCommentsView),t(e,28,0,l["\u0275unv"](e,28,0,l["\u0275nov"](e,29).transform(n.i18n+"drill.modal.title"))+(null==n.store?null:n.store.label)),t(e,38,0),t(e,42,0,n.detailsData,n.detailsColumns,n.detailsTotalsFields,n.gridOptions,n.detailsLoading),t(e,45,0,n.detailsTotals),t(e,48,0,l["\u0275unv"](e,48,0,l["\u0275nov"](e,49).transform(n.i18n+"schedule-setup.modal.title"))),t(e,51,0,l["\u0275nov"](e,48).displayed),t(e,54,0,l["\u0275unv"](e,54,0,l["\u0275nov"](e,55).transform(n.i18n+"edit-total-fields.modal.title"))),t(e,57,0,null==n.report?null:n.report.label,n.totals)}),(function(t,e){var n=e.component;t(e,10,0,n.isGLAcctActive?null==n.report?null:n.report.label:null==n.store?null:n.store.label),t(e,12,0,l["\u0275nov"](e,13).small),t(e,33,0,l["\u0275unv"](e,33,0,n.isGlAcctDrilldown?l["\u0275nov"](e,34).transform(n.i18n+"drill.modal.GlAccount-label"):l["\u0275nov"](e,35).transform(n.i18n+"drill.modal.control-label")),n.selectedControl),t(e,37,0,l["\u0275nov"](e,38).small)}))}function se(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],[[8,"className",0]],null,null,re,ee)),l["\u0275did"](1,245760,null,0,Jt,[P.d,Yt.a,w.j,vt.a,Mt.a,z.a,St.a,et,Qt.a,te.a],null,null)],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,l["\u0275nov"](e,1).hostClass)}))}var de=l["\u0275ccf"]("ng-component",Jt,se,{},{},[]),ce=n("POq0"),ue=n("s6ns"),pe=n("821u"),ge=n("IheW"),he=n("5cj1"),me=n("gavF"),fe=n("Mc5n"),be=n("zMNK"),Ce=n("l0Bn"),xe=n("kPC6"),ve=n("SXLW"),Me=n("tdaM"),ye=n("0sx3"),Oe=n("81ID"),_e=n("oiVm"),we=n("xSwO"),Pe=n("t5D1"),De=n("iTUp"),ke=n("FFHx"),Te=n("PyFA"),Re=n("aBBA"),Fe=n("Cr+6"),Se=n("pBi1"),Ae=n("CSbZ"),Ee=n("/Lwf"),Ne=n("yotz"),Ie=n("T3zS");n.d(e,"ByStoreModuleNgFactory",(function(){return Le}));var Le=l["\u0275cmf"](o,[],(function(t){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[i.a,r.a,s.a,d.b,d.a,c.a,u.a,p.a,g.a,h.a,m.a,f.b,b.a,de]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](4608,P.p,P.o,[l.LOCALE_ID,[2,P.G]]),l["\u0275mpd"](4608,F.F,F.F,[]),l["\u0275mpd"](4608,ce.c,ce.c,[]),l["\u0275mpd"](4608,x.c,x.c,[x.i,x.e,l.ComponentFactoryResolver,x.h,x.f,l.Injector,l.NgZone,P.d,O.b,[2,P.i]]),l["\u0275mpd"](5120,x.j,x.k,[x.c]),l["\u0275mpd"](5120,R.a,R.b,[x.c]),l["\u0275mpd"](5120,C.b,C.c,[x.c]),l["\u0275mpd"](4608,_.e,k.c,[[2,k.g],[2,k.l]]),l["\u0275mpd"](5120,ue.c,ue.d,[x.c]),l["\u0275mpd"](135680,ue.e,ue.e,[x.c,l.Injector,[2,P.i],[2,ue.b],ue.c,[3,ue.e],x.e]),l["\u0275mpd"](4608,pe.i,pe.i,[]),l["\u0275mpd"](5120,pe.a,pe.b,[x.c]),l["\u0275mpd"](4608,k.a,k.v,[[2,k.f],M.a]),l["\u0275mpd"](4608,ge.k,ge.q,[P.d,l.PLATFORM_ID,ge.o]),l["\u0275mpd"](4608,ge.r,ge.r,[ge.k,ge.p]),l["\u0275mpd"](5120,ge.a,(function(t){return[t]}),[ge.r]),l["\u0275mpd"](4608,ge.n,ge.n,[]),l["\u0275mpd"](6144,ge.l,null,[ge.n]),l["\u0275mpd"](4608,ge.j,ge.j,[ge.l]),l["\u0275mpd"](6144,ge.b,null,[ge.j]),l["\u0275mpd"](4608,ge.f,ge.m,[ge.b,l.Injector]),l["\u0275mpd"](4608,ge.c,ge.c,[ge.f]),l["\u0275mpd"](4608,_t.a,_t.a,[L.b]),l["\u0275mpd"](4608,F.f,F.f,[]),l["\u0275mpd"](4608,he.c,he.c,[ge.c,_.b]),l["\u0275mpd"](5120,me.c,me.j,[x.c]),l["\u0275mpd"](4608,At.a,At.a,[ue.e]),l["\u0275mpd"](4608,he.d,he.d,[]),l["\u0275mpd"](4608,fe.f,fe.f,[P.d,l.NgZone,v.i,fe.h]),l["\u0275mpd"](4608,et,et,[z.a,St.a,w.j,I.a]),l["\u0275mpd"](1073742336,P.c,P.c,[]),l["\u0275mpd"](1073742336,F.E,F.E,[]),l["\u0275mpd"](1073742336,F.m,F.m,[]),l["\u0275mpd"](1073742336,Yt.s,Yt.s,[[2,Yt.x],[2,Yt.o]]),l["\u0275mpd"](1073742336,w.g,w.g,[]),l["\u0275mpd"](1073742336,ce.d,ce.d,[]),l["\u0275mpd"](1073742336,S.e,S.e,[]),l["\u0275mpd"](1073742336,O.a,O.a,[]),l["\u0275mpd"](1073742336,be.g,be.g,[]),l["\u0275mpd"](1073742336,M.b,M.b,[]),l["\u0275mpd"](1073742336,v.f,v.f,[]),l["\u0275mpd"](1073742336,x.g,x.g,[]),l["\u0275mpd"](1073742336,k.l,k.l,[[2,k.d],[2,_.f]]),l["\u0275mpd"](1073742336,k.u,k.u,[]),l["\u0275mpd"](1073742336,k.s,k.s,[]),l["\u0275mpd"](1073742336,k.q,k.q,[]),l["\u0275mpd"](1073742336,R.d,R.d,[]),l["\u0275mpd"](1073742336,y.a,y.a,[]),l["\u0275mpd"](1073742336,C.e,C.e,[]),l["\u0275mpd"](1073742336,ft.c,ft.c,[]),l["\u0275mpd"](1073742336,ue.k,ue.k,[]),l["\u0275mpd"](1073742336,pe.j,pe.j,[]),l["\u0275mpd"](1073742336,k.w,k.w,[]),l["\u0275mpd"](1073742336,k.n,k.n,[]),l["\u0275mpd"](1073742336,ge.e,ge.e,[]),l["\u0275mpd"](1073742336,ge.d,ge.d,[]),l["\u0275mpd"](1073742336,Ce.a,Ce.a,[]),l["\u0275mpd"](1073742336,xe.a,xe.a,[]),l["\u0275mpd"](1073742336,ve.AgGridModule,ve.AgGridModule,[]),l["\u0275mpd"](1073742336,Me.a,Me.a,[]),l["\u0275mpd"](1073742336,ye.a,ye.a,[]),l["\u0275mpd"](1073742336,F.A,F.A,[]),l["\u0275mpd"](1073742336,he.b,he.b,[]),l["\u0275mpd"](1073742336,me.i,me.i,[]),l["\u0275mpd"](1073742336,me.f,me.f,[]),l["\u0275mpd"](1073742336,Oe.a,Oe.a,[]),l["\u0275mpd"](1073742336,_e.a,_e.a,[]),l["\u0275mpd"](1073742336,we.a,we.a,[]),l["\u0275mpd"](1073742336,Pe.a,Pe.a,[]),l["\u0275mpd"](1073742336,De.a,De.a,[]),l["\u0275mpd"](1073742336,ke.a,ke.a,[]),l["\u0275mpd"](1073742336,Te.a,Te.a,[[3,Te.a],Re.a]),l["\u0275mpd"](1073742336,Fe.a,Fe.a,[]),l["\u0275mpd"](1073742336,Se.d,Se.d,[]),l["\u0275mpd"](1073742336,Se.c,Se.c,[]),l["\u0275mpd"](1073742336,Ae.a,Ae.a,[Re.a]),l["\u0275mpd"](1073742336,fe.g,fe.g,[]),l["\u0275mpd"](1073742336,Ee.a,Ee.a,[]),l["\u0275mpd"](1073742336,Ne.b,Ne.b,[]),l["\u0275mpd"](1073742336,Ie.a,Ie.a,[]),l["\u0275mpd"](1073742336,o,o,[Re.a]),l["\u0275mpd"](256,k.e,k.i,[]),l["\u0275mpd"](256,ge.o,"XSRF-TOKEN",[]),l["\u0275mpd"](256,ge.p,"X-XSRF-TOKEN",[]),l["\u0275mpd"](1024,Yt.m,(function(){return[[{path:"",component:Jt}]]}),[])])}))}}]);