"use strict";(self.webpackChunkteck=self.webpackChunkteck||[]).push([[577],{53577:function(La,Ye,d){d.r(Ye),d.d(Ye,{SiteDashboardModule:function(){return Pa}});var p=d(43144),h=d(15671),y=d(69808),Xt=d(42155),w=d(77093),q=d(93075),be=d(85899),_e=d(67322),He=d(74107),en=d(47423),Ce=d(34594),Ve=d(9224),tn=d(77531),K=d(48966),nn=d(86856),on=d(53170),Oe=d(90508),Ue=d(77446),an=d(92181),rn=d(14623),We=d(29772),cn=d(88279),sn=d(84847),ln=d(86087),V=d(42585),X=d(23178),dn=d(66270),gn=d(73885),m=d(46940),un=d(32807),fn=d(70167),pn=d(4806),hn=d(1302),vn=d(16410),mn=d(89936),je=d(31497),ie=d(18776),ee=d(4199),x=d(60136),I=d(57777),bn=(0,p.Z)(function n(){(0,h.Z)(this,n)}),S=d(57676),E=d(21347),k=d(24850),e=d(65542),R=d(40520),_n=S.mb.siteDashboardEquipmentFilter,Je=function(){var n=function(c){(0,x.Z)(t,c);var o=(0,I.Z)(t);function t(a){var i;return(0,h.Z)(this,t),(i=o.call(this)).httpClient=a,i}return(0,p.Z)(t,[{key:"load",value:function(){var i=this;return this.httpClient.get((0,S.FP)(E.q.CDA,_n)).pipe((0,k.U)(function(r){return i.adaptResponse(r)}))}},{key:"adaptResponse",value:function(i){var r;return(null===(r=i.equipment)||void 0===r?void 0:r.map(function(s){return{name:s,id:s,selected:!0}}))||[]}}]),t}(bn);return n.\u0275fac=function(o){return new(o||n)(e.LFG(R.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),v=d(4942),_=d(94720),ze=function(){var n=function(){function c(o,t){(0,h.Z)(this,c),this.injector=o,this.mineStateService=t,this.serviceMap=(0,v.Z)({},E.q.CDA,Je)}return(0,p.Z)(c,[{key:"loadEquipment",value:function(){var t=this.mineStateService.getSelectedMineArea();return this.injector.get(this.serviceMap[t]).load()}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(e.zs3),e.LFG(_.Hj))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Cn=[Je,ze],Qe=function(){var n=function(){function c(o,t){(0,h.Z)(this,c),this.httpClient=o,this.mineStateService=t}return(0,p.Z)(c,[{key:"load",value:function(){return this.httpClient.get((0,S.FP)(this.mineStateService.getSelectedMineArea(),"mining-area-tree"),{params:{blastsOnly:!0}}).pipe((0,k.U)(function(t){return t.treeData}))}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(R.eN),e.LFG(_.Hj))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),$e=function(){var n=function(){function c(o,t){(0,h.Z)(this,c),this.equipmentLoadingService=o,this.blastService=t}return(0,p.Z)(c,[{key:"getFiltersOptions",value:function(t){return{equipment:t.equipment?this.equipmentLoadingService.loadEquipment():null,blasts:t.blasts?this.blastService.load():null}}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(ze),e.LFG(Qe))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),ae=d(89062),qe=function(){var n=function(){function c(o){(0,h.Z)(this,c),this.mineStateService=o,this.filtersVisibility={equipment:[E.q.CDA],blasts:[E.q.CDA]}}return(0,p.Z)(c,[{key:"getVisibility",value:function(){var t=this.mineStateService.getSelectedMineArea();return{equipment:this.filtersVisibility.equipment.includes(t),blasts:this.filtersVisibility.blasts.includes(t)}}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(_.Hj))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),On=[].concat((0,ae.Z)(Cn),[$e,qe]),Y=d(30325),Sn=d(33816),Pn=d.n(Sn),re=d(92198),D=d(7625),j=d(87545),ce=d(19855),B=d(35442),Se=d(89255),P=function(){return(n=P||(P={})).BLAST_COST_PER_PATTERN="blastCostPerPattern",n.BLAST_COST_OVER_TIME="blastCostOverTime",n.SHOVEL_OPERATOR_FEEDBACKS="shovelOperatorFeedbacks",n.SHOVEL_OPERATOR_ALARMS="shovelOperatorAlarms",n.POWDER_FACTOR_VS_BLASTABILITY="powderFactorVsBlastability",n.LOADING_TIME="loadingTimePerPattern",n.PREDICTIONS_TRACKING="predictionTrackingTable",n.PREDICTION_DELTA="predictionDelta",n.FRAGMENTATION_PER_DATE="fragmentationPerDate",P;var n}(),u=function(){return(n=u||(u={})).PER_BCM="perBcm",n.TOTAL="total",n.OVER_TIME="blastCostOverTime",n.BY_TYPE="byType",n.BY_OPERATOR="byOperator",n.PF_VS_BI="powderFactorVsBlastability",n.PER_TONNE="perTonne",n.AVERAGE_LOADING_TIME="loadingTime",n.TOTAL_LOADING_TIME="totalLoadingTime",n.DISTRIBUTION_LOADING_TIME="distribution",n.BLASTABILITY_PREDICTION_DELTA="blastability",n.DIGGIND_TIME_PREDICTION_DELTA="diggingTime",n.TIME_PREDICTION_DELTA="timeTracking",n.FRAGMENTATION_P_80="fragmentationP80",n.FRAGMENTATION_LESS_1_IN="fragmentationCdaB1",n.FRAGMENTATION_OVER_3_IN="fragmentationOver3in",n.FRAGMENTATION_OVER_10_IN="fragmentationOver10in",n.FRAGMENTATION_OVER_1_M="fragmentationOver36in",u;var n}(),Ke=d(21086),Xe=d(27221),se=function(){var n=function(){function c(o){(0,h.Z)(this,c),this.mineStateService=o}return(0,p.Z)(c,[{key:"getState",value:function(){return this.mineStateService.getSelectedMineArea()===E.q.CDA?this.getStateForCDA():{selectedPeriodType:B.v.MONTH,timeRange:null,disabled:!1}}},{key:"getStateForCDA",value:function(){var t=(0,S.XD)(E.q.CDA).subtract(6,"day").set({hour:0,minute:0,second:0,millisecond:0}).valueOf(),a=(0,S.XD)(E.q.CDA).set({hour:23,minute:59,second:59,millisecond:0}).valueOf();return{selectedPeriodType:B.v.CUSTOM,timeRange:{dateFrom:t,dateTo:a},disabled:!1}}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(_.Hj))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Tn=S.mb.siteDashboardWidgets,te=function(){var n=function(){function c(o,t,a){(0,h.Z)(this,c),this.mineStateService=o,this.http=t,this.stateService=a}return(0,p.Z)(c,[{key:"getWidgets",value:function(t,a){var i=this.getDateRequestParams(t,a);return this.http.get((0,S.FP)(this.mineStateService.getSelectedMineArea(),Tn),{params:i}).pipe((0,Xe.K)(function(){return(0,Ke.of)({})}))}},{key:"getDateRequestParams",value:function(t,a){var i=this.stateService.getState();if(!t&&i.timeRange)return{dateFrom:i.timeRange.dateFrom,dateTo:i.timeRange.dateTo,chosenPeriod:i.selectedPeriodType};var r=this.mineStateService.getSelectedMineArea(),s=(0,S.XD)(r).startOf("month").valueOf(),l=(0,S.XD)(r).endOf("day").valueOf();return{dateFrom:t?t.dateFrom.valueOf():s,dateTo:t?t.dateTo.valueOf():l,chosenPeriod:a||"month"}}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(_.Hj),e.LFG(R.eN),e.LFG(se))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Mn=d(591),yn=d(80013),ne=function(){var n=function(){function c(o){(0,h.Z)(this,c),this.filtersStateService=o;var t=this.filtersStateService.getState();this.filtersState$=new Mn.X({equipment:null,dates:t.timeRange,period:t.selectedPeriodType})}return(0,p.Z)(c,[{key:"getParams",value:function(){return this.filtersState$.getValue()}},{key:"onFilterChanged",value:function(){return this.filtersState$.asObservable().pipe((0,yn.b)(500))}},{key:"updateFilters",value:function(t){this.filtersState$.next(Object.assign(Object.assign({},this.filtersState$.getValue()),t))}},{key:"hardResetFilters",value:function(t){this.filtersState$.next(Object.assign({},t))}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(se))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}();function Dn(n,c){if(1&n&&(e.TgZ(0,"mat-toolbar")(1,"mat-toolbar-row")(2,"h2"),e._uU(3),e.qZA(),e._UZ(4,"div",3)(5,"span",4),e.qZA()()),2&n){var o=c.$implicit,t=e.oxw();e.xp6(3),e.Oqu(t.data.translated?o(t.data.header):t.data.header)}}function An(n,c){if(1&n&&e._UZ(0,"mat-dialog-content",5),2&n){var o=e.oxw();e.Q6J("innerHTML",o.data.contentHTML,e.oJD)}}function Fn(n,c){if(1&n&&(e.TgZ(0,"mat-dialog-content"),e._UZ(1,"span",6),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.s9C("transloco",o.data.contentHTML)}}var et=function(){var n=(0,p.Z)(function c(o){(0,h.Z)(this,c),this.data=o});return n.\u0275fac=function(o){return new(o||n)(e.Y36(K.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["dabo-site-dashboard-modal"]],decls:3,vars:2,consts:[[4,"transloco"],[3,"innerHTML",4,"ngIf"],[4,"ngIf"],[1,"fill-remaining-space"],["mat-dialog-close","",1,"icon","icon-close"],[3,"innerHTML"],[3,"transloco"]],template:function(o,t){1&o&&(e.YNc(0,Dn,6,1,"mat-toolbar",0),e.YNc(1,An,1,1,"mat-dialog-content",1),e.YNc(2,Fn,2,1,"mat-dialog-content",2)),2&o&&(e.xp6(1),e.Q6J("ngIf",!t.data.translated),e.xp6(1),e.Q6J("ngIf",t.data.translated))},directives:[V.KI,Ce.Ye,Ce.rD,K.ZT,y.O5,K.xY],styles:["mat-dialog-content[_ngcontent-%COMP%]{color:#586b7a;font-weight:400;font-size:14px;line-height:22px;min-height:40vh}"]}),n}(),Pe=function(){var n=function(){function c(o){(0,h.Z)(this,c),this.dialog=o}return(0,p.Z)(c,[{key:"onOrientationChange",value:function(){this.dialog.openDialogs.length&&!(this.modalComponentRef&&this.modalComponentRef.componentInstance instanceof et)&&this.dialog.openDialogs[0]._overlayRef.dispose()}},{key:"openHelpCenter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"siteDashboardTranslation.help.msg",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"siteDashboardTranslation.help.header",i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.modalComponentRef=this.dialog.open(et,{panelClass:["modal-base","modal--site-dashboard"],data:{pageType:"siteDashboard",header:a,translated:i,contentHTML:t}}),this.modalComponentRef}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(K.uw))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Te=function(){var n=function(){function c(o,t,a){(0,h.Z)(this,c),this.permissionService=o,this.pagePermissionService=t,this.mineSiteService=a}return(0,p.Z)(c,[{key:"isWidgetsAvailable",value:function(){var t,a=this.isPageAvailable();try{var r=null===(t=this.permissionService.appPermissionsConfig[this.mineSiteService.getSelectedMineArea()][ce.K.SITE_LEVEL_DASHBOARD])||void 0===t?void 0:t.components;return this.atLeastOneEnabled(r)&&a}catch(s){return a}}},{key:"isPageAvailable",value:function(){return this.pagePermissionService.canAccess(ce.K.SITE_LEVEL_DASHBOARD)}},{key:"atLeastOneEnabled",value:function(t){return Object.keys(t.widgets).some(function(a){return!0===t.widgets[a]})}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(_.$A),e.LFG(_.GO),e.LFG(_.Hj))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),En=d(8929),tt={Normal:!1,"Blocky Crest":!0,"Hard Toe":!0,Tight:!0,Easy:!1,"Low Face":!1,"Frost/Frozen":!1,Rehandle:!1,"Toe Backs":!1,Pushed:!1},Ln=[{value:B.v.MONTH,translated:!0,label:"dateTranslation.month"},{value:B.v.YEAR,label:"dateTranslation.year",translated:!0},{value:B.v.CUSTOM,label:"dateTranslation.custom",translated:!0}],xn={coal:[{min:0,max:2,label:"predictionTable.site_dashboard_compliance.coal.compliant",color:"#4FA630",textColor:"#4FA630"},{min:2.01,color:"#FFB1B1",max:100,label:"predictionTable.site_dashboard_compliance.coal.not_compliant",textColor:"#E36565"}],hvc:[{min:0,max:10,color:"#4FA630",textColor:"#4FA630",label:"predictionTable.site_dashboard_compliance.hvc.compliant"},{min:10.01,max:25,color:"#FFCC16",textColor:"#F09000",label:"predictionTable.site_dashboard_compliance.hvc.not_compliant_range"},{min:25.01,max:100,color:"#FFB1B1",textColor:"#E36565",label:"predictionTable.site_dashboard_compliance.hvc.not_compliant_more_25"}]},nt=u.TOTAL,kn=[{value:u.PER_BCM,label:"Per BCM"},{value:nt,label:"Total"}],Rn=[{value:u.PER_TONNE,label:"per Tonne"},{value:nt,label:"Total"}],Me=function(){var n=function(){function c(){(0,h.Z)(this,c),this.legendClick$=new En.xQ,this._shovelOperatorFeedbackLegendState=tt}return(0,p.Z)(c,[{key:"updateShovelOperatorFeedbackLegendState",value:function(t){this._shovelOperatorFeedbackLegendState[t]=!this._shovelOperatorFeedbackLegendState[t]}},{key:"shovelOperatorFeedbackState",get:function(){return this._shovelOperatorFeedbackLegendState}},{key:"setShovelOperatorFeedbackDefaultLegendState",value:function(){this._shovelOperatorFeedbackLegendState=Object.assign({},tt)}}]),c}();return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),ot=function(){var n=function(){function c(o,t){(0,h.Z)(this,c),this.mineStateService=o,this.http=t}return(0,p.Z)(c,[{key:"getTable",value:function(t){return this.http.get((0,S.FP)(this.mineStateService.getSelectedMineArea(),S.mb.siteDashboardPredictionTracking),{params:t.dateParams})}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(_.Hj),e.LFG(R.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),G=d(97685),L=d(40714),A=d(22451),T=d(17489),ye=function(){var n=function(){function c(o){(0,h.Z)(this,c),this.mineStateService=o}return(0,p.Z)(c,[{key:"mine",get:function(){return this.mineStateService.getSelectedMineArea()}},{key:"getSingleValueColumns",value:function(){var t={lastDate:{property:"lastDate",name:"predictionTable.site_dashboard.last_date",pipes:[{token:"dateFormatter",args:[this.mine,A.a.DEFAULT]}]}};return(0,v.Z)({coal:[{property:"pattern",name:"predictionTable.site_dashboard.pattern_id",isLink:!0,pipes:[]},{property:"overlap",name:"predictionTable.site_dashboard.overlap",pipes:[{token:"unit",args:["%",""]}]},t.lastDate]},E.q.HVC,[{property:"pattern",name:"predictionTable.site_dashboard.pattern_id",isLink:!0,pipes:[]},t.lastDate,{property:"blastability",name:"predictionTable.site_dashboard.avg_blastability",unit:L.Ab.getUnits("blastability",this.mine),description:"predictionTable.actual",pipes:[{token:"customNumber"}]}])[m.ZA.isHVC(this.mine)?E.q.HVC:"coal"]}},{key:"getPredictedVsActualColumns",value:function(){return(0,v.Z)({coal:[{property:"blastability",name:"predictionTable.site_dashboard.blastability",unit:L.Ab.getUnits("blastability",this.mine),pipes:[{token:"customNumber"}]},{property:"burdenAndSpacing",name:"predictionTable.site_dashboard.burden_spacing",unit:L.Ab.getUnits("burdenAndSpacing",this.mine),isUsedForComplianceCheck:!0,pipes:[{token:"join",args:["x"]}]},{property:"energyFactor",name:"predictionTable.site_dashboard.energy_factor",unit:L.Ab.getUnits("energyFactor",this.mine),pipes:[{token:"customNumber"}]},{property:"blastCostPerBcm",name:"predictionTable.site_dashboard.blast_cost",pipes:[{token:"customNumber"}]},{property:"explosiveCostPerBcm",name:"predictionTable.site_dashboard.explosive_cost",pipes:[{token:"customNumber"}]},{property:"diggingCostPerBcm",name:"predictionTable.site_dashboard.digging_cost",pipes:[{token:"customNumber"}]},{property:"diggingTimePerHole",name:"predictionTable.site_dashboard.digging_time",pipes:[{token:"customNumber"}]}]},E.q.HVC,[{property:"burdenAndSpacing",name:"predictionTable.site_dashboard.burden_spacing",unit:L.Ab.getUnits("burdenAndSpacing",this.mine),pipes:[{token:"join",args:["x"]}]},{property:"collarHeight",name:"predictionTable.site_dashboard.collar_height",unit:L.Ab.getUnits("collarHeight",this.mine),pipes:[{token:"customNumber"}]},{property:"subdrillLength",name:"predictionTable.site_dashboard.subdrill_length",unit:L.Ab.getUnits("subdrillLength",this.mine),pipes:[{token:"customNumber"}]},{property:"explosiveKg",name:"predictionTable.site_dashboard.explosive",unit:L.Ab.getUnits("explosiveKg",this.mine),pipes:[{token:"customNumber"}]},{property:"fragmentationP50",name:"predictionTable.site_dashboard.fragmentation_p80",unit:L.Ab.getUnits("fragmentationP50",this.mine),pipes:[{token:"customNumber"}]},{property:"energyFactor",name:"predictionTable.site_dashboard.energy_factor",unit:L.Ab.getUnits("energyFactor",this.mine),isUsedForComplianceCheck:!0,pipes:[{token:"customNumber"}]}])[m.ZA.isHVC(this.mine)?E.q.HVC:"coal"]}},{key:"transformTable",value:function(t){var a=this;return t.map(function(i){var r=m.ZA.isHVC(a.mine)?a.getEnergyFactorCompliancePercentage(i.energyFactor):a.getBurdenAndSpacingCompliancePercentage(i.burdenAndSpacing);return Object.assign(Object.assign({},i),{compliancePercentage:r,pattern:i.pattern.path,link:a.buildReportLink(String(i.pattern.id)),burdenAndSpacing:{predicted:i.burdenAndSpacing.predicted,actual:(0,T.isEmpty)(i.burdenAndSpacing.actual)?"-":i.burdenAndSpacing.actual}})})}},{key:"getEnergyFactorCompliancePercentage",value:function(t){var i=t.actual;return null===i?null:this.getPercentageDifference(t.predicted,i)}},{key:"getBurdenAndSpacingCompliancePercentage",value:function(t){var a=t.predicted,i=t.actual;if((0,T.isEmpty)(i))return null;var s=(0,G.Z)(i,1)[0],l=(0,G.Z)(a,1);return this.getPercentageDifference(l[0],s)}},{key:"getPercentageDifference",value:function(t,a){return(0,T.round)(100-(0,T.min)([t,a])/(0,T.max)([t,a])*100,2)}},{key:"buildReportLink",value:function(t){return"/".concat(this.mineStateService.getSelectedMineArea(),"/report/per-pattern/").concat(t)}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(_.Hj))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),it=function(){var n=function(){function c(o,t){(0,h.Z)(this,c),this.predictionTrackingApiService=o,this.calculationService=t}return(0,p.Z)(c,[{key:"getTable",value:function(t){var a=this;return this.predictionTrackingApiService.getTable(t).pipe((0,k.U)(function(i){return a.calculationService.transformTable(i)}))}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(ot),e.LFG(ye))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Zn=P.BLAST_COST_PER_PATTERN,Nn=P.BLAST_COST_OVER_TIME,Bn=P.SHOVEL_OPERATOR_FEEDBACKS,Gn=P.SHOVEL_OPERATOR_ALARMS,Yn=P.POWDER_FACTOR_VS_BLASTABILITY,Hn=P.LOADING_TIME,Vn=P.PREDICTION_DELTA,Un=P.FRAGMENTATION_PER_DATE,Wn=u.PER_BCM,at=u.TOTAL,jn=u.OVER_TIME,le=u.BY_TYPE,rt=u.BY_OPERATOR,Jn=u.PF_VS_BI,ct=u.AVERAGE_LOADING_TIME,zn=u.DISTRIBUTION_LOADING_TIME,Qn=u.TOTAL_LOADING_TIME,st=u.BLASTABILITY_PREDICTION_DELTA,$n=u.DIGGIND_TIME_PREDICTION_DELTA,qn=u.TIME_PREDICTION_DELTA,lt=u.FRAGMENTATION_P_80,Kn=u.FRAGMENTATION_LESS_1_IN,Xn=u.FRAGMENTATION_OVER_1_M,eo=u.FRAGMENTATION_OVER_3_IN,to=u.FRAGMENTATION_OVER_10_IN,dt=function(){var n=function(){function c(o){(0,h.Z)(this,c),this.mineStateService=o}return(0,p.Z)(c,[{key:"getSettings",value:function(){var t=this.mineStateService.getSelectedMineArea();return[{type:Zn,icon:"icon-cost",title:"Total Blast Cost per Pattern",defaultMetricType:at,visible:!1,buttons:[{value:Wn,label:"Per BCM"},{value:at,label:"Total"}]},{type:Nn,icon:"icon-kpi",title:"Total Blast Cost over Time",defaultMetricType:jn,visible:!1,buttons:[]},{type:Yn,icon:"icon-dashboard",title:"Powder Factor vs Blastability",visible:!1,defaultMetricType:Jn,buttons:[]},{type:Bn,icon:"icon-map-feedback",title:"Shovel Operator Feedback",visible:!1,defaultMetricType:le,buttons:[{value:le,label:"by Type"},{value:rt,label:"by Operator"}],filter:{title:"Filter by Shovel"}},{type:Gn,icon:"icon-shovel",title:"Shovel Operator Alarms",defaultMetricType:le,visible:!1,buttons:[{value:le,label:"by Type"},{value:rt,label:"by Operator"}],filter:{title:"Filter by Shovel"}},{type:Hn,icon:"icon-shovel",title:m.ZA.isRDO(t)?"Muckpile Loading Time per Pattern":"Loading Time per Pattern",defaultMetricType:ct,visible:!1,buttons:[{value:ct,label:"Average"},{value:Qn,label:"Total"},{value:zn,label:"Distribution"}]},{type:P.PREDICTIONS_TRACKING},{type:Vn,icon:"icon-map-compare-tool",title:"Predictions Delta",visible:!1,defaultMetricType:m.ZA.isHVC(t)?qn:st,buttons:m.ZA.isHVC(t)?[]:[{value:st,label:"Blastability"},{value:$n,label:"Digging Time"}]},{type:Un,icon:"icon-coal",title:"fragmentationWidget.title",translate:!0,defaultMetricType:lt,visible:!1,buttons:[{value:lt,label:"P80"},{value:Kn,label:"<1 in"},{value:eo,label:"\u22653 in"},{value:to,label:"\u226510 in"},{value:Xn,label:"\u22651.2 m"}]}]}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(_.Hj))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),no=d(15439),N=d.n(no),gt=A.a.CHART_TICK,De=A.a.SITE_DASHBOARD,H=function(){function n(){(0,h.Z)(this,n)}return(0,p.Z)(n,[{key:"setIsWeeklyPeriod",value:function(o){this.isWeekly=o&&null!==o.startPeriod&&0!==o.startPeriod}},{key:"getTickLabel",value:function(o){return o.isFirst&&this.isWeekly?N().utc(o.value).startOf("week").format(gt):N().utc(o.value).format(gt)}},{key:"getTickConfig",value:function(o,t,a){return a?{tickPositions:[o,t]}:{tickInterval:864e5}}},{key:"getTooltipDates",value:function(o,t){return(this.isWeekly?"".concat(m.Ov.transformToMineUTCTimeZone(t,o.point.startPeriod,De)," - ").concat(m.Ov.transformToMineUTCTimeZone(t,o.point.endPeriod,De)):"")||m.Ov.transformToMineUTCTimeZone(t,o.point.x,De)}}]),n}(),Z=d(52031),O=d(48619),oo=A.a.CHART_TICK,Ae=A.a.SITE_DASHBOARD,U=function(){var n=function(){function c(o){(0,h.Z)(this,c),this.mineStateService=o}return(0,p.Z)(c,[{key:"setTimeAggregationType",value:function(t){this.isWeekly=t&&null!==t.startPeriod&&0!==t.startPeriod}},{key:"getTimeOptions",value:function(t){return{moment:N(),timezone:(0,S.FX)(t)}}},{key:"getTimeAxisOptions",value:function(t){var a=(0,G.Z)(t,2),s=this;return Object.assign(Object.assign({type:"datetime",startOnTick:!0,tickWidth:0,tickLength:0,startOfWeek:0},this.getTickConfig(a[0],a[1])),{labels:{formatter:function(){return s.getTickLabel(this)}}})}},{key:"getTickLabel",value:function(t){return t.isFirst&&this.isWeekly?N().utc(t.value).startOf("week").format(oo):m.Ov.transformToMineUTCTimeZone(this.mineStateService.getSelectedMineArea(),t.value,A.a.CHART_TICK)}},{key:"getTickConfig",value:function(t,a){return this.isWeekly?{tickPositions:[+t-100,a]}:{tickInterval:864e5}}},{key:"getTooltipDates",value:function(t,a){return(this.isWeekly?"".concat(m.Ov.transformToMineUTCTimeZone(a,t.point.startPeriod,Ae)," - ").concat(m.Ov.transformToMineUTCTimeZone(a,t.point.endPeriod,Ae)):"")||m.Ov.transformToMineUTCTimeZone(a,t.point.x,Ae)}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(_.Hj))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),io=d(48924),W=function(){var n=function(){function c(){(0,h.Z)(this,c)}return(0,p.Z)(c,[{key:"getCommonColumnOptions",value:function(){return(new Z.rc).setChart(this.getChartOptions()).setTooltip({outside:!1}).setTitle({text:""}).setYAxis({title:{text:""}}).setLegend({itemStyle:{fontWeight:"normal"}}).setPlotOptions(this.getPlotOptions())}},{key:"getChartOptions",value:function(){return{scrollablePlotArea:{minWidth:1280,opacity:0},height:480}}},{key:"getPlotOptions",value:function(){return{column:Object.assign(Object.assign({},io.chartColumnStylingConfig),{borderWidth:.3,stacking:"normal"}),series:{states:{inactive:{enabled:!1}},cursor:"pointer"}}}}]),c}();return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),ut=d(465),ao=O.C.BILOBA_FLOWER,ro=O.C.DODGER_BLUE,co=O.C.FRENCH_PASS,so=O.C.PEACH,lo=O.C.LAVENDER,go=O.C.LIGHTNING_YELLOW,ft=function(){var n=function(){function c(o,t,a,i){(0,h.Z)(this,c),this.timeAggregationService=o,this.siteDashboardColumnService=t,this.customDecimalPipe=a,this.mineStateService=i}return(0,p.Z)(c,[{key:"getOptions",value:function(t){var a=this;return this.timeAggregationService.setTimeAggregationType(t.columns[0].data[0]),this.siteDashboardColumnService.getCommonColumnOptions().mergeOptions((new Z.rc).setTime(this.timeAggregationService.getTimeOptions(this.mineStateService.getSelectedMineArea())).setXAxis(this.timeAggregationService.getTimeAxisOptions(t.limits)).setLegend({symbolHeight:12,symbolWidth:12,symbolRadius:0}).setPlotOptions({column:{showInLegend:!0}}).setSeries(this.getSeries(t)).setTooltip({useHTML:!0,hideDelay:1e3,style:{pointerEvents:"auto"},formatter:function(){return a.getTooltip(this)}})).build()}},{key:"getSeries",value:function(t){var a=this,i=t.columns.length?t.columns.map(function(r){var s=r.data,l=r.feature;return{color:a.getColor(l),name:a.getLegendName(l),states:{hover:{color:a.getHoverColor(l)}},data:s,type:"column"}}):[];return[i[0],i[2],i[1]]}},{key:"getLegendName",value:function(t){return{drilling:"Drilling",explosives:"Explosives",accessories:"Accessories"}[t]}},{key:"getColor",value:function(t){return{drilling:co,explosives:so,accessories:ao}[t]}},{key:"getHoverColor",value:function(t){return{drilling:ro,explosives:go,accessories:lo}[t]}},{key:"getTooltip",value:function(t){return'<span style="font-weight: 500">$'.concat(this.customDecimalPipe.transform(t.point.y),"</span>\n            ").concat(this.createPatternList(t.point.patternIds),"\n            <span>").concat(this.timeAggregationService.getTooltipDates(t,this.mineStateService.getSelectedMineArea()),"</span>")}},{key:"createPatternList",value:function(t){var a=this,i=t.reduce(function(r,s){return"".concat(r,'<tr>\n                        <td style="padding: 0 3px 0 0">$').concat(a.customDecimalPipe.transform(s.cost),'</td>\n                        <td style="padding: 0">').concat(s.patternId,"</td>\n                    </tr>")},"");return'<table style="border-spacing: 0">'.concat(i,"</table>")}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(U),e.LFG(W),e.LFG(ut.n),e.LFG(_.Hj))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),uo=S.mb.siteDashboardBlastCostOverTime,pt=function(){var n=function(c){(0,x.Z)(t,c);var o=(0,I.Z)(t);function t(a,i,r){var s;return(0,h.Z)(this,t),(s=o.call(this)).http=a,s.mineStateService=i,s.blastCostOverTimeConfigService=r,s}return(0,p.Z)(t,[{key:"getChart",value:function(i){var r=this;return this.http.get((0,S.FP)(this.mineStateService.getSelectedMineArea(),uo),{params:i.dateParams}).pipe((0,k.U)(function(s){return(0,v.Z)({},P.BLAST_COST_OVER_TIME,s.columns.length?r.blastCostOverTimeConfigService.getOptions(s):{})}))}}]),t}(H);return n.\u0275fac=function(o){return new(o||n)(e.LFG(R.eN),e.LFG(_.Hj),e.LFG(ft))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),ht=d(3241),fo=d(30349),vt=u.TOTAL,mt=O.C.DODGER_BLUE,po=O.C.SHUTTLE_GRAY,ho=O.C.BLUE_SECONDARY_LIGHT,vo=O.C.FRENCH_PASS,de=A.a.SITE_DASHBOARD,bt=function(){var n=function(){function c(o,t,a,i,r){(0,h.Z)(this,c),this.timeAggregationService=o,this.siteDashboardColumnService=t,this.customCurrencyPipe=a,this.fixToPipe=i,this.mineStateService=r}return(0,p.Z)(c,[{key:"isWeekly",get:function(){return this.timeAggregationService.isWeekly}},{key:"getOptions",value:function(t,a,i){var r=t[vt].lines.current,s=(0,G.Z)(t[a].previousPeriodLimits,2),l=s[0],g=s[1],f=(0,G.Z)(t[a].limits,2),C=f[0],M=f[1],b=this;return this.timeAggregationService.setTimeAggregationType(r[0]),this.siteDashboardColumnService.getCommonColumnOptions().mergeOptions((new Z.rc).setColors([vo,ho]).setTime(this.timeAggregationService.getTimeOptions(this.mineStateService.getSelectedMineArea())).setXAxis(this.timeAggregationService.getTimeAxisOptions(t[a].limits)).setPlotOptions({column:{stacking:"normal",showInLegend:!1,states:{hover:{color:mt}}},line:{stickyTracking:!1}}).setTooltip({useHTML:!0,formatter:function(){return b.getTooltip(a,this)}}).setSeries(this.getSeries(t,a,i,{dateFrom:C,dateTo:M,previousDateFrom:l,previousDateTo:g}))).build()}},{key:"getTooltip",value:function(t,a){var i=this.mineStateService.getSelectedMineArea(),r=t===vt,s=this.fixToPipe.transform(a.point.y,2),l=r?this.customCurrencyPipe.transform(s,"USD","symbol",void 0):"$".concat(s),g=this.isWeekly?"".concat(m.Ov.transformToMineUTCTimeZone(i,a.point.startPeriod,de)," - ").concat(m.Ov.transformToMineUTCTimeZone(i,a.point.endPeriod,de)):"",f=g||m.Ov.transformToMineUTCTimeZone(i,a.point.x,de);if("column"===a.series.type)return'<span style="font-weight: 500">'.concat(l,"</span> <br>\n              <span>ID: ").concat(a.point.patternId,"</span> <br>\n              <span>").concat(f,"</span> <br> ");if("line"===a.series.type){if(a.series.name.includes("Previous")){var C="".concat(this.isWeekly?g:m.Ov.transformToMineUTCTimeZone(i,a.point.previousDate,de));return'<span style="font-weight: 500">'.concat(l,"</span> <br>\n                <span>").concat(C,"</span>")}return'<span style="font-weight: 500">'.concat(l,"</span> <br>\n                <span>").concat(f,"</span>")}}},{key:"getSeries",value:function(t,a,i,r){var s=t[a].columns.length?t[a].columns.map(function(M){return Object.assign(Object.assign({},M),{type:"column"})}):[],l=this.getLegendLabels(i.chosenPeriod,{datesChosen:{dateFrom:i.dateFrom,dateTo:i.dateTo},currentDatesWithAvailableData:{dateFrom:r.dateFrom,dateTo:r.dateTo},previousDatesWithAvailableData:{dateFrom:r.previousDateFrom,dateTo:r.previousDateTo}}),C=[{color:mt,type:"line",name:l.current,data:t[a].lines.current},{color:po,type:"line",marker:{enabled:!0,symbol:"circle"},name:l.previous,data:t[a].lines.previous}];return[].concat((0,ae.Z)(s),C)}},{key:"getLegendLabels",value:function(t,a){var i=this.mineStateService.getSelectedMineArea();switch(t){case"month":var r=N().utc(a.datesChosen.dateTo).add((0,S.pQ)(i,a.datesChosen.dateTo),"minutes"),s=N().utc(a.datesChosen.dateTo).add((0,S.pQ)(i,a.datesChosen.dateTo),"minutes").subtract(1,"month");return{current:"Current ".concat(t," (").concat(r.format("MMMM"),")"),previous:"Previous ".concat(t," (").concat(s.format("MMMM"),")")};case"year":var l=N().utc(a.datesChosen.dateFrom).format("YYYY"),g=Number(l)-1;return{current:"Current ".concat(t," (").concat(l,")"),previous:"Previous ".concat(t," (").concat(g,")")};case"custom":var f=m.Ov.transformToMineUTCTimeZone(i,a.previousDatesWithAvailableData.dateFrom,A.a.CHART_TICK),C=m.Ov.transformToMineUTCTimeZone(i,a.previousDatesWithAvailableData.dateTo,A.a.CHART_TICK),M=this.getFormattedDateFromLimit(a.currentDatesWithAvailableData.dateFrom),b=m.Ov.transformToMineUTCTimeZone(i,a.currentDatesWithAvailableData.dateTo,A.a.CHART_TICK);return{current:"Current custom period (".concat(M,"-").concat(b,")"),previous:"Previous period (".concat(f,"-").concat(C,")")}}}},{key:"getFormattedDateFromLimit",value:function(t){var a=this.mineStateService.getSelectedMineArea();return this.isWeekly?N().utc(t).startOf("week").format(A.a.CHART_TICK):m.Ov.transformToMineUTCTimeZone(a,t,A.a.CHART_TICK)}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(U),e.LFG(W),e.LFG(ht.R),e.LFG(fo.L),e.LFG(_.Hj))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Fe=u.TOTAL,Ee=u.PER_BCM,mo=S.mb.siteDashboardBlastCostPerPattern,_t=function(){var n=function(c){(0,x.Z)(t,c);var o=(0,I.Z)(t);function t(a,i,r){var s;return(0,h.Z)(this,t),(s=o.call(this)).mineStateService=a,s.http=i,s.blastCostPerPatternConfigService=r,s}return(0,p.Z)(t,[{key:"getChart",value:function(i){var r=this;return this.http.get((0,S.FP)(this.mineStateService.getSelectedMineArea(),mo),{params:i.dateParams}).pipe((0,k.U)(function(s){return r.getConfig(s,i.dateParams)}))}},{key:"getConfig",value:function(i,r){var s;return(0,v.Z)(s={},Fe,this.hasNoDataForBlastCost(i,Fe)?{}:this.blastCostPerPatternConfigService.getOptions(i,Fe,r)),(0,v.Z)(s,Ee,this.hasNoDataForBlastCost(i,Ee)?{}:this.blastCostPerPatternConfigService.getOptions(i,Ee,r)),s}},{key:"hasNoDataForBlastCost",value:function(i,r){return(0,T.isEmpty)(i[r])||(0,T.isEmpty)(i[r].columns)}}]),t}(H);return n.\u0275fac=function(o){return new(o||n)(e.LFG(_.Hj),e.LFG(R.eN),e.LFG(bt))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Le=function(){var n=function(){function c(){(0,h.Z)(this,c)}return(0,p.Z)(c,[{key:"parseParams",value:function(t){var a=Object.assign({},t.dateParams),i=[];if(!(0,T.isEmpty)(t.filter)){for(var r in t.filter)t.filter[r]&&i.push(r);a.filter=i.toString()}return t.exclude&&(a.exclude=t.exclude),a}},{key:"hasFilter",value:function(t){return!(0,T.isEmpty)(t.filter)}},{key:"hasNoData",value:function(t,a){return(0,T.isEmpty)(t[a])||(0,T.isEmpty)(t[a].columns)&&(0,T.isEmpty)(t[a].bars)}},{key:"isEveryTypeItemEmpty",value:function(t){return null==t?void 0:t.every(function(a){return(0,T.isEmpty)(a.data)})}},{key:"isEveryOperatorItemEmpty",value:function(t){return null==t?void 0:t.every(function(a){return a.data.every(function(i){return(0,T.isEmpty)(i)})})}}]),c}();return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Ct=u.BY_TYPE,xe=u.BY_OPERATOR,Ie=A.a.SITE_DASHBOARD,we=function(){var n=function(){function c(o,t,a){(0,h.Z)(this,c),this.columnsService=o,this.timeAggregationService=t,this.mineStateService=a}return(0,p.Z)(c,[{key:"getSeries",value:function(t,a){var r,s,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(null===(r=t[a].columns)||void 0===r?void 0:r.length)?t[a].columns.map(function(l){return Object.assign(Object.assign({},l),{visible:i[l.name],type:"column"})}):(null===(s=t[a].bars)||void 0===s?void 0:s.length)?t[a].bars.map(function(l){return Object.assign(Object.assign({},l),{visible:i[l.name],type:"bar"})}):[]}},{key:"getTooltip",value:function(t,a){var i=this.mineStateService.getSelectedMineArea(),s=a.point.eventType,l="<b>".concat(a.point.y," ").concat(s,"</b>"),g=a.isWeekly||t===xe?"".concat(m.Ov.transformToMineUTCTimeZone(i,a.point.startPeriod,Ie)," - ").concat(m.Ov.transformToMineUTCTimeZone(i,a.point.endPeriod,Ie)):"",C=a.point.eventId.reduce(function(b,$){return b+"".concat($," <br>")},""),M=g||m.Ov.transformToMineUTCTimeZone(i,a.point.x,Ie);return"".concat(l," <br> ").concat(C," ").concat(M)}},{key:"getOptions",value:function(t,a){var i=t[xe].names,r=this;return this.timeAggregationService.setTimeAggregationType(t[Ct].columns[0].data[0]),this.columnsService.getCommonColumnOptions().mergeOptions((new Z.rc).setChart({marginRight:25,scrollablePlotArea:{opacity:0,minWidth:a===xe?null:this.columnsService.getChartOptions().scrollablePlotArea.minWidth}}).setXAxis(a===Ct?this.timeAggregationService.getTimeAxisOptions(t[a].limits):{categories:i}).setTime(this.timeAggregationService.getTimeOptions(this.mineStateService.getSelectedMineArea())).setPlotOptions({column:{minPointLength:3},bar:{borderWidth:0}}).setTooltip({formatter:function(){return r.getTooltip(a,this)}}).setLegend({symbolRadius:0}))}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(W),e.LFG(U),e.LFG(_.Hj))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),bo=u.BY_TYPE,_o=u.BY_OPERATOR,Ot=function(){var n=function(){function c(o){(0,h.Z)(this,c),this.shovelOperatorConfigService=o}return(0,p.Z)(c,[{key:"getOptions",value:function(t,a){var r=a===bo?{}:{minHeight:68*t[_o].names.length};return this.shovelOperatorConfigService.getOptions(t,a).mergeOptions((new Z.rc).setChart({scrollablePlotArea:Object.assign({},r)}).setPlotOptions({bar:{pointWidth:8,dataLabels:{enabled:!0,style:{fontWeight:"normal"}}}}).setSeries(this.shovelOperatorConfigService.getSeries(t,a))).build()}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(we))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),ge=u.BY_TYPE,ue=u.BY_OPERATOR,St=function(){var n=function(c){(0,x.Z)(t,c);var o=(0,I.Z)(t);function t(a,i,r,s){var l;return(0,h.Z)(this,t),(l=o.call(this)).shovelOperatorService=a,l.mineStateService=i,l.shovelOperatorAlarmsConfigService=r,l.http=s,l}return(0,p.Z)(t,[{key:"getChart",value:function(i){var r=this,s=this.shovelOperatorService.parseParams(i);return this.http.get((0,S.FP)(this.mineStateService.getSelectedMineArea(),S.mb.siteDashboardShovelOperatorAlarms),{params:s}).pipe((0,k.U)(function(l){return r.getConfigs(l)}))}},{key:"getConfigs",value:function(i){var r;return(0,v.Z)(r={},ge,this.shovelOperatorService.hasNoData(i,ge)||this.shovelOperatorService.isEveryTypeItemEmpty(i[ge].columns)?{}:this.shovelOperatorAlarmsConfigService.getOptions(i,ge)),(0,v.Z)(r,ue,this.shovelOperatorService.hasNoData(i,ue)||this.shovelOperatorService.isEveryOperatorItemEmpty(i[ue].bars)?{}:this.shovelOperatorAlarmsConfigService.getOptions(i,ue)),(0,v.Z)(r,"filter",this.shovelOperatorService.hasFilter(i)?i.filter:{}),r}}]),t}(H);return n.\u0275fac=function(o){return new(o||n)(e.LFG(Le),e.LFG(_.Hj),e.LFG(Ot),e.LFG(R.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Co=u.BY_TYPE,Oo=u.BY_OPERATOR,Pt=function(){var n=function(){function c(o,t){(0,h.Z)(this,c),this.shovelOperatorConfigService=o,this.siteDashboardPreserveService=t}return(0,p.Z)(c,[{key:"getOptions",value:function(t,a){var i=this,s=a===Co?{}:{minHeight:86*t[Oo].names.length};return this.shovelOperatorConfigService.getOptions(t,a).mergeOptions((new Z.rc).setChart({scrollablePlotArea:Object.assign({},s)}).setPlotOptions({series:{events:{legendItemClick:function(g){i.siteDashboardPreserveService.legendClick$.next({type:P.SHOVEL_OPERATOR_FEEDBACKS,name:g.target.userOptions.name,visible:!g.target.userOptions.visible}),i.siteDashboardPreserveService.updateShovelOperatorFeedbackLegendState(g.target.userOptions.name)}}},bar:{pointWidth:4}}).setSeries(this.shovelOperatorConfigService.getSeries(t,a,this.siteDashboardPreserveService.shovelOperatorFeedbackState))).build()}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(we),e.LFG(Me))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),J=u.BY_TYPE,z=u.BY_OPERATOR,Tt=function(){var n=function(c){(0,x.Z)(t,c);var o=(0,I.Z)(t);function t(a,i,r,s){var l;return(0,h.Z)(this,t),(l=o.call(this)).shovelOperatorService=a,l.mineStateService=i,l.http=r,l.shovelOperatorFeedbackConfigService=s,l}return(0,p.Z)(t,[{key:"getChart",value:function(i){var r=this,s=this.shovelOperatorService.parseParams(i);return this.http.get((0,S.FP)(this.mineStateService.getSelectedMineArea(),S.mb.siteDashboardShovelOperatorFeedbacks),{params:s}).pipe((0,k.U)(function(l){return r.getConfigs(l)}))}},{key:"getConfigs",value:function(i){var r;return(0,v.Z)(r={},J,this.shovelOperatorService.hasNoData(i,J)||this.shovelOperatorService.isEveryTypeItemEmpty(i[J].columns)?{}:this.shovelOperatorFeedbackConfigService.getOptions(i,J)),(0,v.Z)(r,z,this.shovelOperatorService.hasNoData(i,z)||this.shovelOperatorService.isEveryOperatorItemEmpty(i[z].bars)?{}:this.shovelOperatorFeedbackConfigService.getOptions(i,z)),(0,v.Z)(r,"filter",this.shovelOperatorService.hasFilter(i)?i.filter:{}),(0,v.Z)(r,"exclude",i.exclude?i.exclude:{}),r}},{key:"transformSeriesOnLegendPreserve",value:function(i,r){var s,l=i.byType.series.map(function(f){return Object.assign(Object.assign({},f),{visible:f.name===r.name?r.visible:f.visible})}),g=i.byOperator.series.map(function(f){return Object.assign(Object.assign({},f),{visible:f.name===r.name?r.visible:f.visible})});return Object.assign(Object.assign({},i),((0,v.Z)(s={},J,Object.assign(Object.assign({},i[J]),{series:l})),(0,v.Z)(s,z,Object.assign(Object.assign({},i[z]),{series:g})),s))}}]),t}(H);return n.\u0275fac=function(o){return new(o||n)(e.LFG(Le),e.LFG(_.Hj),e.LFG(R.eN),e.LFG(Pt))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),ke=function(){var n=function(){function c(){(0,h.Z)(this,c)}return(0,p.Z)(c,[{key:"getCommonOptions",value:function(){return(new Z.rc).setChart({scrollablePlotArea:{minWidth:1280,opacity:0},height:480}).setTitle({text:""}).setXAxis(this.getCommonAxisOptions()).setYAxis(this.getCommonAxisOptions()).setPlotOptions({series:{animation:!1,states:{inactive:{enabled:!1}}},scatter:{stickyTracking:!1}}).setTooltip({useHTML:!0,hideDelay:1e3,outside:!1,style:{pointerEvents:"auto"}}).setLegend({itemStyle:{fontWeight:"normal"},symbolHeight:12,symbolWidth:15,symbolRadius:0})}},{key:"getCommonAxisOptions",value:function(){return{title:{style:{opacity:.5}},startOnTick:!0,endOnTick:!0}}}]),c}();return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),So=A.a.DEFAULT,Mt=function(){var n=function(){function c(o,t){(0,h.Z)(this,c),this.scatterOptionsService=o,this.mineStateService=t,this.legendConfig={currentPeriod:{color:O.C.MALIBU_TERTIARY,name:"Current period",zIndex:2,visible:!0},previousPeriod:{color:O.C.HIT_PINK,name:"Previous period",zIndex:1,visible:!0},currentLinear:{color:O.C.MALIBU_TERTIARY,name:"Linear current",zIndex:3,visible:!0},previousLinear:{color:O.C.HIT_PINK,name:"Linear previous",zIndex:3,visible:!0}}}return(0,p.Z)(c,[{key:"getOptions",value:function(t,a){var i=this,r=this;return a.range||(0,T.forEach)(this.legendConfig,function(s){s.visible=!0}),this.scatterOptionsService.getCommonOptions().mergeOptions((new Z.rc).setXAxis({title:{text:"Blastability"},type:null}).setYAxis({title:{text:"Powder Factor"}}).setPlotOptions({series:{events:{legendItemClick:function(l){(0,T.forEach)(i.legendConfig,function(g){g.name===l.target.userOptions.name&&(g.visible=!g.visible)})}},turboThreshold:0}}).setTooltip({formatter:function(){return r.getTooltip(this)}}).setSeries(this.getSeries(t))).build()}},{key:"getSeries",value:function(t){var a=this;return Object.entries(t).map(function(i){var r=(0,G.Z)(i,2),s=r[0];return Object.assign(Object.assign({},r[1]),a.getSeriesConfig(s))})}},{key:"getTooltip",value:function(t){var a=(new ut.n).transform(t.point.explosiveWeight),i=m.Ov.transformToMineUTCTimeZone(this.mineStateService.getSelectedMineArea(),t.point.blastDate,So);return"<div>Powder Factor: ".concat(t.y," kg/m\xb3</div>\n            <div>Blastability: ").concat(t.x,"</div>\n            <div>Explosive Weight: ").concat(a," kg</div>\n            <div>").concat(t.point.patternId,"</div>\n            <div>Blast Date: ").concat(i,"</div>")}},{key:"getSeriesConfig",value:function(t){var a=Object.assign(Object.assign({},this.legendConfig[t]),{type:"scatter",marker:{symbol:"circle"}}),i=Object.assign(Object.assign({},this.legendConfig[t]),{type:"line",dashStyle:"ShortDash",enableMouseTracking:!1,marker:{enabled:!1}});return{currentPeriod:a,previousPeriod:a,currentLinear:i,previousLinear:i}[t]}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(ke),e.LFG(_.Hj))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Po=S.mb.siteDashboardPowderFactorVsBlastability,yt=function(){var n=function(c){(0,x.Z)(t,c);var o=(0,I.Z)(t);function t(a,i,r){var s;return(0,h.Z)(this,t),(s=o.call(this)).http=a,s.mineStateService=i,s.powderFactorVsBlastabilityConfigService=r,s}return(0,p.Z)(t,[{key:"getChart",value:function(i){var r=this;return this.http.get((0,S.FP)(this.mineStateService.getSelectedMineArea(),Po),{params:Object.assign(Object.assign({},i.dateParams),i.range)}).pipe((0,k.U)(function(s){return r.hasNoData(s)?{powderFactorVsBlastability:{}}:{powderFactorVsBlastability:r.powderFactorVsBlastabilityConfigService.getOptions(s,i)}}))}},{key:"hasNoData",value:function(i){return Object.entries(i).every(function(r){var f;return!(null===(f=(0,G.Z)(r,2)[1].data)||void 0===f?void 0:f.length)})}}]),t}(H);return n.\u0275fac=function(o){return new(o||n)(e.LFG(R.eN),e.LFG(_.Hj),e.LFG(Mt))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),To=O.C.DODGER_BLUE,Mo=O.C.BLUE_SECONDARY_LIGHT,yo=O.C.FRENCH_PASS,Q=A.a.DEFAULT_CDA,Do=A.a.DATE_TIME,Ao=A.a.TIME,Dt=u.FRAGMENTATION_P_80,At=u.FRAGMENTATION_LESS_1_IN,Ft=u.FRAGMENTATION_OVER_1_M,Et=u.FRAGMENTATION_OVER_3_IN,Lt=u.FRAGMENTATION_OVER_10_IN,xt=function(){var n=function(){function c(o,t,a,i){var r,s,l;(0,h.Z)(this,c),this.timeAggregationService=o,this.siteDashboardColumnService=t,this.mineStateService=a,this.translateService=i,this.weekIntervalThreholds=7776e6,this.labels=((0,v.Z)(r={},Dt,"P80"),(0,v.Z)(r,At,"<1 in"),(0,v.Z)(r,Et,"\u22653 in"),(0,v.Z)(r,Lt,"\u226510 in"),(0,v.Z)(r,Ft,"\u22651.2 m"),r),this.dateFormatsMap=((0,v.Z)(s={},0,Do),(0,v.Z)(s,2,Q),(0,v.Z)(s,1,Q),s),this.unitInChart=((0,v.Z)(l={},Dt,!0),(0,v.Z)(l,At,!0),(0,v.Z)(l,Ft,!1),(0,v.Z)(l,Et,!0),(0,v.Z)(l,Lt,!0),l)}return(0,p.Z)(c,[{key:"getOptions",value:function(t,a,i){var r=this;this.timeAggregationService.setTimeAggregationType({startPeriod:this.getStartPeriod(i)});var s=this.getPeriodShowingType(i.dateFrom,i.dateTo),l=this.getTickConfig(s,t.limits[0],t.limits[1]);return this.siteDashboardColumnService.getCommonColumnOptions().mergeOptions((new Z.rc).setColors([yo,Mo]).setTime(this.timeAggregationService.getTimeOptions(this.mineStateService.getSelectedMineArea())).setXAxis(Object.assign(Object.assign(Object.assign({},this.timeAggregationService.getTimeAxisOptions(t.limits)),l),{labels:{formatter:function(){return r.getTickLabel(this,s)}}})).setTooltip({useHTML:!0,stickOnContact:!0,style:{pointerEvents:"auto"},formatter:function(){return r.getTooltip(a,this,i)}}).setYAxis({title:{text:this.getSideLegend(a),style:{color:"rgba(88, 107, 122, 0.5)",lineHeight:"16px"}}}).setSeries(this.getSeries(t,a,i))).build()}},{key:"getTooltip",value:function(t,a,i){var r=this.mineStateService.getSelectedMineArea(),s=a.point,l=this.getPeriodShowingType(i.dateFrom,i.dateTo),g=this.dateFormatsMap[l],f=m.Ov.transformToMineUTCTimeZone(r,s.x,g),C=L.Ab.getUnits(t,this.mineStateService.getSelectedMineArea()),M="siteDashboardTranslation.fragmentationWidget",b=this.translateService.translate("".concat(M,".fragmentation")),$=this.translateService.translate("".concat(M,".").concat(t)),F=this.translateService.translate("".concat(M,".firstBlastDate")),Ta=this.translateService.translate("".concat(M,".lastBlastDate")),Ma=s.blasts.map(function(Ea){return"<div>".concat(Ea,"</div>")}).join(""),ya=m.Ov.transformToMineUTCTimeZone(r,N()(s.x).add(6,"day").valueOf(),g),Da="".concat(f," - ").concat(ya),Fa=this.unitInChart[t]?C:null;return"<div class='fragmentation-per-date-chart-tooltip'><div><strong>".concat(2===l?Da:f,"</strong></div>\n            <div>").concat($," ").concat(this.getPoint(s,s.y,Fa),"</div>\n            <div>").concat(b," 25%: ").concat(this.getPoint(s,s.p25,C),"</div>\n            <div>").concat(b," 75%: ").concat(this.getPoint(s,s.p75,C),"</div>\n            <div>Min/Max: ").concat(this.getMinMaxPoint(s,C),"</div>\n            <div>").concat(F," ").concat(this.parseDate(s.firstBlastDate),"</div>\n            <div>").concat(Ta," ").concat(this.parseDate(s.lastBlastDate),"</div>\n            ").concat(Ma,"</div>")}},{key:"getSeries",value:function(t,a,i){return[{color:To,type:"line",name:this.getLegend(a),data:t[a]}]}},{key:"parseDate",value:function(t){return null===t?"-":m.Ov.transformToMineUTCTimeZone(this.mineStateService.getSelectedMineArea(),t,Q)}},{key:"getSideLegend",value:function(t){var a=L.Ab.getUnits(t,this.mineStateService.getSelectedMineArea()),i="siteDashboardTranslation.fragmentationWidget.legend.".concat(t),r=this.translateService.translate(i);return a&&this.unitInChart[t]?"".concat(r,", ").concat(a):r}},{key:"getLegend",value:function(t){return this.getTitle(t)}},{key:"getTitle",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title",i=L.Ab.getUnits(t,this.mineStateService.getSelectedMineArea()),r="siteDashboardTranslation.fragmentationWidget.".concat(a),s=this.translateService.translate(r);return this.unitInChart[t]&&i?"".concat(s," ").concat(this.labels[t],", ").concat(i):"".concat(s," ").concat(this.labels[t])}},{key:"getMinMaxPoint",value:function(t,a){return null===t.min&&null===t.max?"-":"".concat(this.getPointItem(t.min),"/").concat(this.getPointItem(t.max)," ").concat(a)}},{key:"getPointItem",value:function(t){return null===t?"-":"".concat(t)}},{key:"getPoint",value:function(t,a,i){return null===a||t.isNullPoint?"-":i?"".concat(a," ").concat(i):"".concat(a)}},{key:"getStartPeriod",value:function(t){return t.dateFrom&&t.dateTo&&new Date(t.dateTo).getTime()-new Date(t.dateFrom).getTime()>=this.weekIntervalThreholds?1:null}},{key:"getPeriodShowingType",value:function(t,a){var i=864e5;return a-t<i?0:a-t<90*i?1:2}},{key:"getTickConfig",value:function(t,a,i){return 2===t?{tickPositions:[a,i]}:0===t?{tickInterval:36e5}:{tickInterval:864e5}}},{key:"getTickLabel",value:function(t,a){var i=this.mineStateService.getSelectedMineArea();return t.isFirst||t.isLast?m.Ov.transformToMineUTCTimeZone(i,t.value,Q):0===a?m.Ov.transformToMineUTCTimeZone(i,t.value,Ao):2===a?N().utc(t.value).startOf("week").format(Q):m.Ov.transformToMineUTCTimeZone(i,t.value,Q)}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(U),e.LFG(W),e.LFG(_.Hj),e.LFG(V.Vn))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Fo=function(){function n(){(0,h.Z)(this,n)}return(0,p.Z)(n,[{key:"adapt",value:function(o){return o.map(function(t){var a=null===t.y;return Object.assign(Object.assign({},t),{y:null===t.y?0:t.y,isNullPoint:a})})}}]),n}(),Eo=S.mb.siteDashboardFragmentation,It=function(){var n=function(){function c(o,t){(0,h.Z)(this,c),this.mineStateService=o,this.http=t}return(0,p.Z)(c,[{key:"loadData",value:function(t){var a=(0,S.FP)(this.mineStateService.getSelectedMineArea(),Eo);return this.http.post(a,{dateFrom:t.dateFrom,dateTo:t.dateTo,equipmentIds:t.equipment||[],blastIds:t.blastId||[]}).pipe((0,Xe.K)(function(){return(0,Ke.of)({})}))}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(_.Hj),e.LFG(R.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),fe=u.FRAGMENTATION_P_80,pe=u.FRAGMENTATION_LESS_1_IN,he=u.FRAGMENTATION_OVER_1_M,ve=u.FRAGMENTATION_OVER_10_IN,me=u.FRAGMENTATION_OVER_3_IN,wt=function(){var n=function(c){(0,x.Z)(t,c);var o=(0,I.Z)(t);function t(a,i){var r;return(0,h.Z)(this,t),(r=o.call(this)).fragmentationPerDateConfigService=a,r.apiService=i,r}return(0,p.Z)(t,[{key:"getChart",value:function(i){var r=this,s=new Fo,l=Object.assign(Object.assign({},i.dateParams),{equipment:i.equipment,blastId:i.blasts});return this.apiService.loadData(l).pipe((0,k.U)(function(g){var f;return(0,v.Z)(f={},fe,s.adapt(g[fe])),(0,v.Z)(f,pe,s.adapt(g[pe])),(0,v.Z)(f,he,s.adapt(g[he])),(0,v.Z)(f,ve,s.adapt(g[ve])),(0,v.Z)(f,me,s.adapt(g[me])),(0,v.Z)(f,"limits",g.limits),f}),(0,k.U)(function(g){return r.getConfig(g,i.dateParams)}))}},{key:"getConfig",value:function(i,r){var s;return(0,v.Z)(s={},fe,this.adaptField(i,fe,r)),(0,v.Z)(s,pe,this.adaptField(i,pe,r)),(0,v.Z)(s,he,this.adaptField(i,he,r)),(0,v.Z)(s,ve,this.adaptField(i,ve,r)),(0,v.Z)(s,me,this.adaptField(i,me,r)),(0,v.Z)(s,"limits",i.limits),s}},{key:"adaptField",value:function(i,r,s){return(0,T.isEmpty)(i[r])?{}:this.fragmentationPerDateConfigService.getOptions(i,r,s)}}]),t}(H);return n.\u0275fac=function(o){return new(o||n)(e.LFG(xt),e.LFG(It))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Lo=A.a.DEFAULT,xo=u.BLASTABILITY_PREDICTION_DELTA,Io=u.DIGGIND_TIME_PREDICTION_DELTA,wo=u.TIME_PREDICTION_DELTA,kt=function(){var n=function(){function c(o,t,a,i){(0,h.Z)(this,c),this.scatterOptionsService=o,this.timeAggregationService=t,this.mineStateService=a,this.dynamicPipe=i}return(0,p.Z)(c,[{key:"getOptions",value:function(t,a){var i=this,r=(0,G.Z)(t[a].limits,2),s=r[0],l=r[1],g={color:O.C.APPLE,id:"averageResidual",width:1,value:t[a].averageResidual,dashStyle:"LongDash",zIndex:5};return this.timeAggregationService.isWeekly=!1,this.scatterOptionsService.getCommonOptions().mergeOptions((new Z.rc).setChart({marginRight:30,zoomType:"xy"}).setTime(this.timeAggregationService.getTimeOptions(this.mineStateService.getSelectedMineArea())).setXAxis(Object.assign(Object.assign(Object.assign({},this.timeAggregationService.getTimeAxisOptions(t[a].limits)),{title:{text:""}}),this.getTickConfig(s,l,t[a].isDay))).setYAxis({title:{text:this.getTittleForYAxis(a)},plotLines:[{color:O.C.GULL_GAY,width:1,value:0,zIndex:1},g]}).setTooltip({formatter:function(){return i.getTooltip(this,a)}}).setSeries(this.getSeries(t,a,g))).build()}},{key:"getTickConfig",value:function(t,a,i){return i?{tickPositions:[t,a]}:{tickInterval:864e5}}},{key:"getSeries",value:function(t,a,i){var r=this,l=t[a].series.reduce(function(g,f){return Object.assign((0,v.Z)({},f.key,{data:f.data}),g)},{noData:{data:t[a].noData},averageResidual:{data:t[a].averageResidual}});return Object.entries(l).map(function(g){var f=(0,G.Z)(g,2),C=f[0];return Object.assign(Object.assign({},f[1]),r.seriesCreator(C,i))})}},{key:"seriesCreator",value:function(t,a){var i={averageResidual:{color:O.C.APPLE,name:"Average Residual",zIndex:5,events:{legendItemClick:function(){this.visible?this.chart.yAxis[0].removePlotLine("averageResidual"):this.chart.yAxis[0].addPlotLine(a)}}}},r={"2.00":{color:O.C.APPLE,name:"Compliant Burden (\u0394 \u22642%)",zIndex:1},2.01:{color:O.C.SUNDOWN,name:"Not Compliant Burden (\u0394 >2%)",zIndex:2},noData:{color:O.C.SILVER,name:"No Data Burden",zIndex:3}},s={"10.00":{color:O.C.APPLE,name:"Compliant (\u0394 \u226410%)",zIndex:1},"25.00":{color:O.C.CANDLELIGHT,name:"Not Compliant (\u0394 >10% - \u226425%)",zIndex:2},25.01:{color:O.C.SUNDOWN,name:"Not Compliant (\u0394 >25%)",zIndex:3},noData:{color:O.C.SILVER,name:"No Data",zIndex:4}};m.ZA.isHVC(this.mineStateService.getSelectedMineArea())?Object.assign(i,s):Object.assign(i,r);var l=Object.assign(Object.assign({},i[t]),{type:"scatter",marker:{symbol:"circle"}});return{"2.00":l,2.01:l,"10.00":l,"25.00":l,25.01:l,noData:l,averageResidual:Object.assign(Object.assign({},i[t]),{type:"line",dashStyle:"ShortDash",enableMouseTracking:!1,marker:{enabled:!1}})}[t]}},{key:"getTooltip",value:function(t,a){var i=this.mineStateService.getSelectedMineArea(),r=m.Ov.transformToMineUTCTimeZone(i,t.point.x,Lo),l={coal:{complianceMetric:"Burden",complianceProperty:"deltaVal"},hvc:{complianceMetric:"EF",complianceProperty:"efDelta"}}[m.ZA.isHVC(i)?E.q.HVC:"coal"],g=m.ZA.isHVC(i)?L.Ab.getUnits("fragmentationP50",i):L.Ab.getUnits(a,i);return"<div>\n                 Residual: ".concat(this.dynamicPipe.transform(t.point.y,[{token:"customNumber"}]),"\n            </div>\n            <div>\n                  Actual: ").concat(this.dynamicPipe.transform(t.point.actual,[{token:"customNumber"},{token:"unit",args:g}]),"\n            </div>\n            <div>\n                  Predicted: ").concat(this.dynamicPipe.transform(t.point.predicted,[{token:"customNumber"},{token:"unit",args:g}]),"\n            </div>\n            <div>").concat(t.point.path,"</div>\n            <div>Last Drill Date: ").concat(r,"</div>\n            <div>").concat(l.complianceMetric,"\n                   Delta: ").concat(this.dynamicPipe.transform(t.point[l.complianceProperty],[{token:"customNumber"}]),"\n                   ").concat(t.point[l.complianceProperty]||0===t.point[l.complianceProperty]?"%":"","\n            </div>")}},{key:"getTittleForYAxis",value:function(t){var a;switch(t){case xo:a="BI";break;case Io:a="Digging Time";break;case wo:a="Frag. P50";break;default:a=""}return"".concat(a," Residuals (Actual - Prediction)")}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(ke),e.LFG(U),e.LFG(_.Hj),e.LFG(je.e))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Re=u.BLASTABILITY_PREDICTION_DELTA,Ze=u.DIGGIND_TIME_PREDICTION_DELTA,Ne=u.TIME_PREDICTION_DELTA,ko=S.mb.siteDashboardPredictionDelta,Rt=function(){var n=function(c){(0,x.Z)(t,c);var o=(0,I.Z)(t);function t(a,i,r){var s;return(0,h.Z)(this,t),(s=o.call(this)).http=a,s.mineStateService=i,s.predictionDeltaConfigService=r,s}return(0,p.Z)(t,[{key:"getChart",value:function(i){var r=this;return this.http.get((0,S.FP)(this.mineStateService.getSelectedMineArea(),ko),{params:Object.assign({},i.dateParams)}).pipe((0,k.U)(function(s){return r.getConfig(s)}))}},{key:"getConfig",value:function(i){var r;return m.ZA.isHVC(this.mineStateService.getSelectedMineArea())?(0,v.Z)({},Ne,this.hasNoDataForPredictionDelta(i,Ne)?{}:this.predictionDeltaConfigService.getOptions(i,Ne)):((0,v.Z)(r={},Re,this.hasNoDataForPredictionDelta(i,Re)?{}:this.predictionDeltaConfigService.getOptions(i,Re)),(0,v.Z)(r,Ze,this.hasNoDataForPredictionDelta(i,Ze)?{}:this.predictionDeltaConfigService.getOptions(i,Ze)),r)}},{key:"hasNoDataForPredictionDelta",value:function(i,r){return(0,T.isEmpty)(i[r])}}]),t}(H);return n.\u0275fac=function(o){return new(o||n)(e.LFG(R.eN),e.LFG(_.Hj),e.LFG(kt))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Zt=d(5379),Nt=d(38001),Ro=O.C.DODGER_BLUE,Zo=O.C.BLUE_SECONDARY_LIGHT,No=O.C.FRENCH_PASS,Be=u.TOTAL_LOADING_TIME,Ge=u.AVERAGE_LOADING_TIME,Bt=function(){var n=function(){function c(o,t,a){(0,h.Z)(this,c),this.timeAggregationService=o,this.columnsService=t,this.mineStateService=a}return(0,p.Z)(c,[{key:"isWeekly",get:function(){return this.timeAggregationService.isWeekly}},{key:"getOptions",value:function(t,a){var i=this;return this.timeAggregationService.setTimeAggregationType(t[Ge].columns[0].data[0]),this.columnsService.getCommonColumnOptions().mergeOptions((new Z.rc).setChart({spacing:[10,10,25,10]}).setColors([No,Zo]).setTime(this.timeAggregationService.getTimeOptions(this.mineStateService.getSelectedMineArea())).setXAxis(this.timeAggregationService.getTimeAxisOptions(t[Ge].limits)).setPlotOptions({column:{groupPadding:a===Be?0:.1,showInLegend:!1,stacking:a===Be?"normal":null,states:{hover:{color:Ro}}}}).setTooltip({useHTML:!0,formatter:function(){return i.getTooltip(this)}}).setSeries(this.getSeries(t[Ge],a))).build()}},{key:"getSeries",value:function(t,a){var i=this;return t.columns.map(function(r){var s=r.data.map(function(l){return Object.assign(Object.assign({},l),{y:a===Be?l.totalLoadingTime:l.y})});return{pointRange:24*(i.isWeekly?7:1)*3600*1e3,data:s,type:"column"}})}},{key:"getTooltip",value:function(t){return'<span style="font-weight: 500">'.concat(t.point.patternId,"</span> <br>\n            <span>Total loading time: ").concat(t.point.totalLoadingTimeAsStr,"</span> <br>\n            <span>Avg. loading time: ").concat(t.point.averageLoadingTimeAsStr,"</span> <br>\n            <span>").concat(this.timeAggregationService.getTooltipDates(t,this.mineStateService.getSelectedMineArea()),"</span>")}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(U),e.LFG(W),e.LFG(_.Hj))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Bo=O.C.DODGER_BLUE,Go=O.C.BLUE_SECONDARY_LIGHT,Gt=O.C.BLUE_PRIMARY,Yt=function(){var n=function(){function c(o,t){(0,h.Z)(this,c),this.columnService=o,this.mineStateService=t,this.xAxisConfig=Zt.y[Nt.N.LOADING_TIME].xAxis}return(0,p.Z)(c,[{key:"getOptions",value:function(t){var a=this,i=t.data.map(function(s){return s.x}),r={color:Gt,id:"averageValue",width:1,value:this.findAverageBin(i,t.config.averageValue),dashStyle:"LongDash",zIndex:4};return this.columnService.getCommonColumnOptions().mergeOptions((new Z.rc).setChart({events:{load:function(){this.xAxis[0].addPlotLine(r)}}}).setXAxis({type:"category",categories:i,plotLines:[r],labels:{formatter:function(){return a.xAxisConfig[L.j6.getKeyForConfig(a.mineStateService.getSelectedMineArea(),a.xAxisConfig)].tickLabels[this.value]}}}).setPlotOptions({series:{gapSize:0},column:{stacking:null,minPointLength:3,states:{hover:{color:Bo}}}}).setTooltip({animation:!1,formatter:function(){return a.getTooltip(this)}}).setLegend({symbolHeight:12,symbolWidth:15,symbolRadius:0}).setSeries([{type:"column",data:t.data.map(function(s){return 0===s.y?null:s.y}),name:"Distribution",color:Go},{type:"line",color:Gt,name:"Average",dashStyle:"ShortDash",marker:{enabled:!1},events:{legendItemClick:function(){this.visible?this.chart.xAxis[0].removePlotLine("averageValue"):this.chart.xAxis[0].addPlotLine(r)}}}])).build()}},{key:"getTooltip",value:function(t){return"".concat(this.xAxisConfig[L.j6.getKeyForConfig(this.mineStateService.getSelectedMineArea(),this.xAxisConfig)].tooltipBinRanges[t.x],"<br> Count: <b>").concat(t.y,"<b>")}},{key:"findAverageBin",value:function(t,a){var i=null;return t.forEach(function(r,s,l){(1===l.length||s>0&&s<=l.length-1&&a>l[s]&&a<=l[s+1]||s===l.length-1&&a>l[l.length-1])&&(i=s)}),i}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(W),e.LFG(_.Hj))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),oe=u.AVERAGE_LOADING_TIME,Ht=u.TOTAL_LOADING_TIME,Vt=u.DISTRIBUTION_LOADING_TIME,Yo=S.mb.siteDashboardLoadingTime,Ut=function(){var n=function(c){(0,x.Z)(t,c);var o=(0,I.Z)(t);function t(a,i,r,s){var l;return(0,h.Z)(this,t),(l=o.call(this)).mineStateService=a,l.http=i,l.loadingTimeAggregatedConfigService=r,l.loadingTimeDistributionConfigService=s,l.xAxisConfig=Zt.y[Nt.N.LOADING_TIME].xAxis,l}return(0,p.Z)(t,[{key:"getChart",value:function(i){var r=this;return this.http.get((0,S.FP)(this.mineStateService.getSelectedMineArea(),Yo),{params:i.dateParams}).pipe((0,k.U)(function(s){return r.getConfig(s)}))}},{key:"getConfig",value:function(i){var r;return(0,v.Z)(r={},oe,this.hasNoData(i,oe)?{}:this.loadingTimeAggregatedConfigService.getOptions(i,oe)),(0,v.Z)(r,Ht,this.hasNoData(i,oe)?{}:this.loadingTimeAggregatedConfigService.getOptions(i,Ht)),(0,v.Z)(r,Vt,this.hasNoData(i,oe)?{}:this.loadingTimeDistributionConfigService.getOptions(i[Vt].loadingTime)),r}},{key:"hasNoData",value:function(i,r){var s;return(0,T.isEmpty)(i[r])||(0,T.isEmpty)(null===(s=i[r])||void 0===s?void 0:s.columns)}}]),t}(H);return n.\u0275fac=function(o){return new(o||n)(e.LFG(_.Hj),e.LFG(R.eN),e.LFG(Bt),e.LFG(Yt))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Wt=d(73237),jt=d(61120),Jt=d(31307),Ho=d(98871),Vo=d(20224),Uo=d(19889),Wo=d(13761),jo=d(97202),Jo=d(62788),zt=d(1133);function zo(n,c){if(1&n){var o=e.EpF();e.TgZ(0,"dabo-time-ranges-switcher",14),e.NdJ("periodSelected",function(i){return e.CHM(o),e.oxw(2).onTimePeriodChange(i)}),e.qZA()}if(2&n){var t=e.oxw(2);e.Q6J("isCurrentMonthDefault",!0)("disabled",t.isPageNotAvailable)("resetPeriodValue",t.timeRange)("mineSite",t.mine)("minDate",t.minDate)("selectedPeriodChanged",t.selectedPeriodType)}}function Qo(n,c){if(1&n){var o=e.EpF();e.TgZ(0,"dabo-time-ranges-datepicker",15),e.NdJ("selectedCustomDates",function(i){return e.CHM(o),e.oxw(2).onCustomDatesChange(i)}),e.qZA()}if(2&n){var t=e.oxw(2);e.Q6J("disabled",t.isPageNotAvailable)("minDate",t.minDate)("customDatesToReset",t.timeRange)}}var $o=function(){return{text:"siteDashboardTranslation.filters.blasts.title",translated:!0}};function qo(n,c){if(1&n){var o=e.EpF();e.TgZ(0,"div",16)(1,"dabo-tree-navigation-dropdown",17),e.NdJ("selectionChanged",function(i){return e.CHM(o),e.oxw(2).blastsValueChanged(i)}),e.ALo(2,"async"),e.qZA()()}if(2&n){var t=e.oxw(2);e.xp6(1),e.Q6J("titleOptions",e.DdM(5,$o))("excludeMode",!0)("nodes",e.lcZ(2,3,t.customFiltersOptions.blasts))}}var Ko=function(){return{text:"siteDashboardTranslation.filters.equipment.title",translated:!0}};function Xo(n,c){if(1&n){var o=e.EpF();e.TgZ(0,"div",16)(1,"dabo-dropdown-filter",18),e.NdJ("filterValueChange",function(i){return e.CHM(o),e.oxw(2).equipmentValueChanged(i)}),e.ALo(2,"async"),e.qZA()()}if(2&n){var t=e.oxw(2);e.xp6(1),e.Q6J("titleOptions",e.DdM(4,Ko))("filter",e.lcZ(2,2,t.customFiltersOptions.equipment))}}function ei(n,c){if(1&n){var o=e.EpF();e.TgZ(0,"dabo-dashboard-header",1),e.NdJ("mobileDetected",function(r){return e.CHM(o),e.oxw().isMobile=r}),e.ynx(1,2),e.TgZ(2,"div",3)(3,"span",4),e.NdJ("click",function(){return e.CHM(o),e.oxw().openHelpCenter()}),e._UZ(4,"span",5)(5,"span",6),e.qZA()(),e.BQk(),e.ynx(6,7),e.TgZ(7,"dabo-time-period-dropdown",8),e.NdJ("timePeriodChange",function(r){return e.CHM(o),e.oxw().onPeriodTypeChange(r)}),e.qZA(),e.BQk(),e.ynx(8,9),e.YNc(9,zo,1,6,"dabo-time-ranges-switcher",10),e.YNc(10,Qo,1,3,"dabo-time-ranges-datepicker",11),e.TgZ(11,"div",12),e.YNc(12,qo,3,6,"div",13),e.YNc(13,Xo,3,5,"div",13),e.qZA(),e.BQk(),e.qZA()}if(2&n){var t=c.$implicit,a=e.oxw();e.Q6J("isDisabled",a.isPageNotAvailable)("title",t("title.site-dashboard")),e.xp6(7),e.Q6J("panelClass",a.isMobile?"dab-select":"")("disabled",a.isPageNotAvailable)("selectedPeriodType",a.selectedPeriodType)("periodDropdownOptions",a.timePeriodDropdown),e.xp6(2),e.Q6J("ngIf",!a.isCustomTimePeriod),e.xp6(1),e.Q6J("ngIf",a.isCustomTimePeriod),e.xp6(2),e.Q6J("ngIf",a.customFiltersVisibility.equipment),e.xp6(1),e.Q6J("ngIf",a.customFiltersVisibility.blasts)}}var ti=ce.K.SITE_LEVEL_DASHBOARD,ni=function(){var n=function(c){(0,x.Z)(t,c);var o=(0,I.Z)(t);function t(a,i,r,s,l,g,f,C,M){var b;return(0,h.Z)(this,t),(b=o.call(this,a,i,s)).pagePermissionService=r,b.stateService=l,b.filtersService=g,b.filtersVisibilityService=f,b.loadingService=C,b.siteDashboardModalService=M,b.selectedPeriodType=B.v.MONTH,b.timePeriodDropdown=Ln,b.isMobile=!1,b.minDates=(0,v.Z)({},E.q.CDA,N()("2021-09-01")),b}return(0,p.Z)(t,[{key:"ngOnInit",value:function(){(0,Wt.Z)((0,jt.Z)(t.prototype),"ngOnInit",this).call(this),this.setInnerFiltersFields(),this.loadCustomFilters(),this.setMinDate(this.mine)}},{key:"isPageNotAvailable",get:function(){var i=this.stateService.getState();return!this.pagePermissionService.canAccess(ti)||i.disabled}},{key:"setFiltersState",value:function(){this.filtersService.updateFilters({dates:this.timeRange,period:this.selectedPeriodType})}},{key:"getDefaultTime",value:function(){return(0,S.XD)(this.mine)}},{key:"openHelpCenter",value:function(){return this.siteDashboardModalService.openHelpCenter()}},{key:"equipmentValueChanged",value:function(i){var r=i.filter(function(s){return!s.selected}).map(function(s){return s.id});this.filtersService.updateFilters({equipment:r})}},{key:"blastsValueChanged",value:function(i){this.filtersService.updateFilters({blasts:i})}},{key:"subscribeOnMineChange",value:function(){var i=this;this.mineStateService.selectedMineArea$.pipe((0,Jt.T)(1),(0,D.R)(this.destroy$)).subscribe(function(r){i.onMineChange(r),i.setMinDate(r.value),i.setInnerFiltersFields(),i.filtersService.hardResetFilters({dates:i.timeRange,period:i.selectedPeriodType}),i.cdr.markForCheck()})}},{key:"setInnerFiltersFields",value:function(){var i=this.stateService.getState();this.selectedPeriodType=i.selectedPeriodType,this.timeRange=i.timeRange}},{key:"loadCustomFilters",value:function(){var i=this;this.mineStateService.selectedMineArea$.pipe((0,D.R)(this.destroy$)).subscribe(function(){var r=i.filtersVisibilityService.getVisibility();i.customFiltersOptions=i.loadingService.getFiltersOptions(r),i.customFiltersVisibility=r})}},{key:"setMinDate",value:function(i){this.minDate=this.minDates[i]||null}},{key:"ngOnDestroy",value:function(){this.filtersService.hardResetFilters({dates:null,period:B.v.MONTH}),(0,Wt.Z)((0,jt.Z)(t.prototype),"ngOnDestroy",this).call(this)}}]),t}(Ho.E);return n.\u0275fac=function(o){return new(o||n)(e.Y36(e.sBO),e.Y36(_.Hj),e.Y36(_.GO),e.Y36(_.mb),e.Y36(se),e.Y36(ne),e.Y36(qe),e.Y36($e),e.Y36(Pe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["dabo-site-dashboard-header"]],inputs:{periodDropdownOptions:"periodDropdownOptions",selectedMineArea:"selectedMineArea"},features:[e.qOj],decls:1,vars:0,consts:[[3,"isDisabled","title","mobileDetected",4,"transloco"],[3,"isDisabled","title","mobileDetected"],["help",""],[1,"help-btn"],[1,"icon","icon-help-center",3,"click"],[1,"path1"],[1,"path2"],["timePeriodTypeDropdown",""],[3,"panelClass","disabled","selectedPeriodType","periodDropdownOptions","timePeriodChange"],["timeFilters",""],[3,"isCurrentMonthDefault","disabled","resetPeriodValue","mineSite","minDate","selectedPeriodChanged","periodSelected",4,"ngIf"],[3,"disabled","minDate","customDatesToReset","selectedCustomDates",4,"ngIf"],[1,"filter-wrapper"],["class","filter-item",4,"ngIf"],[3,"isCurrentMonthDefault","disabled","resetPeriodValue","mineSite","minDate","selectedPeriodChanged","periodSelected"],[3,"disabled","minDate","customDatesToReset","selectedCustomDates"],[1,"filter-item"],[3,"titleOptions","excludeMode","nodes","selectionChanged"],[3,"titleOptions","filter","filterValueChange"]],template:function(o,t){1&o&&e.YNc(0,ei,14,10,"dabo-dashboard-header",0)},directives:[V.KI,Vo.E,Uo.Q,y.O5,Wo.D,jo.J,Jo.p,zt.V],pipes:[y.Ov],styles:[".help-btn[_ngcontent-%COMP%]{cursor:pointer}.filter-wrapper[_ngcontent-%COMP%]{display:flex}.filter-wrapper[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]{height:64px;line-height:62px;border-right:1px solid #ebeefc;padding:0 20px}"],changeDetection:0}),n}(),Qt=d(23322),oi=d(26215),ii=d(71654);function ai(n,c){if(1&n&&e._UZ(0,"span",8),2&n){var o=e.oxw(2);e.Q6J("ngClass",o.getStyle())}}function ri(n,c){if(1&n&&(e.ynx(0),e.YNc(1,ai,1,1,"span",7),e.BQk()),2&n){var o=e.oxw();e.xp6(1),e.Q6J("ngIf",!o.widgetData.normal)}}function ci(n,c){if(1&n&&e._UZ(0,"span",10),2&n){var o=e.oxw(2);e.Q6J("ngClass",o.getStyle())}}function si(n,c){if(1&n&&(e.ynx(0),e.YNc(1,ci,1,1,"span",9),e.BQk()),2&n){var o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.widgetData.current)}}function li(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"unit"),e.ALo(3,"detectNullValue"),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.Oqu(e.xi3(2,1,e.lcZ(3,4,o.widgetData.current),o.units))}}function di(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"customCurrency"),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.Oqu(e.xi3(2,1,o.widgetData.current,"USD"))}}function gi(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"exponentialConnector"),e.ALo(3,"detectNullValue"),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.Oqu(e.Dn7(2,1,e.lcZ(3,5,o.widgetData.current),2,!0))}}function ui(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"detectNullValue"),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,o.widgetData.previous)," previous ",o.period,"")}}function fi(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"customCurrency"),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.AsE(" ",e.xi3(2,2,null==o.widgetData?null:o.widgetData.previous,"USD")," previous ",o.period," ")}}function pi(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"exponentialConnector"),e.ALo(3,"detectNullValue"),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.AsE("",e.Dn7(2,2,e.lcZ(3,6,o.widgetData.previous),2,!0)," previous ",o.period,"")}}var hi=["*"],vi=function(){var n=function(){function c(){(0,h.Z)(this,c),this.type=null,this.units="",this.currency=!1,this.customStyle=null,this.exponent=!1}return(0,p.Z)(c,[{key:"getStyle",value:function(){var t="";switch(this.type){case"arrow":t=this.getArrowState();break;case"circle":t=this.getCircleState()}return this.customStyle?"".concat(t," ").concat(this.customStyle):t}},{key:"getCircleState",value:function(){return this.widgetData.high?"icon-circle--positive":this.widgetData.low?"icon-circle--negative":this.widgetData.inRange?"icon-circle--positive":"icon-circle--negative"}},{key:"getArrowState",value:function(){return this.widgetData.high?"icon-godown":this.widgetData.low?"icon-growup":void 0}},{key:"getTooltip",value:function(t){return t?this.tooltipMsg:"No data available"}}]),c}();return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["dabo-site-dashboard-single-widget"]],inputs:{widgetData:"widgetData",type:"type",title:"title",units:"units",period:"period",tooltipMsg:"tooltipMsg",currency:"currency",customStyle:"customStyle",exponent:"exponent"},ngContentSelectors:hi,decls:16,vars:11,consts:[["fxLayout","column wrap",1,"widget__body"],["fxFlex","100",1,"widget__title"],[1,"widget_title-indicator"],[4,"ngIf"],["fxFlex","100","fxLayout","row wrap",1,"widget__value","widget__value--current"],["matTooltipClass","widget-tooltip-current","matTooltipPosition","above",3,"matTooltip"],["fxFlex","100","matTooltipClass","widget-tooltip-previous","matTooltipPosition","after",1,"widget__value","widget__value--previous",3,"matTooltip"],["class","icon",3,"ngClass",4,"ngIf"],[1,"icon",3,"ngClass"],["class","icon icon-circle",3,"ngClass",4,"ngIf"],[1,"icon","icon-circle",3,"ngClass"]],template:function(o,t){1&o&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,ri,2,1,"ng-container",3),e.YNc(4,si,2,1,"ng-container",3),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5),e.YNc(8,li,4,6,"span",3),e.YNc(9,di,3,4,"span",3),e.YNc(10,gi,4,7,"span",3),e.qZA(),e.Hsn(11),e.qZA(),e.TgZ(12,"div",6),e.YNc(13,ui,3,4,"span",3),e.YNc(14,fi,3,5,"span",3),e.YNc(15,pi,4,8,"span",3),e.qZA()()),2&o&&(e.xp6(3),e.Q6J("ngIf","arrow"===t.type),e.xp6(1),e.Q6J("ngIf","circle"===t.type),e.xp6(1),e.hij(" ",t.title," "),e.xp6(2),e.Q6J("matTooltip",t.getTooltip(t.widgetData.current)),e.xp6(1),e.Q6J("ngIf",!t.currency&&!t.exponent),e.xp6(1),e.Q6J("ngIf",t.currency&&!t.exponent),e.xp6(1),e.Q6J("ngIf",t.exponent),e.xp6(2),e.Q6J("matTooltip",t.getTooltip(t.widgetData.previous)),e.xp6(1),e.Q6J("ngIf",!t.currency&&!t.exponent),e.xp6(1),e.Q6J("ngIf",t.currency&&!t.exponent),e.xp6(1),e.Q6J("ngIf",t.exponent))},directives:[w.xw,w.yH,y.O5,y.mk,Qt.oO,We.gM],pipes:[oi.O,ii.R,ht.R,ee.lm],styles:[".widget__body[_ngcontent-%COMP%]{padding-left:16px;position:relative}.widget__title[_ngcontent-%COMP%]{font-weight:500;font-size:14px;line-height:17px;color:#282d32;margin-left:13px;margin-bottom:4px}.widget__title-indicator.hole-powder[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;transform:rotate(180deg)}.widget__title[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;left:0;top:0}.widget__title[_ngcontent-%COMP%]   .icon-godown[_ngcontent-%COMP%]:before{color:#39be04}.widget__title[_ngcontent-%COMP%]   .icon-growup[_ngcontent-%COMP%]:before{color:#f25050}.widget__title[_ngcontent-%COMP%]   .icon-godown.invert[_ngcontent-%COMP%]:before{color:#f25050}.widget__title[_ngcontent-%COMP%]   .icon-growup.invert[_ngcontent-%COMP%]:before{color:#39be04}.widget__title[_ngcontent-%COMP%]   .icon-godown.hole-powder[_ngcontent-%COMP%], .widget__title[_ngcontent-%COMP%]   .icon-growup.hole-powder[_ngcontent-%COMP%]{display:flex;transform:rotate(180deg)}.widget__title[_ngcontent-%COMP%]   .icon-circle--positive[_ngcontent-%COMP%]:before{color:#39be04}.widget__title[_ngcontent-%COMP%]   .icon-circle--negative[_ngcontent-%COMP%]:before{color:#f25050}.widget__value[_ngcontent-%COMP%]{margin-left:13px;width:max-content}.widget__value[_ngcontent-%COMP%]     .mat-select--custom{display:flex;align-items:center;margin-left:10px;font-size:13px;line-height:16px;font-weight:400}.widget__value[_ngcontent-%COMP%]     .mat-select--custom .mat-form-field-infix{padding:0;margin:0;border:0}.widget__value[_ngcontent-%COMP%]     .mat-select--custom .mat-form-field-wrapper{padding:0!important}.widget__value[_ngcontent-%COMP%] + .widget__value[_ngcontent-%COMP%]{margin-top:4px}.widget__value[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:4px;white-space:nowrap}.widget__value--current[_ngcontent-%COMP%]{font-weight:400;font-size:21px;line-height:25px}.widget__value--previous[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:14px;color:#586b7a}"]}),n}();function mi(n,c){if(1&n&&(e.TgZ(0,"mat-option",6),e._uU(1),e.qZA()),2&n){var o=c.$implicit;e.Q6J("value",o.value),e.xp6(1),e.hij(" ",o.label," ")}}function bi(n,c){if(1&n){var o=e.EpF();e.TgZ(0,"div",1)(1,"dabo-site-dashboard-single-widget",2)(2,"mat-form-field",3)(3,"mat-label"),e._uU(4),e.qZA(),e.TgZ(5,"mat-select",4),e.NdJ("selectionChange",function(i){return e.CHM(o),e.oxw().onWidgetValueChange(i)})("valueChange",function(i){return e.CHM(o),e.oxw().dynamicWidgetActiveValue=i}),e.YNc(6,mi,2,2,"mat-option",5),e.qZA()()()()}if(2&n){var t=e.oxw();e.xp6(1),e.Q6J("widgetData",null==t.widgetsData?null:t.widgetsData.blastCost[t.dynamicWidgetActiveValue])("type","arrow")("title","Blast Cost")("currency",!0)("period",t.period)("tooltipMsg","Per Blast date"),e.xp6(3),e.Oqu(t.blastCostDropdown[0].label),e.xp6(1),e.Q6J("value",t.dynamicWidgetActiveValue),e.xp6(1),e.Q6J("ngForOf",t.blastCostDropdown)}}function _i(n,c){if(1&n&&(e.TgZ(0,"div",1),e._UZ(1,"dabo-site-dashboard-single-widget",7),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.Q6J("widgetData",null==o.widgetsData?null:o.widgetsData.avgBlastability)("title","Avg. Blastability:")("units","BI")("period",o.period)("tooltipMsg",o.isMetalMine?"Per End Drill date":"Per Blast date")}}function Ci(n,c){if(1&n&&(e.TgZ(0,"div",1),e._UZ(1,"dabo-site-dashboard-single-widget",8),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.Q6J("widgetData",null==o.widgetsData?null:o.widgetsData.avgDiggability)("type","circle")("title","Avg. Diggability:")("units","tons-force")("period",o.period)("tooltipMsg","Per Blast date")}}function Oi(n,c){if(1&n&&(e.TgZ(0,"div",1),e._UZ(1,"dabo-site-dashboard-single-widget",9),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.Q6J("widgetData",null==o.widgetsData?null:o.widgetsData.avgHolePowderFactor)("type","arrow")("title","Avg. Powder Factor:")("units","kg/m\xb3")("period",o.period)("tooltipMsg","Per Blast date")("customStyle","hole-powder")}}function Si(n,c){if(1&n&&(e.TgZ(0,"div",1),e._UZ(1,"dabo-site-dashboard-single-widget",10),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.Q6J("widgetData",null==o.widgetsData?null:o.widgetsData.avgAnfo)("type","arrow")("title","ANFO(eq)/avgBI:")("period",o.period)("tooltipMsg","Per Blast date")("exponent",!0)}}function Pi(n,c){if(1&n&&(e.TgZ(0,"div",1),e._UZ(1,"dabo-site-dashboard-single-widget",9),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.Q6J("widgetData",null==o.widgetsData?null:o.widgetsData.avgDrillProductivity)("type","arrow")("title","Avg. Drill Productivity:")("units",o.isRDO?"ft/dr.hr":"m/dr.hr")("period",o.period)("tooltipMsg","Per Drill date")("customStyle","invert")}}function Ti(n,c){if(1&n&&(e.TgZ(0,"div",1),e._UZ(1,"dabo-site-dashboard-single-widget",11),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.Q6J("widgetData",null==o.widgetsData?null:o.widgetsData.avgShovelLoadingTime)("type","arrow")("title",o.avgShovelLoadingTimeTitle())("tooltipMsg","Per Start Loading date")("period",o.period)}}function Mi(n,c){if(1&n&&(e.TgZ(0,"div",1),e._UZ(1,"dabo-site-dashboard-single-widget",8),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.Q6J("widgetData",null==o.widgetsData?null:o.widgetsData.avgEnergyFactor)("type","circle")("title","Avg. Energy Factor:")("units","MJ/t")("period",o.period)("tooltipMsg","Per End Drill date")}}var yi=function(){var n=function(){function c(o,t,a){(0,h.Z)(this,c),this.cdr=o,this.mineStateService=t,this.permissionsService=a,this.blastCostDropdown=[],this.dynamicWidgetActiveValue="",this.period="month",this.rdoTitle="Avg. Muckpile Loading Time:",this.defaultTitle="Avg. Shovel Loading Time:"}return(0,p.Z)(c,[{key:"selectedPeriod",set:function(t){switch(t){case"month":case"year":this.period=t;break;case"custom":this.period="period"}}},{key:"ngOnChanges",value:function(){this.blastCostDropdown=this.isMetalMine?Rn:kn,this.dynamicWidgetActiveValue=this.blastCostDropdown[0].value}},{key:"avgShovelLoadingTimeTitle",value:function(){return this.isRDO?this.rdoTitle:this.defaultTitle}},{key:"onWidgetValueChange",value:function(t){this.dynamicWidgetActiveValue=t.value,this.cdr.markForCheck()}},{key:"isPresented",value:function(t){return this.permissionsService.getSiteLevelWidgetsPermissions()[t]}},{key:"isMetalMine",get:function(){return m.ZA.isMetalMine(this.mineStateService.getSelectedMineArea())}},{key:"isRDO",get:function(){return m.ZA.isRDO(this.mineStateService.getSelectedMineArea())}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.Y36(e.sBO),e.Y36(_.Hj),e.Y36(_.$A))},n.\u0275cmp=e.Xpm({type:n,selectors:[["dabo-site-dashboard-widgets"]],inputs:{widgetsData:"widgetsData",selectedPeriod:"selectedPeriod"},features:[e.TTD],decls:8,vars:8,consts:[["class","widget",4,"ngIf"],[1,"widget"],[3,"widgetData","type","title","currency","period","tooltipMsg"],["floatLabel","never",1,"mat-select--custom"],["disableOptionCentering","","panelClass","site-dashboard-dropdown-list","disableRipple","",3,"value","selectionChange","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"widgetData","title","units","period","tooltipMsg"],[3,"widgetData","type","title","units","period","tooltipMsg"],[3,"widgetData","type","title","units","period","tooltipMsg","customStyle"],[3,"widgetData","type","title","period","tooltipMsg","exponent"],[3,"widgetData","type","title","tooltipMsg","period"]],template:function(o,t){1&o&&(e.YNc(0,bi,7,9,"div",0),e.YNc(1,_i,2,5,"div",0),e.YNc(2,Ci,2,6,"div",0),e.YNc(3,Oi,2,7,"div",0),e.YNc(4,Si,2,6,"div",0),e.YNc(5,Pi,2,7,"div",0),e.YNc(6,Ti,2,5,"div",0),e.YNc(7,Mi,2,6,"div",0)),2&o&&(e.Q6J("ngIf",t.isPresented("blastCost")),e.xp6(1),e.Q6J("ngIf",t.isPresented("avgBlastability")),e.xp6(1),e.Q6J("ngIf",t.isPresented("avgDiggability")),e.xp6(1),e.Q6J("ngIf",t.isPresented("avgPowderFactor")),e.xp6(1),e.Q6J("ngIf",t.isPresented("avgAnfo")),e.xp6(1),e.Q6J("ngIf",t.isPresented("avgDrillProductivity")),e.xp6(1),e.Q6J("ngIf",t.isPresented("avgShovelLoadingTime")),e.xp6(1),e.Q6J("ngIf",t.isPresented("avgEnergyFactor")))},directives:[y.O5,vi,_e.KE,_e.hX,He.gD,y.sg,Oe.ey],styles:["[_nghost-%COMP%]{padding-top:6px}.widget[_ngcontent-%COMP%]{margin-bottom:28px;padding-bottom:20px;padding-right:20px;flex:1 1 150px}@media only screen and (max-width: 960px){.widget[_ngcontent-%COMP%]{flex:1 1 calc(50vw - 60px)}.widget[_ngcontent-%COMP%]:nth-child(even){padding-right:0}}"]}),n}(),Di=d(84872),Ai=d(81433),$t=d(82768);function Fi(n,c){if(1&n&&e._UZ(0,"dabo-prediction-tracking-table",6),2&n){var o=e.oxw();e.Q6J("predictedVsActualColumns",o.predictionColumns)("columns",o.singleValueColumns)("data",o.tableData)("getRange",o.getRange.bind(o))("displayedColumns",o.displayedColumns)}}function Ei(n,c){1&n&&e.GkF(0)}function Li(n,c){if(1&n&&e.YNc(0,Ei,1,0,"ng-container",7),2&n){var o=e.oxw(),t=e.MAs(1),a=e.MAs(5);e.Q6J("ngTemplateOutlet",null!=o.tableData&&o.tableData.length?t:a)}}function xi(n,c){1&n&&e._UZ(0,"dabo-no-data-message")}function Ii(n,c){1&n&&(e.ynx(0),e.TgZ(1,"div",8),e._UZ(2,"div",9),e.qZA(),e.BQk())}var wi=function(){var n=function(c){(0,x.Z)(t,c);var o=(0,I.Z)(t);function t(a,i,r,s,l,g,f){var C;return(0,h.Z)(this,t),(C=o.call(this)).siteDashboardService=a,C.route=i,C.cdr=r,C.predictionTrackingService=s,C.calculationService=l,C.mineStateService=g,C.filtersService=f,C.tableData=[],C.predictionColumns=[],C.singleValueColumns=[],C}return(0,p.Z)(t,[{key:"ngOnInit",value:function(){var i=this;this.filtersService.onFilterChanged().pipe((0,j.w)(function(r){return i.cancelRouteSubscription(),i.loadTable(r)}),(0,D.R)(this.destroy$)).subscribe(function(r){i.onLoad(r)},function(){i.onError()}),this.routeDataSubscription=this.route.data.pipe((0,j.w)(function(){return i.loadTable()}),(0,D.R)(this.destroy$)).subscribe(function(r){i.onLoad(r)},function(){i.onError()})}},{key:"getRange",value:function(i){return xn[this.mineStateService.getSelectedMineArea()===E.q.HVC?E.q.HVC:"coal"].find(function(s){return i>=s.min&&i<=s.max})}},{key:"displayedColumns",get:function(){var i=this.singleValueColumns.map(function(s){return s.property}),r=this.predictionColumns.map(function(s){return s.property});return["color"].concat((0,ae.Z)(i),(0,ae.Z)(r))}},{key:"cancelRouteSubscription",value:function(){this.routeDataSubscription&&(this.routeDataSubscription.unsubscribe(),this.routeDataSubscription=null)}},{key:"loadTable",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isLoading=!0;var r=i?this.siteDashboardService.getDateRequestParams(i.dates,i.period):this.siteDashboardService.getDateRequestParams();return this.cdr.markForCheck(),this.predictionTrackingService.getTable({dateParams:r})}},{key:"onLoad",value:function(i){this.predictionColumns=this.calculationService.getPredictedVsActualColumns(),this.singleValueColumns=this.calculationService.getSingleValueColumns(),this.tableData=i,this.isLoading=!1,this.cdr.detectChanges()}},{key:"onError",value:function(){this.isLoading=!1,this.cdr.detectChanges()}}]),t}(m.eO);return n.\u0275fac=function(o){return new(o||n)(e.Y36(te),e.Y36(Y.gz),e.Y36(e.sBO),e.Y36(it),e.Y36(ye),e.Y36(_.Hj),e.Y36(ne))},n.\u0275cmp=e.Xpm({type:n,selectors:[["dabo-prediction-tracking-widget"]],features:[e.qOj],decls:9,vars:2,consts:[["table",""],["template",""],["noData",""],["widgetIcon","icon-target","widgetTitle","Predictions Tracking",1,"teck-basic-card","site-dashboard-prediction-tracking-container"],["widgetBody","",1,"prediction-tracking-content"],[4,"ngIf","ngIfElse"],["sortActive","lastDate","sortDirection","desc","sortDisableClear","","complianceProp","compliancePercentage",3,"predictedVsActualColumns","columns","data","getRange","displayedColumns"],[4,"ngTemplateOutlet"],["fxFill","","fxLayout","column","fxLayoutAlign","center center",1,"base-spinner-wrapper"],[1,"spinner"]],template:function(o,t){if(1&o&&(e.YNc(0,Fi,1,5,"ng-template",null,0,e.W1O),e.YNc(2,Li,1,1,"ng-template",null,1,e.W1O),e.YNc(4,xi,1,0,"ng-template",null,2,e.W1O),e.TgZ(6,"dabo-widget-collapsible",3)(7,"div",4),e.YNc(8,Ii,3,0,"ng-container",5),e.qZA()()),2&o){var a=e.MAs(3);e.xp6(8),e.Q6J("ngIf",t.isLoading)("ngIfElse",a)}},directives:[Di.K,y.tP,Ai.Y,$t._,y.O5,w.s9,w.xw,w.Wh],styles:["[_nghost-%COMP%]     .mat-accordion>.mat-expansion-panel{margin-bottom:20px}[_nghost-%COMP%]     .icon-target:before{color:#39be04}.site-dashboard-prediction-tracking-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box;margin:auto 0}.site-dashboard-prediction-tracking-container[_ngcontent-%COMP%]   .prediction-tracking-content[_ngcontent-%COMP%]   .base-spinner-wrapper[_ngcontent-%COMP%]{margin:20px 0}"]}),n}(),qt=d(22868),ki=d(10787),Ui=new Map([[P.BLAST_COST_PER_PATTERN,_t],[P.BLAST_COST_OVER_TIME,pt],[P.SHOVEL_OPERATOR_FEEDBACKS,Tt],[P.SHOVEL_OPERATOR_ALARMS,St],[P.POWDER_FACTOR_VS_BLASTABILITY,yt],[P.LOADING_TIME,Ut],[P.PREDICTION_DELTA,Rt],[P.FRAGMENTATION_PER_DATE,wt]]);function Wi(n,c){if(1&n&&(e.TgZ(0,"mat-checkbox",1),e._uU(1),e.qZA()),2&n){var o=e.oxw();e.Q6J("formControl",o.excludeForm),e.xp6(1),e.Oqu(null==o.exclude?null:o.exclude.description)}}var ji=function(){var n=function(){function c(){(0,h.Z)(this,c),this.excludeValueChange=new e.vpe}return(0,p.Z)(c,[{key:"exclude",get:function(){return this._exclude},set:function(t){void 0!==t&&(this.excludeForm=new q.NI(t.value),this._exclude=t,this.excludeValueChange.emit(this.excludeForm.valueChanges))}}]),c}();return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["dabo-site-dashboard-chart-exclude-checkbox"]],inputs:{exclude:"exclude"},outputs:{excludeValueChange:"excludeValueChange"},decls:1,vars:1,consts:[["class","exclude-checkbox",3,"formControl",4,"ngIf"],[1,"exclude-checkbox",3,"formControl"]],template:function(o,t){1&o&&e.YNc(0,Wi,2,2,"mat-checkbox",0),2&o&&e.Q6J("ngIf",t.excludeForm)},directives:[y.O5,Ue.oG,q.JJ,q.oH],styles:[".exclude-checkbox[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:20px 0 0}"]}),n}(),Ji=d(80076),zi=function(){var n=(0,p.Z)(function c(){(0,h.Z)(this,c),this.blastabilityRangeChanged=new e.vpe,this.powderFactorRangeChanged=new e.vpe});return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["dabo-site-dashboard-sliders"]],inputs:{extremes:"extremes"},outputs:{blastabilityRangeChanged:"blastabilityRangeChanged",powderFactorRangeChanged:"powderFactorRangeChanged"},decls:3,vars:12,consts:[[1,"sliders"],[1,"slider",3,"title","min","max","step","value0","value1","rangeChange"]],template:function(o,t){1&o&&(e.TgZ(0,"section",0)(1,"dabo-range-slider",1),e.NdJ("rangeChange",function(i){return t.powderFactorRangeChanged.emit(i)}),e.qZA(),e.TgZ(2,"dabo-range-slider",1),e.NdJ("rangeChange",function(i){return t.blastabilityRangeChanged.emit(i)}),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("title","Powder Factor:")("min",0)("max",1.5)("step",.05)("value0",t.extremes.powderFactorMin)("value1",t.extremes.powderFactorMax),e.xp6(1),e.Q6J("title","Blastability:")("min",0)("max",60)("step",1)("value0",t.extremes.blastabilityMin)("value1",t.extremes.blastabilityMax))},directives:[Ji.A],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;padding-top:20px;font-size:11px;color:#586b7a}.sliders[_ngcontent-%COMP%]{display:flex}.sliders[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:not(:first-child){padding-left:60px}"]}),n}();function Qi(n,c){if(1&n){var o=e.EpF();e.TgZ(0,"div",11)(1,"span",12),e.NdJ("click",function(a){return e.CHM(o),e.oxw().openHelpCenter(a)}),e._UZ(2,"span",13)(3,"span",14),e.qZA()()}}var $i=function(c){return{text:c}};function qi(n,c){if(1&n){var o=e.EpF();e.TgZ(0,"dabo-dropdown-filter",19),e.NdJ("filterValueChange",function(i){return e.CHM(o),e.oxw(2).handleFilterChanged(i)}),e.qZA()}if(2&n){var t=e.oxw(2);e.Q6J("btnIcon","icon-filter")("filter",t.filterOptions)("titleOptions",e.VKq(3,$i,null==t.chartSetting.filter?null:t.chartSetting.filter.title))}}var Ki=function(c){return{active:c}};function Xi(n,c){if(1&n){var o=e.EpF();e.ynx(0),e.TgZ(1,"button",22),e.NdJ("click",function(r){var l=e.CHM(o).$implicit;return e.oxw(3).changeMetricType(l.value,l.label,r)}),e._uU(2),e.qZA(),e.BQk()}if(2&n){var t=c.$implicit,a=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(2,Ki,t.value===a.selectedMetricType)),e.xp6(1),e.hij(" ",t.label," ")}}function ea(n,c){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,Xi,3,4,"ng-container",21),e.qZA()),2&n){var o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",o.chartSetting.buttons)}}function ta(n,c){if(1&n&&(e.TgZ(0,"div",15),e._UZ(1,"span",16),e.YNc(2,qi,1,5,"dabo-dropdown-filter",17),e.YNc(3,ea,2,1,"div",18),e.qZA()),2&n){var o=e.oxw();e.xp6(2),e.Q6J("ngIf",o.filterOptions&&o.filterOptions.length),e.xp6(1),e.Q6J("ngIf",o.selectedMetricType!==o.metricTypesEnum.OVER_TIME)}}function na(n,c){if(1&n){var o=e.EpF();e.TgZ(0,"dabo-site-dashboard-chart-exclude-checkbox",23),e.NdJ("excludeValueChange",function(i){return e.CHM(o),e.oxw().changeExcludeValue(i)}),e.qZA()}if(2&n){var t=e.oxw();e.Q6J("exclude",t.exclude)}}function oa(n,c){if(1&n){var o=e.EpF();e.TgZ(0,"dabo-site-dashboard-sliders",24),e.NdJ("blastabilityRangeChanged",function(i){return e.CHM(o),e.oxw().onBlastabilityRangeChanged(i)})("powderFactorRangeChanged",function(i){return e.CHM(o),e.oxw().onPowderFactorRangeChanged(i)}),e.qZA()}if(2&n){var t=e.oxw();e.Q6J("extremes",t.extremes)}}function ia(n,c){1&n&&(e.TgZ(0,"div",25),e._UZ(1,"div",26),e.qZA())}function aa(n,c){1&n&&(e.TgZ(0,"div",27),e._UZ(1,"div",28),e.TgZ(2,"div")(3,"p"),e._uU(4),e.ALo(5,"transloco"),e.qZA()()()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"siteDashboardTranslation.noDataMessage")))}function ra(n,c){if(1&n&&e._UZ(0,"div",29),2&n){var o=e.oxw();e.Q6J("chart",o.chart)}}var ca=E.q.RDO,sa=E.q.HVC,la=P.PREDICTION_DELTA,da=function(){var n=function(c){(0,x.Z)(t,c);var o=(0,I.Z)(t);function t(a,i,r,s,l,g,f,C,M){var b;return(0,h.Z)(this,t),(b=o.call(this)).mineStateService=a,b.dashboardService=i,b.route=r,b.cdr=s,b.injector=l,b.siteDashboardPreserveService=g,b.filtersService=f,b.siteDashboardModalService=C,b.customEventService=M,b.hasData=!1,b.metricTypesEnum=u,b.chartTypesEnum=P,b.collapsibleWidgetTypesEnum=ki.Z,b.fragmentationPerDateWidgetTitle="Fragmentaci\xf3n por Fecha",b}return(0,p.Z)(t,[{key:"ngOnInit",value:function(){this.createChartService(),this.subscribeOnLegendFilter(),this.subscribeOnPeriodChanges(),this.subscribeOnRouterData()}},{key:"ngOnChanges",value:function(){this.selectedMetricType=this.chartSetting.defaultMetricType}},{key:"subscribeOnLegendFilter",value:function(){var i=this;this.siteDashboardPreserveService.legendClick$.pipe((0,re.h)(function(r){return r.type===i.chartSetting.type}),(0,D.R)(this.destroy$)).subscribe(function(r){i.allData=i.chartService.transformSeriesOnLegendPreserve(i.allData,r)})}},{key:"subscribeOnPeriodChanges",value:function(){var i=this;this.filtersService.onFilterChanged().pipe((0,Jt.T)(1),(0,qt.b)(function(r){i.cancelRouteSubscription(),i.siteDashboardPreserveService.setShovelOperatorFeedbackDefaultLegendState(),i.extremes=null,i.params=r}),(0,j.w)(function(r){return i.loadChart(r)}),(0,D.R)(this.destroy$)).subscribe(function(r){i.onLoad(r)},function(){i.onError()})}},{key:"subscribeOnRouterData",value:function(){var i=this;this.routeDataSubscription=this.route.data.pipe((0,qt.b)(function(){return i.siteDashboardPreserveService.setShovelOperatorFeedbackDefaultLegendState()}),(0,j.w)(function(){return i.loadChart()}),(0,D.R)(this.destroy$)).subscribe(function(r){i.onLoad(r)},function(){i.onError()})}},{key:"createChartService",value:function(){var i=Ui.get(this.chartSetting.type);this.chartService=this.injector.get(i)}},{key:"cancelRouteSubscription",value:function(){this.routeDataSubscription&&(this.routeDataSubscription.unsubscribe(),this.routeDataSubscription=null)}},{key:"onError",value:function(){this.loading=!1,this.cdr.detectChanges()}},{key:"loadChart",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;this.loading=!0;var l=i?this.dashboardService.getDateRequestParams(i.dates,i.period):this.dashboardService.getDateRequestParams();return this.cdr.markForCheck(),this.chartService.getChart({dateParams:l,filter:r,exclude:s,range:this.extremes,equipment:null==i?void 0:i.equipment,blasts:null==i?void 0:i.blasts})}},{key:"changeMetricType",value:function(i,r,s){if(s.stopPropagation(),this.allData){this.selectedMetricType=i,(0,T.isEmpty)(this.allData[this.selectedMetricType])?(this.hasData=!1,this.loading=!1):(this.chart=new X.kL(this.allData[this.selectedMetricType]),this.reflowChart(),this.hasData=!0);var l=m.ZA.isCDA(this.mineStateService.getSelectedMineArea())&&this.chartSetting.type===this.chartTypesEnum.FRAGMENTATION_PER_DATE?this.fragmentationPerDateWidgetTitle:this.getChartTitle(this.chartSetting);this.customEventService.event(Se.R.METRIC_APPLY,{metric_type:i}),this.customEventService.event(Se.R.WIDGET_DISPLAYED,{widget_name:l,metric_applied:r})}}},{key:"reflowChart",value:function(){var i=this;setTimeout(function(){return i.chart&&i.chart.ref&&i.chart.ref.reflow()},0)}},{key:"getExtremes",value:function(){var i=this;this.chartDataSubscription&&this.chartDataSubscription.unsubscribe(),this.chartDataSubscription=this.chart.ref$.pipe((0,D.R)(this.destroy$)).subscribe(function(r){i.extremes={blastabilityMin:Math.max(Math.floor(r.xAxis[0].min),0),blastabilityMax:Math.min(Math.ceil(r.xAxis[0].max),60),powderFactorMin:Math.max(+r.yAxis[0].min.toFixed(2),0),powderFactorMax:Math.min(+r.yAxis[0].max.toFixed(2),1.5)},i.cdr.detectChanges()})}},{key:"onLoad",value:function(i){var r=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.allData=i,(0,T.isEmpty)(this.allData.filter))this.filter={},this.filterOptions=[];else{this.filter=this.allData.filter;var l=[];Object.keys(this.filter).forEach(function(g,f){l[f]={id:g,selected:r.filter[g],name:g}}),this.filterOptions=l}this.exclude=this.allData.exclude,(0,T.isEmpty)(this.allData[this.selectedMetricType])?(this.hasData=!1,this.loading=!1):(this.chart=new X.kL(this.allData[this.selectedMetricType]),this.reflowChart(),s&&this.chartSetting.type===this.chartTypesEnum.POWDER_FACTOR_VS_BLASTABILITY&&this.getExtremes(),this.hasData=!0,this.loading=!1),this.cdr.detectChanges()}},{key:"handleFilterChanged",value:function(i){var s,r=this,l={};i.forEach(function(g){return l[g.id]=g.selected}),this.filterValueSubscription&&this.filterValueSubscription.unsubscribe(),this.filterValueSubscription=this.loadChart(this.params,l,null===(s=this.exclude)||void 0===s?void 0:s.value).pipe((0,D.R)(this.destroy$)).subscribe(function(g){return r.onLoad(g)},function(){return r.onError()})}},{key:"onBlastabilityRangeChanged",value:function(i){var r=i.min,s=i.max;this.extremes=Object.assign(Object.assign({},this.extremes),{blastabilityMin:r,blastabilityMax:s}),this.onRangeChange()}},{key:"onPowderFactorRangeChanged",value:function(i){var r=i.min,s=i.max;this.extremes=Object.assign(Object.assign({},this.extremes),{powderFactorMin:r,powderFactorMax:s}),this.onRangeChange()}},{key:"onRangeChange",value:function(){var i=this;this.loadChart(this.params).pipe((0,D.R)(this.destroy$)).subscribe(function(r){var s,l;i.hasData=!0,i.loading=!1,i.onLoad(r,!1);var g=i.extremes,M=g.powderFactorMin,b=g.powderFactorMax;null===(s=i.chart.ref)||void 0===s||s.xAxis[0].setExtremes(g.blastabilityMin,g.blastabilityMax,!1),null===(l=i.chart.ref)||void 0===l||l.yAxis[0].setExtremes(M,b)},function(){return i.onError()})}},{key:"changeExcludeValue",value:function(i){var r=this;this.excludeValueSubscription&&this.excludeValueSubscription.unsubscribe(),this.excludeValueSubscription=i.pipe((0,j.w)(function(s){return r.loadChart(r.params,r.filter,s)}),(0,D.R)(this.destroy$)).subscribe(function(s){return r.onLoad(s)},function(){return r.onError()})}},{key:"openHelpCenter",value:function(i){return i.stopPropagation(),this.siteDashboardModalService.openHelpCenter("<h4>Explosive weight, kg = Total Equivalent ANFO, kg</h4>\n                         <p>kg ANFO + [kg 700 x SG ANFO/SG 700] + [kg FRAG x SG ANFO/SG FRAG] + [kg R70 x SG ANFO/SG R70] + [kg other x SG ANFO/SG other]</p>\n                         <h4>Powder Factor, kg/m\xb3 = Equivalent ANFO PF, kg/m\xb3</h4>\n                         <p>total equivalent ANFO, kg / waste volume BCMs</p>","Powder Factor vs Blastability Hint",!1)}},{key:"getChartTitle",value:function(i){var r,s=i.translate?"siteDashboardTranslation.".concat(i.title):i.title,l=((0,v.Z)(r={},ca,s),(0,v.Z)(r,sa,"".concat(this.chartSetting.type===la?"":"Shovel"," ").concat(s)),(0,v.Z)(r,"default",s),r);return l[this.mineStateService.getSelectedMineArea()]||l.default}}]),t}(m.eO);return n.\u0275fac=function(o){return new(o||n)(e.Y36(_.Hj),e.Y36(te),e.Y36(Y.gz),e.Y36(e.sBO),e.Y36(e.zs3),e.Y36(Me),e.Y36(ne),e.Y36(Pe),e.Y36(_.qL))},n.\u0275cmp=e.Xpm({type:n,selectors:[["dabo-site-dashboard-chart"]],inputs:{chartSetting:"chartSetting"},features:[e.qOj,e.TTD],decls:11,vars:10,consts:[[1,"teck-basic-card","site-dashboard-chart-container"],[3,"widgetIcon","widgetTitle","translated"],["class","site-dashboard-chart-container__modal","widgetTitleAdditionalContent","",4,"ngIf"],["fxFlex","","fxLayout","row","headerAdditionalActions","",4,"ngIf"],["widgetBody",""],[3,"exclude","excludeValueChange",4,"ngIf"],[3,"extremes","blastabilityRangeChanged","powderFactorRangeChanged",4,"ngIf"],[1,"site-dashboard-chart-content"],["fxFill","","fxLayout","column","fxLayoutAlign","center center","class","base-spinner-wrapper",4,"ngIf"],["fxFill","","fxLayout","column","fxLayoutAlign","center center","class","missing-data-container",4,"ngIf"],[3,"chart",4,"ngIf"],["widgetTitleAdditionalContent","",1,"site-dashboard-chart-container__modal"],[1,"icon","icon-help-center",3,"click"],[1,"path1"],[1,"path2"],["fxFlex","","fxLayout","row","headerAdditionalActions",""],[1,"fill-remaining-space"],["class","site-dashboard-chart-container__dropdown-filter",3,"btnIcon","filter","titleOptions","filterValueChange",4,"ngIf"],["class","button-group button-group--small-rounded",4,"ngIf"],[1,"site-dashboard-chart-container__dropdown-filter",3,"btnIcon","filter","titleOptions","filterValueChange"],[1,"button-group","button-group--small-rounded"],[4,"ngFor","ngForOf"],[1,"button-group__item",3,"ngClass","click"],[3,"exclude","excludeValueChange"],[3,"extremes","blastabilityRangeChanged","powderFactorRangeChanged"],["fxFill","","fxLayout","column","fxLayoutAlign","center center",1,"base-spinner-wrapper"],[1,"spinner"],["fxFill","","fxLayout","column","fxLayoutAlign","center center",1,"missing-data-container"],[1,"icon-no-data","df-align-center"],[3,"chart"]],template:function(o,t){1&o&&(e.TgZ(0,"mat-card",0)(1,"dabo-widget-collapsible",1),e.YNc(2,Qi,4,0,"div",2),e.YNc(3,ta,4,2,"div",3),e.TgZ(4,"div",4),e.YNc(5,na,1,1,"dabo-site-dashboard-chart-exclude-checkbox",5),e.YNc(6,oa,1,1,"dabo-site-dashboard-sliders",6),e.TgZ(7,"div",7),e.YNc(8,ia,2,0,"div",8),e.YNc(9,aa,6,3,"div",9),e.YNc(10,ra,1,1,"div",10),e.qZA()()()()),2&o&&(e.xp6(1),e.Q6J("widgetIcon",t.chartSetting.icon)("widgetTitle",t.getChartTitle(t.chartSetting))("translated",t.chartSetting.translate),e.xp6(1),e.Q6J("ngIf",t.chartSetting.type===t.chartTypesEnum.POWDER_FACTOR_VS_BLASTABILITY),e.xp6(1),e.Q6J("ngIf",t.chartSetting.type!==t.chartTypesEnum.POWDER_FACTOR_VS_BLASTABILITY),e.xp6(2),e.Q6J("ngIf",(t.hasData||t.exclude)&&!t.loading),e.xp6(1),e.Q6J("ngIf",t.hasData&&!t.loading&&t.extremes),e.xp6(2),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.hasData&&!t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading&&t.hasData))},directives:[Ve.a8,$t._,y.O5,w.yH,w.xw,zt.V,y.sg,y.mk,Qt.oO,ji,zi,w.s9,w.Wh,X.Dm],pipes:[V.Ot],styles:['[_nghost-%COMP%]     .mat-expansion-panel-header .mat-content .icon-cost:before{color:#39be04}[_nghost-%COMP%]     .mat-expansion-panel-header .mat-content .icon-map-compare-tool:before{content:"\\e922";color:#0165bd}[_nghost-%COMP%]     .mat-expansion-panel-header .mat-content .icon-map-feedback:before{color:#ff8c00}.site-dashboard-chart-container[_ngcontent-%COMP%]{width:100%;margin:0 0 20px}.site-dashboard-chart-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box;margin:auto 0}.site-dashboard-chart-container__modal[_ngcontent-%COMP%]{position:relative;left:3px;top:2px}.site-dashboard-chart-container.mat-card[_ngcontent-%COMP%]{overflow-y:hidden;padding:0}.site-dashboard-chart-container[_ngcontent-%COMP%]   .toolbar-title[_ngcontent-%COMP%]{color:#282d32;font-weight:500;font-size:12px;line-height:16px}.site-dashboard-chart-container[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-row[_ngcontent-%COMP%]{padding-right:20px}.site-dashboard-chart-container[_ngcontent-%COMP%]   .site-dashboard-chart-content[_ngcontent-%COMP%]{margin:20px 0 0;width:100%}@media screen and (max-width: 1280px){.site-dashboard-chart-container[_ngcontent-%COMP%]   .site-dashboard-chart-content[_ngcontent-%COMP%]{width:calc(100vw - 110px)}}@media screen and (min-width: 1280px){.site-dashboard-chart-container[_ngcontent-%COMP%]   .site-dashboard-chart-content[_ngcontent-%COMP%]{width:calc(100vw - 110px)}}.site-dashboard-chart-container[_ngcontent-%COMP%]   .site-dashboard-chart-content[_ngcontent-%COMP%]   .base-spinner-wrapper[_ngcontent-%COMP%]{margin-bottom:20px}.site-dashboard-chart-container__dropdown-filter[_ngcontent-%COMP%]{padding-right:16px}.missing-data-container[_ngcontent-%COMP%]{text-align:center;height:100%;width:100%}.missing-data-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px;font-size:12px;font-weight:500;color:#586b7acc}.missing-data-container[_ngcontent-%COMP%]   .icon-no-data[_ngcontent-%COMP%]{margin-bottom:1rem;align-self:center;width:54px;height:48px;background:url(/assets/images/icons/icon-no-data.svg) center no-repeat;background-size:100%}'],changeDetection:0}),n}(),ga=d(57491);function ua(n,c){1&n&&e._UZ(0,"mat-progress-bar",6)}function fa(n,c){if(1&n&&e._UZ(0,"dabo-site-dashboard-widgets",7),2&n){var o=e.oxw();e.Q6J("selectedPeriod",o.selectedPeriod)("widgetsData",o.widgetsData)}}function pa(n,c){1&n&&e._UZ(0,"dabo-prediction-tracking-widget")}function ha(n,c){if(1&n&&e._UZ(0,"dabo-site-dashboard-chart",13),2&n){var o=e.oxw().$implicit;e.Q6J("chartSetting",o)}}function va(n,c){if(1&n&&(e.TgZ(0,"div"),e.ynx(1,10),e.YNc(2,pa,1,0,"dabo-prediction-tracking-widget",11),e.YNc(3,ha,1,1,"dabo-site-dashboard-chart",12),e.BQk(),e.qZA()),2&n){var o=c.$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",o.type),e.xp6(1),e.Q6J("ngSwitchCase",t.componentTypesEnum.PREDICTIONS_TRACKING)}}function ma(n,c){if(1&n&&(e.TgZ(0,"div",8),e.YNc(1,va,4,2,"div",9),e.qZA()),2&n){var o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.componentSettings)("ngForTrackBy",o.trackByFn)}}function ba(n,c){1&n&&e._UZ(0,"dabo-no-data-container")}var _a=ce.K.SITE_LEVEL_DASHBOARD,Ca=function(){var n=function(c){(0,x.Z)(t,c);var o=(0,I.Z)(t);function t(a,i,r,s,l,g,f,C,M,b,$){var F;return(0,h.Z)(this,t),(F=o.call(this)).mineStateService=a,F.router=i,F.route=r,F.titleService=s,F.cdr=l,F.dashboardService=g,F.permissionService=f,F.componentSettingsService=C,F.siteDashboardPermissionService=M,F.filtersService=b,F.customEventService=$,F.noData=!1,F.componentTypesEnum=P,F.metricTypesEnum=u,F}return(0,p.Z)(t,[{key:"ngOnInit",value:function(){var i=this;window.dispatchEvent(new Event("resize")),this.componentSettings=this.componentSettingsService.getSettings(),this.router.events.pipe((0,re.h)(function(r){return r instanceof Y.OD}),(0,D.R)(this.destroy$)).subscribe(function(){i.widgetsData=null}),this.route.queryParams.pipe((0,D.R)(this.destroy$)).subscribe(function(){i.titleService.setTitle()}),this.sendDefaultParams(),this.sendDefaultStateCollectorEvent(),this.mineStateService.selectedMineArea$.pipe((0,D.R)(this.destroy$)).subscribe(function(){i.noData=!i.siteDashboardPermissionService.isPageAvailable(),i.cdr.markForCheck()}),this.route.data.pipe((0,D.R)(this.destroy$)).subscribe(function(r){i.siteDashboardPermissionService.isPageAvailable()?i.siteDashboardPermissionService.isWidgetsAvailable()&&(i.widgetsData=r.widgetsData,i.cdr.markForCheck()):i.noData=!0}),this.filtersService.onFilterChanged().pipe((0,re.h)(function(){return i.siteDashboardPermissionService.isWidgetsAvailable()}),(0,j.w)(function(r){return i.selectedPeriod=r.period,i.dashboardService.getWidgets(r.dates,r.period)}),(0,D.R)(this.destroy$)).subscribe(function(r){i.widgetsData=r,i.cdr.markForCheck()},function(){i.noData=!0}),this.watchForPermissions()}},{key:"trackByFn",value:function(i,r){return"".concat(r.type,"_").concat(r.title)}},{key:"watchForPermissions",value:function(){var i=this;this.permissionService.permissions$.pipe((0,D.R)(this.destroy$)).subscribe(function(r){var s;i.filterComponentSettingsByPermissions(null===(s=r[_a])||void 0===s?void 0:s.components)})}},{key:"filterComponentSettingsByPermissions",value:function(i){this.componentSettings=this.componentSettingsService.getSettings().filter(function(r){return!Pn()(i)&&i[r.type]}),this.cdr.markForCheck()}},{key:"sendDefaultStateCollectorEvent",value:function(){var i=this;this.router.events.pipe((0,re.h)(function(r){return r instanceof Y.m2}),(0,D.R)(this.destroy$)).subscribe(function(){i.sendDefaultParams()})}},{key:"sendDefaultParams",value:function(){var i=this.mineStateService.getSelectedMineArea(),r=m.ZA.isCDA(i)?B.v.CUSTOM:B.v.MONTH;this.customEventService.event(Se.R.DEFAULT_STATE_COLLECTOR,{date_type:r,page_url:this.router.url})}}]),t}(m.eO);return n.\u0275fac=function(o){return new(o||n)(e.Y36(_.Hj),e.Y36(Y.F0),e.Y36(Y.gz),e.Y36(_.yD),e.Y36(e.sBO),e.Y36(te),e.Y36(_.$A),e.Y36(dt),e.Y36(Te),e.Y36(ne),e.Y36(_.qL))},n.\u0275cmp=e.Xpm({type:n,selectors:[["dabo-site-dashboard"]],features:[e.qOj],decls:7,vars:4,consts:[["fxLayout","column",1,"page-block","site-dashboard__container"],["color","primary","mode","indeterminate",4,"ngIf"],[1,"page-block__content"],["fxLayout","row wrap","fxLayoutAlign","start start",3,"selectedPeriod","widgetsData",4,"ngIf"],["class","charts-wrapper",4,"ngIf"],[4,"ngIf"],["color","primary","mode","indeterminate"],["fxLayout","row wrap","fxLayoutAlign","start start",3,"selectedPeriod","widgetsData"],[1,"charts-wrapper"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"chartSetting",4,"ngSwitchDefault"],[3,"chartSetting"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"dabo-site-dashboard-header"),e.YNc(2,ua,1,0,"mat-progress-bar",1),e.TgZ(3,"div",2),e.YNc(4,fa,1,2,"dabo-site-dashboard-widgets",3),e.YNc(5,ma,2,2,"div",4),e.YNc(6,ba,1,0,"dabo-no-data-container",5),e.qZA()()),2&o&&(e.xp6(2),e.Q6J("ngIf",t.loading),e.xp6(2),e.Q6J("ngIf",!t.noData&&t.widgetsData),e.xp6(1),e.Q6J("ngIf",!t.noData),e.xp6(1),e.Q6J("ngIf",t.noData))},directives:[w.xw,ni,y.O5,be.pW,yi,w.Wh,y.sg,y.RF,y.n9,wi,y.ED,da,ga.z],styles:['@font-face{font-family:dabaha;src:url(/assets/fonts/dabaha.eot);src:url(/assets/fonts/dabaha.eot?#iefix) format("embedded-opentype"),url(/assets/fonts/dabaha.ttf) format("truetype"),url(/assets/fonts/dabaha.woff) format("woff"),url(/assets/fonts/dabaha.svg) format("svg");font-weight:400;font-style:normal;font-display:block}.icon[_ngcontent-%COMP%]{font-family:dabaha!important;speak:none;width:16px;height:16px;font-size:16px;font-style:normal;font-weight:400;font-feature-settings:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon--disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:initial}.icon--hidden[_ngcontent-%COMP%]{display:none}.icon-byc[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\ea04";color:#008cff}.icon-byc[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\ea05";margin-left:-1em;color:#008cff}.icon-byc[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\ea06";margin-left:-1em;color:#586b7a}.icon-byc[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\ea07";margin-left:-1em;color:#586b7a}.icon-information[_ngcontent-%COMP%]:before{content:"\\ea03";color:#586b7a}.icon-colormap[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9fe";color:#f25050}.icon-colormap[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9ff";margin-left:-1em;color:#f2c94c}.icon-colormap[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\ea00";margin-left:-1em;color:#1f8ff7}.icon-colormap[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\ea01";margin-left:-1em;color:#39be04}.icon-colormap[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\ea02";margin-left:-1em;color:#586b7a}.icon-drillbit[_ngcontent-%COMP%]:before{content:"\\e9fc";color:#00afbd}.icon-report[_ngcontent-%COMP%]:before{content:"\\e9fa";color:#0065bd}.icon-quality[_ngcontent-%COMP%]:before{content:"\\e9fb";color:#d5b1f1}.icon-permissions[_ngcontent-%COMP%]:before{content:"\\e9f9";color:#00afbd}.icon-batchedit[_ngcontent-%COMP%]:before{content:"\\e9f8";color:#0165bd}.icon-comment[_ngcontent-%COMP%]:before{content:"\\e9f4";color:#0065bd}.icon-actions[_ngcontent-%COMP%]:before{content:"\\e9f5";color:#0065bd}.icon-add-comment[_ngcontent-%COMP%]:before{content:"\\e9f6";color:#0065bd}.icon-scorecard[_ngcontent-%COMP%]:before{content:"\\e9f7";color:#0065bd}.icon-data-error[_ngcontent-%COMP%]:before{content:"\\e9f3";color:#586b7a}.icon-BL-1z[_ngcontent-%COMP%]:before{content:"\\e9e5";color:#366cfb}.icon-BL-2z-1[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9e6";color:#366cfb}.icon-BL-2z-1[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9e7";margin-left:-1em;color:#eef3fb}.icon-BL-2z-2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9e8";color:#eef3fb}.icon-BL-2z-2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9e9";margin-left:-1em;color:#366cfb}.icon-BL-3z-1[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9ea";color:#366cfb}.icon-BL-3z-1[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9eb";margin-left:-1em;color:#b8d3fd}.icon-BL-3z-1[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9ec";margin-left:-1em;color:#eef3fb}.icon-BL-3z-2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9ed";color:#b8d3fd}.icon-BL-3z-2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9ee";margin-left:-1em;color:#366cfb}.icon-BL-3z-2[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9ef";margin-left:-1em;color:#eef3fb}.icon-BL-3z-3[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9f0";color:#e3edfb}.icon-BL-3z-3[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9f1";margin-left:-1em;color:#f4f8fb}.icon-BL-3z-3[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9f2";margin-left:-1em;color:#366cfb}.icon-hole-pumped[_ngcontent-%COMP%]:before{content:"\\e9e3"}.icon-history[_ngcontent-%COMP%]:before{content:"\\e9e2";color:#586b7a}.icon-crusher[_ngcontent-%COMP%]:before{content:"\\e9e4";color:#0165bd}.icon-calculator[_ngcontent-%COMP%]:before{content:"\\e9e1";color:#0165bd}.icon-issue[_ngcontent-%COMP%]:before{content:"\\e9de";color:#e68537}.icon-nitrate[_ngcontent-%COMP%]:before{content:"\\e9df";color:#0165bd}.icon-vibration[_ngcontent-%COMP%]:before{content:"\\e9e0";color:#0165bd}.icon-angled[_ngcontent-%COMP%]:before{content:"\\e9dd"}.icon-userguide[_ngcontent-%COMP%]:before{content:"\\e9dc";color:#0165bd}.icon-crew[_ngcontent-%COMP%]:before{content:"\\e9db";color:#586b7a}.icon-bench[_ngcontent-%COMP%]:before{content:"\\e9d7";color:#586b7a}.icon-pat-group[_ngcontent-%COMP%]:before{content:"\\e9d8";color:#586b7a}.icon-pat-small[_ngcontent-%COMP%]:before{content:"\\e9d9";color:#586b7a}.icon-patt[_ngcontent-%COMP%]:before, .icon-patt-light[_ngcontent-%COMP%]:before{content:"\\e9da";color:#586b7a}.icon-patt-light[_ngcontent-%COMP%]:before{opacity:.5}.icon-safety[_ngcontent-%COMP%]:before{content:"\\e9d6";color:#0165bd}.icon-godown[_ngcontent-%COMP%]:before{content:"\\e9d3";color:#586b7a}.icon-growup[_ngcontent-%COMP%]:before{content:"\\e9d4";color:#586b7a}.icon-growup-light[_ngcontent-%COMP%]:before{content:"\\e9d4";color:#fff;opacity:.5}.icon-circle[_ngcontent-%COMP%]:before{content:"\\e9d5";color:#586b7a}.icon-sliders[_ngcontent-%COMP%]:before{content:"\\e9d2";color:#586b7a}.icon-chart[_ngcontent-%COMP%]:before{content:"\\e9d1";color:#586b7a}.icon-no-data-2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9cb";color:#8bade0}.icon-no-data-2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9cc";margin-left:-1em;color:#586b7a}.icon-no-data-3[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9cd";color:#586b7a}.icon-no-data-3[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9ce";margin-left:-1em;color:#8bade0}.icon-no-data-4[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9cf";color:#8bade0}.icon-no-data-4[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9d0";margin-left:-1em;color:#586b7a}.icon-connection[_ngcontent-%COMP%]:before{content:"\\e9c8";color:#586b7a}.icon-dashboard[_ngcontent-%COMP%]:before{content:"\\e9c9";color:#586b7a}.icon-temperature[_ngcontent-%COMP%]:before{content:"\\e9ca";color:#586b7a}.icon-menu-1[_ngcontent-%COMP%]:before{content:"\\e9c6";color:#586b7a}.icon-menu-2[_ngcontent-%COMP%]:before{content:"\\e9c7";color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9b4";color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9b5";margin-left:-1em;color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9b6";margin-left:-1em;color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e9b7";margin-left:-1em;color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e9b8";margin-left:-1em;color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e9b9";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3-6[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e9ba";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3-6[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e9bb";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3-6[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e9bc";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9bd";color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9be";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9bf";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e9c0";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e9c1";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e9c2";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e9c3";margin-left:-1em;color:#586b7a}.icon-w1-2[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e9c4";margin-left:-1em;color:#586b7a}.icon-w1-2[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e9c5";margin-left:-1em;color:#586b7a}.icon-hole-precond[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9b2";color:#000;opacity:.75}.icon-hole-precond[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9b3";margin-left:-1em;color:#fff}.icon-w1[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e97c";color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e97d";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e97e";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e97f";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e980";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e981";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e982";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e983";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e984";margin-left:-1em;color:#586b7a}.icon-w2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e985";color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e986";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e987";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e988";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e989";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e98a";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e98b";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e98c";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e98d";margin-left:-1em;color:#586b7a}.icon-w3[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e98e";color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e98f";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e990";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e991";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e992";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e993";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e994";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e995";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e996";margin-left:-1em;color:#586b7a}.icon-w4[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e997";color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e998";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e999";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e99a";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e99b";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e99c";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e99d";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e99e";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e99f";margin-left:-1em;color:#586b7a}.icon-w5[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9a0";color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9a1";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9a2";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e9a3";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e9a4";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e9a5";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e9a6";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e9a7";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e9a8";margin-left:-1em;color:#586b7a}.icon-w6[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9a9";color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9aa";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9ab";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e9ac";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e9ad";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e9ae";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e9af";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e9b0";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e9b1";margin-left:-1em;color:#586b7a}.icon-T-Icon[_ngcontent-%COMP%]:before{content:"\\e97a";color:#fff}.icon-tasks[_ngcontent-%COMP%]:before{content:"\\e97b";color:#586b7a}.icon-pdf_template[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e967";color:#fff}.icon-pdf_template[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e968";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e969";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e96a";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e96b";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e96c";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e96d";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e96e";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e96f";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path10[_ngcontent-%COMP%]:before{content:"\\e970";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path11[_ngcontent-%COMP%]:before{content:"\\e971";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path12[_ngcontent-%COMP%]:before{content:"\\e972";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path13[_ngcontent-%COMP%]:before{content:"\\e973";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path14[_ngcontent-%COMP%]:before{content:"\\e974";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path15[_ngcontent-%COMP%]:before{content:"\\e975";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path16[_ngcontent-%COMP%]:before{content:"\\e976";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path17[_ngcontent-%COMP%]:before{content:"\\e977";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path18[_ngcontent-%COMP%]:before{content:"\\e978";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path19[_ngcontent-%COMP%]:before{content:"\\e979";margin-left:-.7998046875em;color:#d0dae0}.icon-ellipsis[_ngcontent-%COMP%]:before{content:"\\e966";color:#586b7a}.icon-edit[_ngcontent-%COMP%]:before{content:"\\e965";color:#586b7a}.icon-help-center[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e963";color:#ffe845}.icon-help-center[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e964";margin-left:-1em;color:#000;opacity:.5029}.icon-driver[_ngcontent-%COMP%]:before{content:"\\e95a";color:#0165bd}.icon-eye-crossed[_ngcontent-%COMP%]:before{content:"\\e95b";color:#586b7a}.icon-eye[_ngcontent-%COMP%]:before{content:"\\e95c";color:#586b7a}.icon-grade[_ngcontent-%COMP%]:before{content:"\\e95d";color:#586b7a}.icon-ropes-2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e95e";color:#586b7a}.icon-ropes-2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e95f";margin-left:-1em;color:#0165bd}.icon-ropes[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e960";color:#586b7a}.icon-ropes[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e961";margin-left:-1em;color:#0165bd}.icon-score[_ngcontent-%COMP%]:before{content:"\\e962";color:#586b7a}.icon-search[_ngcontent-%COMP%]:before{content:"\\e959";color:#586b7a}.icon-progress[_ngcontent-%COMP%]:before{content:"\\e958";color:#586b7a}.icon-day-shift[_ngcontent-%COMP%]:before{content:"\\e955";color:#fcd47d}.icon-night-shift[_ngcontent-%COMP%]:before{content:"\\e956";color:#7d8c9a}.icon-segment[_ngcontent-%COMP%]:before{content:"\\e957";color:#586b7a}.icon-print[_ngcontent-%COMP%]:before{content:"\\e954";color:#586b7a}.icon-success[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e951";color:#fff}.icon-success[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e952";margin-left:-1em;color:#8bade0}.icon-success[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e953";margin-left:-1em;color:#39be04}.icon-misfire[_ngcontent-%COMP%]:before{content:"\\e950";color:#ff8200}.icon-no-selection[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e949";color:#fff}.icon-no-selection[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e94a";margin-left:-1em;color:#8bade0}.icon-no-selection[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e94b";margin-left:-1em;color:#eaeef6}.icon-no-selection[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e94c";margin-left:-1em;color:#1f8ff7}.icon-no-selection[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e94d";margin-left:-1em;color:#586b7a}.icon-home[_ngcontent-%COMP%]:before{content:"\\e948";color:#586b7a}.icon-feedback-normal[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e93f";color:#31495d;opacity:.8504}.icon-feedback-normal[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e940";margin-left:-.7861328125em;color:#ffaf00}.icon-feedback-normal[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e941";margin-left:-.7861328125em;color:#fff}.icon-feedback-selected[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e942";color:#0165bd}.icon-feedback-selected[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e943";margin-left:-.7861328125em;color:#fff}.icon-feedback-selected[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e944";margin-left:-.7861328125em;color:#ffaf00}.icon-feedback-selected[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e945";margin-left:-.7861328125em;color:#586b7a}.icon-map-feedback-small[_ngcontent-%COMP%]:before{content:"\\e946";color:#ffaf00}.icon-map-feedback[_ngcontent-%COMP%]:before{content:"\\e947";color:#586b7a}.icon-equip-driller[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e911";color:#fff}.icon-equip-driller[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e912";margin-left:-1em;color:#0165bd}.icon-equip-driller[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e913";margin-left:-1em;color:#0165bd}.icon-equip-loader[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e939";color:#fff}.icon-equip-loader[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e93a";margin-left:-1em;color:#0165bd}.icon-equip-loader[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e93b";margin-left:-1em;color:#0165bd}.icon-equip-shovel[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e93c";color:#fff}.icon-equip-shovel[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e93d";margin-left:-1em;color:#0165bd}.icon-equip-shovel[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e93e";margin-left:-1em;color:#0165bd}.icon-alert[_ngcontent-%COMP%]:before{content:"\\e900";color:#ff8200}.icon-arrow-down[_ngcontent-%COMP%]:before{content:"\\e901";color:#586b7a}.icon-arrow-left[_ngcontent-%COMP%]:before{content:"\\e902";color:#586b7a}.icon-arrow-right[_ngcontent-%COMP%]:before{content:"\\e903";color:#586b7a}.icon-arrow-top[_ngcontent-%COMP%]:before{content:"\\e904";color:#586b7a}.icon-blast[_ngcontent-%COMP%]:before, .icon-blast-light[_ngcontent-%COMP%]:before{content:"\\e905";color:#f25050}.icon-blast-light[_ngcontent-%COMP%]:before{color:#586b7a;opacity:.5}.icon-calendar[_ngcontent-%COMP%]:before{content:"\\e906";color:#0165bd}.icon-checkmark[_ngcontent-%COMP%]:before{content:"\\e907";color:#586b7a}.icon-close[_ngcontent-%COMP%]:before{content:"\\e908";color:#586b7a}.icon-coal[_ngcontent-%COMP%]:before{content:"\\e909";color:#586b7a}.icon-cost[_ngcontent-%COMP%]:before{content:"\\e90a";color:#ff8200}.icon-critical[_ngcontent-%COMP%]:before{content:"\\e90b";color:#c55563}.icon-datepicker[_ngcontent-%COMP%]:before{content:"\\e90c";color:#586b7a}.icon-destination[_ngcontent-%COMP%]:before{content:"\\e90d";color:#39be04}.icon-drill[_ngcontent-%COMP%]:before{content:"\\e90e";color:#00afbd}.icon-empty[_ngcontent-%COMP%]:before{content:"\\e90f";color:#a4afbe}.icon-env[_ngcontent-%COMP%]:before{content:"\\e910";color:#39be04}.icon-filter[_ngcontent-%COMP%]:before{content:"\\e914";color:#586b7a}.icon-flag[_ngcontent-%COMP%]:before{content:"\\e915";color:#f54f63}.icon-grid[_ngcontent-%COMP%]:before{content:"\\e916";color:#0165bd}.icon-group[_ngcontent-%COMP%]:before{content:"\\e917";color:#586b7a}.icon-help[_ngcontent-%COMP%]:before{content:"\\e918";color:#586b7a}.icon-help-light[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e963";color:#586b7a;opacity:.2}.icon-help-light[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e964";margin-left:-1em;color:#586b7a;opacity:.75}.icon-hole[_ngcontent-%COMP%]:before{content:"\\e919";color:#0165bd}.icon-kpi[_ngcontent-%COMP%]:before{content:"\\e91a";color:#0165bd}.icon-kpi-cda[_ngcontent-%COMP%]:before{content:"\\e91a";color:#e1c06b}.icon-letter[_ngcontent-%COMP%]:before{content:"\\e91b";color:#586b7a}.icon-list[_ngcontent-%COMP%]:before{content:"\\e91c";color:#0165bd}.icon-load[_ngcontent-%COMP%]:before{content:"\\e91d";color:#0165bd}.icon-loaded[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e91e";color:#a4afbe}.icon-loaded[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e91f";margin-left:-1em;color:#1f8ff7}.icon-mail[_ngcontent-%COMP%]:before{content:"\\e920";color:#586b7a}.icon-map-collapse[_ngcontent-%COMP%]:before{content:"\\e921";color:#586b7a}.icon-map-compare-tool[_ngcontent-%COMP%]:before{content:"\\e922";color:#586b7a}.icon-map-expand[_ngcontent-%COMP%]:before{content:"\\e923";color:#586b7a}.icon-map-legend[_ngcontent-%COMP%]:before{content:"\\e924";color:#586b7a}.icon-map-polygon-tool[_ngcontent-%COMP%]:before{content:"\\e925";color:#586b7a}.icon-map-toggle[_ngcontent-%COMP%]:before{content:"\\e926";color:#586b7a}.icon-map-visibility[_ngcontent-%COMP%]:before{content:"\\e927";color:#586b7a}.icon-minus[_ngcontent-%COMP%]:before{content:"\\e928";color:#586b7a}.icon-no-data[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e929";color:#fff}.icon-no-data[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e94e";margin-left:-1em;color:#8bade0}.icon-no-data[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e94f";margin-left:-1em;color:#586b7a}.icon-notifications[_ngcontent-%COMP%]:before{content:"\\e92a";color:#586b7a}.icon-pattern[_ngcontent-%COMP%]:before{content:"\\e92b";color:#0165bd}.icon-piechart[_ngcontent-%COMP%]:before{content:"\\e92c";color:#00afbd}.icon-plus[_ngcontent-%COMP%]:before{content:"\\e92d";color:#586b7a}.icon-refresh[_ngcontent-%COMP%]:before{content:"\\e92e";color:#586b7a}.icon-road[_ngcontent-%COMP%]:before{content:"\\e92f"}.icon-roadblock[_ngcontent-%COMP%]:before{content:"\\e930";color:#f25050}.icon-roadpin[_ngcontent-%COMP%]:before{content:"\\e931";color:#ff8200}.icon-settings[_ngcontent-%COMP%]:before{content:"\\e932";color:#586b7a}.icon-shovel[_ngcontent-%COMP%]:before{content:"\\e933";color:#0165bd}.icon-target[_ngcontent-%COMP%]:before{content:"\\e934";color:#586b7a}.icon-time[_ngcontent-%COMP%]:before{content:"\\e935";color:#586b7a}.icon-truck[_ngcontent-%COMP%]:before{content:"\\e936";color:#0165bd}.icon-user[_ngcontent-%COMP%]:before{content:"\\e937";color:#586b7a}.icon-waste[_ngcontent-%COMP%]:before{content:"\\e938";color:#586b7a}.icon-info[_ngcontent-%COMP%]:before{content:"\\ea03";color:#586b7a}.chart-container[_ngcontent-%COMP%]{text-align:center;height:100%;display:flex;justify-content:center;align-items:stretch}.no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.no-data[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:32px;height:32px;margin-top:1rem;background:url(/assets/images/icons/icon-no-data.svg) center no-repeat;background-size:100%}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:500;line-height:1.57;color:#2e384d}.fragmentation-per-date-chart-tooltip[_ngcontent-%COMP%]{z-index:50;padding-right:5px;overflow-y:auto;max-height:300px}[_nghost-%COMP%]{height:100vh}dabo-site-dashboard-header[_ngcontent-%COMP%] + .page-block__content[_ngcontent-%COMP%]{margin-top:84px}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;width:100%}'],changeDetection:0}),n}(),Kt=function(){var n=function(){function c(o,t){(0,h.Z)(this,c),this.siteDashboardService=o,this.siteDashboardPermissionService=t}return(0,p.Z)(c,[{key:"resolve",value:function(t){if(this.siteDashboardPermissionService.isWidgetsAvailable())return this.siteDashboardService.getWidgets()}}]),c}();return n.\u0275fac=function(o){return new(o||n)(e.LFG(te),e.LFG(Te))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n}(),Oa=[{path:"",component:Ca,resolve:{widgetsData:Kt}},{path:"**",redirectTo:""}],Sa=function(){var n=(0,p.Z)(function c(){(0,h.Z)(this,c)});return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[Kt],imports:[[Y.Bz.forChild(Oa)],Y.Bz]}),n}(),Pa=function(){var n=(0,p.Z)(function c(){(0,h.Z)(this,c)});return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[se,ee.RH,ee.L3,ee.DJ,te,W,ke,Mt,kt,U,_t,pt,ft,bt,ee.n2,Le,St,Tt,we,Pt,Ot,yt,Rt,Bt,Yt,Ut,je.e,dt,it,ye,ot,Me,Te,wt,xt,It,ne,On,Pe,Qe,{provide:X.mA,useFactory:function(){return[dn,gn]}},{provide:Oe.sG,useValue:m.Kt},{provide:V.Hn,useValue:{scope:"site-dashboard",alias:"siteDashboardTranslation"},multi:!0},{provide:V.Hn,useValue:{scope:"date",alias:"dateTranslation"},multi:!0}],imports:[[sn.JX,cn.p0,ln.TU,y.ez,Sa,fn.n,w.ae,_e.lN,He.LD,be.Cv,Ce.g0,Ve.QW,Xt.o9,q.u5,en.ot,mn.d,tn.c,q.UX,be.Cv,K.Is,X.SD,We.AV,pn.j,hn.o,nn.FA,on.Yd,Ue.p9,an.Tx,rn.ie,vn.L,Oe.si,un.q,V.y4,ie.gc,ie.jN,ie.HA,ie.i0]]}),n}()}}]);