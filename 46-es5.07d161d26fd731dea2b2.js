(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{"+XIT":function(l,n,e){"use strict";e.d(n,"a",(function(){return t}));const t="shared-modules.business-segment."},EwA9:function(l,n,e){"use strict";e.d(n,"a",(function(){return o}));var t=e("/kTj"),u=e("tFIl"),i=e("HO0R");class o{constructor(l){this.debug=l.factory(new.target.name,t.a.All)}toBusinessSegmentModel(l){let n=[];l.stores instanceof Array&&(n=l.stores.map(l=>({slno:u.c.number(l.slno),groupIndex:u.c.number(l.groupIndex),storeIndex:u.c.number(l.storeIndex),storeId:u.c.number(l.store_id)})));const e={groupIndex:u.c.number(l.groupIndex),slno:u.c.number(l.slno),name:u.c.string(l.name),stores:n};return new i.a(e)}}},Fbhx:function(l,n,e){"use strict";e.d(n,"a",(function(){return u}));var t=e("+XIT");class u{constructor(l){l.addLoaderWithPrefixedTranslations("/cabinet/shared-modules/business-segment",t.a)}}},HO0R:function(l,n,e){"use strict";e.d(n,"a",(function(){return u}));var t=e("tFIl");class u extends t.a{constructor(l={}){super(),this.fillAll(l,["groupIndex","slno","name","stores"])}}},NxlO:function(l,n,e){"use strict";e.d(n,"a",(function(){return i}));var t=e("CqXF"),u=e("lJxs");class i{constructor(l,n){this.adapter=l,this.api=n}saveSorting(l){return this.api.put("storegroups/sort",{group_ids:l.join(",")}).pipe(Object(t.a)(void 0))}getStoreGroups(){return this.api.get("storegroups").pipe(Object(u.a)(l=>l.map(l=>this.adapter.toBusinessSegmentModel(l))))}getStores(){return this.api.get("stores")}createStoreGroup(l){return this.api.post("storegroups",l)}updateStoreGroup(l,n){return this.api.put("storegroups/".concat(l),n)}deleteStoreGroup(l,n){return this.api.delete("storegroups/".concat(l),{params:{slno:n}})}}},oFlN:function(l,n,e){"use strict";e.d(n,"a",(function(){return t}));class t{transform(l,n,e){return n?l.filter(l=>-1!==e.map(n=>l[n]).join(" ").toLowerCase().indexOf(n.toLowerCase())):l}}},uXBl:function(l,n,e){"use strict";e.r(n);var t=e("8Y7J");class u{constructor(l){l.addLoaderWithPrefixedTranslations("/cabinet/settings","")}}var i=e("pMnS"),o=e("t68o"),a=e("zbXB"),s=e("HOtD"),r=e("bZzr"),d=e("646r"),c=e("19u4"),g=e("vNrE"),p=e("iInd"),m=e("SVse"),v=e("TSSN");class h{constructor(l,n,e){this.topNav=l,this.instanceApi=n,this.session=e,this.emailEnabled=!1,this.oktaEnabled=!1}get isInstanceLevel(){return this.session.isInstanceLevel}get isSupportLevel(){return this.session.isSupportLevel}get isDemoInstance(){return this.session.isDemoInstance}get isOCC(){const l=this.session.getOCCGeneral();return l&&l.occEnable}ngOnInit(){this.topNav.clearLinks(),this.instanceApi.getEmailSetupConfig().subscribe(l=>{this.emailEnabled=1===l.email_enabled}),this.instanceApi.getOktaSamlConfig().subscribe(l=>{this.oktaEnabled=l.enabled})}}var f=e("nutA"),b=e("lJxs"),C=e("/kTj"),y=e("tFIl");class _ extends y.a{constructor(l={}){super(),this.fillAll(l,["id","enabled","defaultUse","singleSignOnUrl","issuer","cert","embedLink"])}}class k extends y.a{constructor(l={}){super(),this.fillAll(l,["id","createdAt","updatedAt","label","isMcAllStores","isFiscalYear","fiscalMMDD"])}}e("ZwQv").a.for(k).moment("updatedAt","X").moment("createdAt","X");var D=e("Xd0L"),R=e("wd/R");class M extends D.v{format(l,n){return"string"==typeof n?R(l).format(n):l.toDateString()}}var w=function(l){return l.NEW="new",l.USED="used",l.TRACKING="tracking",l.CRMLEADS="crmleads",l.CRMAPPOINTMENTS="crmappointments",l.CRMTRAFFICUPS="crmtrafficups",l.CRMTRAFFICYESTERDAY="crmtrafficyesterday",l.CRMTRAFFICBDC="crmtrafficbdc",l.CRMTRAFFICLEADDETAIL="crmleaddetail",l}({});class I{constructor(l,n,e){this.adapter=l,this.api=n,this.baseUrl="instances",this.debug=e.factory(new.target.name)}getInstance(l){const n="current"===l;if(!n)throw new Error("Parsing InstanceModel is not implemented");return this.api.get("".concat(this.baseUrl,"/").concat(l)).pipe(Object(b.a)(l=>l&&(n?this.adapter.toCurrentInstanceModel(l):void 0)))}updateInstance(l){const n=l instanceof k;if(!n)throw new Error("Updating InstanceModel is not implemented");const e=n?"current":l.id,t=n?this.adapter.fromCurrentInstanceModel(l):{};return this.api.put("".concat(this.baseUrl,"/").concat(e),t).pipe(Object(b.a)(l=>l&&(n?this.adapter.toCurrentInstanceModel(l):void 0)))}getFiscalYearConfig(){return this.api.get("".concat(this.baseUrl,"/fiscal")).pipe(Object(b.a)(l=>l&&this.adapter.toFiscalYearConfig(l)))}saveFiscalYearConfig(l){const n=this.adapter.fromCurrentInstanceModelToFiscalYearConfig(l);return this.api.put("".concat(this.baseUrl,"/fiscal"),n)}getOktaSamlConfig(){return this.api.get("".concat(this.baseUrl,"/okta")).pipe(Object(b.a)(l=>l&&this.adapter.toInstanceOktaSamlModel(l)))}saveOktaSamlConfig(l){const n=this.adapter.fromInstanceOktaSamlModel(l);return this.api.put("".concat(this.baseUrl,"/okta"),n).pipe(Object(b.a)(l=>l&&this.adapter.toInstanceOktaSamlModel(l)))}getEmailSetupConfig(){return this.api.get("".concat(this.baseUrl,"/emailsetup"))}}var S=e("+2T5"),O=t["\u0275crt"]({encapsulation:0,styles:[[".content__section-body[_ngcontent-%COMP%]{padding:20px}"]],data:{}});function x(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","row-fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,4,"a",[["class",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,2).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u}),null,null)),t["\u0275did"](2,671744,null,0,p.r,[p.o,p.a,m.k],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](3,1),(l()(),t["\u0275ted"](4,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=l(n,3,0,"control-center-coloring-threshold");l(n,2,0,e)}),(function(l,n){l(n,1,0,t["\u0275nov"](n,2).target,t["\u0275nov"](n,2).href),l(n,4,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform("link.control-center-coloring-threshold.name")))}))}function T(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","row-fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,4,"a",[["class",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,2).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u}),null,null)),t["\u0275did"](2,671744,null,0,p.r,[p.o,p.a,m.k],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](3,1),(l()(),t["\u0275ted"](4,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=l(n,3,0,"email-setup");l(n,2,0,e)}),(function(l,n){l(n,1,0,t["\u0275nov"](n,2).target,t["\u0275nov"](n,2).href),l(n,4,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform("link.email-setup.name")))}))}function P(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","row-fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,4,"a",[["class",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,2).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u}),null,null)),t["\u0275did"](2,671744,null,0,p.r,[p.o,p.a,m.k],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](3,1),(l()(),t["\u0275ted"](4,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=l(n,3,0,"okta-saml");l(n,2,0,e)}),(function(l,n){l(n,1,0,t["\u0275nov"](n,2).target,t["\u0275nov"](n,2).href),l(n,4,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform("link.okta-saml.name")))}))}function E(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","row-fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,4,"a",[["class",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,2).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u}),null,null)),t["\u0275did"](2,671744,null,0,p.r,[p.o,p.a,m.k],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](3,1),(l()(),t["\u0275ted"](4,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=l(n,3,0,"localization");l(n,2,0,e)}),(function(l,n){l(n,1,0,t["\u0275nov"](n,2).target,t["\u0275nov"](n,2).href),l(n,4,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform("link.localization.name")))}))}function L(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","row-fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,4,"a",[["class",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,2).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u}),null,null)),t["\u0275did"](2,671744,null,0,p.r,[p.o,p.a,m.k],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](3,1),(l()(),t["\u0275ted"](4,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=l(n,3,0,"current-instance-config");l(n,2,0,e)}),(function(l,n){l(n,1,0,t["\u0275nov"](n,2).target,t["\u0275nov"](n,2).href),l(n,4,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform("link.current-instance-config.name")))}))}function j(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,28,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,5,"div",[["class","row-fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,4,"a",[["class",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,3).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u}),null,null)),t["\u0275did"](3,671744,null,0,p.r,[p.o,p.a,m.k],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](4,1),(l()(),t["\u0275ted"](5,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](7,0,null,null,5,"div",[["class","row-fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](8,0,null,null,4,"a",[["class",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,9).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u}),null,null)),t["\u0275did"](9,671744,null,0,p.r,[p.o,p.a,m.k],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](10,1),(l()(),t["\u0275ted"](11,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275and"](16777216,null,null,1,null,x)),t["\u0275did"](14,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,T)),t["\u0275did"](16,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,P)),t["\u0275did"](18,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,E)),t["\u0275did"](20,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](21,0,null,null,5,"div",[["class","row-fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](22,0,null,null,4,"a",[["class",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,23).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u}),null,null)),t["\u0275did"](23,671744,null,0,p.r,[p.o,p.a,m.k],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](24,1),(l()(),t["\u0275ted"](25,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275and"](16777216,null,null,1,null,L)),t["\u0275did"](28,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](0,null,null,0))],(function(l,n){var e=n.component,t=l(n,4,0,"working-days");l(n,3,0,t);var u=l(n,10,0,"coloring-threshold");l(n,9,0,u),l(n,14,0,e.isOCC),l(n,16,0,!e.isDemoInstance&&e.emailEnabled),l(n,18,0,!e.isDemoInstance&&e.oktaEnabled),l(n,20,0,e.isSupportLevel);var i=l(n,24,0,"store-name-setup");l(n,23,0,i),l(n,28,0,e.isInstanceLevel)}),(function(l,n){l(n,2,0,t["\u0275nov"](n,3).target,t["\u0275nov"](n,3).href),l(n,5,0,t["\u0275unv"](n,5,0,t["\u0275nov"](n,6).transform("link.working-days.name"))),l(n,8,0,t["\u0275nov"](n,9).target,t["\u0275nov"](n,9).href),l(n,11,0,t["\u0275unv"](n,11,0,t["\u0275nov"](n,12).transform("link.coloring-threshold.name"))),l(n,22,0,t["\u0275nov"](n,23).target,t["\u0275nov"](n,23).href),l(n,25,0,t["\u0275unv"](n,25,0,t["\u0275nov"](n,26).transform("link.store-name-setup.name")))}))}function A(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","row-fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,4,"a",[["class",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,2).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u}),null,null)),t["\u0275did"](2,671744,null,0,p.r,[p.o,p.a,m.k],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](3,1),(l()(),t["\u0275ted"](4,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=l(n,3,0,"stock-type-setup");l(n,2,0,e)}),(function(l,n){l(n,1,0,t["\u0275nov"](n,2).target,t["\u0275nov"](n,2).href),l(n,4,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform("link.stock-type-setup.name")))}))}function F(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","row-fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,4,"a",[["class",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,2).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u}),null,null)),t["\u0275did"](2,671744,null,0,p.r,[p.o,p.a,m.k],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](3,1),(l()(),t["\u0275ted"](4,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=l(n,3,0,"days-supply-setup");l(n,2,0,e)}),(function(l,n){l(n,1,0,t["\u0275nov"](n,2).target,t["\u0275nov"](n,2).href),l(n,4,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform("link.days-supply-setup.name")))}))}function N(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"div",[["class","page__actions_bar page__actions_bar--aligned"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,24,"div",[["class","content__section"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,3,"div",[["class","content__section-header"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,2,"h4",[["class","content__section-heading"]],null,null,null,null,null)),(l()(),t["\u0275ted"](4,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](6,0,null,null,19,"div",[["class","content__section-body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,18,"div",[["class","settings-list"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,j)),t["\u0275did"](9,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](10,0,null,null,5,"div",[["class","row-fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,4,"a",[["class",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,12).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u}),null,null)),t["\u0275did"](12,671744,null,0,p.r,[p.o,p.a,m.k],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](13,1),(l()(),t["\u0275ted"](14,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](16,0,null,null,5,"div",[["class","row-fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](17,0,null,null,4,"a",[["class",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,18).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),u}),null,null)),t["\u0275did"](18,671744,null,0,p.r,[p.o,p.a,m.k],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](19,1),(l()(),t["\u0275ted"](20,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275and"](16777216,null,null,1,null,A)),t["\u0275did"](23,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,F)),t["\u0275did"](25,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,9,0,e.isInstanceLevel);var t=l(n,13,0,"sorting-measures");l(n,12,0,t);var u=l(n,19,0,"sorting-business-segments");l(n,18,0,u),l(n,23,0,e.isInstanceLevel),l(n,25,0,e.isInstanceLevel)}),(function(l,n){l(n,4,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform("caption"))),l(n,11,0,t["\u0275nov"](n,12).target,t["\u0275nov"](n,12).href),l(n,14,0,t["\u0275unv"](n,14,0,t["\u0275nov"](n,15).transform("link.kpi-sorting-measures.name"))),l(n,17,0,t["\u0275nov"](n,18).target,t["\u0275nov"](n,18).href),l(n,20,0,t["\u0275unv"](n,20,0,t["\u0275nov"](n,21).transform("link.sorting-business-segments.name")))}))}var V=t["\u0275ccf"]("ng-component",h,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,N,O)),t["\u0275did"](1,114688,null,0,h,[f.a,I,S.a],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),q=e("s7LF"),U=e("RHbX"),$=e("Xrj0"),K=e("jEIt"),G=e("eeq/"),B=e("nYR2");class Y{constructor(l,n,e,t,u){this.topNav=l,this.authService=n,this.dialog=e,this.settingsApi=t,this.translate=u,this.loading=!1,this.calendarType=0,this.salesTitle="page.working-days-setup.switcher.calendar-type.sales-title",this.servicesPartsTitle="page.working-days-setup.switcher.calendar-type.services-part-title",this.storesDropDownOpened=!1,this.selectedStoreName="",this.selectedStoreId=0,this.stores=[],this.datesDropDownOpened=!1,this.dates=[],this.selectedDate="",this.selectedCalendarTitle="",this.daysToShow=[],this.showAlert=!1,this.selectedDays=[],this.selectedCalendarType=0,this.subs=[],this.selectedYear="",this.selectedMonth=""}set sub(l){this.subs.push(l)}ngOnInit(){this.selectedCalendarTitle=this.servicesPartsTitle,this.currentUser=this.authService.getCurrentUser(),this.stores=this.currentUser.stores,this.stores.length>0&&(this.selectedStoreName=this.stores[0].StoreName,this.selectedStoreId=this.stores[0].StoreID),this.sub=this.translate.stream(["page.working-days-setup.month.january","page.working-days-setup.month.february","page.working-days-setup.month.march","page.working-days-setup.month.april","page.working-days-setup.month.may","page.working-days-setup.month.june","page.working-days-setup.month.july","page.working-days-setup.month.august","page.working-days-setup.month.september","page.working-days-setup.month.october","page.working-days-setup.month.november","page.working-days-setup.month.december"]).subscribe(l=>{this.setupMonths([l["page.working-days-setup.month.january"],l["page.working-days-setup.month.february"],l["page.working-days-setup.month.march"],l["page.working-days-setup.month.april"],l["page.working-days-setup.month.may"],l["page.working-days-setup.month.june"],l["page.working-days-setup.month.july"],l["page.working-days-setup.month.august"],l["page.working-days-setup.month.september"],l["page.working-days-setup.month.october"],l["page.working-days-setup.month.november"],l["page.working-days-setup.month.december"]]),this.getWorkingDays()}),this.topNav.clearLinks()}ngOnDestroy(){this.subs.forEach(l=>l.unsubscribe())}toggleCalendarType(){this.calendarType===this.selectedCalendarType?(this.selectedCalendarType=1,this.selectedCalendarTitle=this.salesTitle):(this.selectedCalendarType=0,this.selectedCalendarTitle=this.servicesPartsTitle),this.getWorkingDays()}toggleStoresDropDown(){this.storesDropDownOpened=!this.storesDropDownOpened}toggleDatesDropDown(){this.datesDropDownOpened=!this.datesDropDownOpened}selectStore(l){this.selectedStoreName=l.StoreName,this.selectedStoreId=l.StoreID,this.storesDropDownOpened=!1,this.getWorkingDays()}selectDate(l){this.selectedDate=l.date,this.selectedDateMoment=l.moment,[this.selectedMonth,this.selectedYear]=l.date.split(","),this.datesDropDownOpened=!1,this.getWorkingDays()}saveCalendar(){this.loading=!0;const l=[];this.selectedDays.forEach((n,e)=>{n&&l.push(e+1)}),this.sub=this.settingsApi.saveCalendar(parseInt(this.selectedMonth,10)+1,parseInt(this.selectedYear,10),this.selectedStoreId,this.selectedCalendarType,l.join()).pipe(Object(B.a)(()=>this.loading=!1)).subscribe(()=>{this.showAlert=!1},l=>this.dialog.alert(l.message))}getWorkingDays(){this.loading=!0,this.sub=this.settingsApi.getWorkingDays(parseInt(this.selectedMonth,10)+1,parseInt(this.selectedYear,10),this.selectedStoreId,this.selectedCalendarType).pipe(Object(B.a)(()=>this.loading=!1)).subscribe(l=>{this.daysToShow=[],this.selectedDays=[],this.showAlert=!1,l.current.length>0?this.daysToShow=l.current:(this.daysToShow=l.base,this.showAlert=!0),this.daysToShow=this.daysToShow.map(l=>Object.assign({},l,{moment:R(l.date)})),this.daysToShow.forEach((l,n)=>{this.selectedDays[n]="1"===l.checked})},l=>this.dialog.alert(l.message))}setupMonths(l){const n=new Date,e=n.getFullYear();let t=e;const u=n.getMonth();this.dates=[];for(let i=0;i<12;i++){let l=u+i;l>11&&(l-=12,t=e+1),this.dates.push({date:l+","+t,moment:R([t,l])})}this.dates.length>0&&(this.selectedDate=this.dates[0].date,this.selectedDateMoment=this.dates[0].moment),[this.selectedMonth,this.selectedYear]=this.selectedDate.split(",")}}var H=e("S+vS");class z{constructor(l){this.api=l}getWorkingDays(l,n,e,t){return this.api.get("workingdays",{params:{month:l,year:n,store_id:e,wd_type:t}}).pipe(Object(b.a)(l=>({base:l.base_working_day,current:l.current_working_day})))}saveCalendar(l,n,e,t,u){return this.api.post("workingdays",{month:l,year:n,store_id:e,wd_type:t,days:u})}getDocsColoring(l){return this.api.get("docs/doccolorssetup",{params:{filter:l}}).pipe(Object(b.a)(l=>({base:l.data})))}getStockTypes(l){return this.api.get("dtoperations/stocktype",{params:{selectType:l}})}saveSelectedStockTypes(l,n){return this.api.post("dtoperations/savestocktype",{params:{selectedSTs:l,stType:n}})}getDaysSupply(){return this.api.get("dtoperations/dayssupply",{})}saveDaysSupply(l){return this.api.post("dtoperations/savedayssupply",{params:{days:l}})}setDocsColoring(l,n,e,t){return this.api.get("docs/docsetcolorssetup",{params:{docId:l,greenValue:n,redValue:e,expenses:String(t)}}).pipe(Object(b.a)(l=>({base:l})))}getEmails(){return this.api.get("user/getemails").pipe(Object(b.a)(l=>({base:l})))}saveEmailSetUp(l,n,e,t,u,i,o,a,s){return this.api.get("user/saveemailsetup",{params:{emailid:l,name:n,lastname:e,email:t,active:String(u),sendingdays:i,store:o,report:a,creation:String(s)}}).pipe(Object(b.a)(l=>({base:l})))}deleteEmailSetUp(l){return this.api.get("user/deleteemailsetup",{params:{emailid:l}}).pipe(Object(b.a)(l=>({base:l})))}getMeasures(){return this.api.get("kpi/listsort")}}var X=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function W(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","dropdown-menu-item"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"span",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.selectStore(l.context.$implicit)&&t),t}),null,null)),(l()(),t["\u0275ted"](2,null,["",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.StoreName)}))}function Z(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","c_dropdown-std_menu"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,W)),t["\u0275did"](2,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,2,0,n.component.stores)}),null)}function J(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","dropdown-menu-item"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"span",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.selectDate(l.context.$implicit)&&t),t}),null,null)),(l()(),t["\u0275ted"](2,null,["",""])),t["\u0275ppd"](3,2)],null,(function(l,n){var e=t["\u0275unv"](n,2,0,l(n,3,0,t["\u0275nov"](n.parent.parent,0),n.context.$implicit.moment,"long-month-year"));l(n,2,0,e)}))}function Q(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","c_dropdown-std_menu"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,J)),t["\u0275did"](2,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,2,0,n.component.dates)}),null)}function ll(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","alert"]],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],null,(function(l,n){l(n,1,0,t["\u0275unv"](n,1,0,t["\u0275nov"](n,2).transform("page.working-days-setup.label.not-saved-warning.name")))}))}function nl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[["class","checkbox-list__line"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,5,"input",[["type","checkbox"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,e){var u=!0,i=l.component;return"change"===n&&(u=!1!==t["\u0275nov"](l,2).onChange(e.target.checked)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,2).onTouched()&&u),"ngModelChange"===n&&(u=!1!==(i.selectedDays[l.context.index]=e)&&u),u}),null,null)),t["\u0275did"](2,16384,null,0,q.b,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.b]),t["\u0275did"](4,671744,null,0,q.v,[[8,null],[8,null],[8,null],[6,q.q]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.v]),t["\u0275did"](6,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](7,0,null,null,2,"label",[],[[8,"htmlFor",0]],null,null,null,null)),(l()(),t["\u0275ted"](8,null,["",", ",""])),t["\u0275ppd"](9,2)],(function(l,n){var e=n.component;l(n,4,0,t["\u0275inlineInterpolate"](1,"selectedDays[",n.context.index,"]"),e.selectedDays[n.context.index])}),(function(l,n){l(n,1,0,t["\u0275inlineInterpolate"](1,"day_",n.context.index,""),t["\u0275nov"](n,6).ngClassUntouched,t["\u0275nov"](n,6).ngClassTouched,t["\u0275nov"](n,6).ngClassPristine,t["\u0275nov"](n,6).ngClassDirty,t["\u0275nov"](n,6).ngClassValid,t["\u0275nov"](n,6).ngClassInvalid,t["\u0275nov"](n,6).ngClassPending),l(n,7,0,t["\u0275inlineInterpolate"](1,"day_",n.context.index,""));var e=t["\u0275unv"](n,8,0,l(n,9,0,t["\u0275nov"](n.parent.parent,0),n.context.$implicit.moment,"date-long")),u=n.context.$implicit.moment.format("dddd");l(n,8,0,e,u)}))}function el(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[["class","content__section-body scrollable"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,ll)),t["\u0275did"](2,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](3,0,null,null,2,"div",[["class","checkbox-list__body"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,nl)),t["\u0275did"](5,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275eld"](6,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,2,"button",[["class","btn btn--primary"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.saveCalendar()&&t),t}),null,null)),(l()(),t["\u0275ted"](8,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=n.component;l(n,2,0,e.showAlert),l(n,5,0,e.daysToShow)}),(function(l,n){l(n,8,0,t["\u0275unv"](n,8,0,t["\u0275nov"](n,9).transform("page.working-days-setup.button.save.name")))}))}function tl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","content__section_body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","section-loader"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"app-loader",[],[[8,"className",0]],null,null,U.b,U.a)),t["\u0275did"](3,49152,null,0,$.a,[],null,null)],null,(function(l,n){l(n,2,0,t["\u0275nov"](n,3).cssClassByType)}))}function ul(l){return t["\u0275vid"](0,[t["\u0275pid"](0,K.a,[G.a,C.b]),(l()(),t["\u0275eld"](1,0,null,null,36,"div",[["class","page__actions_bar page__actions_bar--aligned"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,35,"div",[["class","align-left"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,7,"label",[["class","c_checkbox user-groups-toggle-checkbox"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,3,"div",[["class","c_checkbox-label"]],null,null,null,null,null)),(l()(),t["\u0275ted"](5,null,["","/",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](8,0,null,null,2,"div",[["class","c_checkbox-toggle"]],null,null,null,null,null)),(l()(),t["\u0275eld"](9,0,null,null,0,"input",[["type","checkbox"]],[[8,"checked",0],[8,"disabled",0]],[[null,"change"]],(function(l,n,e){var t=!0;return"change"===n&&(t=!1!==l.component.toggleCalendarType()&&t),t}),null,null)),(l()(),t["\u0275eld"](10,0,null,null,0,"div",[["class","c_checkbox-toggle-view"]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,12,"div",[["class","c_dropdown-std less-border groups-filter"]],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,9,"div",[["class","c_dropdown-std_value"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleStoresDropDown()&&t),t}),null,null)),(l()(),t["\u0275eld"](13,0,null,null,7,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](14,0,null,null,2,"span",[["class","show-for-mobile"]],null,null,null,null,null)),(l()(),t["\u0275ted"](15,null,["",":"])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](17,0,null,null,2,"span",[["class","hide-for-mobile"]],null,null,null,null,null)),(l()(),t["\u0275ted"](18,null,["",":"])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275ted"](20,null,[" "," "])),(l()(),t["\u0275eld"](21,0,null,null,0,"span",[["class","icon-arrow-s-down"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Z)),t["\u0275did"](23,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](24,0,null,null,13,"div",[["class","c_dropdown-std less-border groups-filter"]],null,null,null,null,null)),(l()(),t["\u0275eld"](25,0,null,null,10,"div",[["class","c_dropdown-std_value"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleDatesDropDown()&&t),t}),null,null)),(l()(),t["\u0275eld"](26,0,null,null,8,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](27,0,null,null,2,"span",[["class","show-for-mobile"]],null,null,null,null,null)),(l()(),t["\u0275ted"](28,null,["",":"])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](30,0,null,null,2,"span",[["class","hide-for-mobile"]],null,null,null,null,null)),(l()(),t["\u0275ted"](31,null,["",":"])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275ted"](33,null,[" "," "])),t["\u0275ppd"](34,2),(l()(),t["\u0275eld"](35,0,null,null,0,"span",[["class","icon-arrow-s-down"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Q)),t["\u0275did"](37,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](38,0,null,null,9,"div",[["class","content__section"]],null,null,null,null,null)),(l()(),t["\u0275eld"](39,0,null,null,4,"div",[["class","content__section-header"]],null,null,null,null,null)),(l()(),t["\u0275eld"](40,0,null,null,3,"h4",[["class","content__section-heading"]],null,null,null,null,null)),(l()(),t["\u0275ted"](41,null,["",": ",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275and"](16777216,null,null,1,null,el)),t["\u0275did"](45,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,tl)),t["\u0275did"](47,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,23,0,e.storesDropDownOpened),l(n,37,0,e.datesDropDownOpened),l(n,45,0,!e.loading),l(n,47,0,e.loading)}),(function(l,n){var e=n.component;l(n,5,0,t["\u0275unv"](n,5,0,t["\u0275nov"](n,6).transform(e.salesTitle)),t["\u0275unv"](n,5,1,t["\u0275nov"](n,7).transform(e.servicesPartsTitle))),l(n,9,0,!e.calendarType,e.loading),l(n,15,0,t["\u0275unv"](n,15,0,t["\u0275nov"](n,16).transform("page.working-days-setup.filter.by-store.name"))),l(n,18,0,t["\u0275unv"](n,18,0,t["\u0275nov"](n,19).transform("page.working-days-setup.filter.by-store.mobile-name"))),l(n,20,0,e.selectedStoreName),l(n,28,0,t["\u0275unv"](n,28,0,t["\u0275nov"](n,29).transform("page.working-days-setup.filter.by-month.name"))),l(n,31,0,t["\u0275unv"](n,31,0,t["\u0275nov"](n,32).transform("page.working-days-setup.filter.by-month.mobile-name")));var u=t["\u0275unv"](n,33,0,l(n,34,0,t["\u0275nov"](n,0),e.selectedDateMoment,"long-month-year"));l(n,33,0,u),l(n,41,0,t["\u0275unv"](n,41,0,t["\u0275nov"](n,42).transform("page.working-days-setup.caption")),t["\u0275unv"](n,41,1,t["\u0275nov"](n,43).transform(e.selectedCalendarTitle)))}))}var il=t["\u0275ccf"]("ng-component",Y,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,ul,X)),t["\u0275did"](1,245760,null,0,Y,[f.a,S.a,H.a,z,v.j],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),ol=e("+RwI"),al=e("3Pji");class sl{constructor(l,n){this.settingsApi=l,this.dialog=n,this.docs=[],this.subs=[]}set sub(l){this.subs.push(l)}ngOnInit(){this.sub=this.settingsApi.getDocsColoring("-1").subscribe(l=>{this.docs=l.base.map(l=>(l.salesRange=[-100,+l.redValue,+l.greenValue,100],l.expensesRange=[-100,+l.greenExpensesValue,+l.redExpensesValue,100],l))})}ngOnDestroy(){this.subs.forEach(l=>l.unsubscribe())}updateValue(l,n){this.sub=this.settingsApi.setDocsColoring(l.docId,n?l.expensesRange[1]:l.salesRange[2],n?l.expensesRange[2]:l.salesRange[1],n).subscribe(()=>this.dialog.successT("page.coloring-threshold.saving.successful"),()=>this.dialog.alertT("page.coloring-threshold.saving.server-error.can-not-save"))}}var rl=t["\u0275crt"]({encapsulation:0,styles:[[".col-md-12[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{float:left}.col-md-5[_ngcontent-%COMP%]{width:40%;display:inline-block;margin-right:4pc;padding:8px 0}.col-md-2[_ngcontent-%COMP%]{width:14%;display:inline-block;padding:14px 1%}.col-md-4[_ngcontent-%COMP%]{display:inline-block;width:25%;padding:18px 1%;text-align:center}.col-md-4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}.doc-add-form[_ngcontent-%COMP%]:nth-child(even){background-color:#fff}.col-md-12[_ngcontent-%COMP%]{width:100%;display:block}@media (max-width:768px){.col-md-2[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%]{display:block;width:100%}.col-md-2[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:block;margin:0 auto}}.bolder[_ngcontent-%COMP%]{font-weight:bolder}"]],data:{}});function dl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,36,"div",[["class","doc-add-form row-fluid collapse custom-marked-form"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,35,"div",[["class","row collapse kpi-settings"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,2,"div",[["class","col-md-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,1,"span",[["class","bolder"]],null,null,null,null,null)),(l()(),t["\u0275ted"](4,null,[""," (%)"])),(l()(),t["\u0275eld"](5,0,null,null,15,"div",[["class","col-md-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,2,"div",[["class","col-md-4"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Sales"])),(l()(),t["\u0275eld"](9,0,null,null,7,"div",[["class","col-md-5"]],null,null,null,null,null)),(l()(),t["\u0275eld"](10,0,null,null,6,"nouislider",[["class","nouislider old-design"]],[[2,"ng2-nouislider",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],(function(l,n,e){var t=!0;return"ngModelChange"===n&&(t=!1!==(l.context.$implicit.salesRange=e)&&t),t}),ol.b,ol.a)),t["\u0275did"](11,638976,null,0,al.a,[t.ElementRef,t.Renderer2],{behaviour:[0,"behaviour"],connect:[1,"connect"],min:[2,"min"],max:[3,"max"],step:[4,"step"],ngModel:[5,"ngModel"],tooltips:[6,"tooltips"]},null),t["\u0275pad"](12,4),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[al.a]),t["\u0275did"](14,671744,null,0,q.v,[[8,null],[8,null],[8,null],[6,q.q]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.v]),t["\u0275did"](16,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](17,0,null,null,3,"div",[["class","col-md-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](18,0,null,null,2,"button",[["class","btn btn--primary"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.updateValue(l.context.$implicit,!1)&&t),t}),null,null)),(l()(),t["\u0275ted"](19,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](21,0,null,null,15,"div",[["class","col-md-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](22,0,null,null,2,"div",[["class","col-md-4"]],null,null,null,null,null)),(l()(),t["\u0275eld"](23,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Expenses"])),(l()(),t["\u0275eld"](25,0,null,null,7,"div",[["class","col-md-5"]],null,null,null,null,null)),(l()(),t["\u0275eld"](26,0,null,null,6,"nouislider",[["class","nouislider old-design reversed"]],[[2,"ng2-nouislider",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],(function(l,n,e){var t=!0;return"ngModelChange"===n&&(t=!1!==(l.context.$implicit.expensesRange=e)&&t),t}),ol.b,ol.a)),t["\u0275did"](27,638976,null,0,al.a,[t.ElementRef,t.Renderer2],{behaviour:[0,"behaviour"],connect:[1,"connect"],min:[2,"min"],max:[3,"max"],step:[4,"step"],ngModel:[5,"ngModel"],tooltips:[6,"tooltips"]},null),t["\u0275pad"](28,4),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[al.a]),t["\u0275did"](30,671744,null,0,q.v,[[8,null],[8,null],[8,null],[6,q.q]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.v]),t["\u0275did"](32,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](33,0,null,null,3,"div",[["class","col-md-2"]],null,null,null,null,null)),(l()(),t["\u0275eld"](34,0,null,null,2,"button",[["class","btn btn--primary"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.updateValue(l.context.$implicit,!0)&&t),t}),null,null)),(l()(),t["\u0275ted"](35,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=n.context.$implicit.salesRange,t=l(n,12,0,!1,!0,!0,!1);l(n,11,0,"drag",!0,-100,100,1,e,t),l(n,14,0,n.context.$implicit.salesRange);var u=n.context.$implicit.expensesRange,i=l(n,28,0,!1,!0,!0,!1);l(n,27,0,"drag",!0,-100,100,1,u,i),l(n,30,0,n.context.$implicit.expensesRange)}),(function(l,n){l(n,4,0,n.context.$implicit.docName),l(n,10,0,!0,t["\u0275nov"](n,16).ngClassUntouched,t["\u0275nov"](n,16).ngClassTouched,t["\u0275nov"](n,16).ngClassPristine,t["\u0275nov"](n,16).ngClassDirty,t["\u0275nov"](n,16).ngClassValid,t["\u0275nov"](n,16).ngClassInvalid,t["\u0275nov"](n,16).ngClassPending),l(n,19,0,t["\u0275unv"](n,19,0,t["\u0275nov"](n,20).transform("page.working-days-setup.button.save.name"))),l(n,26,0,!0,t["\u0275nov"](n,32).ngClassUntouched,t["\u0275nov"](n,32).ngClassTouched,t["\u0275nov"](n,32).ngClassPristine,t["\u0275nov"](n,32).ngClassDirty,t["\u0275nov"](n,32).ngClassValid,t["\u0275nov"](n,32).ngClassInvalid,t["\u0275nov"](n,32).ngClassPending),l(n,35,0,t["\u0275unv"](n,35,0,t["\u0275nov"](n,36).transform("page.working-days-setup.button.save.name")))}))}function cl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"div",[["class","page__actions_bar page__actions_bar--aligned"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,8,"div",[["class","content__section"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,3,"div",[["class","content__section-header"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,2,"h4",[["class","content__section-heading"]],null,null,null,null,null)),(l()(),t["\u0275ted"](4,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](6,0,null,null,3,"div",[["class","content__section-body scrollable"],["style","padding: 0;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,2,"div",[["style","margin-top: 2pc;"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,dl)),t["\u0275did"](9,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,9,0,n.component.docs)}),(function(l,n){l(n,4,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform("page.coloring-threshold.caption")))}))}var gl=t["\u0275ccf"]("ng-component",sl,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,cl,rl)),t["\u0275did"](1,245760,null,0,sl,[z,H.a],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),pl=e("0I5a"),ml=e("/wis"),vl=e("IheW"),hl=e("Qq/Z"),fl=e("butG"),bl=e("4uHt"),Cl=e("itXk"),yl=e("w0+v"),_l=e("/OSc");class kl{constructor(l,n,e,t,u,i){this.router=l,this.route=n,this.instanceAppSettingsApi=e,this.ccDataApi=t,this.dialog=u,this.translate=i,this.loading=!0,this.TRACKING_EXPENSE="Expense",this.DEFAULT_RANGE=[-50,50],this.DEFAULT_DATE_INDEX="24",this.DEFAULT_CATEGORIES_ORDER=[w.TRACKING,w.NEW,w.USED,w.CRMAPPOINTMENTS,w.CRMLEADS,w.CRMTRAFFICUPS,w.CRMTRAFFICYESTERDAY,w.CRMTRAFFICBDC,w.CRMTRAFFICLEADDETAIL],this.subs=[]}set sub(l){this.subs.push(l)}ngOnInit(){this.initDataSubscription()}ngOnDestroy(){this.subs.forEach(l=>l.unsubscribe())}onSave(){this.loading=!0;const l=this.options.map(l=>Object.assign({},l,{range:[l.range[1],l.range[2]]}));this.instanceAppSettingsApi.save("pages.control-center.main",{coloringThreshold:l}).pipe(Object(B.a)(()=>this.loading=!1)).subscribe(()=>{this.dialog.successT("page.control-center-coloring-threshold.saving.successful")},()=>{this.dialog.alertT("page.control-center-coloring-threshold.saving.server-error.can-not-save")})}onCancel(){this.router.navigate([".."],{relativeTo:this.route})}isPercentFormat(l){return-1!==["per","per2","per-3f","per-round"].indexOf(l)}initDataSubscription(){this.sub=Object(Cl.b)([this.instanceAppSettingsApi.getByType("pages.control-center.main"),this.ccDataApi.getOperationsSummaryData({screenId:yl.d.Operations,dateIndex:this.DEFAULT_DATE_INDEX}),this.translate.get(["page.control-center-coloring-threshold.category.new.option.units.name","page.control-center-coloring-threshold.category.used.option.units.name","page.control-center-coloring-threshold.category.new.option.pru-front.name","page.control-center-coloring-threshold.category.new.option.pru-back.name","page.control-center-coloring-threshold.category.used.option.pru-front.name","page.control-center-coloring-threshold.category.used.option.pru-back.name"])]).pipe(Object(B.a)(()=>this.loading=!1)).subscribe(([l,n,e])=>{this.setOptions(l,n,e),this.categories=this.DEFAULT_CATEGORIES_ORDER.map(l=>({id:l,items:this.options.filter(n=>n.category===l)}))})}addOption(l){const n=this.options.find(n=>n.screenId===l.screenId&&n.sectionId===l.sectionId&&n.sectionLine===l.sectionLine&&(!l.field||n.field===l.field));l.reversed=this.isReversed(l),n?(n.label=l.label,n.range=[-100,...l.range,100],n.reversed=l.reversed):this.options.push(l)}isReversed(l){return l.screenId===yl.d.Operations&&l.sectionId===_l.e.TRACKING&&-1!==l.label.indexOf(this.TRACKING_EXPENSE)}setOptions(l,n,e){this.options=l&&l.coloringThreshold||[],this.options.forEach(l=>{let t;switch(l.category){case w.TRACKING:t=l.label;break;case w.NEW:l.sectionLine===n.newData.units.sectionLine?t=e["page.control-center-coloring-threshold.category.new.option.units.name"]:l.sectionLine===n.newData.pru.front.sectionLine?t=e["page.control-center-coloring-threshold.category.new.option.pru-front.name"]:l.sectionLine===n.newData.pru.back.sectionLine&&(t=e["page.control-center-coloring-threshold.category.new.option.pru-back.name"]);break;case w.USED:l.sectionLine===n.usedData.units.sectionLine?t=e["page.control-center-coloring-threshold.category.used.option.units.name"]:l.sectionLine===n.usedData.pru.front.sectionLine?t=e["page.control-center-coloring-threshold.category.used.option.pru-front.name"]:l.sectionLine===n.usedData.pru.back.sectionLine&&(t=e["page.control-center-coloring-threshold.category.used.option.pru-back.name"]);break;default:t=l.label}this.addOption({screenId:l.screenId,sectionId:l.sectionId,sectionLine:l.sectionLine,label:t,field:l.field?l.field:"",category:l.category,format:l.format,range:[...l.range]})});const t={crmappointments:w.CRMAPPOINTMENTS,crmleads:w.CRMLEADS,crmtrafficups:w.CRMTRAFFICUPS,crmtrafficyesterday:w.CRMTRAFFICYESTERDAY,crmtrafficbdc:w.CRMTRAFFICBDC,crmleaddetail:w.CRMTRAFFICLEADDETAIL};this.options.filter(l=>l.category.includes("crm")).forEach(l=>{this.addOption({screenId:yl.d.Operations,sectionId:_l.e.CRM,sectionLine:l.sectionLine,item:l.item,label:l.label,category:t[l.category],format:"per",range:[...this.DEFAULT_RANGE]})}),this.options=this.options.filter(l=>this.isPercentFormat(l.format))}}var Dl=e("XpwZ"),Rl=t["\u0275crt"]({encapsulation:0,styles:[[".content__section[_ngcontent-%COMP%]{margin-top:20px}.content__section-body[_ngcontent-%COMP%]{position:relative;padding:20px}.content__section[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-top:40px;padding:20px}.col-md-12[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{float:left}.col-md-5[_ngcontent-%COMP%]{width:40%;display:inline-block;margin-right:4pc}.col-md-2[_ngcontent-%COMP%]{width:14%;display:inline-block;padding:1%}.col-md-4[_ngcontent-%COMP%]{display:inline-block;width:25%;padding:1%;text-align:center}.col-md-4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}.occ-add-form[_ngcontent-%COMP%]:nth-child(even){background-color:#fff}.col-md-12[_ngcontent-%COMP%]{width:100%;display:block}@media (max-width:768px){.col-md-2[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%]{display:block;width:100%}.col-md-2[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:block;margin:0 auto}}.bolder[_ngcontent-%COMP%]{font-weight:bolder}"]],data:{}});function Ml(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-loader",[],[[8,"className",0]],null,null,U.b,U.a)),t["\u0275did"](1,49152,null,0,$.a,[],{type:[0,"type"]},null)],(function(l,n){l(n,1,0,n.component.categories?"overlay":"overlay-transparent")}),(function(l,n){l(n,0,0,t["\u0275nov"](n,1).cssClassByType)}))}function wl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["(%)"]))],null,null)}function Il(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,13,"div",[["class","col-md-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,4,"div",[["class","col-md-4"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](3,null,[""," "])),(l()(),t["\u0275and"](16777216,null,null,1,null,wl)),t["\u0275did"](5,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](6,0,null,null,7,"div",[["class","col-md-5"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,6,"nouislider",[["class","nouislider old-design"]],[[2,"reversed",null],[2,"ng2-nouislider",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],(function(l,n,e){var t=!0;return"ngModelChange"===n&&(t=!1!==(l.context.$implicit.range=e)&&t),t}),ol.b,ol.a)),t["\u0275did"](8,638976,null,0,al.a,[t.ElementRef,t.Renderer2],{behaviour:[0,"behaviour"],connect:[1,"connect"],min:[2,"min"],max:[3,"max"],step:[4,"step"],ngModel:[5,"ngModel"],tooltips:[6,"tooltips"]},null),t["\u0275pad"](9,4),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[al.a]),t["\u0275did"](11,671744,null,0,q.v,[[8,null],[8,null],[8,null],[6,q.q]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.v]),t["\u0275did"](13,16384,null,0,q.s,[[4,q.r]],null,null)],(function(l,n){l(n,5,0,n.component.isPercentFormat(n.context.$implicit.format));var e=n.context.$implicit.range,t=l(n,9,0,!1,!0,!0,!1);l(n,8,0,"drag",!0,-100,100,1,e,t),l(n,11,0,n.context.$implicit.range)}),(function(l,n){l(n,3,0,n.context.$implicit.label),l(n,7,0,n.context.$implicit.reversed,!0,t["\u0275nov"](n,13).ngClassUntouched,t["\u0275nov"](n,13).ngClassTouched,t["\u0275nov"](n,13).ngClassPristine,t["\u0275nov"](n,13).ngClassDirty,t["\u0275nov"](n,13).ngClassValid,t["\u0275nov"](n,13).ngClassInvalid,t["\u0275nov"](n,13).ngClassPending)}))}function Sl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","occ-add-form row-fluid collapse custom-marked-form"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,7,"div",[["class","row collapse kpi-settings"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,4,"div",[["class","col-md-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,2,"span",[["class","bolder"]],null,null,null,null,null)),(l()(),t["\u0275ted"](5,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275and"](16777216,null,null,1,null,Il)),t["\u0275did"](8,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,8,0,n.parent.context.$implicit.items)}),(function(l,n){l(n,5,0,t["\u0275unv"](n,5,0,t["\u0275nov"](n,6).transform("page.control-center-coloring-threshold.category."+n.parent.context.$implicit.id+".caption")))}))}function Ol(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Sl)),t["\u0275did"](2,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](0,null,null,0))],(function(l,n){l(n,2,0,null==n.context.$implicit.items?null:n.context.$implicit.items.length)}),null)}function xl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,16,"div",[["class","content__section"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"div",[["class","content__section-header content__section-header--justify"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,2,"h4",[["class","content__section-heading"]],null,null,null,null,null)),(l()(),t["\u0275ted"](3,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](5,0,null,null,4,"div",[["class","content__section-body scrollable"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Ml)),t["\u0275did"](7,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,Ol)),t["\u0275did"](9,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275eld"](10,0,null,null,6,"div",[["class","buttons"]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,2,"button",[["class","btn btn--primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onSave()&&t),t}),null,null)),(l()(),t["\u0275ted"](12,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](14,0,null,null,2,"button",[["class","btn btn--color-secondary btn--empty"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onCancel()&&t),t}),null,null)),(l()(),t["\u0275ted"](15,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=n.component;l(n,7,0,!e.categories||e.loading),l(n,9,0,e.categories)}),(function(l,n){var e=n.component;l(n,3,0,t["\u0275unv"](n,3,0,t["\u0275nov"](n,4).transform("page.control-center-coloring-threshold.caption"))),l(n,11,0,e.loading),l(n,12,0,t["\u0275unv"](n,12,0,t["\u0275nov"](n,13).transform("page.control-center-coloring-threshold.button.save.name"))),l(n,14,0,e.loading),l(n,15,0,t["\u0275unv"](n,15,0,t["\u0275nov"](n,16).transform("page.control-center-coloring-threshold.button.cancel.name")))}))}var Tl=t["\u0275ccf"]("ng-component",kl,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"ng-component",[],null,null,null,xl,Rl)),t["\u0275prd"](512,null,pl.a,pl.a,[C.b]),t["\u0275prd"](512,null,ml.a,ml.a,[vl.c,hl.a,fl.a,pl.a,S.a,bl.a]),t["\u0275did"](3,245760,null,0,kl,[p.o,p.a,Dl.a,ml.a,H.a,v.j],null,null)],(function(l,n){l(n,3,0)}),null)}),{},{},[]),Pl=e("FW2/"),El=e("k5Dw"),Ll=e("E+en"),jl=e("ZdEx"),Al=e("JX91");class Fl{constructor(l,n,e){this.fb=l,this.cdr=n,this.loading=!1,this.save=new t.EventEmitter,this.cancel=new t.EventEmitter,this.subs=[],this.debug=e.factory(new.target.name)}set sub(l){this.subs.push(l)}ngOnInit(){this.form=this.fb.group({enabled:[!1,[q.D.required]],saml:this.fb.group(this.initOktaSamlFormModel())}),this.subscribeOktaEnabled()}ngOnChanges(l){l.initialModel&&this.initialModel instanceof _&&(this.form.patchValue({enabled:this.initialModel.enabled,saml:{defaultUse:this.initialModel.defaultUse,singleSignOnUrl:this.initialModel.singleSignOnUrl,issuer:this.initialModel.issuer,cert:this.initialModel.cert,embedLink:this.initialModel.embedLink}}),this.cdr.markForCheck())}ngOnDestroy(){this.subs.forEach(l=>l.unsubscribe())}onCancel(){this.cancel.emit()}onSubmit(l){if(this.initialModel instanceof _==0)return void this.debug.warn("onSubmit(): initialModel didn't set. Saving rejected");const n=this.initialModel.clone({enabled:l.enabled});l.saml&&n.patch({defaultUse:l.saml.defaultUse,singleSignOnUrl:l.saml.singleSignOnUrl,issuer:l.saml.issuer,cert:l.saml.cert,embedLink:l.saml.embedLink}),this.save.emit(n)}initOktaSamlFormModel(){return{defaultUse:[!0,[q.D.required]],singleSignOnUrl:["",[q.D.required,q.D.pattern(/^https?:\/\/.+okta(?:preview)?\.com\/app\/.+saml/)]],issuer:["",[q.D.required,q.D.pattern(/^https?:\/\/.+okta\.com/)]],cert:["",[q.D.required,q.D.pattern(/^(-{5})BEGIN CERTIFICATE\1(?:.|\n)+\1END CERTIFICATE\1$/)]],embedLink:["",[q.D.pattern(/^https?:\/\/.+okta(?:preview)?\.com\/home\/[^/]+\/[^/]+\/[^/]+$/)]]}}subscribeOktaEnabled(){const l=this.form.controls.enabled.valueChanges,n=this.form.controls.saml,e=this.initOktaSamlFormModel();this.sub=l.pipe(Object(Al.a)(this.form.controls.enabled.value)).subscribe(l=>{l?n.enable():n.disable(),l?Object.keys(n.controls).forEach(l=>{n.controls[l].setValidators(e[l][1]),n.controls[l].updateValueAndValidity()}):Object.keys(n.controls).forEach(l=>{n.controls[l].setValidators(null),n.controls[l].updateValueAndValidity()}),this.cdr.markForCheck()})}}var Nl=t["\u0275crt"]({encapsulation:0,styles:[[".content__section-body[_ngcontent-%COMP%]{position:relative;min-height:200px}label[_ngcontent-%COMP%]{display:block}.input__text[_ngcontent-%COMP%]{display:block;width:100%}textarea[_ngcontent-%COMP%]{height:200px}form[_ngcontent-%COMP%]{margin-top:20px}fieldset[_ngcontent-%COMP%]{border:0;padding:0;margin:0}.help-tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block;box-sizing:content-box;margin-left:5px;width:7px;height:19px;padding:0 6px;border-radius:50%;background-color:#333;color:#fff;line-height:20px}"]],data:{}});function Vl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-loader",[],[[8,"className",0]],null,null,U.b,U.a)),t["\u0275did"](1,49152,null,0,$.a,[],{type:[0,"type"]},null)],(function(l,n){l(n,1,0,n.component.initialModel?"overlay":"overlay-transparent")}),(function(l,n){l(n,0,0,t["\u0275nov"](n,1).cssClassByType)}))}function ql(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,69,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,62,"fieldset",[["formGroupName","saml"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),t["\u0275did"](2,212992,null,0,q.l,[[3,q.d],[8,null],[8,null]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,q.d,null,[q.l]),t["\u0275did"](4,16384,null,0,q.t,[[4,q.d]],null,null),(l()(),t["\u0275eld"](5,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,2,"label",[["for","okta-saml-form_singleSignOnUrl"]],null,null,null,null,null)),(l()(),t["\u0275ted"](7,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](9,0,null,null,5,"input",[["class","input__text"],["formControlName","singleSignOnUrl"],["id","okta-saml-form_singleSignOnUrl"],["placeholder","https://<your-domain>.okta.com/app/.../.../sso/saml"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,10)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,10).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,10)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,10)._compositionEnd(e.target.value)&&u),u}),null,null)),t["\u0275did"](10,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.e]),t["\u0275did"](12,671744,null,0,q.i,[[3,q.d],[8,null],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](14,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](15,0,null,null,1,"app-validation-message",[["controlName","singleSignOnUrl"]],null,null,null,Pl.b,Pl.a)),t["\u0275did"](16,245760,null,0,El.a,[[1,q.d],v.j,C.b],{controlName:[0,"controlName"]},null),(l()(),t["\u0275eld"](17,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](18,0,null,null,2,"label",[["for","okta-saml-form_issuer"]],null,null,null,null,null)),(l()(),t["\u0275ted"](19,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](21,0,null,null,5,"input",[["class","input__text"],["formControlName","issuer"],["id","okta-saml-form_issuer"],["placeholder","http://www.okta.com/..."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,22)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,22).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,22)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,22)._compositionEnd(e.target.value)&&u),u}),null,null)),t["\u0275did"](22,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.e]),t["\u0275did"](24,671744,null,0,q.i,[[3,q.d],[8,null],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](26,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](27,0,null,null,1,"app-validation-message",[["controlName","issuer"]],null,null,null,Pl.b,Pl.a)),t["\u0275did"](28,245760,null,0,El.a,[[1,q.d],v.j,C.b],{controlName:[0,"controlName"]},null),(l()(),t["\u0275eld"](29,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](30,0,null,null,2,"label",[["for","okta-saml-form_cert"]],null,null,null,null,null)),(l()(),t["\u0275ted"](31,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](33,0,null,null,5,"textarea",[["class","input__text"],["formControlName","cert"],["id","okta-saml-form_cert"],["placeholder","-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,34)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,34).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,34)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,34)._compositionEnd(e.target.value)&&u),u}),null,null)),t["\u0275did"](34,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.e]),t["\u0275did"](36,671744,null,0,q.i,[[3,q.d],[8,null],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](38,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](39,0,null,null,1,"app-validation-message",[["controlName","cert"]],null,null,null,Pl.b,Pl.a)),t["\u0275did"](40,245760,null,0,El.a,[[1,q.d],v.j,C.b],{controlName:[0,"controlName"]},null),(l()(),t["\u0275eld"](41,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](42,0,null,null,5,"label",[["for","okta-saml-form_embed-link"]],null,null,null,null,null)),(l()(),t["\u0275ted"](43,null,[" "," "])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](45,0,null,null,2,"span",[["class","help-tooltip"]],[[8,"title",0]],null,null,null,null)),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275ted"](-1,null,["?"])),(l()(),t["\u0275eld"](48,0,null,null,5,"input",[["class","input__text"],["formControlName","embedLink"],["id","okta-saml-form_embed-link"],["placeholder","https://<your-domain>.okta.com/home/<app-name>/.../..."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,49)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,49).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,49)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,49)._compositionEnd(e.target.value)&&u),u}),null,null)),t["\u0275did"](49,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.e]),t["\u0275did"](51,671744,null,0,q.i,[[3,q.d],[8,null],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](53,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](54,0,null,null,1,"app-validation-message",[["controlName","embedLink"]],null,null,null,Pl.b,Pl.a)),t["\u0275did"](55,245760,null,0,El.a,[[1,q.d],v.j,C.b],{controlName:[0,"controlName"]},null),(l()(),t["\u0275eld"](56,0,null,null,7,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](57,0,null,null,6,"app-c-checkbox",[["formControlName","defaultUse"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),t["\u0275did"](58,49152,null,0,jl.a,[C.b],{label:[0,"label"]},null),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[jl.a]),t["\u0275did"](61,671744,null,0,q.i,[[3,q.d],[8,null],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](63,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](64,0,null,null,2,"button",[["class","btn btn--primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(l()(),t["\u0275ted"](65,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](67,0,null,null,2,"button",[["class","btn btn--color-secondary btn--empty"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onCancel()&&t),t}),null,null)),(l()(),t["\u0275ted"](68,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){l(n,2,0,"saml"),l(n,12,0,"singleSignOnUrl"),l(n,16,0,"singleSignOnUrl"),l(n,24,0,"issuer"),l(n,28,0,"issuer"),l(n,36,0,"cert"),l(n,40,0,"cert"),l(n,51,0,"embedLink"),l(n,55,0,"embedLink"),l(n,58,0,t["\u0275unv"](n,58,0,t["\u0275nov"](n,59).transform("page.okta-setup.form.checkbox.default-use.name"))),l(n,61,0,"defaultUse")}),(function(l,n){var e=n.component;l(n,1,0,t["\u0275nov"](n,4).ngClassUntouched,t["\u0275nov"](n,4).ngClassTouched,t["\u0275nov"](n,4).ngClassPristine,t["\u0275nov"](n,4).ngClassDirty,t["\u0275nov"](n,4).ngClassValid,t["\u0275nov"](n,4).ngClassInvalid,t["\u0275nov"](n,4).ngClassPending),l(n,7,0,t["\u0275unv"](n,7,0,t["\u0275nov"](n,8).transform("page.okta-setup.form.field.single-sign-on-url.name"))),l(n,9,0,t["\u0275nov"](n,14).ngClassUntouched,t["\u0275nov"](n,14).ngClassTouched,t["\u0275nov"](n,14).ngClassPristine,t["\u0275nov"](n,14).ngClassDirty,t["\u0275nov"](n,14).ngClassValid,t["\u0275nov"](n,14).ngClassInvalid,t["\u0275nov"](n,14).ngClassPending),l(n,19,0,t["\u0275unv"](n,19,0,t["\u0275nov"](n,20).transform("page.okta-setup.form.field.issuer.name"))),l(n,21,0,t["\u0275nov"](n,26).ngClassUntouched,t["\u0275nov"](n,26).ngClassTouched,t["\u0275nov"](n,26).ngClassPristine,t["\u0275nov"](n,26).ngClassDirty,t["\u0275nov"](n,26).ngClassValid,t["\u0275nov"](n,26).ngClassInvalid,t["\u0275nov"](n,26).ngClassPending),l(n,31,0,t["\u0275unv"](n,31,0,t["\u0275nov"](n,32).transform("page.okta-setup.form.field.certificate.name"))),l(n,33,0,t["\u0275nov"](n,38).ngClassUntouched,t["\u0275nov"](n,38).ngClassTouched,t["\u0275nov"](n,38).ngClassPristine,t["\u0275nov"](n,38).ngClassDirty,t["\u0275nov"](n,38).ngClassValid,t["\u0275nov"](n,38).ngClassInvalid,t["\u0275nov"](n,38).ngClassPending),l(n,43,0,t["\u0275unv"](n,43,0,t["\u0275nov"](n,44).transform("page.okta-setup.form.field.embed-link.name"))),l(n,45,0,t["\u0275unv"](n,45,0,t["\u0275nov"](n,46).transform("page.okta-setup.form.field.embed-link.tooltip"))),l(n,48,0,t["\u0275nov"](n,53).ngClassUntouched,t["\u0275nov"](n,53).ngClassTouched,t["\u0275nov"](n,53).ngClassPristine,t["\u0275nov"](n,53).ngClassDirty,t["\u0275nov"](n,53).ngClassValid,t["\u0275nov"](n,53).ngClassInvalid,t["\u0275nov"](n,53).ngClassPending),l(n,57,0,t["\u0275nov"](n,63).ngClassUntouched,t["\u0275nov"](n,63).ngClassTouched,t["\u0275nov"](n,63).ngClassPristine,t["\u0275nov"](n,63).ngClassDirty,t["\u0275nov"](n,63).ngClassValid,t["\u0275nov"](n,63).ngClassInvalid,t["\u0275nov"](n,63).ngClassPending),l(n,64,0,e.form.invalid),l(n,65,0,t["\u0275unv"](n,65,0,t["\u0275nov"](n,66).transform("page.okta-setup.form.button.submit.name"))),l(n,68,0,t["\u0275unv"](n,68,0,t["\u0275nov"](n,69).transform("page.okta-setup.form.button.cancel.name")))}))}function Ul(l){return t["\u0275vid"](2,[(l()(),t["\u0275eld"](0,0,null,null,21,"form",[["class","content__section"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(l,n,e){var u=!0,i=l.component;return"submit"===n&&(u=!1!==t["\u0275nov"](l,2).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,2).onReset()&&u),"ngSubmit"===n&&(u=!1!==i.onSubmit(i.form.value)&&u),u}),null,null)),t["\u0275did"](1,16384,null,0,q.I,[],null,null),t["\u0275did"](2,540672,null,0,q.k,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t["\u0275prd"](2048,null,q.d,null,[q.k]),t["\u0275did"](4,16384,null,0,q.t,[[4,q.d]],null,null),(l()(),t["\u0275eld"](5,0,null,null,11,"div",[["class","content__section-header content__section-header--justify"]],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,2,"h4",[["class","content__section-heading"]],null,null,null,null,null)),(l()(),t["\u0275ted"](7,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](9,0,null,null,7,"div",[["class","content__section-header__actions"]],null,null,null,null,null)),(l()(),t["\u0275eld"](10,0,null,null,6,"app-c-checkbox",[["formControlName","enabled"],["labelPos","left"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),t["\u0275did"](11,49152,null,0,jl.a,[C.b],{label:[0,"label"],labelPos:[1,"labelPos"]},null),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[jl.a]),t["\u0275did"](14,671744,null,0,q.i,[[3,q.d],[8,null],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](16,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](17,0,null,null,4,"div",[["class","content__section-body"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Vl)),t["\u0275did"](19,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,ql)),t["\u0275did"](21,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,2,0,e.form),l(n,11,0,t["\u0275unv"](n,11,0,t["\u0275nov"](n,12).transform("page.okta-setup.form.checkbox.enable-login-via-okta.name")),"left"),l(n,14,0,"enabled"),l(n,19,0,!e.initialModel||e.loading),l(n,21,0,e.initialModel)}),(function(l,n){l(n,0,0,t["\u0275nov"](n,4).ngClassUntouched,t["\u0275nov"](n,4).ngClassTouched,t["\u0275nov"](n,4).ngClassPristine,t["\u0275nov"](n,4).ngClassDirty,t["\u0275nov"](n,4).ngClassValid,t["\u0275nov"](n,4).ngClassInvalid,t["\u0275nov"](n,4).ngClassPending),l(n,7,0,t["\u0275unv"](n,7,0,t["\u0275nov"](n,8).transform("page.okta-setup.caption"))),l(n,10,0,t["\u0275nov"](n,16).ngClassUntouched,t["\u0275nov"](n,16).ngClassTouched,t["\u0275nov"](n,16).ngClassPristine,t["\u0275nov"](n,16).ngClassDirty,t["\u0275nov"](n,16).ngClassValid,t["\u0275nov"](n,16).ngClassInvalid,t["\u0275nov"](n,16).ngClassPending)}))}class $l{constructor(l,n,e,t,u,i){this.instanceOktaSamlApi=l,this.userApi=n,this.dialog=e,this.router=t,this.route=u,this.loading=!1,this.subs=[],this.debug=i.factory(new.target.name)}set sub(l){this.subs.push(l)}ngOnInit(){this.sub=this.instanceOktaSamlApi.getOktaSamlConfig().subscribe(l=>this.model=l,l=>{this.debug.warn("ngOnInit(): Can not load configuration. Error:",l),this.dialog.warningT("page.okta-setup.loading.server-error.can-not-save",{suffix:this.dialog.tryAgainLaterMessage})})}ngOnDestroy(){this.subs.forEach(l=>l.unsubscribe())}onCancel(){this.router.navigate([".."],{relativeTo:this.route})}onSave(l){this.loading=!0,this.instanceOktaSamlApi.saveOktaSamlConfig(l).pipe(Object(B.a)(()=>this.loading=!1)).subscribe(n=>{this.userApi.patchComplexDataCache({okta_default_use:+l.defaultUse,okta_enabled:+l.enabled}),this.router.navigate([".."],{relativeTo:this.route})},l=>{this.debug.warn("onSave(): Can not save. Error:",l),this.dialog.warningT("page.okta-setup.saving.server-error.can-not-save",{suffix:this.dialog.tryAgainLaterMessage})})}}var Kl=e("jMGS"),Gl=t["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Bl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-okta-saml-form",[],null,[[null,"save"],[null,"cancel"]],(function(l,n,e){var t=!0,u=l.component;return"save"===n&&(t=!1!==u.onSave(e)&&t),"cancel"===n&&(t=!1!==u.onCancel()&&t),t}),Ul,Nl)),t["\u0275did"](1,770048,null,0,Fl,[q.f,t.ChangeDetectorRef,C.b],{initialModel:[0,"initialModel"],loading:[1,"loading"]},{save:"save",cancel:"cancel"})],(function(l,n){var e=n.component;l(n,1,0,e.model,e.loading)}),null)}var Yl=t["\u0275ccf"]("ng-component",$l,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Bl,Gl)),t["\u0275did"](1,245760,null,0,$l,[I,Kl.a,H.a,p.o,p.a,C.b],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),Hl=e("Asqg"),zl=e("1Elx"),Xl=e("zeHk"),Wl=e("+bil"),Zl=e("ChPW"),Jl=e("M5gX"),Ql=e("hfps"),ln=e("mvzq"),nn=e("t1ag"),en=e("K5C0"),tn=e("zp2H"),un=e("v67E"),on=e("2v1Z");class an{constructor(l,n,e,t){this.authService=l,this.settingsApi=n,this.dialog=e,this.translate=t,this.docs=[],this.detailsData=[],this.detailsHeader=[],this.detailsLoading=!0,this.currentEmail={eId:0,Email:"",FirstName:"",LastName:"",Active:!1,SendingDays:"",Store:"",Report:""},this.existing=!1,this.deleting=!1,this.subs=[]}set sub(l){this.subs.push(l)}ngOnInit(){this.pageLoad()}ngOnDestroy(){this.subs.forEach(l=>l.unsubscribe())}showControlDetails(l){const n=l.rowItem;this.currentEmail.eId=n.Id,this.currentEmail.Email=n.Email,this.currentEmail.FirstName=n.FirstName,this.currentEmail.LastName=n.lastName,this.currentEmail.Active="True"===n.Active||"true"===n.Active,this.currentEmail.SendingDays=n.SendingDays,this.currentEmail.Store=n.StoreId,this.currentEmail.Report=n.ReportId,this.existing=!0,this.setupModal.showModal()}onModalSetupInit(l){this.setupModal=l}onModalSetupClose(){this.existing=!1,this.deleting=!1,this.setupModal.showModal(!1)}onSubmit(l){if(this.detailsLoading=!0,this.deleting)return void(this.sub=this.settingsApi.deleteEmailSetUp(l.eId).subscribe(l=>{this.dialog.success("Setup deleted OK"),this.pageLoad(),this.onModalSetupClose()},l=>this.dialog.alert("Error deleting information")));let n=!0;for(const e in l)null!=l[e]&&""!==l[e]||(n=!1);n?this.sub=this.settingsApi.saveEmailSetUp(l.eId,l.name,l.lName,l.em,this.currentEmail.Active,l.sd,l.st,l.rpt,!this.existing).subscribe(l=>{this.dialog.success("Setup saved OK"),this.pageLoad(),this.onModalSetupClose()},l=>this.dialog.alert("Error updating information")):this.dialog.alert("Please fill all the fields")}createEmailSetup(){this.currentEmail.eId=0,this.currentEmail.Email="",this.currentEmail.FirstName="",this.currentEmail.LastName="",this.currentEmail.Active=!1,this.currentEmail.SendingDays="",this.currentEmail.Store="",this.currentEmail.Report="",this.existing=!1,this.setupModal.showModal()}flipChangeToggle(l){this.currentEmail.Active=l.target.checked}mapTableHeaders(){this.sub=this.translate.get(["page.email-setup.modal.form.field.first-name.name","page.email-setup.modal.form.field.last-name.name","page.email-setup.modal.form.field.email.name","page.email-setup.modal.form.checkbox.active.name","page.email-setup.modal.form.field.days-to-send.name","page.email-setup.modal.form.field.store.name","page.email-setup.modal.form.field.report.name"]).subscribe(l=>{this.detailsHeader=[{field:l["page.email-setup.modal.form.field.first-name.name"],value:"FirstName"},{field:l["page.email-setup.modal.form.field.last-name.name"],value:"lastName"},{field:l["page.email-setup.modal.form.field.email.name"],value:"Email"},{field:l["page.email-setup.modal.form.checkbox.active.name"],value:"Active"},{field:l["page.email-setup.modal.form.field.days-to-send.name"],value:"SendingDays"},{field:l["page.email-setup.modal.form.field.store.name"],value:"Store"},{field:l["page.email-setup.modal.form.field.report.name"],value:"Report"}]})}getEmailsInfo(l){this.detailsData=[],this.detailsHeader=[];let n=[];this.colsGrid=[],this.mapTableHeaders(),l.data.forEach(l=>{for(const e of Object.keys(l)){const t={isnumber:!1,sign:"",value:l[e],field:e,decimalNumber:!1};if("active"===e.toLowerCase()){const l=t.value.replace(/\s/g,"").toString();t.value="1"===l||"true"===l||"True"===l?"True":"False"}n.push(t)}this.detailsData.push(n),n=[]}),this.detailsHeader.forEach(l=>{this.colsGrid.push({text:l.field,field:l.value})}),this.colsGrid.push({hide:!0,field:"Id",text:""}),this.colsGrid.push({hide:!0,field:"ReportId",text:""}),this.colsGrid.push({hide:!0,field:"StoreId",text:""}),this.Stores=l.stores,this.Reports=l.reports,this.detailsLoading=!1}pageLoad(){this.sub=this.settingsApi.getEmails().subscribe(l=>{this.getEmailsInfo(l.base)})}}var sn=t["\u0275crt"]({encapsulation:0,styles:[[".col-md-12[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{float:left}.col-md-5[_ngcontent-%COMP%]{width:40%;display:inline-block;margin-right:4pc}.col-md-2[_ngcontent-%COMP%]{width:14%;display:inline-block;padding:1%}.col-md-4[_ngcontent-%COMP%]{display:inline-block;width:25%;padding:1%;text-align:center}.col-md-4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}.col-md-12[_ngcontent-%COMP%]{width:100%;display:block}@media (max-width:768px){.col-md-2[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%]{display:block;width:100%}.col-md-2[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:block;margin:0 auto}}.bolder[_ngcontent-%COMP%]{font-weight:bolder}.form-group[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%] > select[_ngcontent-%COMP%]{display:block;width:100%}"]],data:{}});function rn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","c__table"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"div",[["class","c__table-row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,2,"div",[["class","c__table-cell c__table-loading"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,1,"app-loader",[],[[8,"className",0]],null,null,U.b,U.a)),t["\u0275did"](4,49152,null,0,$.a,[],null,null)],null,(function(l,n){l(n,3,0,t["\u0275nov"](n,4).cssClassByType)}))}function dn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,6,"div",[["style","height: 100%;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,5,"ag-grid",[["style","min-height:12pc; height: 95%; width:99%"]],null,[[null,"openDetailsClick"],["window","resize"]],(function(l,n,e){var u=!0,i=l.component;return"window:resize"===n&&(u=!1!==t["\u0275nov"](l,6).onResize()&&u),"openDetailsClick"===n&&(u=!1!==i.showControlDetails(e)&&u),u}),Hl.b,Hl.a)),t["\u0275prd"](512,null,m.f,m.f,[t.LOCALE_ID]),t["\u0275prd"](512,null,zl.a,zl.a,[]),t["\u0275prd"](512,null,Xl.a,Xl.a,[Wl.a,H.a,Zl.a,v.j]),t["\u0275prd"](512,null,Jl.a,Jl.a,[]),t["\u0275did"](6,770048,[["maingrid",4]],0,Ql.a,[m.d,m.f,zl.a,G.a,Xl.a,ln.a,Jl.a,nn.b,v.j,en.a,C.b,S.a],{data:[0,"data"],headers:[1,"headers"],autoFitColumns:[2,"autoFitColumns"],idGrid:[3,"idGrid"]},{openDetailsClick:"openDetailsClick"})],(function(l,n){var e=n.component;l(n,6,0,e.detailsData,e.colsGrid,!0,"maingridp")}),null)}function cn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"option",[],[[8,"selected",0]],null,null,null,null)),t["\u0275did"](1,147456,null,0,q.w,[t.ElementRef,t.Renderer2,[2,q.C]],{value:[0,"value"]},null),t["\u0275did"](2,147456,null,0,q.H,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](3,null,[" "," "]))],(function(l,n){l(n,1,0,t["\u0275inlineInterpolate"](1,"",n.context.$implicit.ReptId,"")),l(n,2,0,t["\u0275inlineInterpolate"](1,"",n.context.$implicit.ReptId,""))}),(function(l,n){l(n,0,0,n.context.$implicit.ReptId==n.component.currentEmail.Report),l(n,3,0,n.context.$implicit.ReptName)}))}function gn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"option",[],[[8,"selected",0]],null,null,null,null)),t["\u0275did"](1,147456,null,0,q.w,[t.ElementRef,t.Renderer2,[2,q.C]],{value:[0,"value"]},null),t["\u0275did"](2,147456,null,0,q.H,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](3,null,[" "," "]))],(function(l,n){l(n,1,0,n.context.$implicit.StoreID),l(n,2,0,n.context.$implicit.StoreID)}),(function(l,n){l(n,0,0,n.context.$implicit.StoreID==n.component.currentEmail.Store),l(n,3,0,n.context.$implicit.StoreName)}))}function pn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"button",[["class","btn btn--alert"],["style","float: left;"],["type","submit"]],null,[[null,"click"]],(function(l,n,e){var u=!0,i=l.component;return"click"===n&&(i.deleting=!0,u=!1!==i.onSubmit(t["\u0275nov"](l.parent,29).value)&&u),u}),null,null)),(l()(),t["\u0275ted"](1,null,[" "," "])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],null,(function(l,n){l(n,1,0,t["\u0275unv"](n,1,0,t["\u0275nov"](n,2).transform("page.email-setup.modal.form.button.delete.name")))}))}function mn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"div",[["class","page__actions_bar page__actions_bar--aligned"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,14,"div",[["class","content__section"],["style","height: calc(100vh - 157px);"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,3,"div",[["class","content__section-header"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,2,"h4",[["class","content__section-heading"]],null,null,null,null,null)),(l()(),t["\u0275ted"](4,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](6,0,null,null,9,"div",[["class","content__section-body scrollable"],["style","padding: 0; height: 100%;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,8,"div",[["style","margin-top: 2pc; height: 100%;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](8,0,null,null,2,"button",[["class","btn btn--primary"],["style","float: right;"],["type","submit"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.createEmailSetup()&&t),t}),null,null)),(l()(),t["\u0275ted"](9,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](11,0,null,null,4,"div",[["class","c__table"],["style","height:100%; overflow: hidden;display: grid;min-height: 24pc;"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,rn)),t["\u0275did"](13,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,dn)),t["\u0275did"](15,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](16,0,null,null,161,"app-modal",[["class","modal-generic"]],null,[[null,"onInit"],[null,"close"]],(function(l,n,e){var t=!0,u=l.component;return"onInit"===n&&(t=!1!==u.onModalSetupInit(e)&&t),"close"===n&&(t=!1!==u.onModalSetupClose()&&t),t}),tn.b,tn.a)),t["\u0275prd"](512,null,un.a,un.a,[C.b]),t["\u0275did"](18,1228800,null,0,on.a,[un.a,m.d,t.ElementRef,t.Renderer2,C.b],{modalTitle:[0,"modalTitle"]},{close:"close",onInit:"onInit"}),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](20,0,null,0,4,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](21,0,null,null,3,"div",[["class","content__section-header"],["style","width: 100%"]],null,null,null,null,null)),(l()(),t["\u0275eld"](22,0,null,null,2,"h5",[],null,null,null,null,null)),(l()(),t["\u0275ted"](23,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](25,0,null,0,152,"div",[["style","height:92%"]],null,null,null,null,null)),(l()(),t["\u0275eld"](26,0,null,null,151,"div",[["class","content__section_body"],["style","height:100%"]],null,null,null,null,null)),(l()(),t["\u0275eld"](27,0,null,null,150,"form",[["class","container"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t["\u0275nov"](l,29).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,29).onReset()&&u),u}),null,null)),t["\u0275did"](28,16384,null,0,q.I,[],null,null),t["\u0275did"](29,4210688,[["userForm",4]],0,q.u,[[8,null],[8,null]],null,null),t["\u0275prd"](2048,null,q.d,null,[q.u]),t["\u0275did"](31,16384,null,0,q.t,[[4,q.d]],null,null),(l()(),t["\u0275eld"](32,0,null,null,9,"div",[["class","row"],["style","    position: absolute; top: 7%; right: 1%;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](33,0,null,null,8,"div",[["class","form-group  small-12 medium-12 column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](34,0,null,null,7,"div",[["class","form-group"],["style","float:right;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](35,0,null,null,2,"div",[["class","c_checkbox-label"]],null,null,null,null,null)),(l()(),t["\u0275ted"](36,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](38,0,null,null,3,"label",[["class","c_checkbox by-store-checkbox"]],null,null,null,null,null)),(l()(),t["\u0275eld"](39,0,null,null,2,"div",[["class","c_checkbox-toggle"]],null,null,null,null,null)),(l()(),t["\u0275eld"](40,0,null,null,0,"input",[["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],(function(l,n,e){var t=!0;return"change"===n&&(t=!1!==l.component.flipChangeToggle(e)&&t),t}),null,null)),(l()(),t["\u0275eld"](41,0,null,null,0,"div",[["class","c_checkbox-toggle-view"]],null,null,null,null,null)),(l()(),t["\u0275eld"](42,0,null,null,26,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](43,0,null,null,12,"div",[["class","form-group  small-12 medium-6 column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](44,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](45,0,null,null,2,"label",[["for","name"]],null,null,null,null,null)),(l()(),t["\u0275ted"](46,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](48,0,null,null,7,"input",[["class","input__text form-control ng-untouched ng-pristine ng-valid"],["name","name"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,i=l.component;return"input"===n&&(u=!1!==t["\u0275nov"](l,49)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,49).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,49)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,49)._compositionEnd(e.target.value)&&u),"ngModelChange"===n&&(u=!1!==(i.currentEmail.FirstName=e)&&u),u}),null,null)),t["\u0275did"](49,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275did"](50,16384,null,0,q.B,[],{required:[0,"required"]},null),t["\u0275prd"](1024,null,q.p,(function(l){return[l]}),[q.B]),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.e]),t["\u0275did"](53,671744,null,0,q.v,[[2,q.d],[6,q.p],[8,null],[6,q.q]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.v]),t["\u0275did"](55,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](56,0,null,null,12,"div",[["class","form-group  small-12 medium-6 column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](57,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](58,0,null,null,2,"label",[["for","Report"]],null,null,null,null,null)),(l()(),t["\u0275ted"](59,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](61,0,null,null,7,"select",[["class","form-control ng-untouched ng-pristine ng-valid"],["name","rpt"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,e){var u=!0,i=l.component;return"change"===n&&(u=!1!==t["\u0275nov"](l,62).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,62).onTouched()&&u),"ngModelChange"===n&&(u=!1!==(i.currentEmail.Report=e)&&u),u}),null,null)),t["\u0275did"](62,16384,null,0,q.C,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.C]),t["\u0275did"](64,671744,null,0,q.v,[[2,q.d],[8,null],[8,null],[6,q.q]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.v]),t["\u0275did"](66,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,cn)),t["\u0275did"](68,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275eld"](69,0,null,null,66,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](70,0,null,null,12,"div",[["class","form-group  small-12 medium-6 column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](71,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](72,0,null,null,2,"label",[["for","lName"]],null,null,null,null,null)),(l()(),t["\u0275ted"](73,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](75,0,null,null,7,"input",[["class","input__text form-control ng-untouched ng-pristine ng-valid"],["name","lName"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,i=l.component;return"input"===n&&(u=!1!==t["\u0275nov"](l,76)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,76).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,76)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,76)._compositionEnd(e.target.value)&&u),"ngModelChange"===n&&(u=!1!==(i.currentEmail.LastName=e)&&u),u}),null,null)),t["\u0275did"](76,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275did"](77,16384,null,0,q.B,[],{required:[0,"required"]},null),t["\u0275prd"](1024,null,q.p,(function(l){return[l]}),[q.B]),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.e]),t["\u0275did"](80,671744,null,0,q.v,[[2,q.d],[6,q.p],[8,null],[6,q.q]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.v]),t["\u0275did"](82,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](83,0,null,null,52,"div",[["class","form-group  small-12 medium-6 column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](84,0,null,null,51,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](85,0,null,null,2,"label",[["for","sd"]],null,null,null,null,null)),(l()(),t["\u0275ted"](86,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](88,0,null,null,47,"select",[["class","form-control ng-untouched ng-pristine ng-valid"],["name","sd"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,e){var u=!0,i=l.component;return"change"===n&&(u=!1!==t["\u0275nov"](l,89).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,89).onTouched()&&u),"ngModelChange"===n&&(u=!1!==(i.currentEmail.SendingDays=e)&&u),u}),null,null)),t["\u0275did"](89,16384,null,0,q.C,[t.Renderer2,t.ElementRef],null,null),t["\u0275did"](90,16384,null,0,q.B,[],{required:[0,"required"]},null),t["\u0275prd"](1024,null,q.p,(function(l){return[l]}),[q.B]),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.C]),t["\u0275did"](93,671744,null,0,q.v,[[2,q.d],[6,q.p],[8,null],[6,q.q]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.v]),t["\u0275did"](95,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](96,0,null,null,4,"option",[["value","All"]],null,null,null,null,null)),t["\u0275did"](97,147456,null,0,q.w,[t.ElementRef,t.Renderer2,[2,q.C]],{value:[0,"value"]},null),t["\u0275did"](98,147456,null,0,q.H,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](99,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](101,0,null,null,4,"option",[["value","Monday"]],null,null,null,null,null)),t["\u0275did"](102,147456,null,0,q.w,[t.ElementRef,t.Renderer2,[2,q.C]],{value:[0,"value"]},null),t["\u0275did"](103,147456,null,0,q.H,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](104,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](106,0,null,null,4,"option",[["value","Tuesday"]],null,null,null,null,null)),t["\u0275did"](107,147456,null,0,q.w,[t.ElementRef,t.Renderer2,[2,q.C]],{value:[0,"value"]},null),t["\u0275did"](108,147456,null,0,q.H,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](109,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](111,0,null,null,4,"option",[["value","Wednesday"]],null,null,null,null,null)),t["\u0275did"](112,147456,null,0,q.w,[t.ElementRef,t.Renderer2,[2,q.C]],{value:[0,"value"]},null),t["\u0275did"](113,147456,null,0,q.H,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](114,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](116,0,null,null,4,"option",[["value","Thursday"]],null,null,null,null,null)),t["\u0275did"](117,147456,null,0,q.w,[t.ElementRef,t.Renderer2,[2,q.C]],{value:[0,"value"]},null),t["\u0275did"](118,147456,null,0,q.H,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](119,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](121,0,null,null,4,"option",[["value","Friday"]],null,null,null,null,null)),t["\u0275did"](122,147456,null,0,q.w,[t.ElementRef,t.Renderer2,[2,q.C]],{value:[0,"value"]},null),t["\u0275did"](123,147456,null,0,q.H,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](124,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](126,0,null,null,4,"option",[["value","Saturday"]],null,null,null,null,null)),t["\u0275did"](127,147456,null,0,q.w,[t.ElementRef,t.Renderer2,[2,q.C]],{value:[0,"value"]},null),t["\u0275did"](128,147456,null,0,q.H,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](129,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](131,0,null,null,4,"option",[["value","Sunday"]],null,null,null,null,null)),t["\u0275did"](132,147456,null,0,q.w,[t.ElementRef,t.Renderer2,[2,q.C]],{value:[0,"value"]},null),t["\u0275did"](133,147456,null,0,q.H,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](134,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](136,0,null,null,30,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](137,0,null,null,12,"div",[["class","form-group  small-12 medium-6 column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](138,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](139,0,null,null,2,"label",[["for","em"]],null,null,null,null,null)),(l()(),t["\u0275ted"](140,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](142,0,null,null,7,"input",[["class","input__text form-control ng-untouched ng-pristine ng-valid"],["name","em"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,i=l.component;return"input"===n&&(u=!1!==t["\u0275nov"](l,143)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,143).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,143)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,143)._compositionEnd(e.target.value)&&u),"ngModelChange"===n&&(u=!1!==(i.currentEmail.Email=e)&&u),u}),null,null)),t["\u0275did"](143,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275did"](144,16384,null,0,q.B,[],{required:[0,"required"]},null),t["\u0275prd"](1024,null,q.p,(function(l){return[l]}),[q.B]),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.e]),t["\u0275did"](147,671744,null,0,q.v,[[2,q.d],[6,q.p],[8,null],[6,q.q]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.v]),t["\u0275did"](149,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](150,0,null,null,16,"div",[["class","form-group  small-12 medium-6 column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](151,0,null,null,15,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](152,0,null,null,2,"label",[["for","Store"]],null,null,null,null,null)),(l()(),t["\u0275ted"](153,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](155,0,null,null,11,"select",[["class","form-control ng-untouched ng-pristine ng-valid"],["name","st"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,e){var u=!0,i=l.component;return"change"===n&&(u=!1!==t["\u0275nov"](l,156).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,156).onTouched()&&u),"ngModelChange"===n&&(u=!1!==(i.currentEmail.Store=e)&&u),u}),null,null)),t["\u0275did"](156,16384,null,0,q.C,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.C]),t["\u0275did"](158,671744,null,0,q.v,[[2,q.d],[8,null],[8,null],[6,q.q]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.v]),t["\u0275did"](160,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](161,0,null,null,3,"option",[["value","0"]],[[8,"selected",0]],null,null,null,null)),t["\u0275did"](162,147456,null,0,q.w,[t.ElementRef,t.Renderer2,[2,q.C]],{value:[0,"value"]},null),t["\u0275did"](163,147456,null,0,q.H,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](-1,null,["All"])),(l()(),t["\u0275and"](16777216,null,null,1,null,gn)),t["\u0275did"](166,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275eld"](167,0,null,null,5,"input",[["name","eId"],["type","hidden"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,i=l.component;return"input"===n&&(u=!1!==t["\u0275nov"](l,168)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,168).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,168)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,168)._compositionEnd(e.target.value)&&u),"ngModelChange"===n&&(u=!1!==(i.currentEmail.eId=e)&&u),u}),null,null)),t["\u0275did"](168,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.e]),t["\u0275did"](170,671744,null,0,q.v,[[2,q.d],[8,null],[8,null],[6,q.q]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.v]),t["\u0275did"](172,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,pn)),t["\u0275did"](174,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](175,0,null,null,2,"button",[["class","btn btn--primary"],["style","float: right;"],["type","submit"]],null,[[null,"click"]],(function(l,n,e){var u=!0,i=l.component;return"click"===n&&(i.deleting=!1,u=!1!==i.onSubmit(t["\u0275nov"](l,29).value)&&u),u}),null,null)),(l()(),t["\u0275ted"](176,null,[" "," "])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=n.component;l(n,13,0,e.detailsLoading),l(n,15,0,!e.detailsLoading),l(n,18,0,t["\u0275unv"](n,18,0,t["\u0275nov"](n,19).transform("page.email-setup.modal.caption"))),l(n,50,0,""),l(n,53,0,"name",e.currentEmail.FirstName),l(n,64,0,"rpt",e.currentEmail.Report),l(n,68,0,e.Reports),l(n,77,0,""),l(n,80,0,"lName",e.currentEmail.LastName),l(n,90,0,""),l(n,93,0,"sd",e.currentEmail.SendingDays),l(n,97,0,"All"),l(n,98,0,"All"),l(n,102,0,"Monday"),l(n,103,0,"Monday"),l(n,107,0,"Tuesday"),l(n,108,0,"Tuesday"),l(n,112,0,"Wednesday"),l(n,113,0,"Wednesday"),l(n,117,0,"Thursday"),l(n,118,0,"Thursday"),l(n,122,0,"Friday"),l(n,123,0,"Friday"),l(n,127,0,"Saturday"),l(n,128,0,"Saturday"),l(n,132,0,"Sunday"),l(n,133,0,"Sunday"),l(n,144,0,""),l(n,147,0,"em",e.currentEmail.Email),l(n,158,0,"st",e.currentEmail.Store),l(n,162,0,"0"),l(n,163,0,"0"),l(n,166,0,e.Stores),l(n,170,0,"eId",e.currentEmail.eId),l(n,174,0,e.existing)}),(function(l,n){var e=n.component;l(n,4,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform("page.email-setup.caption"))),l(n,9,0,t["\u0275unv"](n,9,0,t["\u0275nov"](n,10).transform("page.email-setup.button.create.name"))),l(n,23,0,t["\u0275unv"](n,23,0,t["\u0275nov"](n,24).transform("page.email-setup.modal.sub-caption"))),l(n,27,0,t["\u0275nov"](n,31).ngClassUntouched,t["\u0275nov"](n,31).ngClassTouched,t["\u0275nov"](n,31).ngClassPristine,t["\u0275nov"](n,31).ngClassDirty,t["\u0275nov"](n,31).ngClassValid,t["\u0275nov"](n,31).ngClassInvalid,t["\u0275nov"](n,31).ngClassPending),l(n,36,0,t["\u0275unv"](n,36,0,t["\u0275nov"](n,37).transform("page.email-setup.modal.form.checkbox.active.name"))),l(n,40,0,e.currentEmail.Active),l(n,46,0,t["\u0275unv"](n,46,0,t["\u0275nov"](n,47).transform("page.email-setup.modal.form.field.first-name.name"))),l(n,48,0,t["\u0275nov"](n,50).required?"":null,t["\u0275nov"](n,55).ngClassUntouched,t["\u0275nov"](n,55).ngClassTouched,t["\u0275nov"](n,55).ngClassPristine,t["\u0275nov"](n,55).ngClassDirty,t["\u0275nov"](n,55).ngClassValid,t["\u0275nov"](n,55).ngClassInvalid,t["\u0275nov"](n,55).ngClassPending),l(n,59,0,t["\u0275unv"](n,59,0,t["\u0275nov"](n,60).transform("page.email-setup.modal.form.field.report.name"))),l(n,61,0,t["\u0275nov"](n,66).ngClassUntouched,t["\u0275nov"](n,66).ngClassTouched,t["\u0275nov"](n,66).ngClassPristine,t["\u0275nov"](n,66).ngClassDirty,t["\u0275nov"](n,66).ngClassValid,t["\u0275nov"](n,66).ngClassInvalid,t["\u0275nov"](n,66).ngClassPending),l(n,73,0,t["\u0275unv"](n,73,0,t["\u0275nov"](n,74).transform("page.email-setup.modal.form.field.last-name.name"))),l(n,75,0,t["\u0275nov"](n,77).required?"":null,t["\u0275nov"](n,82).ngClassUntouched,t["\u0275nov"](n,82).ngClassTouched,t["\u0275nov"](n,82).ngClassPristine,t["\u0275nov"](n,82).ngClassDirty,t["\u0275nov"](n,82).ngClassValid,t["\u0275nov"](n,82).ngClassInvalid,t["\u0275nov"](n,82).ngClassPending),l(n,86,0,t["\u0275unv"](n,86,0,t["\u0275nov"](n,87).transform("page.email-setup.modal.form.field.days-to-send.name"))),l(n,88,0,t["\u0275nov"](n,90).required?"":null,t["\u0275nov"](n,95).ngClassUntouched,t["\u0275nov"](n,95).ngClassTouched,t["\u0275nov"](n,95).ngClassPristine,t["\u0275nov"](n,95).ngClassDirty,t["\u0275nov"](n,95).ngClassValid,t["\u0275nov"](n,95).ngClassInvalid,t["\u0275nov"](n,95).ngClassPending),l(n,99,0,t["\u0275unv"](n,99,0,t["\u0275nov"](n,100).transform("page.email-setup.modal.form.field.days-to-send.item.everyday.name"))),l(n,104,0,t["\u0275unv"](n,104,0,t["\u0275nov"](n,105).transform("page.email-setup.modal.form.field.days-to-send.item.monday.name"))),l(n,109,0,t["\u0275unv"](n,109,0,t["\u0275nov"](n,110).transform("page.email-setup.modal.form.field.days-to-send.item.tuesday.name"))),l(n,114,0,t["\u0275unv"](n,114,0,t["\u0275nov"](n,115).transform("page.email-setup.modal.form.field.days-to-send.item.wednesday.name"))),l(n,119,0,t["\u0275unv"](n,119,0,t["\u0275nov"](n,120).transform("page.email-setup.modal.form.field.days-to-send.item.thursday.name"))),l(n,124,0,t["\u0275unv"](n,124,0,t["\u0275nov"](n,125).transform("page.email-setup.modal.form.field.days-to-send.item.friday.name"))),l(n,129,0,t["\u0275unv"](n,129,0,t["\u0275nov"](n,130).transform("page.email-setup.modal.form.field.days-to-send.item.saturday.name"))),l(n,134,0,t["\u0275unv"](n,134,0,t["\u0275nov"](n,135).transform("page.email-setup.modal.form.field.days-to-send.item.sunday.name"))),l(n,140,0,t["\u0275unv"](n,140,0,t["\u0275nov"](n,141).transform("page.email-setup.modal.form.field.email.name"))),l(n,142,0,t["\u0275nov"](n,144).required?"":null,t["\u0275nov"](n,149).ngClassUntouched,t["\u0275nov"](n,149).ngClassTouched,t["\u0275nov"](n,149).ngClassPristine,t["\u0275nov"](n,149).ngClassDirty,t["\u0275nov"](n,149).ngClassValid,t["\u0275nov"](n,149).ngClassInvalid,t["\u0275nov"](n,149).ngClassPending),l(n,153,0,t["\u0275unv"](n,153,0,t["\u0275nov"](n,154).transform("page.email-setup.modal.form.field.store.name"))),l(n,155,0,t["\u0275nov"](n,160).ngClassUntouched,t["\u0275nov"](n,160).ngClassTouched,t["\u0275nov"](n,160).ngClassPristine,t["\u0275nov"](n,160).ngClassDirty,t["\u0275nov"](n,160).ngClassValid,t["\u0275nov"](n,160).ngClassInvalid,t["\u0275nov"](n,160).ngClassPending),l(n,161,0,"0"==e.currentEmail.Store),l(n,167,0,t["\u0275nov"](n,172).ngClassUntouched,t["\u0275nov"](n,172).ngClassTouched,t["\u0275nov"](n,172).ngClassPristine,t["\u0275nov"](n,172).ngClassDirty,t["\u0275nov"](n,172).ngClassValid,t["\u0275nov"](n,172).ngClassInvalid,t["\u0275nov"](n,172).ngClassPending),l(n,176,0,t["\u0275unv"](n,176,0,t["\u0275nov"](n,177).transform("page.email-setup.modal.form.button.submit.name")))}))}var vn=t["\u0275ccf"]("email-setup",an,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"email-setup",[],null,null,null,mn,sn)),t["\u0275did"](1,245760,null,0,an,[S.a,z,H.a,v.j],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),hn=e("10EP"),fn=e("7tUX"),bn=e("LRne"),Cn=e("JIr8"),yn=e("fFD9"),_n=e("SxV6"),kn=e("eIep"),Dn=e("LvDl");class Rn{constructor(l,n,e,t,u,i){this.fb=l,this.router=n,this.route=e,this.i18nApi=t,this.i18nStore=u,this.loading=!1,this.debug=i.factory(new.target.name)}ngOnInit(){this.initForm(),this.languagesList$=this.i18nStore.languages$,this.i18nApi.loadInstanceDefaultLanguage().pipe(Object(Cn.a)(()=>Object(bn.a)(void 0)),Object(yn.a)(this.i18nStore.firstLanguageInList$.pipe(Object(_n.a)()))).subscribe(([l,n])=>{const e=l?l.id:n?n.id:void 0;void 0!==e&&this.form.patchValue({instanceLanguageId:e})},l=>{this.debug.log("Error. Loading instance default language.",l)})}onSubmit(l){this.loading=!0,this.i18nStore.languages$.pipe(Object(_n.a)(),Object(b.a)(n=>Dn.find(n,{id:l.instanceLanguageId})),Object(kn.a)(l=>this.i18nApi.saveInstanceDefaultLanguage(l)),Object(B.a)(()=>this.loading=!1)).subscribe(l=>{this.router.navigate([".."],{relativeTo:this.route}),this.i18nStore.selectInstanceLanguage(l)})}onCancel(){this.router.navigate([".."],{relativeTo:this.route})}initForm(){this.form=this.fb.group({instanceLanguageId:[void 0,[q.D.required]]})}}var Mn=e("bLb4"),wn=e("aBBA"),In=t["\u0275crt"]({encapsulation:0,styles:[[".content__section[_ngcontent-%COMP%]{margin-top:20px}.content__section-body[_ngcontent-%COMP%]{position:relative;padding:20px}.content__section[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-top:60px}"]],data:{}});function Sn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-loader",[["type","overlay"]],[[8,"className",0]],null,null,U.b,U.a)),t["\u0275did"](1,49152,null,0,$.a,[],{type:[0,"type"]},null)],(function(l,n){l(n,1,0,"overlay")}),(function(l,n){l(n,0,0,t["\u0275nov"](n,1).cssClassByType)}))}function On(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,30,"div",[["class","content__section"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"div",[["class","content__section-header content__section-header--justify"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,2,"h4",[["class","content__section-heading"]],null,null,null,null,null)),(l()(),t["\u0275ted"](3,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](5,0,null,null,25,"div",[["class","content__section-body"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Sn)),t["\u0275did"](7,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](8,0,null,null,22,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(l,n,e){var u=!0,i=l.component;return"submit"===n&&(u=!1!==t["\u0275nov"](l,10).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,10).onReset()&&u),"ngSubmit"===n&&(u=!1!==i.onSubmit(i.form.value)&&u),u}),null,null)),t["\u0275did"](9,16384,null,0,q.I,[],null,null),t["\u0275did"](10,540672,null,0,q.k,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t["\u0275prd"](2048,null,q.d,null,[q.k]),t["\u0275did"](12,16384,null,0,q.t,[[4,q.d]],null,null),(l()(),t["\u0275eld"](13,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](14,0,null,null,2,"label",[["for","default-instance-language"]],null,null,null,null,null)),(l()(),t["\u0275ted"](15,null,["",":"])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](17,0,null,null,6,"app-cool-select",[["formControlName","instanceLanguageId"],["id","default-instance-language"],["itemValueField","id"]],[[2,"--theme-default",null],[2,"opened",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,hn.b,hn.a)),t["\u0275did"](18,114688,null,0,fn.a,[],{items:[0,"items"],itemValueField:[1,"itemValueField"]},null),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[fn.a]),t["\u0275did"](21,671744,null,0,q.i,[[3,q.d],[8,null],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](23,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](24,0,null,null,6,"div",[["class","buttons"]],null,null,null,null,null)),(l()(),t["\u0275eld"](25,0,null,null,2,"button",[["class","btn btn--primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(l()(),t["\u0275ted"](26,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](28,0,null,null,2,"button",[["class","btn btn--color-secondary btn--empty"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onCancel()&&t),t}),null,null)),(l()(),t["\u0275ted"](29,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=n.component;l(n,7,0,e.loading),l(n,10,0,e.form),l(n,18,0,t["\u0275unv"](n,18,0,t["\u0275nov"](n,19).transform(e.languagesList$)),"id"),l(n,21,0,"instanceLanguageId")}),(function(l,n){var e=n.component;l(n,3,0,t["\u0275unv"](n,3,0,t["\u0275nov"](n,4).transform("page.localization.caption"))),l(n,8,0,t["\u0275nov"](n,12).ngClassUntouched,t["\u0275nov"](n,12).ngClassTouched,t["\u0275nov"](n,12).ngClassPristine,t["\u0275nov"](n,12).ngClassDirty,t["\u0275nov"](n,12).ngClassValid,t["\u0275nov"](n,12).ngClassInvalid,t["\u0275nov"](n,12).ngClassPending),l(n,15,0,t["\u0275unv"](n,15,0,t["\u0275nov"](n,16).transform("page.localization.form.field.default-language.name"))),l(n,17,0,t["\u0275nov"](n,18).themeDefaultClass,t["\u0275nov"](n,18).open,t["\u0275nov"](n,23).ngClassUntouched,t["\u0275nov"](n,23).ngClassTouched,t["\u0275nov"](n,23).ngClassPristine,t["\u0275nov"](n,23).ngClassDirty,t["\u0275nov"](n,23).ngClassValid,t["\u0275nov"](n,23).ngClassInvalid,t["\u0275nov"](n,23).ngClassPending),l(n,25,0,e.form.invalid),l(n,26,0,t["\u0275unv"](n,26,0,t["\u0275nov"](n,27).transform("page.localization.save"))),l(n,29,0,t["\u0275unv"](n,29,0,t["\u0275nov"](n,30).transform("page.localization.cancel")))}))}var xn=t["\u0275ccf"]("ng-component",Rn,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,On,In)),t["\u0275did"](1,114688,null,0,Rn,[q.f,p.o,p.a,Mn.a,wn.a,C.b],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),Tn=e("Mc5n"),Pn=e("IP0z"),En=e("2Vo4"),Ln=e("vkgz"),jn=e("6LW8");class An{constructor(l,n,e,t,u,i,o,a,s,r){this.fb=l,this.router=n,this.route=e,this.session=t,this.storeNameSetupApi=u,this.instanceAppSettingsApi=i,this.coreCache=o,this.dialog=a,this.translate=s,this.loading=!1,this.editLoading=!1,this.selectedSettingsLevel$=new En.a(void 0),this.isSettingsLevelDropDownOpened=!1,this.isSettingsLevelDropDownVisible=!1,this.subs=[],this.debug=r.factory(new.target.name)}set sub(l){this.subs.push(l)}ngOnInit(){this.initTranslationStreams(),this.initForm(),this.sub=this.session.currentUser$.subscribe(l=>{this.isSettingsLevelDropDownVisible=l.isHagInstance}),this.sub=Object(Cl.b)(this.storeNameSetupApi.getStoresList(),this.instanceAppSettingsApi.settings$,this.selectedSettingsLevel$).subscribe(([l,n,e])=>{this.isGlobalLevel(e)?(this.form.patchValue(n),this.stores=l.map(l=>jn.a.fromJson(l))):this.instanceAppSettingsApi.get(e.value).pipe(Object(Ln.a)(()=>this.loading=!0),Object(B.a)(()=>this.loading=!1)).subscribe(n=>{if(this.stores=l.map(l=>jn.a.fromJson(l)),n.storeOrder)for(const l of this.stores)l.position=n.storeOrder.findIndex(n=>+n==+l.id);this.stores.sort((l,n)=>l.position>n.position?1:n.position>l.position?-1:0),this.form.patchValue(n)},()=>{this.form.patchValue(n),this.stores=l.map(l=>jn.a.fromJson(l))})})}ngOnDestroy(){this.subs.forEach(l=>l.unsubscribe())}trackById(l){return l.id}onDragDrop(l){Object(Tn.i)(this.stores,l.previousIndex,l.currentIndex)}toggleSettingsLevelDropDown(){this.isSettingsLevelDropDownOpened=!this.isSettingsLevelDropDownOpened}setSettingsLevel(l){this.selectedLevel.value!==l.value&&this.selectedSettingsLevel$.next(l),this.isSettingsLevelDropDownOpened=!1}onSubmit(l){this.loading=!0,this.stores.forEach((l,n)=>{l.position=n});const n=this.stores.map(l=>l),e=n.map(l=>l.id);l.storeOrder=e,this.instanceAppSettingsApi.save(this.selectedLevel.value,l).pipe(Object(B.a)(()=>this.loading=!1)).subscribe(l=>{if(this.isGlobalLevel(this.selectedLevel)){this.instanceAppSettingsApi.setSettings(l);const t=n.reduce((l,n)=>l.set(n.id,n),new Map);this.coreCache.updateStoresById(t),this.storeNameSetupApi.saveStoresOrder(e).subscribe()}this.router.navigate([".."],{relativeTo:this.route})},l=>{this.debug.warn("onSubmit(). HTTP Error:",l),this.dialog.warningT("page.store-name-setup.save.message.failed",{suffix:this.dialog.tryAgainLaterMessage})})}onCancel(){this.router.navigate([".."],{relativeTo:this.route})}editStore(l){this.editedStore=new jn.a(l),this.editModal.showModal()}onEditModalInit(l){this.editModal=l}onEditModalClose(){this.editModal.showModal(!1)}saveStore(){this.editLoading=!0,this.sub=this.storeNameSetupApi.updateStoreInfo(this.editedStore).subscribe(()=>{const l=this.stores.find(l=>+l.id==+this.editedStore.id);l.name=this.editedStore.name,l.shortName=this.editedStore.shortName,l.abbrev=this.editedStore.abbrev;const n=this.stores.reduce((l,n)=>l.set(n.id,n),new Map);this.coreCache.updateStoresById(n),this.onEditModalClose(),this.editedStore=null,this.editLoading=!1})}get selectedLevel(){return this.selectedSettingsLevel$.getValue()}isGlobalLevel(l){return l&&"pages.all.main"===l.value}initTranslationStreams(){this.sub=this.translate.stream(["page.store-name-setup.filters.settings-level.item.global","page.store-name-setup.filters.settings-level.item.mc"]).subscribe(l=>{this.settingsLevels=[{label:l["page.store-name-setup.filters.settings-level.item.global"],value:"pages.all.main"},{label:l["page.store-name-setup.filters.settings-level.item.mc"],value:"pages.mc.main"}];const n=this.selectedLevel;if(n){const l=this.settingsLevels.find(l=>l.value===n.value);n.label=l.label,this.selectedSettingsLevel$.next(n)}else this.selectedSettingsLevel$.next(this.settingsLevels[0])})}initForm(){this.form=this.fb.group({storeNameType:["name",[]]}),this.editStoreForm=this.fb.group({name:["",[q.D.required]],shortName:["",[q.D.required]],abbrev:["",[q.D.required]]})}}class Fn{constructor(l){this.api=l}getStoresList(){return this.api.get("stores")}saveStoresOrder(l){return this.api.post("store/sort",{store_ids:l.join(",")})}updateStoreInfo(l){return this.api.post("stores/update-title/".concat(l.id),{params:{id:l.id,name:l.name,name2:l.shortName,abbrev:l.abbrev}})}}var Nn=e("yK5/"),Vn=t["\u0275crt"]({encapsulation:0,styles:[[".content__section[_ngcontent-%COMP%]{margin-top:20px}.content__section-body[_ngcontent-%COMP%]{position:relative;padding:20px}.content__section[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-top:60px}.content__section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{padding:10px;border:1px solid #cacaca;border-radius:5px}.content__section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.content__section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400}.store-order-container[_ngcontent-%COMP%]{list-style-type:none;margin:15px 0;max-height:500px;overflow:auto;display:block;width:35%;position:relative}.store-order-container-item[_ngcontent-%COMP%]{padding:10px;border:1px solid #3c3c3c;border-radius:5px;background-color:#fafafa;list-style-type:none;cursor:move}.store-order-container-item[_ngcontent-%COMP%] + .store-order-container-item[_ngcontent-%COMP%]{margin-top:5px}.store-name-edit[_ngcontent-%COMP%]{float:right;text-decoration:underline}"]],data:{}});function qn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","dropdown-menu-item"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"span",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.setSettingsLevel(l.context.$implicit)&&t),t}),null,null)),(l()(),t["\u0275ted"](2,null,["",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.label)}))}function Un(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","c_dropdown-std_menu"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,qn)),t["\u0275did"](2,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,2,0,n.component.settingsLevels)}),null)}function $n(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,11,"div",[["class","page__actions_bar"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,9,"div",[["class","align-left"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,8,"div",[["class","c_dropdown-std less-border kpi-select-box"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,5,"div",[["class","c_dropdown-std_value"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleSettingsLevelDropDown()&&t),t}),null,null)),(l()(),t["\u0275eld"](4,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),t["\u0275ted"](5,null,["",": ",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](8,0,null,null,0,"span",[["class","icon-arrow-s-down"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Un)),t["\u0275did"](10,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](11,0,null,null,0,"div",[["class","align-right"]],null,null,null,null,null))],(function(l,n){l(n,10,0,n.component.isSettingsLevelDropDownOpened)}),(function(l,n){var e,u=n.component;l(n,5,0,t["\u0275unv"](n,5,0,t["\u0275nov"](n,6).transform("page.store-name-setup.filters.settings-level.name")),null==(e=t["\u0275unv"](n,5,1,t["\u0275nov"](n,7).transform(u.selectedSettingsLevel$)))?null:e.label)}))}function Kn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-loader",[],[[8,"className",0]],null,null,U.b,U.a)),t["\u0275did"](1,49152,null,0,$.a,[],{type:[0,"type"]},null)],(function(l,n){l(n,1,0,n.component.stores?"overlay":"overlay-transparent")}),(function(l,n){l(n,0,0,t["\u0275nov"](n,1).cssClassByType)}))}function Gn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,16777216,null,null,9,"li",[["cdkDrag",""],["class","store-order-container-item cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),t["\u0275prd"](6144,null,Tn.j,null,[Tn.c]),t["\u0275did"](2,4866048,[[1,4]],3,Tn.c,[t.ElementRef,[3,Tn.b],m.d,t.NgZone,t.ViewContainerRef,Tn.a,[2,Pn.b],Tn.f,t.ChangeDetectorRef],null,null),t["\u0275qud"](603979776,2,{_handles:1}),t["\u0275qud"](603979776,3,{_previewTemplate:0}),t["\u0275qud"](603979776,4,{_placeholderTemplate:0}),(l()(),t["\u0275ted"](6,null,[" "," "])),(l()(),t["\u0275eld"](7,0,null,null,2,"a",[["class","store-name-edit"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.editStore(l.context.$implicit)&&t),t}),null,null)),(l()(),t["\u0275ted"](8,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275and"](0,null,null,0))],null,(function(l,n){var e=n.component;l(n,0,0,t["\u0275nov"](n,2).disabled,t["\u0275nov"](n,2)._dragRef.isDragging()),l(n,6,0,n.context.$implicit[e.form.value.storeNameType]),l(n,8,0,t["\u0275unv"](n,8,0,t["\u0275nov"](n,9).transform("page.store-name-setup.panel.store-order.edit.link")))}))}function Bn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,54,"form",[["class","edit-dealer-form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(l,n,e){var u=!0,i=l.component;return"submit"===n&&(u=!1!==t["\u0275nov"](l,2).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,2).onReset()&&u),"ngSubmit"===n&&(u=!1!==i.saveStore()&&u),u}),null,null)),t["\u0275did"](1,16384,null,0,q.I,[],null,null),t["\u0275did"](2,540672,null,0,q.k,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t["\u0275prd"](2048,null,q.d,null,[q.k]),t["\u0275did"](4,16384,null,0,q.t,[[4,q.d]],null,null),(l()(),t["\u0275eld"](5,0,null,null,28,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,13,"div",[["class","small-12 medium-6 large-6 column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](8,0,null,null,2,"label",[],null,null,null,null,null)),(l()(),t["\u0275ted"](9,null,["",":*"])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](11,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,7,"input",[["class","form-control input__text"],["formControlName","name"],["maxlength","25"],["name",""],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,i=l.component;return"input"===n&&(u=!1!==t["\u0275nov"](l,13)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,13).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,13)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,13)._compositionEnd(e.target.value)&&u),"ngModelChange"===n&&(u=!1!==(i.editedStore.name=e)&&u),u}),null,null)),t["\u0275did"](13,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275did"](14,540672,null,0,q.n,[],{maxlength:[0,"maxlength"]},null),t["\u0275prd"](1024,null,q.p,(function(l){return[l]}),[q.n]),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.e]),t["\u0275did"](17,671744,null,0,q.i,[[3,q.d],[6,q.p],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](19,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](20,0,null,null,13,"div",[["class","small-12 medium-6 large-6 column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](21,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](22,0,null,null,2,"label",[],null,null,null,null,null)),(l()(),t["\u0275ted"](23,null,["",":*"])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](25,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t["\u0275eld"](26,0,null,null,7,"input",[["class","form-control input__text"],["formControlName","shortName"],["maxlength","16"],["name",""],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,i=l.component;return"input"===n&&(u=!1!==t["\u0275nov"](l,27)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,27).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,27)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,27)._compositionEnd(e.target.value)&&u),"ngModelChange"===n&&(u=!1!==(i.editedStore.shortName=e)&&u),u}),null,null)),t["\u0275did"](27,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275did"](28,540672,null,0,q.n,[],{maxlength:[0,"maxlength"]},null),t["\u0275prd"](1024,null,q.p,(function(l){return[l]}),[q.n]),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.e]),t["\u0275did"](31,671744,null,0,q.i,[[3,q.d],[6,q.p],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](33,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](34,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](35,0,null,null,13,"div",[["class","small-12 medium-6 large-6 column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](36,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](37,0,null,null,2,"label",[],null,null,null,null,null)),(l()(),t["\u0275ted"](38,null,["",":*"])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](40,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t["\u0275eld"](41,0,null,null,7,"input",[["class","form-control input__text"],["formControlName","abbrev"],["maxlength","10"],["name",""],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,i=l.component;return"input"===n&&(u=!1!==t["\u0275nov"](l,42)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,42).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,42)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,42)._compositionEnd(e.target.value)&&u),"ngModelChange"===n&&(u=!1!==(i.editedStore.abbrev=e)&&u),u}),null,null)),t["\u0275did"](42,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275did"](43,540672,null,0,q.n,[],{maxlength:[0,"maxlength"]},null),t["\u0275prd"](1024,null,q.p,(function(l){return[l]}),[q.n]),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.e]),t["\u0275did"](46,671744,null,0,q.i,[[3,q.d],[6,q.p],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](48,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](49,0,null,null,5,"div",[["class","row submit-row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](50,0,null,null,4,"div",[["class","small-12 medium-12 large-12 column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](51,0,null,null,3,"div",[["class","submit-wrapper"]],null,null,null,null,null)),(l()(),t["\u0275eld"](52,0,null,null,2,"button",[["class","btn btn--primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(l()(),t["\u0275ted"](53,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=n.component;l(n,2,0,e.editStoreForm),l(n,14,0,"25"),l(n,17,0,"name",e.editedStore.name),l(n,28,0,"16"),l(n,31,0,"shortName",e.editedStore.shortName),l(n,43,0,"10"),l(n,46,0,"abbrev",e.editedStore.abbrev)}),(function(l,n){var e=n.component;l(n,0,0,t["\u0275nov"](n,4).ngClassUntouched,t["\u0275nov"](n,4).ngClassTouched,t["\u0275nov"](n,4).ngClassPristine,t["\u0275nov"](n,4).ngClassDirty,t["\u0275nov"](n,4).ngClassValid,t["\u0275nov"](n,4).ngClassInvalid,t["\u0275nov"](n,4).ngClassPending),l(n,9,0,t["\u0275unv"](n,9,0,t["\u0275nov"](n,10).transform("page.store-name-setup.modal.edit-store.field.store-name.name"))),l(n,12,0,t["\u0275nov"](n,14).maxlength?t["\u0275nov"](n,14).maxlength:null,t["\u0275nov"](n,19).ngClassUntouched,t["\u0275nov"](n,19).ngClassTouched,t["\u0275nov"](n,19).ngClassPristine,t["\u0275nov"](n,19).ngClassDirty,t["\u0275nov"](n,19).ngClassValid,t["\u0275nov"](n,19).ngClassInvalid,t["\u0275nov"](n,19).ngClassPending),l(n,23,0,t["\u0275unv"](n,23,0,t["\u0275nov"](n,24).transform("page.store-name-setup.modal.edit-store.field.short-store.name"))),l(n,26,0,t["\u0275nov"](n,28).maxlength?t["\u0275nov"](n,28).maxlength:null,t["\u0275nov"](n,33).ngClassUntouched,t["\u0275nov"](n,33).ngClassTouched,t["\u0275nov"](n,33).ngClassPristine,t["\u0275nov"](n,33).ngClassDirty,t["\u0275nov"](n,33).ngClassValid,t["\u0275nov"](n,33).ngClassInvalid,t["\u0275nov"](n,33).ngClassPending),l(n,38,0,t["\u0275unv"](n,38,0,t["\u0275nov"](n,39).transform("page.store-name-setup.modal.edit-store.field.store-abbreviation.name"))),l(n,41,0,t["\u0275nov"](n,43).maxlength?t["\u0275nov"](n,43).maxlength:null,t["\u0275nov"](n,48).ngClassUntouched,t["\u0275nov"](n,48).ngClassTouched,t["\u0275nov"](n,48).ngClassPristine,t["\u0275nov"](n,48).ngClassDirty,t["\u0275nov"](n,48).ngClassValid,t["\u0275nov"](n,48).ngClassInvalid,t["\u0275nov"](n,48).ngClassPending),l(n,52,0,e.editStoreForm.invalid||e.editLoading),l(n,53,0,t["\u0275unv"](n,53,0,t["\u0275nov"](n,54).transform("page.store-name-setup.modal.edit-store.button.save")))}))}function Yn(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,66,"div",[["class","content__section"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"div",[["class","content__section-header content__section-header--justify"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,2,"h4",[["class","content__section-heading"]],null,null,null,null,null)),(l()(),t["\u0275ted"](3,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](5,0,null,null,61,"div",[["class","content__section-body scrollable"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,$n)),t["\u0275did"](7,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,Kn)),t["\u0275did"](9,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](10,0,null,null,56,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(l,n,e){var u=!0,i=l.component;return"submit"===n&&(u=!1!==t["\u0275nov"](l,12).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,12).onReset()&&u),"ngSubmit"===n&&(u=!1!==i.onSubmit(i.form.value)&&u),u}),null,null)),t["\u0275did"](11,16384,null,0,q.I,[],null,null),t["\u0275did"](12,540672,null,0,q.k,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t["\u0275prd"](2048,null,q.d,null,[q.k]),t["\u0275did"](14,16384,null,0,q.t,[[4,q.d]],null,null),(l()(),t["\u0275eld"](15,0,null,null,33,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](16,0,null,null,2,"h5",[],null,null,null,null,null)),(l()(),t["\u0275ted"](17,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](19,0,null,null,9,"label",[],null,null,null,null,null)),(l()(),t["\u0275eld"](20,0,null,null,6,"input",[["formControlName","storeNameType"],["name","storeNameType"],["type","radio"],["value","name"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,21)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,21).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,21)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,21)._compositionEnd(e.target.value)&&u),"change"===n&&(u=!1!==t["\u0275nov"](l,22).onChange()&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,22).onTouched()&&u),u}),null,null)),t["\u0275did"](21,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275did"](22,212992,null,0,q.z,[t.Renderer2,t.ElementRef,q.F,t.Injector],{name:[0,"name"],formControlName:[1,"formControlName"],value:[2,"value"]},null),t["\u0275prd"](1024,null,q.q,(function(l,n){return[l,n]}),[q.e,q.z]),t["\u0275did"](24,671744,null,0,q.i,[[3,q.d],[8,null],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](26,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275ted"](27,null,[" "," "])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](29,0,null,null,9,"label",[],null,null,null,null,null)),(l()(),t["\u0275eld"](30,0,null,null,6,"input",[["formControlName","storeNameType"],["name","storeNameType"],["type","radio"],["value","shortName"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,31)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,31).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,31)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,31)._compositionEnd(e.target.value)&&u),"change"===n&&(u=!1!==t["\u0275nov"](l,32).onChange()&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,32).onTouched()&&u),u}),null,null)),t["\u0275did"](31,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275did"](32,212992,null,0,q.z,[t.Renderer2,t.ElementRef,q.F,t.Injector],{name:[0,"name"],formControlName:[1,"formControlName"],value:[2,"value"]},null),t["\u0275prd"](1024,null,q.q,(function(l,n){return[l,n]}),[q.e,q.z]),t["\u0275did"](34,671744,null,0,q.i,[[3,q.d],[8,null],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](36,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275ted"](37,null,[" "," "])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](39,0,null,null,9,"label",[],null,null,null,null,null)),(l()(),t["\u0275eld"](40,0,null,null,6,"input",[["formControlName","storeNameType"],["name","storeNameType"],["type","radio"],["value","abbreviation"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,41)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,41).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,41)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,41)._compositionEnd(e.target.value)&&u),"change"===n&&(u=!1!==t["\u0275nov"](l,42).onChange()&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,42).onTouched()&&u),u}),null,null)),t["\u0275did"](41,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275did"](42,212992,null,0,q.z,[t.Renderer2,t.ElementRef,q.F,t.Injector],{name:[0,"name"],formControlName:[1,"formControlName"],value:[2,"value"]},null),t["\u0275prd"](1024,null,q.q,(function(l,n){return[l,n]}),[q.e,q.z]),t["\u0275did"](44,671744,null,0,q.i,[[3,q.d],[8,null],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](46,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275ted"](47,null,[" "," "])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](49,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](50,0,null,null,2,"h5",[],null,null,null,null,null)),(l()(),t["\u0275ted"](51,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](53,0,null,null,6,"ul",[["cdkDropList",""],["class","store-order-container cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],(function(l,n,e){var t=!0;return"cdkDropListDropped"===n&&(t=!1!==l.component.onDragDrop(e)&&t),t}),null,null)),t["\u0275prd"](6144,null,Tn.b,null,[Tn.d]),t["\u0275did"](55,1196032,null,1,Tn.d,[t.ElementRef,Tn.f,t.ChangeDetectorRef,[2,Pn.b],[3,Tn.e]],null,{dropped:"cdkDropListDropped"}),t["\u0275qud"](603979776,1,{_draggables:1}),t["\u0275prd"](256,null,Tn.e,void 0,[]),(l()(),t["\u0275and"](16777216,null,null,1,null,Gn)),t["\u0275did"](59,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),t["\u0275eld"](60,0,null,null,6,"div",[["class","buttons"]],null,null,null,null,null)),(l()(),t["\u0275eld"](61,0,null,null,2,"button",[["class","btn btn--primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(l()(),t["\u0275ted"](62,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](64,0,null,null,2,"button",[["class","btn btn--color-secondary btn--empty"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onCancel()&&t),t}),null,null)),(l()(),t["\u0275ted"](65,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](67,0,null,null,5,"app-modal",[["class","modal-generic"]],null,[[null,"onInit"],[null,"close"]],(function(l,n,e){var t=!0,u=l.component;return"onInit"===n&&(t=!1!==u.onEditModalInit(e)&&t),"close"===n&&(t=!1!==u.onEditModalClose()&&t),t}),tn.b,tn.a)),t["\u0275prd"](512,null,un.a,un.a,[C.b]),t["\u0275did"](69,1228800,null,0,on.a,[un.a,m.d,t.ElementRef,t.Renderer2,C.b],{modalTitle:[0,"modalTitle"]},{close:"close",onInit:"onInit"}),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275and"](16777216,null,0,1,null,Bn)),t["\u0275did"](72,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,7,0,e.isSettingsLevelDropDownVisible),l(n,9,0,!e.stores||e.loading),l(n,12,0,e.form),l(n,22,0,"storeNameType","storeNameType","name"),l(n,24,0,"storeNameType"),l(n,32,0,"storeNameType","storeNameType","shortName"),l(n,34,0,"storeNameType"),l(n,42,0,"storeNameType","storeNameType","abbreviation"),l(n,44,0,"storeNameType"),l(n,59,0,e.stores,e.trackById),l(n,69,0,t["\u0275unv"](n,69,0,t["\u0275nov"](n,70).transform("page.store-name-setup.modal.edit-store.caption"))),l(n,72,0,e.editedStore)}),(function(l,n){var e=n.component;l(n,3,0,t["\u0275unv"](n,3,0,t["\u0275nov"](n,4).transform("page.store-name-setup.caption"))),l(n,10,0,t["\u0275nov"](n,14).ngClassUntouched,t["\u0275nov"](n,14).ngClassTouched,t["\u0275nov"](n,14).ngClassPristine,t["\u0275nov"](n,14).ngClassDirty,t["\u0275nov"](n,14).ngClassValid,t["\u0275nov"](n,14).ngClassInvalid,t["\u0275nov"](n,14).ngClassPending),l(n,17,0,t["\u0275unv"](n,17,0,t["\u0275nov"](n,18).transform("page.store-name-setup.panel.store-name.caption"))),l(n,20,0,t["\u0275nov"](n,26).ngClassUntouched,t["\u0275nov"](n,26).ngClassTouched,t["\u0275nov"](n,26).ngClassPristine,t["\u0275nov"](n,26).ngClassDirty,t["\u0275nov"](n,26).ngClassValid,t["\u0275nov"](n,26).ngClassInvalid,t["\u0275nov"](n,26).ngClassPending),l(n,27,0,t["\u0275unv"](n,27,0,t["\u0275nov"](n,28).transform("page.store-name-setup.panel.store-name.option.name"))),l(n,30,0,t["\u0275nov"](n,36).ngClassUntouched,t["\u0275nov"](n,36).ngClassTouched,t["\u0275nov"](n,36).ngClassPristine,t["\u0275nov"](n,36).ngClassDirty,t["\u0275nov"](n,36).ngClassValid,t["\u0275nov"](n,36).ngClassInvalid,t["\u0275nov"](n,36).ngClassPending),l(n,37,0,t["\u0275unv"](n,37,0,t["\u0275nov"](n,38).transform("page.store-name-setup.panel.store-name.option.short-name"))),l(n,40,0,t["\u0275nov"](n,46).ngClassUntouched,t["\u0275nov"](n,46).ngClassTouched,t["\u0275nov"](n,46).ngClassPristine,t["\u0275nov"](n,46).ngClassDirty,t["\u0275nov"](n,46).ngClassValid,t["\u0275nov"](n,46).ngClassInvalid,t["\u0275nov"](n,46).ngClassPending),l(n,47,0,t["\u0275unv"](n,47,0,t["\u0275nov"](n,48).transform("page.store-name-setup.panel.store-name.option.abbreviation"))),l(n,51,0,t["\u0275unv"](n,51,0,t["\u0275nov"](n,52).transform("page.store-name-setup.panel.store-order.caption"))),l(n,53,0,t["\u0275nov"](n,55).id,t["\u0275nov"](n,55).disabled,t["\u0275nov"](n,55)._dropListRef.isDragging(),t["\u0275nov"](n,55)._dropListRef.isReceiving()),l(n,61,0,e.form.invalid||e.loading),l(n,62,0,t["\u0275unv"](n,62,0,t["\u0275nov"](n,63).transform("page.store-name-setup.button.save.name"))),l(n,64,0,e.loading),l(n,65,0,t["\u0275unv"](n,65,0,t["\u0275nov"](n,66).transform("page.store-name-setup.button.cancel.name")))}))}var Hn=t["\u0275ccf"]("ng-component",An,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Yn,Vn)),t["\u0275did"](1,245760,null,0,An,[q.f,p.o,p.a,S.a,Fn,Dl.a,Nn.a,H.a,v.j,C.b],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),zn=e("X9r4"),Xn=e("nAQW"),Wn=e("zCXV"),Zn=e("hCby"),Jn=e("pLZG"),Qn=e("W+wd");class le{constructor(l,n,e,t,u,i,o){this.router=n,this.route=e,this.session=t,this.settingsApi=u,this.sortingMeasures=i,this.translate=o,this.enableSortingMeasures=!0,this.enableSortingCategories=!1,this.measureGroupsIndex=new Map,this.measures=[],this.categories=[],this.selectedKpiLevel$=new En.a(void 0),this.isKpiLevelDropDownOpened=!1,this.subs=[],this.debug=l.factory(new.target.name)}set sub(l){this.subs.push(l)}ngOnInit(){this.spinner$=this.sortingMeasures.spinner$,this.sub=this.translate.stream(["page.sorting-measures.filters.kpi.item.public.name","page.sorting-measures.filters.kpi.item.my-kpi.name"]).subscribe(l=>{this.kpiLevels=[{label:l["page.sorting-measures.filters.kpi.item.public.name"],value:Qn.c.Public},{label:l["page.sorting-measures.filters.kpi.item.my-kpi.name"],value:Qn.c.My}],this.setKpiLevel(this.isPublicKpiLevelAvailable?this.kpiLevels[0]:this.kpiLevels[1])}),this.sub=Object(Cl.b)([this.settingsApi.getMeasures(),this.selectedKpiLevel$]).pipe(Object(Jn.a)(([l,n])=>!!n.value),Object(b.a)(([l,n])=>(l.forEach(l=>l.kpiLevel=0==+l.slno?Qn.c.Public:Qn.c.My),{measures:l.filter(l=>l.kpiLevel===n.value).map(l=>({kpiIndex:l.KpiIndex,name:l.KpiName,category:l.KpiSectionName,section_id:l.KpiSection})),kpiLevel:n.value}))).subscribe(l=>{this.sortingMeasures.setPayload(l.measures,l.kpiLevel)}),this.sub=this.sortingMeasures.sortedMeasures$.subscribe(l=>this.measures=[...l]),this.sub=this.sortingMeasures.sortedCategories$.subscribe(l=>this.categories=[...l]),this.sub=Object(Cl.b)([this.sortingMeasures.sortedMeasures$,this.sortingMeasures.categoriesIndex$]).pipe(Object(b.a)(([l,n])=>this.buildMeasureGroupsIndex(l,n))).subscribe(l=>this.measureGroupsIndex=l),this.sub=this.sortingMeasures.enableSorting$.subscribe(l=>{this.enableSortingMeasures=l.measures,this.enableSortingCategories=l.categories})}ngOnDestroy(){this.subs.forEach(l=>l.unsubscribe())}get isPublicKpiLevelAvailable(){return this.session.isInstanceLevel}toggleKpiLevelDropDown(){this.isKpiLevelDropDownOpened=!this.isKpiLevelDropDownOpened}setKpiLevel(l){this.selectedKpiLevel$.next(l),this.isKpiLevelDropDownOpened=!1}onDragDrop(l,n){Object(Tn.i)(l,n.previousIndex,n.currentIndex)}onChangeSortingMeasureCategoriesCheckbox(l){l?this.sortingMeasures.categoriesIndex$.pipe(Object(_n.a)()).subscribe(l=>this.measureGroupsIndex=this.buildMeasureGroupsIndex(this.measures,l)):this.measures=this.buildSortedMeasuresCollection(this.categories,this.measureGroupsIndex)}onSave(){const l=(this.enableSortingCategories?this.buildSortedMeasuresCollection(this.categories,this.measureGroupsIndex):this.measures).map(l=>l.id),n=this.categories.map(l=>l.id);this.sortingMeasures.saveSortingOrder({measuresOrder:l,categoriesOrder:n,enableSortingMeasures:this.enableSortingMeasures,enableSortingCategories:this.enableSortingCategories}),this.router.navigate([".."],{relativeTo:this.route})}onCancel(){this.router.navigate([".."],{relativeTo:this.route})}trackById(l){return l.id}buildMeasureGroupsIndex(l,n){const e=new Map;return l.forEach(l=>{let t=e.get(l.categoryId);t||(t=Object.assign({},n.get(l.categoryId),{measures:[]}),e.set(t.id,t)),t.measures.push(l)}),e}buildSortedMeasuresCollection(l,n){return l.map(l=>n.get(l.id)).reduce((l,n)=>(l.push(...n.measures),l),[])}}var ne=t["\u0275crt"]({encapsulation:0,styles:[[".content__section[_ngcontent-%COMP%]{margin-top:20px}.content__section-body[_ngcontent-%COMP%]{position:relative;padding:20px}.content__section[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-top:60px}ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}li[_ngcontent-%COMP%]{padding:10px;border:1px solid #0a0a0a;border-radius:5px;list-style-type:none;background-color:#f5f5f5}li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-top:5px}app-panel[_ngcontent-%COMP%] + app-panel[_ngcontent-%COMP%]{margin-left:20px}.measure-sorting[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.measure-sorting__body[_ngcontent-%COMP%]{position:relative;height:100%;display:flex;margin:0 0 10px}.measure-sorting__footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.panel-measure-categories[_ngcontent-%COMP%]{width:300px}.groupd-measures[_ngcontent-%COMP%]{padding:10px;border:1px solid #cacaca;border-radius:5px}.groupd-measures[_ngcontent-%COMP%] + .groupd-measures[_ngcontent-%COMP%]{margin-top:20px}.groupd-measures[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{border-bottom:1px solid #bbb}.panel-scrollable[_ngcontent-%COMP%]{height:100%;padding:10px;overflow:auto}.move-buttons[_ngcontent-%COMP%]{float:right;margin-top:-3px}.move-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px}"]],data:{}});function ee(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","dropdown-loader"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"app-loader",[],[[8,"className",0]],null,null,U.b,U.a)),t["\u0275did"](2,49152,null,0,$.a,[],null,null)],null,(function(l,n){l(n,1,0,t["\u0275nov"](n,2).cssClassByType)}))}function te(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","dropdown-menu-item"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"span",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.setKpiLevel(l.context.$implicit)&&t),t}),null,null)),(l()(),t["\u0275ted"](2,null,["",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.label)}))}function ue(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","c_dropdown-std_menu"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,ee)),t["\u0275did"](2,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,te)),t["\u0275did"](4,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var e=n.component;l(n,2,0,!(null!=e.kpiLevels&&e.kpiLevels.length)),l(n,4,0,e.kpiLevels)}),null)}function ie(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,8,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,5,"div",[["class","c_dropdown-std_value"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleKpiLevelDropDown()&&t),t}),null,null)),(l()(),t["\u0275eld"](2,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),t["\u0275ted"](3,null,["",": ",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](6,0,null,null,0,"span",[["class","icon-arrow-s-down"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,ue)),t["\u0275did"](8,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](0,null,null,0))],(function(l,n){l(n,8,0,n.component.isKpiLevelDropDownOpened)}),(function(l,n){var e,u=n.component;l(n,3,0,t["\u0275unv"](n,3,0,t["\u0275nov"](n,4).transform("page.sorting-measures.filters.kpi.label.name")),null==(e=t["\u0275unv"](n,3,1,t["\u0275nov"](n,5).transform(u.selectedKpiLevel$)))?null:e.label)}))}function oe(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","c_dropdown-std_value"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),t["\u0275ted"](2,null,["",": ",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef])],null,(function(l,n){var e,u=n.component;l(n,2,0,t["\u0275unv"](n,2,0,t["\u0275nov"](n,3).transform("page.sorting-measures.filters.kpi.label.name")),null==(e=t["\u0275unv"](n,2,1,t["\u0275nov"](n,4).transform(u.selectedKpiLevel$)))?null:e.label)}))}function ae(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-loader",[["type","overlay"]],[[8,"className",0]],null,null,U.b,U.a)),t["\u0275did"](1,49152,null,0,$.a,[],{type:[0,"type"]},null)],(function(l,n){l(n,1,0,"overlay")}),(function(l,n){l(n,0,0,t["\u0275nov"](n,1).cssClassByType)}))}function se(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,16777216,null,null,6,"li",[["cdkDrag",""],["class","list-group-item cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),t["\u0275prd"](6144,null,Tn.j,null,[Tn.c]),t["\u0275did"](2,4866048,[[1,4]],3,Tn.c,[t.ElementRef,[3,Tn.b],m.d,t.NgZone,t.ViewContainerRef,Tn.a,[2,Pn.b],Tn.f,t.ChangeDetectorRef],null,null),t["\u0275qud"](603979776,2,{_handles:1}),t["\u0275qud"](603979776,3,{_previewTemplate:0}),t["\u0275qud"](603979776,4,{_placeholderTemplate:0}),(l()(),t["\u0275ted"](6,null,[" "," "])),(l()(),t["\u0275and"](0,null,null,0))],null,(function(l,n){l(n,0,0,t["\u0275nov"](n,2).disabled,t["\u0275nov"](n,2)._dragRef.isDragging()),l(n,6,0,n.context.$implicit.name)}))}function re(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[["class","groupd-measures"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),t["\u0275ted"](2,null,["",""])),(l()(),t["\u0275eld"](3,0,null,null,6,"ul",[["cdkDropList",""],["class","cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],(function(l,n,e){var t=!0,u=l.component;return"cdkDropListDropped"===n&&(t=!1!==u.onDragDrop(u.measureGroupsIndex.get(l.context.$implicit.id).measures,e)&&t),t}),null,null)),t["\u0275prd"](6144,null,Tn.b,null,[Tn.d]),t["\u0275did"](5,1196032,null,1,Tn.d,[t.ElementRef,Tn.f,t.ChangeDetectorRef,[2,Pn.b],[3,Tn.e]],null,{dropped:"cdkDropListDropped"}),t["\u0275qud"](603979776,1,{_draggables:1}),t["\u0275prd"](256,null,Tn.e,void 0,[]),(l()(),t["\u0275and"](16777216,null,null,1,null,se)),t["\u0275did"](9,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],(function(l,n){var e=n.component;l(n,9,0,e.measureGroupsIndex.get(n.context.$implicit.id).measures,e.trackById)}),(function(l,n){l(n,2,0,n.context.$implicit.name),l(n,3,0,t["\u0275nov"](n,5).id,t["\u0275nov"](n,5).disabled,t["\u0275nov"](n,5)._dropListRef.isDragging(),t["\u0275nov"](n,5)._dropListRef.isReceiving())}))}function de(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,re)),t["\u0275did"](2,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),t["\u0275and"](0,null,null,0))],(function(l,n){var e=n.component;l(n,2,0,e.categories,e.trackById)}),null)}function ce(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,16777216,null,null,6,"li",[["cdkDrag",""],["class","list-group-item cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),t["\u0275prd"](6144,null,Tn.j,null,[Tn.c]),t["\u0275did"](2,4866048,[[5,4]],3,Tn.c,[t.ElementRef,[3,Tn.b],m.d,t.NgZone,t.ViewContainerRef,Tn.a,[2,Pn.b],Tn.f,t.ChangeDetectorRef],null,null),t["\u0275qud"](603979776,6,{_handles:1}),t["\u0275qud"](603979776,7,{_previewTemplate:0}),t["\u0275qud"](603979776,8,{_placeholderTemplate:0}),(l()(),t["\u0275ted"](6,null,[" "," "])),(l()(),t["\u0275and"](0,null,null,0))],null,(function(l,n){l(n,0,0,t["\u0275nov"](n,2).disabled,t["\u0275nov"](n,2)._dragRef.isDragging()),l(n,6,0,n.context.$implicit.name)}))}function ge(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,6,"ul",[["cdkDropList",""],["class","cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],(function(l,n,e){var t=!0,u=l.component;return"cdkDropListDropped"===n&&(t=!1!==u.onDragDrop(u.measures,e)&&t),t}),null,null)),t["\u0275prd"](6144,null,Tn.b,null,[Tn.d]),t["\u0275did"](2,1196032,null,1,Tn.d,[t.ElementRef,Tn.f,t.ChangeDetectorRef,[2,Pn.b],[3,Tn.e]],null,{dropped:"cdkDropListDropped"}),t["\u0275qud"](603979776,5,{_draggables:1}),t["\u0275prd"](256,null,Tn.e,void 0,[]),(l()(),t["\u0275and"](16777216,null,null,1,null,ce)),t["\u0275did"](6,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],(function(l,n){var e=n.component;l(n,6,0,e.measures,e.trackById)}),(function(l,n){l(n,0,0,t["\u0275nov"](n,2).id,t["\u0275nov"](n,2).disabled,t["\u0275nov"](n,2)._dropListRef.isDragging(),t["\u0275nov"](n,2)._dropListRef.isReceiving())}))}function pe(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","panel-scrollable"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,de)),t["\u0275did"](2,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),t["\u0275and"](0,[["notGroupedMeasures",2]],null,0,null,ge))],(function(l,n){l(n,2,0,n.component.enableSortingCategories,t["\u0275nov"](n,3))}),null)}function me(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,[" "," "])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],null,(function(l,n){l(n,1,0,t["\u0275unv"](n,1,0,t["\u0275nov"](n,2).transform("page.sorting-measures.panel.measures-no-data-message")))}))}function ve(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,16777216,null,null,6,"li",[["cdkDrag",""],["class","list-group-item cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),t["\u0275prd"](6144,null,Tn.j,null,[Tn.c]),t["\u0275did"](2,4866048,[[9,4]],3,Tn.c,[t.ElementRef,[3,Tn.b],m.d,t.NgZone,t.ViewContainerRef,Tn.a,[2,Pn.b],Tn.f,t.ChangeDetectorRef],null,null),t["\u0275qud"](603979776,10,{_handles:1}),t["\u0275qud"](603979776,11,{_previewTemplate:0}),t["\u0275qud"](603979776,12,{_placeholderTemplate:0}),(l()(),t["\u0275ted"](6,null,[" "," "])),(l()(),t["\u0275and"](0,null,null,0))],null,(function(l,n){l(n,0,0,t["\u0275nov"](n,2).disabled,t["\u0275nov"](n,2)._dragRef.isDragging()),l(n,6,0,n.context.$implicit.name)}))}function he(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","panel-scrollable"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,6,"ul",[["cdkDropList",""],["class","cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],(function(l,n,e){var t=!0,u=l.component;return"cdkDropListDropped"===n&&(t=!1!==u.onDragDrop(u.categories,e)&&t),t}),null,null)),t["\u0275prd"](6144,null,Tn.b,null,[Tn.d]),t["\u0275did"](3,1196032,null,1,Tn.d,[t.ElementRef,Tn.f,t.ChangeDetectorRef,[2,Pn.b],[3,Tn.e]],null,{dropped:"cdkDropListDropped"}),t["\u0275qud"](603979776,9,{_draggables:1}),t["\u0275prd"](256,null,Tn.e,void 0,[]),(l()(),t["\u0275and"](16777216,null,null,1,null,ve)),t["\u0275did"](7,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],(function(l,n){var e=n.component;l(n,7,0,e.categories,e.trackById)}),(function(l,n){l(n,1,0,t["\u0275nov"](n,3).id,t["\u0275nov"](n,3).disabled,t["\u0275nov"](n,3)._dropListRef.isDragging(),t["\u0275nov"](n,3)._dropListRef.isReceiving())}))}function fe(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,[" "," "])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],null,(function(l,n){l(n,1,0,t["\u0275unv"](n,1,0,t["\u0275nov"](n,2).transform("page.sorting-measures.panel.measures-no-data-message")))}))}function be(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,62,"div",[["class","content__section"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"div",[["class","content__section-header content__section-header--justify"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,2,"h4",[["class","content__section-heading"]],null,null,null,null,null)),(l()(),t["\u0275ted"](3,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](5,0,null,null,57,"div",[["class","content__section-body scrollable"]],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,7,"div",[["class","page__actions_bar"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,5,"div",[["class","align-left"]],null,null,null,null,null)),(l()(),t["\u0275eld"](8,0,null,null,4,"div",[["class","c_dropdown-std less-border kpi-select-box"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,ie)),t["\u0275did"](10,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,oe)),t["\u0275did"](12,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](13,0,null,null,0,"div",[["class","align-right"]],null,null,null,null,null)),(l()(),t["\u0275eld"](14,0,null,null,48,"div",[["class","measure-sorting"]],null,null,null,null,null)),(l()(),t["\u0275eld"](15,0,null,null,19,"div",[["class","measure-sorting__body"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,2,null,ae)),t["\u0275did"](17,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](19,0,null,null,7,"app-panel",[["class","panel-measures"]],[[2,"panel--hoverable",null],[2,"panel--disabled",null]],null,null,zn.b,zn.a)),t["\u0275did"](20,114688,null,0,Xn.a,[],{label:[0,"label"],disabled:[1,"disabled"]},null),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275and"](16777216,null,1,1,null,pe)),t["\u0275did"](23,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,1,2,null,me)),t["\u0275did"](25,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](27,0,null,null,7,"app-panel",[["class","panel-measure-categories"]],[[2,"panel--hoverable",null],[2,"panel--disabled",null]],null,null,zn.b,zn.a)),t["\u0275did"](28,114688,null,0,Xn.a,[],{label:[0,"label"],disabled:[1,"disabled"]},null),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275and"](16777216,null,1,1,null,he)),t["\u0275did"](31,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,1,2,null,fe)),t["\u0275did"](33,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](35,0,null,null,18,"div",[["class","measure-sorting__footer"]],null,null,null,null,null)),(l()(),t["\u0275eld"](36,0,null,null,8,"app-c-checkbox",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],(function(l,n,e){var t=!0;return"ngModelChange"===n&&(t=!1!==(l.component.enableSortingMeasures=e)&&t),t}),Ll.b,Ll.a)),t["\u0275did"](37,49152,null,0,jl.a,[C.b],{label:[0,"label"],disabled:[1,"disabled"]},null),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[jl.a]),t["\u0275did"](41,671744,null,0,q.v,[[8,null],[8,null],[8,null],[6,q.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),t["\u0275prd"](2048,null,q.r,null,[q.v]),t["\u0275did"](44,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](45,0,null,null,8,"app-c-checkbox",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"cChange"]],(function(l,n,e){var t=!0,u=l.component;return"ngModelChange"===n&&(t=!1!==(u.enableSortingCategories=e)&&t),"cChange"===n&&(t=!1!==u.onChangeSortingMeasureCategoriesCheckbox(e)&&t),t}),Ll.b,Ll.a)),t["\u0275did"](46,49152,null,0,jl.a,[C.b],{label:[0,"label"],disabled:[1,"disabled"]},{cChange:"cChange"}),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[jl.a]),t["\u0275did"](50,671744,null,0,q.v,[[8,null],[8,null],[8,null],[6,q.q]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),t["\u0275prd"](2048,null,q.r,null,[q.v]),t["\u0275did"](53,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](54,0,null,null,8,"div",[["class","buttons"]],null,null,null,null,null)),(l()(),t["\u0275eld"](55,0,null,null,3,"button",[["class","btn btn--primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onSave()&&t),t}),null,null)),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),(l()(),t["\u0275ted"](57,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](59,0,null,null,3,"button",[["class","btn btn--color-secondary btn--empty"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onCancel()&&t),t}),null,null)),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),(l()(),t["\u0275ted"](61,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=n.component;l(n,10,0,e.isPublicKpiLevelAvailable),l(n,12,0,!e.isPublicKpiLevelAvailable),l(n,17,0,t["\u0275unv"](n,17,0,t["\u0275nov"](n,18).transform(e.spinner$))),l(n,20,0,t["\u0275unv"](n,20,0,t["\u0275nov"](n,21).transform("page.sorting-measures.panel.measures.caption")),!e.enableSortingMeasures),l(n,23,0,e.measures.length),l(n,25,0,!t["\u0275unv"](n,25,0,t["\u0275nov"](n,26).transform(e.spinner$))&&!e.measures.length),l(n,28,0,t["\u0275unv"](n,28,0,t["\u0275nov"](n,29).transform("page.sorting-measures.panel.measure-categories.caption")),!e.enableSortingCategories),l(n,31,0,e.categories.length),l(n,33,0,!t["\u0275unv"](n,33,0,t["\u0275nov"](n,34).transform(e.spinner$))&&!e.categories.length),l(n,37,0,t["\u0275unv"](n,37,0,t["\u0275nov"](n,38).transform("page.sorting-measures.checkbox.enable-sorting-measures.name")),t["\u0275unv"](n,37,1,t["\u0275nov"](n,39).transform(e.spinner$))||!e.measures.length),l(n,41,0,t["\u0275unv"](n,41,0,t["\u0275nov"](n,42).transform(e.spinner$))||!e.measures.length,e.enableSortingMeasures),l(n,46,0,t["\u0275unv"](n,46,0,t["\u0275nov"](n,47).transform("page.sorting-measures.checkbox.enable-sorting-measure-categories.name")),t["\u0275unv"](n,46,1,t["\u0275nov"](n,48).transform(e.spinner$))||!e.categories.length),l(n,50,0,t["\u0275unv"](n,50,0,t["\u0275nov"](n,51).transform(e.spinner$))||!e.categories.length,e.enableSortingCategories)}),(function(l,n){var e=n.component;l(n,3,0,t["\u0275unv"](n,3,0,t["\u0275nov"](n,4).transform("page.sorting-measures.caption"))),l(n,19,0,t["\u0275nov"](n,20).hoverable,t["\u0275nov"](n,20).disabled),l(n,27,0,t["\u0275nov"](n,28).hoverable,t["\u0275nov"](n,28).disabled),l(n,36,0,t["\u0275nov"](n,44).ngClassUntouched,t["\u0275nov"](n,44).ngClassTouched,t["\u0275nov"](n,44).ngClassPristine,t["\u0275nov"](n,44).ngClassDirty,t["\u0275nov"](n,44).ngClassValid,t["\u0275nov"](n,44).ngClassInvalid,t["\u0275nov"](n,44).ngClassPending),l(n,45,0,t["\u0275nov"](n,53).ngClassUntouched,t["\u0275nov"](n,53).ngClassTouched,t["\u0275nov"](n,53).ngClassPristine,t["\u0275nov"](n,53).ngClassDirty,t["\u0275nov"](n,53).ngClassValid,t["\u0275nov"](n,53).ngClassInvalid,t["\u0275nov"](n,53).ngClassPending),l(n,55,0,t["\u0275unv"](n,55,0,t["\u0275nov"](n,56).transform(e.spinner$))||!e.measures.length),l(n,57,0,t["\u0275unv"](n,57,0,t["\u0275nov"](n,58).transform("page.sorting-measures.button.save.name"))),l(n,59,0,t["\u0275unv"](n,59,0,t["\u0275nov"](n,60).transform(e.spinner$))),l(n,61,0,t["\u0275unv"](n,61,0,t["\u0275nov"](n,62).transform("page.sorting-measures.button.cancel.name")))}))}var Ce=t["\u0275ccf"]("ng-component",le,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"ng-component",[],null,null,null,be,ne)),t["\u0275prd"](512,null,Wn.a,Wn.a,[C.b,H.a,Dl.a,Zn.a,v.j]),t["\u0275did"](2,245760,null,0,le,[C.b,p.o,p.a,S.a,z,Wn.a,v.j],null,null)],(function(l,n){l(n,2,0)}),null)}),{},{},[]);class ye{constructor(l,n,e,t,u){this.businessSegmentApi=l,this.router=n,this.route=e,this.dialog=t,this.spinner$=new En.a(!1),this.originalOrder=[],this.debug=u.factory(new.target.name)}get isChanged(){return this.businessSegments.some((l,n)=>l.groupIndex!==this.originalOrder[n])}ngOnInit(){this.spinner$.next(!0),this.businessSegmentApi.getStoreGroups().pipe(Object(B.a)(()=>this.spinner$.next(!1))).subscribe(l=>{this.businessSegments=l,this.originalOrder=this.businessSegments.map(l=>l.groupIndex)},l=>{this.debug.warn("Can not load business segment order. Error: %O",l),this.dialog.warningT("page.sorting-business-segments.server-error.can-not-load-business-segment-list")})}onDragDrop(l){Object(Tn.i)(this.businessSegments,l.previousIndex,l.currentIndex)}onSave(){const l=this.businessSegments.map(l=>l.groupIndex);this.spinner$.next(!0),this.businessSegmentApi.saveSorting(l).pipe(Object(B.a)(()=>this.spinner$.next(!1))).subscribe(()=>{this.router.navigate([".."],{relativeTo:this.route})},l=>{this.debug.warn("Can not save business segment order. Error: %O",l),this.dialog.warningT("page.sorting-business-segments.server-error.can-not-save-order")})}onCancel(){this.router.navigate([".."],{relativeTo:this.route})}trackById(l){return l.groupIndex}}var _e=e("NxlO"),ke=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:100%;padding-top:20px}.content__section[_ngcontent-%COMP%]{height:100%}.content__section-body[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;flex:0 1 100%;overflow:auto;padding:20px}.content__section-scrollable[_ngcontent-%COMP%]{flex:0 1 100%;overflow:auto;padding-right:20px;margin-right:-20px}.content__section[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-top:10px}ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}li[_ngcontent-%COMP%]{padding:10px;border:1px solid #0a0a0a;border-radius:5px;list-style-type:none;background-color:#fafafa}li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-top:5px}"]],data:{}});function De(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-loader",[["type","overlay"]],[[8,"className",0]],null,null,U.b,U.a)),t["\u0275did"](1,49152,null,0,$.a,[],{type:[0,"type"]},null)],(function(l,n){l(n,1,0,"overlay")}),(function(l,n){l(n,0,0,t["\u0275nov"](n,1).cssClassByType)}))}function Re(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,16777216,null,null,6,"li",[["cdkDrag",""],["class","list-group-item cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),t["\u0275prd"](6144,null,Tn.j,null,[Tn.c]),t["\u0275did"](2,4866048,[[1,4]],3,Tn.c,[t.ElementRef,[3,Tn.b],m.d,t.NgZone,t.ViewContainerRef,Tn.a,[2,Pn.b],Tn.f,t.ChangeDetectorRef],null,null),t["\u0275qud"](603979776,2,{_handles:1}),t["\u0275qud"](603979776,3,{_previewTemplate:0}),t["\u0275qud"](603979776,4,{_placeholderTemplate:0}),(l()(),t["\u0275ted"](6,null,[" "," "])),(l()(),t["\u0275and"](0,null,null,0))],null,(function(l,n){l(n,0,0,t["\u0275nov"](n,2).disabled,t["\u0275nov"](n,2)._dragRef.isDragging()),l(n,6,0,n.context.$implicit.name)}))}function Me(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","content__section-scrollable"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,6,"ul",[["cdkDropList",""],["class","cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],(function(l,n,e){var t=!0;return"cdkDropListDropped"===n&&(t=!1!==l.component.onDragDrop(e)&&t),t}),null,null)),t["\u0275prd"](6144,null,Tn.b,null,[Tn.d]),t["\u0275did"](3,1196032,null,1,Tn.d,[t.ElementRef,Tn.f,t.ChangeDetectorRef,[2,Pn.b],[3,Tn.e]],null,{dropped:"cdkDropListDropped"}),t["\u0275qud"](603979776,1,{_draggables:1}),t["\u0275prd"](256,null,Tn.e,void 0,[]),(l()(),t["\u0275and"](16777216,null,null,1,null,Re)),t["\u0275did"](7,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],(function(l,n){var e=n.component;l(n,7,0,e.businessSegments,e.trackById)}),(function(l,n){l(n,1,0,t["\u0275nov"](n,3).id,t["\u0275nov"](n,3).disabled,t["\u0275nov"](n,3)._dropListRef.isDragging(),t["\u0275nov"](n,3)._dropListRef.isReceiving())}))}function we(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,[" "," "])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],null,(function(l,n){l(n,1,0,t["\u0275unv"](n,1,0,t["\u0275nov"](n,2).transform("page.sorting-business-segments.panel.measures-no-data-message")))}))}function Ie(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,22,"div",[["class","content__section content__section--no-max"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"div",[["class","content__section-header content__section-header--justify"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,2,"h4",[["class","content__section-heading"]],null,null,null,null,null)),(l()(),t["\u0275ted"](3,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](5,0,null,null,17,"div",[["class","content__section-body"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,2,null,De)),t["\u0275did"](7,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),(l()(),t["\u0275and"](16777216,null,null,1,null,Me)),t["\u0275did"](10,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,2,null,we)),t["\u0275did"](12,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),(l()(),t["\u0275eld"](14,0,null,null,8,"div",[["class","buttons"]],null,null,null,null,null)),(l()(),t["\u0275eld"](15,0,null,null,3,"button",[["class","btn btn--primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onSave()&&t),t}),null,null)),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),(l()(),t["\u0275ted"](17,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](19,0,null,null,3,"button",[["class","btn btn--color-secondary btn--empty"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onCancel()&&t),t}),null,null)),t["\u0275pid"](131072,m.b,[t.ChangeDetectorRef]),(l()(),t["\u0275ted"](21,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=n.component;l(n,7,0,t["\u0275unv"](n,7,0,t["\u0275nov"](n,8).transform(e.spinner$))),l(n,10,0,null==e.businessSegments?null:e.businessSegments.length),l(n,12,0,!(t["\u0275unv"](n,12,0,t["\u0275nov"](n,13).transform(e.spinner$))||null!=e.businessSegments&&e.businessSegments.length))}),(function(l,n){var e=n.component;l(n,3,0,t["\u0275unv"](n,3,0,t["\u0275nov"](n,4).transform("page.sorting-business-segments.caption"))),l(n,15,0,t["\u0275unv"](n,15,0,t["\u0275nov"](n,16).transform(e.spinner$))||!e.businessSegments.length||!e.isChanged),l(n,17,0,t["\u0275unv"](n,17,0,t["\u0275nov"](n,18).transform("page.sorting-business-segments.button.save.name"))),l(n,19,0,t["\u0275unv"](n,19,0,t["\u0275nov"](n,20).transform(e.spinner$))),l(n,21,0,t["\u0275unv"](n,21,0,t["\u0275nov"](n,22).transform("page.sorting-business-segments.button.cancel.name")))}))}var Se=t["\u0275ccf"]("ng-component",ye,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Ie,ke)),t["\u0275did"](1,114688,null,0,ye,[_e.a,p.o,p.a,H.a,C.b],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),Oe=e("ZwOa"),xe=e("821u"),Te=e("HsOI"),Pe=e("s6ns"),Ee=e("QQfA"),Le=e("/HVE");const je={parse:{dateInput:"LL"},display:{dateInput:"MM/DD",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};class Ae{constructor(l,n,e,u){this.fb=l,this.cdr=n,this.authService=u,this.loading=!1,this.save=new t.EventEmitter,this.cancel=new t.EventEmitter,this.isFiscalDateDisabled=!0,this.currentUser=null,this.debug=e.factory(new.target.name,C.a.All)}ngOnInit(){this.currentUser=this.authService.getCurrentUser(),this.minFiscalDate=new Date((new Date).getFullYear(),0,1),this.maxFiscalDate=new Date((new Date).getFullYear(),11,31),this.form=this.fb.group({isMcAllStores:[!1,[]],isFiscalYear:[!1,[]],fiscalMMDD:[null,[]]})}get isHAG(){return this.currentUser.isHagInstance}ngOnChanges(l){l.initialModel&&this.initialModel instanceof k&&(this.isFiscalDateDisabled=!this.initialModel.fiscalMMDD,this.form.patchValue({isMcAllStores:this.initialModel.isMcAllStores,isFiscalYear:!this.isFiscalDateDisabled,fiscalMMDD:this.initialModel.fiscalMMDD}),this.cdr.markForCheck())}onFiscalYearCheckboxChange(l){this.isFiscalDateDisabled=!l,this.isFiscalDateDisabled&&this.form.get("fiscalMMDD").setValue(null)}onCancel(){this.cancel.emit()}onSubmit(l){if(this.initialModel instanceof k==0)return void this.debug.warn("onSubmit(): initialModel didn't set. Saving rejected");const n=this.initialModel.clone(l);this.save.emit(n)}}var Fe=t["\u0275crt"]({encapsulation:0,styles:[[".content__section-body[_ngcontent-%COMP%]{position:relative;min-height:200px}form[_ngcontent-%COMP%]{margin-top:20px}label[_ngcontent-%COMP%]{display:block}.help-tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block;box-sizing:content-box;margin-left:5px;width:7px;height:19px;padding:0 6px;border-radius:50%;background-color:#333;color:#fff;line-height:20px}app-c-checkbox[_ngcontent-%COMP%] + .help-tooltip[_ngcontent-%COMP%]{margin-left:0}"]],data:{}});function Ne(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-loader",[],[[8,"className",0]],null,null,U.b,U.a)),t["\u0275did"](1,49152,null,0,$.a,[],{type:[0,"type"]},null)],(function(l,n){l(n,1,0,n.component.initialModel?"overlay":"overlay-transparent")}),(function(l,n){l(n,0,0,t["\u0275nov"](n,1).cssClassByType)}))}function Ve(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,6,"app-c-checkbox",[["formControlName","isMcAllStores"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ll.b,Ll.a)),t["\u0275did"](2,49152,null,0,jl.a,[C.b],{label:[0,"label"]},null),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[jl.a]),t["\u0275did"](5,671744,null,0,q.i,[[3,q.d],[8,null],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](7,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](8,0,null,null,2,"span",[["class","help-tooltip"]],[[8,"title",0]],null,null,null,null)),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275ted"](-1,null,["?"]))],(function(l,n){l(n,2,0,t["\u0275unv"](n,2,0,t["\u0275nov"](n,3).transform("page.current-instance-config.form.checkbox.is-mc-all-stores.name"))),l(n,5,0,"isMcAllStores")}),(function(l,n){l(n,1,0,t["\u0275nov"](n,7).ngClassUntouched,t["\u0275nov"](n,7).ngClassTouched,t["\u0275nov"](n,7).ngClassPristine,t["\u0275nov"](n,7).ngClassDirty,t["\u0275nov"](n,7).ngClassValid,t["\u0275nov"](n,7).ngClassInvalid,t["\u0275nov"](n,7).ngClassPending),l(n,8,0,t["\u0275unv"](n,8,0,t["\u0275nov"](n,9).transform("page.current-instance-config.form.checkbox.is-mc-all-stores.tooltip")))}))}function qe(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,30,null,null,null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Ve)),t["\u0275did"](2,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](3,0,null,null,21,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,6,"app-c-checkbox",[["formControlName","isFiscalYear"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"cChange"]],(function(l,n,e){var t=!0;return"cChange"===n&&(t=!1!==l.component.onFiscalYearCheckboxChange(e)&&t),t}),Ll.b,Ll.a)),t["\u0275did"](5,49152,null,0,jl.a,[C.b],{label:[0,"label"]},{cChange:"cChange"}),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[jl.a]),t["\u0275did"](8,671744,null,0,q.i,[[3,q.d],[8,null],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](10,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](11,0,null,null,8,"input",[["aria-haspopup","dialog"],["class","input__text"],["formControlName","fiscalMMDD"],["placeholder","MM/DD"]],[[8,"readOnly",0],[1,"aria-owns",0],[1,"min",0],[1,"max",0],[8,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"]],(function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,13)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,13).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,13)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,13)._compositionEnd(e.target.value)&&u),"input"===n&&(u=!1!==t["\u0275nov"](l,14)._onInput(e.target.value)&&u),"change"===n&&(u=!1!==t["\u0275nov"](l,14)._onChange()&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,14)._onBlur()&&u),"keydown"===n&&(u=!1!==t["\u0275nov"](l,14)._onKeydown(e)&&u),u}),null,null)),t["\u0275prd"](6144,null,Oe.a,null,[xe.h]),t["\u0275did"](13,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275did"](14,147456,null,0,xe.h,[t.ElementRef,[2,D.a],[2,D.e],[2,Te.c]],{matDatepicker:[0,"matDatepicker"],min:[1,"min"],max:[2,"max"]},null),t["\u0275prd"](1024,null,q.p,(function(l){return[l]}),[xe.h]),t["\u0275prd"](1024,null,q.q,(function(l,n){return[l,n]}),[q.e,xe.h]),t["\u0275did"](17,671744,null,0,q.i,[[3,q.d],[6,q.p],[8,null],[6,q.q],[2,q.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,q.r,null,[q.i]),t["\u0275did"](19,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](20,0,null,null,2,"mat-datepicker-toggle",[["class","mat-datepicker-toggle"],["matSuffix",""]],[[1,"tabindex",0],[2,"mat-datepicker-toggle-active",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"focus"]],(function(l,n,e){var u=!0;return"focus"===n&&(u=!1!==t["\u0275nov"](l,21)._button.focus()&&u),u}),a.e,a.d)),t["\u0275did"](21,1753088,null,1,xe.k,[xe.i,t.ChangeDetectorRef,[8,null]],{datepicker:[0,"datepicker"],disabled:[1,"disabled"]},null),t["\u0275qud"](603979776,1,{_customIcon:0}),(l()(),t["\u0275eld"](23,16777216,null,null,1,"mat-datepicker",[],null,null,null,a.f,a.c)),t["\u0275did"](24,180224,[["picker",4]],0,xe.f,[Pe.e,Ee.c,t.NgZone,t.ViewContainerRef,xe.a,[2,D.a],[2,Pn.b],[2,m.d]],{disabled:[0,"disabled"]},null),(l()(),t["\u0275eld"](25,0,null,null,2,"button",[["class","btn btn--primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(l()(),t["\u0275ted"](26,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](28,0,null,null,2,"button",[["class","btn btn--color-secondary btn--empty"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onCancel()&&t),t}),null,null)),(l()(),t["\u0275ted"](29,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=n.component;l(n,2,0,e.isHAG),l(n,5,0,t["\u0275unv"](n,5,0,t["\u0275nov"](n,6).transform("page.current-instance-config.form.checkbox.fiscal-year.name"))),l(n,8,0,"isFiscalYear"),l(n,14,0,t["\u0275nov"](n,24),e.minFiscalDate,e.maxFiscalDate),l(n,17,0,"fiscalMMDD"),l(n,21,0,t["\u0275nov"](n,24),e.isFiscalDateDisabled),l(n,24,0,!1)}),(function(l,n){var e=n.component;l(n,4,0,t["\u0275nov"](n,10).ngClassUntouched,t["\u0275nov"](n,10).ngClassTouched,t["\u0275nov"](n,10).ngClassPristine,t["\u0275nov"](n,10).ngClassDirty,t["\u0275nov"](n,10).ngClassValid,t["\u0275nov"](n,10).ngClassInvalid,t["\u0275nov"](n,10).ngClassPending),l(n,11,1,[!0,(null==t["\u0275nov"](n,14)._datepicker?null:t["\u0275nov"](n,14)._datepicker.opened)&&t["\u0275nov"](n,14)._datepicker.id||null,t["\u0275nov"](n,14).min?t["\u0275nov"](n,14)._dateAdapter.toIso8601(t["\u0275nov"](n,14).min):null,t["\u0275nov"](n,14).max?t["\u0275nov"](n,14)._dateAdapter.toIso8601(t["\u0275nov"](n,14).max):null,t["\u0275nov"](n,14).disabled,t["\u0275nov"](n,19).ngClassUntouched,t["\u0275nov"](n,19).ngClassTouched,t["\u0275nov"](n,19).ngClassPristine,t["\u0275nov"](n,19).ngClassDirty,t["\u0275nov"](n,19).ngClassValid,t["\u0275nov"](n,19).ngClassInvalid,t["\u0275nov"](n,19).ngClassPending]),l(n,20,0,-1,t["\u0275nov"](n,21).datepicker&&t["\u0275nov"](n,21).datepicker.opened,t["\u0275nov"](n,21).datepicker&&"accent"===t["\u0275nov"](n,21).datepicker.color,t["\u0275nov"](n,21).datepicker&&"warn"===t["\u0275nov"](n,21).datepicker.color),l(n,25,0,e.form.invalid),l(n,26,0,t["\u0275unv"](n,26,0,t["\u0275nov"](n,27).transform("page.current-instance-config.form.button.submit.name"))),l(n,29,0,t["\u0275unv"](n,29,0,t["\u0275nov"](n,30).transform("page.current-instance-config.form.button.cancel.name")))}))}function Ue(l){return t["\u0275vid"](2,[(l()(),t["\u0275eld"](0,0,null,null,13,"form",[["class","content__section content__section--no-max"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(l,n,e){var u=!0,i=l.component;return"submit"===n&&(u=!1!==t["\u0275nov"](l,2).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,2).onReset()&&u),"ngSubmit"===n&&(u=!1!==i.onSubmit(i.form.value)&&u),u}),null,null)),t["\u0275did"](1,16384,null,0,q.I,[],null,null),t["\u0275did"](2,540672,null,0,q.k,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t["\u0275prd"](2048,null,q.d,null,[q.k]),t["\u0275did"](4,16384,null,0,q.t,[[4,q.d]],null,null),(l()(),t["\u0275eld"](5,0,null,null,3,"div",[["class","content__section-header content__section-header--justify"]],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,2,"h4",[["class","content__section-heading"]],null,null,null,null,null)),(l()(),t["\u0275ted"](7,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](9,0,null,null,4,"div",[["class","content__section-body"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Ne)),t["\u0275did"](11,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,qe)),t["\u0275did"](13,16384,null,0,m.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,2,0,e.form),l(n,11,0,!e.initialModel||e.loading),l(n,13,0,e.initialModel)}),(function(l,n){l(n,0,0,t["\u0275nov"](n,4).ngClassUntouched,t["\u0275nov"](n,4).ngClassTouched,t["\u0275nov"](n,4).ngClassPristine,t["\u0275nov"](n,4).ngClassDirty,t["\u0275nov"](n,4).ngClassValid,t["\u0275nov"](n,4).ngClassInvalid,t["\u0275nov"](n,4).ngClassPending),l(n,7,0,t["\u0275unv"](n,7,0,t["\u0275nov"](n,8).transform("page.current-instance-config.caption")))}))}class $e{constructor(l,n,e,t,u,i){this.instanceApi=l,this.userApi=n,this.dialog=e,this.router=t,this.route=u,this.loading=!1,this.subs=[],this.debug=i.factory(new.target.name)}set sub(l){this.subs.push(l)}ngOnInit(){this.sub=this.instanceApi.getInstance("current").pipe(Object(yn.a)(this.instanceApi.getFiscalYearConfig(),(l,n)=>(l.fiscalMMDD=n.fiscalMMDD,l))).subscribe(l=>this.model=l,l=>{this.debug.warn("ngOnInit(): Can not load configuration. Error:",l),this.dialog.warningT("page.current-instance-config.loading.server-error.can-not-save",{suffix:this.dialog.tryAgainLaterMessage})})}ngOnDestroy(){this.subs.forEach(l=>l.unsubscribe())}onCancel(){this.router.navigate([".."],{relativeTo:this.route})}onSave(l){this.loading=!0,this.instanceApi.updateInstance(l).pipe(Object(yn.a)(this.instanceApi.saveFiscalYearConfig(l)),Object(B.a)(()=>this.loading=!1)).subscribe(l=>{this.router.navigate([".."],{relativeTo:this.route})},l=>{this.debug.warn("onSave(): Can not save. Error:",l),this.dialog.warningT("page.current-instance-config.saving.server-error.can-not-save",{suffix:this.dialog.tryAgainLaterMessage})})}}var Ke=t["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ge(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"app-current-instance-config-form",[],null,[[null,"save"],[null,"cancel"]],(function(l,n,e){var t=!0,u=l.component;return"save"===n&&(t=!1!==u.onSave(e)&&t),"cancel"===n&&(t=!1!==u.onCancel()&&t),t}),Ue,Fe)),t["\u0275prd"](4608,null,D.a,M,[D.f,Le.a]),t["\u0275did"](2,638976,null,0,Ae,[q.f,t.ChangeDetectorRef,C.b,S.a],{initialModel:[0,"initialModel"],loading:[1,"loading"]},{save:"save",cancel:"cancel"}),t["\u0275prd"](256,null,D.e,je,[])],(function(l,n){var e=n.component;l(n,2,0,e.model,e.loading)}),null)}var Be=t["\u0275ccf"]("ng-component",$e,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Ge,Ke)),t["\u0275did"](1,245760,null,0,$e,[I,Kl.a,H.a,p.o,p.a,C.b],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]);class Ye{constructor(l,n,e,t,u,i,o){this.fb=l,this.router=n,this.route=e,this.session=t,this.api=u,this.translate=i,this.loading=!1,this.editLoading=!1,this.selectedSettingsLevel$=new En.a(void 0),this.isSettingsLevelDropDownOpened=!1,this.isSettingsLevelDropDownVisible=!1,this.subs=[],this.debug=o.factory(new.target.name)}set sub(l){this.subs.push(l)}ngOnInit(){this.selectedType="New",this.bindStockType(this.selectedType)}ngOnDestroy(){this.subs.forEach(l=>l.unsubscribe())}setType(l){this.bindStockType(this.selectedType)}toggleType(l){this.types=this.types.filter(n=>n.stocktype!==l.stocktype),this.selectedTypes.push(l)}reverseToggleType(l){"new"!==l.stocktype.toLowerCase()&&"used"!==l.stocktype.toLowerCase()&&(this.selectedTypes=this.selectedTypes.filter(n=>n.stocktype!==l.stocktype),this.types.push(l))}onSubmit(){const l=JSON.stringify(this.selectedTypes.map(l=>l.stocktype));this.sub=this.api.saveSelectedStockTypes(l,this.selectedType).subscribe(l=>{this.router.navigate([".."],{relativeTo:this.route})})}onCancel(){this.router.navigate([".."],{relativeTo:this.route})}bindStockType(l){this.sub=this.api.getStockTypes(l).subscribe(l=>{this.types=l.Types,this.selectedTypes=l.SelectedTypes})}}var He=t["\u0275crt"]({encapsulation:0,styles:[[".content__section[_ngcontent-%COMP%]{margin-top:20px}.content__section-body[_ngcontent-%COMP%]{position:relative;padding:20px}.content__section[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-top:60px}.content__section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{padding:10px;border:1px solid #cacaca;border-radius:5px}.content__section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.content__section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400}.store-order-container[_ngcontent-%COMP%]{list-style-type:none;margin:15px 0;max-height:500px;overflow:auto;display:block;width:35%;position:relative}.store-order-container-item[_ngcontent-%COMP%]{padding:10px;border:1px solid #3c3c3c;border-radius:5px;background-color:#fafafa;list-style-type:none;cursor:move}.store-order-container-item[_ngcontent-%COMP%] + .store-order-container-item[_ngcontent-%COMP%]{margin-top:5px}.store-name-edit[_ngcontent-%COMP%]{float:right;text-decoration:underline}"]],data:{}});function ze(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","c_relationship-card"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleType(l.context.$implicit)&&t),t}),null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","card-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"p",[["class","card-text"]],null,null,null,null,null)),(l()(),t["\u0275ted"](3,null,["",""]))],null,(function(l,n){l(n,3,0,n.context.$implicit.stocktype)}))}function Xe(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","c_relationship-card"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.reverseToggleType(l.context.$implicit)&&t),t}),null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","card-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"p",[["class","card-text"]],null,null,null,null,null)),(l()(),t["\u0275ted"](3,null,["",""]))],null,(function(l,n){l(n,3,0,n.context.$implicit.stocktype)}))}function We(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,54,"form",[["class","business-segment-form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(l,n,e){var u=!0,i=l.component;return"submit"===n&&(u=!1!==t["\u0275nov"](l,2).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,2).onReset()&&u),"ngSubmit"===n&&(u=!1!==i.onSubmit()&&u),u}),null,null)),t["\u0275did"](1,16384,null,0,q.I,[],null,null),t["\u0275did"](2,4210688,[["stForm",4]],0,q.u,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),t["\u0275prd"](2048,null,q.d,null,[q.u]),t["\u0275did"](4,16384,null,0,q.t,[[4,q.d]],null,null),(l()(),t["\u0275eld"](5,0,null,null,4,"div",[["class","content__section"]],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,3,"div",[["class","content__section-header content__section-header--justify"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,2,"h4",[["class","content__section-heading"]],null,null,null,null,null)),(l()(),t["\u0275ted"](8,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](10,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,19,"div",[["class","row collapse"]],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,18,"div",[["class","form-group small-12 medium-6 column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](13,0,null,null,2,"label",[],null,null,null,null,null)),(l()(),t["\u0275ted"](14,null,["",":"])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](16,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t["\u0275eld"](17,0,null,null,13,"select",[["name","groupIndex"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,e){var u=!0,i=l.component;return"change"===n&&(u=!1!==t["\u0275nov"](l,18).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,18).onTouched()&&u),"ngModelChange"===n&&(u=!1!==(i.selectedType=e)&&u),"change"===n&&(u=!1!==i.setType(e)&&u),u}),null,null)),t["\u0275did"](18,16384,null,0,q.C,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,q.q,(function(l){return[l]}),[q.C]),t["\u0275did"](20,671744,null,0,q.v,[[2,q.d],[8,null],[8,null],[6,q.q]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.v]),t["\u0275did"](22,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](23,0,null,null,3,"option",[["selected",""],["value","New"]],null,null,null,null,null)),t["\u0275did"](24,147456,null,0,q.w,[t.ElementRef,t.Renderer2,[2,q.C]],{value:[0,"value"]},null),t["\u0275did"](25,147456,null,0,q.H,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](-1,null,["New"])),(l()(),t["\u0275eld"](27,0,null,null,3,"option",[["value","Used"]],null,null,null,null,null)),t["\u0275did"](28,147456,null,0,q.w,[t.ElementRef,t.Renderer2,[2,q.C]],{value:[0,"value"]},null),t["\u0275did"](29,147456,null,0,q.H,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](-1,null,["Used"])),(l()(),t["\u0275eld"](31,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t["\u0275eld"](32,0,null,null,14,"div",[["class","row group-stores c_relationship"]],null,null,null,null,null)),(l()(),t["\u0275eld"](33,0,null,null,6,"div",[["class","small-6 columns c_relationship-column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](34,0,null,null,2,"h4",[["class","c_relationship-title"]],null,null,null,null,null)),(l()(),t["\u0275ted"](35,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](37,0,null,null,2,"div",[["class","c_relationship-list"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,ze)),t["\u0275did"](39,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275eld"](40,0,null,null,6,"div",[["class","small-6 columns c_relationship-column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](41,0,null,null,2,"h4",[["class","c_relationship-title"]],null,null,null,null,null)),(l()(),t["\u0275ted"](42,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](44,0,null,null,2,"div",[["class","c_relationship-list"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,Xe)),t["\u0275did"](46,278528,null,0,m.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275eld"](47,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t["\u0275eld"](48,0,null,null,6,"div",[["class","buttons"]],null,null,null,null,null)),(l()(),t["\u0275eld"](49,0,null,null,2,"button",[["class","btn btn--primary"],["type","submit"]],null,null,null,null,null)),(l()(),t["\u0275ted"](50,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](52,0,null,null,2,"button",[["class","btn btn--color-secondary btn--empty"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onCancel()&&t),t}),null,null)),(l()(),t["\u0275ted"](53,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=n.component;l(n,20,0,"groupIndex",e.selectedType),l(n,24,0,"New"),l(n,25,0,"New"),l(n,28,0,"Used"),l(n,29,0,"Used"),l(n,39,0,e.types),l(n,46,0,e.selectedTypes)}),(function(l,n){var e=n.component;l(n,0,0,t["\u0275nov"](n,4).ngClassUntouched,t["\u0275nov"](n,4).ngClassTouched,t["\u0275nov"](n,4).ngClassPristine,t["\u0275nov"](n,4).ngClassDirty,t["\u0275nov"](n,4).ngClassValid,t["\u0275nov"](n,4).ngClassInvalid,t["\u0275nov"](n,4).ngClassPending),l(n,8,0,t["\u0275unv"](n,8,0,t["\u0275nov"](n,9).transform("page.stock-type-setup.caption"))),l(n,14,0,t["\u0275unv"](n,14,0,t["\u0275nov"](n,15).transform("page.stock-type-setup.select.type"))),l(n,17,0,t["\u0275nov"](n,22).ngClassUntouched,t["\u0275nov"](n,22).ngClassTouched,t["\u0275nov"](n,22).ngClassPristine,t["\u0275nov"](n,22).ngClassDirty,t["\u0275nov"](n,22).ngClassValid,t["\u0275nov"](n,22).ngClassInvalid,t["\u0275nov"](n,22).ngClassPending),l(n,35,0,t["\u0275unv"](n,35,0,t["\u0275nov"](n,36).transform("page.stock-type-setup.stock-type-list"))),l(n,42,0,t["\u0275unv"](n,42,0,t["\u0275nov"](n,43).transform("page.stock-type-setup.selected-type"))),l(n,50,0,t["\u0275unv"](n,50,0,t["\u0275nov"](n,51).transform("page.stock-type-setup.save"))),l(n,52,0,e.loading),l(n,53,0,t["\u0275unv"](n,53,0,t["\u0275nov"](n,54).transform("page.stock-type-setup.cancel")))}))}var Ze=t["\u0275ccf"]("ng-component",Ye,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,We,He)),t["\u0275did"](1,245760,null,0,Ye,[q.f,p.o,p.a,S.a,z,v.j,C.b],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]);class Je{constructor(l,n,e,t,u,i){this.api=l,this.dialog=n,this.router=e,this.route=t,this.occcacheservice=u,this.days=null,this.MIN_DAYS=1,this.MAX_DAYS=360,this.subs=[],this.debug=i.factory(new.target.name)}set sub(l){this.subs.push(l)}ngOnInit(){this.bindDays()}ngOnDestroy(){this.subs.forEach(l=>l.unsubscribe())}onSubmit(){this.days<this.MIN_DAYS||this.days>this.MAX_DAYS?this.dialog.warning("Invalid value (should be 1-360)"):this.sub=this.api.saveDaysSupply(this.days).subscribe(l=>{this.dialog.successT(),this.occcacheservice&&this.occcacheservice.cleanAll(),this.router.navigate([".."],{relativeTo:this.route})})}onCancel(){this.router.navigate([".."],{relativeTo:this.route})}bindDays(){this.sub=this.api.getDaysSupply().subscribe(l=>this.days=l)}}var Qe=t["\u0275crt"]({encapsulation:0,styles:[[".content__section[_ngcontent-%COMP%]{margin-top:20px}.content__section-body[_ngcontent-%COMP%]{position:relative;padding:20px}.content__section[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-top:60px}.content__section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{padding:10px;border:1px solid #cacaca;border-radius:5px}.content__section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.content__section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400}.store-order-container[_ngcontent-%COMP%]{list-style-type:none;margin:15px 0;max-height:500px;overflow:auto;display:block;width:35%;position:relative}.store-order-container-item[_ngcontent-%COMP%]{padding:10px;border:1px solid #3c3c3c;border-radius:5px;background-color:#fafafa;list-style-type:none;cursor:move}.store-order-container-item[_ngcontent-%COMP%] + .store-order-container-item[_ngcontent-%COMP%]{margin-top:5px}.store-name-edit[_ngcontent-%COMP%]{float:right;text-decoration:underline}"]],data:{}});function lt(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","content__section"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"div",[["class","content__section-header content__section-header--justify"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,2,"h4",[["class","content__section-heading"]],null,null,null,null,null)),(l()(),t["\u0275ted"](3,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](5,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,13,"div",[["class","row collapse"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,12,"div",[["class","form-group small-12 medium-6 column"]],null,null,null,null,null)),(l()(),t["\u0275eld"](8,0,null,null,2,"label",[],null,null,null,null,null)),(l()(),t["\u0275ted"](9,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](11,0,null,null,8,"input",[["max","360"],["min","1"],["name","days"],["required",""],["type","number"]],[[4,"width","px"],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(l,n,e){var u=!0,i=l.component;return"input"===n&&(u=!1!==t["\u0275nov"](l,12)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,12).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,12)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,12)._compositionEnd(e.target.value)&&u),"change"===n&&(u=!1!==t["\u0275nov"](l,13).onChange(e.target.value)&&u),"input"===n&&(u=!1!==t["\u0275nov"](l,13).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,13).onTouched()&&u),"ngModelChange"===n&&(u=!1!==(i.days=e)&&u),u}),null,null)),t["\u0275did"](12,16384,null,0,q.e,[t.Renderer2,t.ElementRef,[2,q.a]],null,null),t["\u0275did"](13,16384,null,0,q.x,[t.Renderer2,t.ElementRef],null,null),t["\u0275did"](14,16384,null,0,q.B,[],{required:[0,"required"]},null),t["\u0275prd"](1024,null,q.p,(function(l){return[l]}),[q.B]),t["\u0275prd"](1024,null,q.q,(function(l,n){return[l,n]}),[q.e,q.x]),t["\u0275did"](17,671744,null,0,q.v,[[8,null],[6,q.p],[8,null],[6,q.q]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,q.r,null,[q.v]),t["\u0275did"](19,16384,null,0,q.s,[[4,q.r]],null,null),(l()(),t["\u0275eld"](20,0,null,null,6,"div",[["class","buttons"]],null,null,null,null,null)),(l()(),t["\u0275eld"](21,0,null,null,2,"button",[["class","btn btn--primary"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onSubmit()&&t),t}),null,null)),(l()(),t["\u0275ted"](22,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](24,0,null,null,2,"button",[["class","btn btn--color-secondary btn--empty"],["type","button"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onCancel()&&t),t}),null,null)),(l()(),t["\u0275ted"](25,null,["",""])),t["\u0275pid"](131072,v.i,[v.j,t.ChangeDetectorRef])],(function(l,n){var e=n.component;l(n,14,0,""),l(n,17,0,"days",e.days)}),(function(l,n){l(n,3,0,t["\u0275unv"](n,3,0,t["\u0275nov"](n,4).transform("page.days-supply-setup.caption"))),l(n,9,0,t["\u0275unv"](n,9,0,t["\u0275nov"](n,10).transform("page.days-supply.number-days"))),l(n,11,0,77,t["\u0275nov"](n,14).required?"":null,t["\u0275nov"](n,19).ngClassUntouched,t["\u0275nov"](n,19).ngClassTouched,t["\u0275nov"](n,19).ngClassPristine,t["\u0275nov"](n,19).ngClassDirty,t["\u0275nov"](n,19).ngClassValid,t["\u0275nov"](n,19).ngClassInvalid,t["\u0275nov"](n,19).ngClassPending),l(n,22,0,t["\u0275unv"](n,22,0,t["\u0275nov"](n,23).transform("page.days-supply-setup.save"))),l(n,25,0,t["\u0275unv"](n,25,0,t["\u0275nov"](n,26).transform("page.days-supply-setup.cancel")))}))}var nt=t["\u0275ccf"]("ng-component",Je,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,lt,Qe)),t["\u0275did"](1,245760,null,0,Je,[z,H.a,p.o,p.a,bl.a,C.b],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),et=e("hOhj"),tt=e("POq0"),ut=e("EwA9");class it{constructor(l){this.debug=l.factory(new.target.name,C.a.All)}toInstanceOktaSamlModel(l){const n={id:y.c.number(l.id),defaultUse:y.c.boolean(l.okta_default_use),enabled:y.c.boolean(l.okta_enabled),singleSignOnUrl:y.c.string(l.okta_sso_url),issuer:y.c.string(l.okta_ipi),cert:y.c.string(l.okta_cert),embedLink:y.c.string(l.okta_embed_link)};return new _(n)}fromInstanceOktaSamlModel(l){return{okta_default_use:+l.defaultUse,okta_enabled:+l.enabled,okta_sso_url:l.singleSignOnUrl,okta_ipi:l.issuer,okta_cert:l.cert,okta_embed_link:l.embedLink}}toCurrentInstanceModel(l){const n={id:y.c.number(l.id),createdAt:y.c.number(l.created_at),updatedAt:y.c.number(l.updated_at),label:y.c.string(l.label),isMcAllStores:y.c.boolean(l.set_mc_all_stores_for_60)};return new k(n)}fromCurrentInstanceModel(l){return{set_mc_all_stores_for_60:+l.isMcAllStores}}toFiscalYearConfig(l){return{fiscalMMDD:l.fiscalMMDD?new Date(l.fiscalMMDD+"/"+(new Date).getFullYear()):null}}fromCurrentInstanceModelToFiscalYearConfig(l){return{fiscalMMDD:l.fiscalMMDD?R(l.fiscalMMDD).format("MM/DD"):""}}}var ot=e("cUpR"),at=e("Fwaw"),st=e("zMNK"),rt=e("5GAg"),dt=e("o/Hh"),ct=e("SXLW"),gt=e("FFHx"),pt=e("iTUp"),mt=e("l/h6"),vt=e("qwjS"),ht=e("l0Bn"),ft=e("Ny1k"),bt=e("oiVm"),Ct=e("/Lwf"),yt=e("yotz"),_t=e("T3zS"),kt=e("Fbhx"),Dt=e("Le53"),Rt=e("Q34l");const Mt={allowedAccessLevels:[Rt.a.Admin,Rt.a.DashboardSupport,Rt.a.SuperAdmin]},wt={allowedAccessLevels:[Rt.a.Admin,Rt.a.DashboardSupport,Rt.a.SuperAdmin]},It={allowedAccessLevels:[Rt.a.Admin,Rt.a.DashboardSupport,Rt.a.SuperAdmin]},St={allowedAccessLevels:[Rt.a.Admin,Rt.a.DashboardSupport,Rt.a.SuperAdmin]},Ot={allowedAccessLevels:[Rt.a.Admin,Rt.a.DashboardSupport,Rt.a.SuperAdmin]},xt={allowedAccessLevels:[Rt.a.DashboardSupport]},Tt={allowedAccessLevels:[Rt.a.Admin,Rt.a.DashboardSupport,Rt.a.SuperAdmin]},Pt={allowedAccessLevels:[Rt.a.Admin,Rt.a.DashboardSupport]},Et={allowedAccessLevels:[Rt.a.Admin,Rt.a.DashboardSupport]},Lt={allowedAccessLevels:[Rt.a.Admin,Rt.a.DashboardSupport]};e.d(n,"SettingsModuleNgFactory",(function(){return jt}));var jt=t["\u0275cmf"](u,[],(function(l){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[i.a,o.a,a.b,a.a,s.b,r.a,d.a,c.a,g.a,V,il,gl,Tl,Yl,vn,xn,Hn,Ce,Se,Be,Ze,nt]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,m.p,m.o,[t.LOCALE_ID,[2,m.G]]),t["\u0275mpd"](4608,q.F,q.F,[]),t["\u0275mpd"](4608,q.f,q.f,[]),t["\u0275mpd"](4608,Tn.f,Tn.f,[m.d,t.NgZone,et.i,Tn.h]),t["\u0275mpd"](4608,Ee.c,Ee.c,[Ee.i,Ee.e,t.ComponentFactoryResolver,Ee.h,Ee.f,t.Injector,t.NgZone,m.d,Pn.b,[2,m.j]]),t["\u0275mpd"](5120,Ee.j,Ee.k,[Ee.c]),t["\u0275mpd"](5120,Pe.c,Pe.d,[Ee.c]),t["\u0275mpd"](135680,Pe.e,Pe.e,[Ee.c,t.Injector,[2,m.j],[2,Pe.b],Pe.c,[3,Pe.e],Ee.e]),t["\u0275mpd"](4608,tt.c,tt.c,[]),t["\u0275mpd"](4608,xe.i,xe.i,[]),t["\u0275mpd"](5120,xe.a,xe.b,[Ee.c]),t["\u0275mpd"](4608,D.a,D.v,[[2,D.f],Le.a]),t["\u0275mpd"](4608,ut.a,ut.a,[C.b]),t["\u0275mpd"](4608,_e.a,_e.a,[ut.a,hl.a]),t["\u0275mpd"](4608,z,z,[hl.a]),t["\u0275mpd"](4608,it,it,[C.b]),t["\u0275mpd"](4608,I,I,[it,hl.a,C.b]),t["\u0275mpd"](4608,Fn,Fn,[hl.a]),t["\u0275mpd"](1073742336,m.c,m.c,[]),t["\u0275mpd"](1073742336,q.E,q.E,[]),t["\u0275mpd"](1073742336,q.m,q.m,[]),t["\u0275mpd"](1073742336,q.A,q.A,[]),t["\u0275mpd"](1073742336,p.s,p.s,[[2,p.x],[2,p.o]]),t["\u0275mpd"](1073742336,Tn.g,Tn.g,[]),t["\u0275mpd"](1073742336,v.g,v.g,[]),t["\u0275mpd"](1073742336,Pn.a,Pn.a,[]),t["\u0275mpd"](1073742336,D.l,D.l,[[2,D.d],[2,ot.f]]),t["\u0275mpd"](1073742336,Le.b,Le.b,[]),t["\u0275mpd"](1073742336,D.u,D.u,[]),t["\u0275mpd"](1073742336,at.c,at.c,[]),t["\u0275mpd"](1073742336,st.g,st.g,[]),t["\u0275mpd"](1073742336,et.f,et.f,[]),t["\u0275mpd"](1073742336,Ee.g,Ee.g,[]),t["\u0275mpd"](1073742336,Pe.k,Pe.k,[]),t["\u0275mpd"](1073742336,tt.d,tt.d,[]),t["\u0275mpd"](1073742336,rt.a,rt.a,[]),t["\u0275mpd"](1073742336,xe.j,xe.j,[]),t["\u0275mpd"](1073742336,D.w,D.w,[]),t["\u0275mpd"](1073742336,D.n,D.n,[]),t["\u0275mpd"](1073742336,al.b,al.b,[]),t["\u0275mpd"](1073742336,dt.a,dt.a,[]),t["\u0275mpd"](1073742336,ct.AgGridModule,ct.AgGridModule,[]),t["\u0275mpd"](1073742336,gt.a,gt.a,[]),t["\u0275mpd"](1073742336,pt.a,pt.a,[]),t["\u0275mpd"](1073742336,mt.a,mt.a,[wn.a]),t["\u0275mpd"](1073742336,vt.a,vt.a,[]),t["\u0275mpd"](1073742336,ht.a,ht.a,[]),t["\u0275mpd"](1073742336,ft.a,ft.a,[wn.a]),t["\u0275mpd"](1073742336,bt.a,bt.a,[]),t["\u0275mpd"](1073742336,Ct.a,Ct.a,[]),t["\u0275mpd"](1073742336,yt.b,yt.b,[]),t["\u0275mpd"](1073742336,_t.a,_t.a,[]),t["\u0275mpd"](1073742336,kt.a,kt.a,[wn.a]),t["\u0275mpd"](1073742336,u,u,[wn.a]),t["\u0275mpd"](256,D.e,D.i,[]),t["\u0275mpd"](1024,p.m,(function(){return[[{path:"",pathMatch:"full",component:h},{path:"working-days",component:Y,canActivate:[Dt.a],data:Mt},{path:"coloring-threshold",component:sl,canActivate:[Dt.a],data:wt},{path:"control-center-coloring-threshold",component:kl,canActivate:[Dt.a],data:It},{path:"okta-saml",component:$l,canActivate:[Dt.a],data:St},{path:"email-setup",component:an,canActivate:[Dt.a],data:Ot},{path:"localization",component:Rn,canActivate:[Dt.a],data:xt},{path:"store-name-setup",component:An,canActivate:[Dt.a],data:Tt},{path:"sorting-measures",component:le},{path:"sorting-business-segments",component:ye},{path:"current-instance-config",component:$e,canActivate:[Dt.a],data:Pt},{path:"stock-type-setup",component:Ye,canActivate:[Dt.a],data:Et},{path:"days-supply-setup",component:Je,canActivate:[Dt.a],data:Lt}]]}),[])])}))}}]);