"use strict";(self.webpackChunkteck=self.webpackChunkteck||[]).push([[733],{21955:function(se,R,i){i.d(R,{Q:function(){return P}});var x=i(43144),B=i(15671),L=i(69808),k=i(4208),G=i(82304),p=i(65542),P=function(){var h=(0,x.Z)(function y(){(0,B.Z)(this,y)});return h.\u0275fac=function(T){return new(T||h)},h.\u0275mod=p.oAB({type:h}),h.\u0275inj=p.cJS({providers:[k.P,G.C],imports:[[L.ez]]}),h}()},4208:function(se,R,i){i.d(R,{P:function(){return P}});var x=i(15671),B=i(43144),L=i(57676),k=i(65542),G=i(40520),p=i(94720),P=function(){var h=function(){function y(T,b){(0,x.Z)(this,y),this.http=T,this.mineStateService=b}return(0,B.Z)(y,[{key:"getTreeData",value:function(b){return this.http.get((0,L.FP)(b,L.mb.coalSeams))}},{key:"deleteFile",value:function(b){return this.http.delete((0,L.FP)(this.mineStateService.getSelectedMineArea(),L.mb.coalSeams)+"".concat(b,"/"))}},{key:"editFile",value:function(b,e){return this.http.patch((0,L.FP)(this.mineStateService.getSelectedMineArea(),L.mb.coalSeams)+b+"/",e)}},{key:"getFilesData",value:function(b){var e={coal_seams_ids:b};return this.http.post((0,L.FP)(this.mineStateService.getSelectedMineArea(),L.mb.coalSeamsVisualization),e)}},{key:"uploadFile",value:function(b){return this.http.post((0,L.FP)(this.mineStateService.getSelectedMineArea(),L.mb.coalSeams),b)}}]),y}();return h.\u0275fac=function(T){return new(T||h)(k.LFG(G.eN),k.LFG(p.Hj))},h.\u0275prov=k.Yz7({token:h,factory:h.\u0275fac}),h}()},82304:function(se,R,i){i.d(R,{C:function(){return y}});var x=i(15671),B=i(43144),L=i(591),k=i(22868),G=i(40537),p=i(65542),P=i(4208),h=i(94720),y=function(){var T=function(){function b(e,g){(0,x.Z)(this,b),this.coalSeamsApiService=e,this.mapStateService=g,this.coalSeamMapData$=new L.X({type:"FeatureCollection",features:[]})}return(0,B.Z)(b,[{key:"coalSeams",get:function(){return this.coalSeamMapData$.value},set:function(g){this.coalSeamMapData$.next(g)}},{key:"updateFilesData",value:function(g){var Z=this;return this.mapStateService.mapLoading$.next(!0),this.coalSeamsApiService.getFilesData(g).pipe((0,k.b)(function(a){Z.coalSeams=a}),(0,G.x)(function(){return Z.mapStateService.mapLoading$.next(!1)}))}},{key:"clear",value:function(){this.coalSeams={type:"FeatureCollection",features:[]}}}]),b}();return T.\u0275fac=function(e){return new(e||T)(p.LFG(P.P),p.LFG(h.I3))},T.\u0275prov=p.Yz7({token:T,factory:T.\u0275fac}),T}()},90148:function(se,R,i){i.d(R,{k:function(){return b}});var x=i(43144),B=i(15671),L=i(69808),k=i(88279),G=i(84847),p=i(77269),P=i(89936),h=i(34594),y=i(86087),T=i(65542),b=function(){var e=(0,x.Z)(function g(){(0,B.Z)(this,g)});return e.\u0275fac=function(Z){return new(Z||e)},e.\u0275mod=T.oAB({type:e}),e.\u0275inj=T.cJS({imports:[[L.ez,k.p0,P.d,G.JX,p.i,h.g0,y.TU]]}),e}()},43026:function(se,R,i){i.d(R,{G:function(){return ea}});var x=i(15671),B=i(43144),L=i(73237),k=i(61120),G=i(60136),p=i(57777),P=i(7625),h=i(80013),y=i(92198),T=i(4942),b=i(89062),e=i(65542),g=i(46940),Z=i(75791),a=i(38001),X=i(9234),pe=i(19855),ee=i(14253),z=i(21368),re=i(67901),S=i(78369),O=i(34504),W=i(48619),o=i(40714),v=i(30325),C=i(17489),_=i(87224),u=i(42585),I=i(89255),D={evo:[m(a.N.BLASTABILITY),m(a.N.COLLAR_ELEVATION),m(a.N.DRILL_PRODUCTIVITY),m(a.N.DRILL_COMPLIANCE)],gho:[m(a.N.BLASTABILITY),m(a.N.COLLAR_ELEVATION),m(a.N.DRILL_PRODUCTIVITY),m(a.N.DRILL_COMPLIANCE)],lco:[m(a.N.BLASTABILITY),m(a.N.COLLAR_ELEVATION),m(a.N.DRILL_PRODUCTIVITY),m(a.N.DRILL_COMPLIANCE)],fro:[m(a.N.BLASTABILITY),m(a.N.COLLAR_ELEVATION),m(a.N.DRILL_PRODUCTIVITY),m(a.N.DRILL_COMPLIANCE)],hvc:[m(a.N.BLASTABILITY),m(a.N.DRILL_PRODUCTIVITY),m(a.N.DRILL_COMPLIANCE),m(a.N.DRILLING_XY_COLLAR_DEVIATION)],rdo:[m("assays",a.N.ZINC),m(a.N.BLASTABILITY),m(a.N.DRILL_PRODUCTIVITY),m(a.N.ExplosiveLoadingVsDrillingTime),m(a.N.COLLAR_ELEVATION),m(a.N.HOLE_DEPTH_COMPLIANCE)],cda:[m(a.N.DRILL_SPECIFIC_ENERGY),m(a.N.DRILL_PRODUCTIVITY),m(a.N.DRILL_COMPLIANCE),m(a.N.DRILLING_XY_COLLAR_DEVIATION),m(a.N.COLLAR_ELEVATION),m(a.N.ACTUAL_DEPTH_DIFF_ELEVATION,a.N.ACTUAL_DEPTH_DIFF_ELEVATION,"subdrill")]},w={evo:[m(a.N.LOADING),m(a.N.EXPLOSIVE_KG,a.N.EXPLOSIVE_KG,"explosives"),m(a.N.POWDER_FACTOR,a.N.POWDER_FACTOR,"powderFactor"),m("shortHoles",a.N.SHORT_HOLE,"shortHoles")],gho:[m(a.N.LOADING),m(a.N.EXPLOSIVE_KG,a.N.EXPLOSIVE_KG,"explosives"),m(a.N.POWDER_FACTOR,a.N.POWDER_FACTOR,"powderFactor"),m("shortHoles",a.N.SHORT_HOLE,"shortHoles")],lco:[m(a.N.LOADING),m(a.N.EXPLOSIVE_KG,a.N.EXPLOSIVE_KG,"explosives"),m(a.N.POWDER_FACTOR,a.N.POWDER_FACTOR,"powderFactor"),m("shortHoles",a.N.SHORT_HOLE,"shortHoles")],fro:[m(a.N.LOADING),m(a.N.EXPLOSIVE_KG,a.N.EXPLOSIVE_KG,"explosives"),m(a.N.POWDER_FACTOR,a.N.POWDER_FACTOR,"powderFactor"),m("shortHoles",a.N.SHORT_HOLE,"shortHoles")],hvc:[m("shortHoles",a.N.SHORT_HOLE,"shortHoles"),m(a.N.EXPLOSIVE_WEIGHT_DEVIATION)],rdo:[m(a.N.EXPLOSIVE_WEIGHT),m(a.N.EXPLOSIVE_WEIGHT_DEVIATION),m(a.N.POWDER_FACTOR,a.N.POWDER_FACTOR,"powderFactor"),m(a.N.ENERGY_FACTOR)],cda:[m(a.N.EXPLOSIVE_WEIGHT_DEVIATION),m(a.N.STEMMING_LENGTH_DEVIATION),m(a.N.ENERGY_FACTOR),m(a.N.POWDER_FACTOR,a.N.POWDER_FACTOR,"powderFactor")]},j={hvc:[m(a.N.AVERAGE_FRAGMENTATION,a.N.AVERAGE_FRAGMENTATION,"fragmentation"),m(a.N.LOADING_TIME)],rdo:[m("averageFragmentation",a.N.FRAGMENTATION_P80,"fragmentation"),m(a.N.BOULDER_LOCATION)],cda:[m("averageFragmentation",a.N.FRAGMENTATION_P80,"fragmentation")]},te={evo:[m(a.N.DIGGABILITY),m(a.N.DIGGING_CONDITIONS),m(a.N.DIGGING_CONDITIONS,a.N.DIGGING_CONDITIONS_3D,a.N.DIGGING_CONDITIONS_3D),m("instDigRate",a.N.INSTANTANEOUS_DIG_RATE),m(a.N.LOADING_TIME),m(a.N.TOE_MOMENTUM),m(a.N.MAX_FORCE)],gho:[m(a.N.DIGGABILITY),m(a.N.DIGGING_CONDITIONS),m(a.N.DIGGING_CONDITIONS,a.N.DIGGING_CONDITIONS_3D,a.N.DIGGING_CONDITIONS_3D),m("instDigRate",a.N.INSTANTANEOUS_DIG_RATE),m(a.N.LOADING_TIME),m(a.N.TOE_MOMENTUM),m(a.N.MAX_FORCE)],lco:[m(a.N.DIGGABILITY),m(a.N.DIGGING_CONDITIONS),m(a.N.DIGGING_CONDITIONS,a.N.DIGGING_CONDITIONS_3D,a.N.DIGGING_CONDITIONS_3D),m("instDigRate",a.N.INSTANTANEOUS_DIG_RATE),m(a.N.LOADING_TIME),m(a.N.TOE_MOMENTUM),m(a.N.MAX_FORCE)],fro:[m(a.N.DIGGABILITY),m(a.N.DIGGING_CONDITIONS),m(a.N.DIGGING_CONDITIONS,a.N.DIGGING_CONDITIONS_3D,a.N.DIGGING_CONDITIONS_3D),m("instDigRate",a.N.INSTANTANEOUS_DIG_RATE),m(a.N.LOADING_TIME),m(a.N.TOE_MOMENTUM),m(a.N.MAX_FORCE)],rdo:[m(a.N.LOADING_TIME,null,"muckpileLoadingTime")]},ge={evo:[m(a.N.DIGGABILITY),m(a.N.DIGGING_CONDITIONS),m(a.N.DIGGING_CONDITIONS,a.N.DIGGING_CONDITIONS_TOP,a.N.DIGGING_CONDITIONS_3D),m("instDigRate",a.N.INSTANTANEOUS_DIG_RATE),m(a.N.LOADING_TIME),m(a.N.TOE_MOMENTUM),m(a.N.MAX_FORCE)],gho:[m(a.N.DIGGABILITY),m(a.N.DIGGING_CONDITIONS),m(a.N.DIGGING_CONDITIONS,a.N.DIGGING_CONDITIONS_TOP,a.N.DIGGING_CONDITIONS_3D),m("instDigRate",a.N.INSTANTANEOUS_DIG_RATE),m(a.N.LOADING_TIME),m(a.N.TOE_MOMENTUM),m(a.N.MAX_FORCE)],lco:[m(a.N.DIGGABILITY),m(a.N.DIGGING_CONDITIONS),m(a.N.DIGGING_CONDITIONS,a.N.DIGGING_CONDITIONS_TOP,a.N.DIGGING_CONDITIONS_3D),m("instDigRate",a.N.INSTANTANEOUS_DIG_RATE),m(a.N.LOADING_TIME),m(a.N.TOE_MOMENTUM),m(a.N.MAX_FORCE)],fro:[m(a.N.DIGGABILITY),m(a.N.DIGGING_CONDITIONS),m(a.N.DIGGING_CONDITIONS,a.N.DIGGING_CONDITIONS_TOP,a.N.DIGGING_CONDITIONS_3D),m("instDigRate",a.N.INSTANTANEOUS_DIG_RATE),m(a.N.LOADING_TIME),m(a.N.TOE_MOMENTUM),m(a.N.MAX_FORCE)],rdo:[m("averageFragmentation",a.N.FRAGMENTATION_P80,"fragmentation"),m(a.N.BOULDER_LOCATION)]};function m(c,f,r){return{colorMapKey:c,colorMapValue:null!=f?f:c,viewModeFormTranslations:"viewModeFormTranslations.".concat(null!=r?r:c)}}var _e=i(41777),ne=[(0,_e.X$)("visibilitySetting",[(0,_e.SB)("show",(0,_e.oB)({opacity:1,visibility:"visible",display:"block"})),(0,_e.SB)("hide",(0,_e.oB)({opacity:0,visibility:"hidden",display:"none"})),(0,_e.eR)("show => hide",(0,_e.jt)("200ms ease-out")),(0,_e.eR)("hide => show",(0,_e.jt)("400ms ease-in"))])],we=[a.N.COLLAR_ELEVATION,a.N.DIGGABILITY,a.N.DIGGING_CONDITIONS,a.N.DRILL_PRODUCTIVITY,a.N.DRILL_COMPLIANCE,a.N.SHORT_HOLE,a.N.POWDER_FACTOR,a.N.TOE_MOMENTUM,a.N.MAX_FORCE,a.N.INSTANTANEOUS_DIG_RATE,a.N.LOADING_TIME,a.N.AVERAGE_FRAGMENTATION,a.N.EXPLOSIVE_KG,a.N.FRAGMENTATION_P50,a.N.FRAGMENTATION_P80,a.N.FRAGMENTATION_TOP_SIZE,a.N.FRAGMENTATION_OVER_10_IN,a.N.FRAGMENTATION_CDA_B1,a.N.BOULDER_LOCATION,a.N.BOULDER_LOCATION_PRE_BLAST,a.N.EXPLOSIVE_WEIGHT_DEVIATION,a.N.DRILL_SPECIFIC_ENERGY,a.N.DRILLING_XY_COLLAR_DEVIATION,a.N.STEMMING_LENGTH_DEVIATION,a.N.EXPLOSIVE_WEIGHT,a.N.HOLE_DEPTH_COMPLIANCE,a.N.HOLE_DEPTH_COMPLIANCE_MEAS_DRILLED,a.N.HOLE_DEPTH_COMPLIANCE_MEAS_DESIGN,a.N.ENERGY_FACTOR,a.N.ACTUAL_DEPTH_DIFF_ELEVATION,a.N.ExplosiveLoadingVsDrillingTime],Me=i(93075),F=i(94720),We=i(47773),Oe=i(77093),Ce=i(69808),Te=i(29772),ke=i(79814),je=i(77446),Ke=function(){var c=function(f){(0,G.Z)(s,f);var r=(0,p.Z)(s);function s(l,t){var n;return(0,x.Z)(this,s),(n=r.call(this)).patternsService=l,n.cdr=t,n.map=null,n}return(0,B.Z)(s,[{key:"ngOnDestroy",value:function(){(0,L.Z)((0,k.Z)(s.prototype),"ngOnDestroy",this).call(this),o.WO.checkLayers(["selected_points",S.a.COLORCODES_DIMMED],this.map)&&(this.map.setFilter("selected_points",["in",["get","uniqueHoleId"],""]),this.map.setFilter(S.a.COLORCODES_DIMMED,["in",["get","uniqueHoleId"],""]));var t=[].concat((0,b.Z)(o.WO.generateLayersNames(["points"])),["selected_points",O.r.NOT_LINED,O.r.PUMPED,O.r.POINTS_MISFIRES,O.r.COLORCODES_OVERLOADED]);o.WO.checkLayers(t,this.map)&&g.WC.updateVisibility([],t,this.map)}},{key:"ngOnInit",value:function(){var t=this;this.patternsService.polygons$.pipe((0,P.R)(this.destroy$)).subscribe(function(n){n&&t.setLoadingColorMap()})}},{key:"setLoadingColorMap",value:function(){var t=[].concat((0,b.Z)(o.WO.generateLayersNames(["points"])),["selected_points","points_noData",O.r.NOT_LINED,O.r.PUMPED,O.r.POINTS_MISFIRES]);g.WC.updateVisibility(t,[O.r.COLORCODES_MISFIRES,"colorCodes_noLoad","colorCodes_noLoad_symbol",S.a.COLORCODES_CAVED_CIRCLE,S.a.COLORCODES_CAVED_SYMBOL],this.map),this.map.getLayer("polygons")&&(this.map.moveLayer("polygons","points"),this.map.moveLayer("polygons-outline","points"),this.map.moveLayer(O.r.POINTS_REDRILLED,"polygons"),this.map.moveLayer(O.r.POINTS_OVERLOADED,"polygons")),this.cdr&&!this.cdr.destroyed&&this.cdr.detectChanges()}}]),s}(g.eO);return c.\u0275fac=function(r){return new(r||c)(e.Y36(F.c5),e.Y36(e.sBO))},c.\u0275cmp=e.Xpm({type:c,selectors:[["dabo-loading-layer"]],inputs:{map:"map"},features:[e.qOj],decls:0,vars:0,template:function(r,s){},encapsulation:2}),c}(),ve=i(21347),Je=z.w.BMM_SELECTED,Fe=z.w.BMM_ICON,Be=z.w.BMM_CIRCLE,De=z.w.BMM_ID,Pe=S.a.COLORCODES_CAVED_SYMBOL,Se=S.a.COLORCODES_CAVED_CIRCLE,$e=a.N.EXPLOSIVE_KG,Qe=a.N.DIGGABILITY,ze=a.N.AVERAGE_FRAGMENTATION,Xe=a.N.INSTANTANEOUS_DIG_RATE,qe=a.N.LOADING_TIME,et=a.N.TOE_MOMENTUM,tt=a.N.MAX_FORCE,N=a.N.POWDER_FACTOR,q=a.N.SHORT_HOLE,J=a.N.DRILL_COMPLIANCE,H=a.N.DRILL_PRODUCTIVITY,K=a.N.COLLAR_ELEVATION,A=a.N.EXPLOSIVE_WEIGHT_DEVIATION,V=a.N.EXPLOSIVE_WEIGHT,de=a.N.HOLE_DEPTH_COMPLIANCE,he=a.N.HOLE_DEPTH_COMPLIANCE_MEAS_DRILLED,Ie=a.N.HOLE_DEPTH_COMPLIANCE_MEAS_DESIGN,Ae=a.N.ENERGY_FACTOR,nt=a.N.DRILLING_XY_COLLAR_DEVIATION,Le=a.N.ExplosiveLoadingVsDrillingTime,ot=function(){var c=function(f){(0,G.Z)(s,f);var r=(0,p.Z)(s);function s(l){var t;return(0,x.Z)(this,s),(t=r.call(this)).mineStateService=l,t.map=null,t.colorMap=a.N.LOADING,t.setActiveColorMode=new e.vpe,t}return(0,B.Z)(s,[{key:"ngOnChanges",value:function(){this.changeColorMap()}},{key:"ngOnDestroy",value:function(){(0,L.Z)((0,k.Z)(s.prototype),"ngOnDestroy",this).call(this),o.WO.checkLayers([S.a.COLORCODES_SELECTED,S.a.COLORCODES_DIMMED],this.map)&&(this.map.setFilter(S.a.COLORCODES_SELECTED,["in",["get","uniqueHoleId"],""]),this.map.setFilter(S.a.COLORCODES_DIMMED,["in",["get","uniqueHoleId"],""]));var t=[].concat((0,b.Z)(o.WO.generateLayersNames([S.a.COLORCODES])),[S.a.COLORCODES_SELECTED,O.r.COLORCODES_MISFIRES,Fe,Be,De,S.a.COLORCODES_CAVED_ID,O.r.LoadingBreak]);g.WC.updateVisibility([],t,this.map)}},{key:"changeColorMap",value:function(){this.map.setFilter(S.a.COLORCODES_SELECTED,["in",["get","uniqueHoleId"],""]),this.map.setFilter(S.a.COLORCODES_DIMMED,["in",["get","uniqueHoleId"],""]);var oe,ce,t=g.ZA.isCoalMine(this.mineStateService.getSelectedMineArea()),n=[$e,Qe,a.N.DIGGING_CONDITIONS,ze,Xe,qe,et,tt,N,q,A],d=[J,H,nt,A],M=[de,he,Ie,K,V,Ae,N,Le],E=this.colorMap,Y=[].concat((0,b.Z)(o.WO.generateLayersNames([S.a.COLORCODES])),[S.a.COLORCODES_SELECTED,Je]),$=[O.r.PRECONDITIONING,Fe,Be,De,S.a.COLORCODES_CAVED_ID];switch(!0){case t&&E===q:oe=[].concat((0,b.Z)(Y),["colorCodes_noLoad","colorCodes_noLoad_symbol",Se,Pe]);break;case t:oe=Y;break;case g.ZA.isCDA(this.mineStateService.getSelectedMineArea()):oe=[].concat((0,b.Z)(Y),[O.r.PRECONDITIONING]);break;case g.ZA.isRDO(this.mineStateService.getSelectedMineArea()):oe=[].concat((0,b.Z)(Y),$,[O.r.BLASTIQ_COMMENT]);break;default:oe=[].concat((0,b.Z)(Y),$)}switch(n.includes(this.colorMap)&&(oe=[].concat((0,b.Z)(oe),[O.r.COLORCODES_MISFIRES])),!0){case t&&E!==q:ce=["points"].concat((0,b.Z)(o.WO.generateLayersNames(["points"])),["selected_points","colorCodes_noLoad","colorCodes_noLoad_symbol",Se,Pe,O.r.PUMPED,O.r.NOT_LINED,O.r.POINTS_MISFIRES]);break;case t&&E===q:ce=[].concat((0,b.Z)(o.WO.generateLayersNames(["points"])),[O.r.PUMPED,O.r.NOT_LINED,O.r.POINTS_MISFIRES,"selected_points"]);break;case d.includes(this.colorMap)&&!g.ZA.isCDA(this.mineStateService.getSelectedMineArea())||M.includes(this.colorMap)&&g.ZA.isRDO(this.mineStateService.getSelectedMineArea()):ce=["colorCodes_noLoad","colorCodes_noLoad_symbol"];break;case g.ZA.isCDA(this.mineStateService.getSelectedMineArea()):ce=[Se,Pe,S.a.COLORCODES_CAVED_ID,De,O.r.COLORCODES_OVERLOADED];break;case g.ZA.isHVC(this.mineStateService.getSelectedMineArea()):ce=["colorCodes_noLoad","colorCodes_noLoad_symbol",Se,Pe];break;default:ce=["colorCodes_noLoad","colorCodes_noLoad_symbol",Se,Pe,O.r.COLORCODES_REDRILLED]}E===Le&&oe.push(O.r.LoadingBreak),E!==Le&&this.checkLayerAvailability(O.r.LoadingBreak)&&ce.push(O.r.LoadingBreak),g.Ny.updateVisibility(oe,ce,this.map),g.tY.adjustColormapLayersOrder(this.map,this.mineStateService.getSelectedMineArea());var Q=(0,T.Z)({},de,"drillCompliance");g.Ny.setColorCodes(this.map,E,this.mineStateService.getSelectedMineArea(),Q[E]),this.colorMap&&this.setActiveColorMode.emit({colorMap:this.colorMap,blastDirection:this.checkBlastDirectionAvailability()}),this.hideOverloadedLayer()}},{key:"hideOverloadedLayer",value:function(){var n=[ve.q.RDO,ve.q.HVC,ve.q.CDA];([a.N.COLLAR_ELEVATION,a.N.DRILL_PRODUCTIVITY,a.N.DRILL_COMPLIANCE,a.N.LOADING_TIME].includes(this.colorMap)||n.includes(this.mineStateService.getSelectedMineArea()))&&this.map.setFilter(O.r.COLORCODES_OVERLOADED,["==","isOverloaded",""])}},{key:"checkBlastDirectionAvailability",value:function(){return this.checkLayerAvailability("blastDirection")&&"visible"===this.map.getLayoutProperty("blastDirection","visibility")}},{key:"checkLayerAvailability",value:function(t){return!!o.WO.checkLayers([t],this.map)}}]),s}(g.eO);return c.\u0275fac=function(r){return new(r||c)(e.Y36(F.Hj))},c.\u0275cmp=e.Xpm({type:c,selectors:[["dabo-color-map-layers"]],inputs:{map:"map",colorMap:"colorMap"},outputs:{setActiveColorMode:"setActiveColorMode"},features:[e.qOj,e.TTD],decls:0,vars:0,template:function(r,s){},encapsulation:2}),c}(),at=re.u.COLORCODES_MISSING_DATA,it=re.u.COLORCODES_NODATA_SYMBOL,ae=function(){var c=function(){function f(){(0,x.Z)(this,f),this.map=null,this.layers=[S.a.COLORCODES,S.a.COLORCODES_MID_SIZE,S.a.COLORCODES_HOLE_ID,at,it,O.r.COLORCODES_REDRILLED,O.r.COLORCODES_OVERLOADED,O.r.COLORCODES_MISFIRES,S.a.COLORCODES_SELECTED]}return(0,B.Z)(f,[{key:"ngOnInit",value:function(){this.map.setFilter(S.a.COLORCODES_SELECTED,["==",["get","uniqueHoleId"],""]),g.Ny.setColorCodes(this.map,a.N.DIGGING_CONDITIONS_3D,ve.q.EVO),g.Ny.updateVisibility(this.layers,[O.r.PUMPED,O.r.NOT_LINED,O.r.POINTS_MISFIRES].concat((0,b.Z)(o.WO.generateLayersNames(["points"]))),this.map),g.tY.adjustColormapLayersOrder(this.map,ve.q.EVO)}},{key:"ngOnDestroy",value:function(){this.map.setFilter(S.a.COLORCODES_DIMMED,["in",["get","uniqueHoleId"],""]),g.Ny.updateVisibility([],this.layers,this.map)}}]),f}();return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=e.Xpm({type:c,selectors:[["dabo-digging-conditions-3d"]],inputs:{map:"map"},decls:0,vars:0,template:function(r,s){},encapsulation:2}),c}(),rt=ee.D.BLASTABILITY_TOP,Qt=ee.D.BLASTABILITY_MID,ct=ee.D.BLASTABILITY_TOE,ht=z.w.BMM_ICON,Ct=z.w.BMM_CIRCLE,Mt=z.w.BMM_ID,bt=z.w.BMM_SELECTED,zt=re.u.COLORCODES_MISSING_DATA,Xt=re.u.COLORCODES_NODATA_SYMBOL,qt=function(){var c=function(f){(0,G.Z)(s,f);var r=(0,p.Z)(s);function s(l,t,n){var d;return(0,x.Z)(this,s),(d=r.call(this)).mineStateService=l,d.patternsService=t,d.cdr=n,d.map=null,d.layers=[Qt,zt,Xt,O.r.COLORCODES_REDRILLED,"colorCodes_hole_id","selected_blastabilityMidZone"],d}return(0,B.Z)(s,[{key:"ngOnInit",value:function(){var t=this;this.patternsService.polygons$.pipe((0,P.R)(this.destroy$)).subscribe(function(n){n&&t.enableBlastability()}),this.cdr.markForCheck()}},{key:"ngOnDestroy",value:function(){(0,L.Z)((0,k.Z)(s.prototype),"ngOnDestroy",this).call(this),this.map.setFilter("selected_blastabilityMidZone",["in","uniqueHoleId",""]),this.map.setFilter(S.a.COLORCODES_DIMMED,["in",["get","uniqueHoleId"],""]);var t=!g.ZA.isMetalMine(this.mineStateService.getSelectedMineArea()),n=[].concat((0,b.Z)(this.layers),t?[rt,ct]:[rt,ct,O.r.PRECONDITIONING,O.r.BLASTIQ_COMMENT,ht,Ct,Mt,bt,S.a.COLORCODES_CAVED_ID]);o.WO.checkLayers(n,this.map)&&g.WC.updateVisibility([],n,this.map)}},{key:"enableBlastability",value:function(){var t=!g.ZA.isMetalMine(this.mineStateService.getSelectedMineArea()),n=this.getVisibleLayers(t),d=[S.a.COLORCODES,O.r.POINTS_OVERLOADED,O.r.POINTS_REDRILLED,O.r.PUMPED,O.r.NOT_LINED,O.r.POINTS_MISFIRES,O.r.COLORCODES_MISFIRES].concat((0,b.Z)(o.WO.generateLayersNames(["points"])));t&&(this.map.moveLayer(O.r.COLORCODES_REDRILLED,"polygons"),this.map.moveLayer(O.r.COLORCODES_OVERLOADED,"polygons")),g.Ny.setColorCodes(this.map,"blastability",this.mineStateService.getSelectedMineArea()),g.Ny.updateVisibility(n,d,this.map)}},{key:"getVisibleLayers",value:function(t){var n=[].concat((0,b.Z)(this.layers),[O.r.PRECONDITIONING,ht,Ct,Mt,bt,S.a.COLORCODES_CAVED_ID]);switch(!0){case g.ZA.isRDO(this.mineStateService.getSelectedMineArea()):return[].concat((0,b.Z)(n),[O.r.BLASTIQ_COMMENT]);case t:return[].concat((0,b.Z)(this.layers),[rt,ct]);default:return n}}}]),s}(g.eO);return c.\u0275fac=function(r){return new(r||c)(e.Y36(F.Hj),e.Y36(F.c5),e.Y36(e.sBO))},c.\u0275cmp=e.Xpm({type:c,selectors:[["dabo-blastability"]],inputs:{map:"map"},features:[e.qOj],decls:0,vars:0,template:function(r,s){},encapsulation:2}),c}(),Ot=i(24850),Ze=i(40537),vt=i(40313),st=i(59637),me=i(78090),Pt=vt.i.angledHolesLayers,en=function(){var c=function(){function f(r,s,l,t,n,d,M){(0,x.Z)(this,f),this.mapStateService=r,this.cdr=s,this.visibilityService=l,this.panelService=t,this.treeService=n,this.mapApiService=d,this.patternsService=M,this.map=null,this.events={features:[]},this.informationLayers=["points","points_hole_id",S.a.POLYGONS_LABEL_PATTERN_ID]}return(0,B.Z)(f,[{key:"ngOnChanges",value:function(){this.mapStateService.mapLoading$.next(!0),this.cancelRequest(),o.b6.removeShovelOperatorsEvent(this.map),g.WC.updateVisibility(this.informationLayers,Pt,this.map),this.map.moveLayer(S.a.POLYGONS_LABEL_PATTERN_ID),this.events={features:[]},this.controlShovelOperatorsEvent()}},{key:"ngOnDestroy",value:function(){o.WO.checkLayers(this.informationLayers,this.map)&&g.WC.updateVisibility(Pt,this.informationLayers,this.map),this.resetViewMode(),this.mapStateService.rearrangeMapBordersToLoadedPolygons$.next(!0),this.cancelRequest()}},{key:"cancelRequest",value:function(){this.shovelOperatorsEvent$&&this.shovelOperatorsEvent$.unsubscribe()}},{key:"resetViewMode",value:function(){this.events={features:[]},o.b6.removeShovelOperatorsEvent(this.map),this.mapStateService.mapLoading$.next(!1),this.visibilityService.isShovelOpModeEnabled$.next(!1),this.treeService.noData$.next({show:!1})}},{key:"controlShovelOperatorsEvent",value:function(){var t,s=this,l={patternId:this.patternsService.getSelectedPatternIds()};switch(this.colorMap){case a.N.SHOVEL_OPERATOR_FEEDBACK:t=this.mapApiService.getShovelOperatorFeedback(l);break;case a.N.SHOVEL_OPERATOR_ALARM:t=this.mapApiService.getShovelOperatorAlarm(l)}this.visibilityService.isShovelOpModeEnabled$.next(!0),o.b6.drawBackground(this.map),this.shovelOperatorsEvent$=t.pipe((0,Ot.U)(function(n){n.geoJson.features.length?(s.events=n.geoJson,o.b6.drawShovelOperatorsEvent(s.map,s.events),s.panelService.emitOperatorEventData(s.events),s.visibilityService.isShovelOpModeEnabled$.next(!0),s.cdr.detectChanges()):s.treeService.noData$.next({type:s.colorMap,show:!0})}),(0,Ze.x)(function(){s.mapStateService.mapLoading$.next(!1)})).subscribe(function(){s.cdr.detectChanges()})}}]),f}();return c.\u0275fac=function(r){return new(r||c)(e.Y36(F.I3),e.Y36(e.sBO),e.Y36(st.G),e.Y36(me.dJ),e.Y36(F.yU),e.Y36(F.P2),e.Y36(F.c5))},c.\u0275cmp=e.Xpm({type:c,selectors:[["dabo-shovel-operator-event"]],inputs:{map:"map",colorMap:"colorMap"},features:[e.TTD],decls:0,vars:0,template:function(r,s){},encapsulation:2}),c}(),St=i(43489),yt=i(61826),Et=vt.i.angledHolesLayers,tn=O.r.PRECONDITIONING,nn=O.r.BLASTIQ_COMMENT,on=O.r.PUMPED,an=O.r.NOT_LINED,rn=O.r.COLORCODES_MISFIRES,cn=O.r.POINTS_MISFIRES,sn=z.w.BMM_CIRCLE,ln=z.w.BMM_ICON,pn=z.w.BMM_ID,dn=z.w.BMM_SELECTED,gn=function(){var c=function(f){(0,G.Z)(s,f);var r=(0,p.Z)(s);function s(l,t,n,d,M){var E;return(0,x.Z)(this,s),(E=r.call(this)).mapStateService=l,E.treeService=t,E.mapApiService=n,E.patternsService=d,E.cdr=M,E.map=null,E}return(0,B.Z)(s,[{key:"ngOnInit",value:function(){this.controlShovelElevation()}},{key:"ngOnDestroy",value:function(){this.removeElevation()}},{key:"controlShovelElevation",value:function(){var t=this,n=o.WO.generateLayersNames(["points"]);g.WC.updateVisibility(["polygons"],[].concat((0,b.Z)(n),(0,b.Z)(Et),[tn,nn,on,an,rn,cn,sn,ln,pn,dn]),this.map),this.mapStateService.assays$.value&&this.mapStateService.assays$.next({});var d=this.patternsService.getSelectedPatternIds();this.mapStateService.mapLoading$.next(!0),this.shovelElevation$=this.mapApiService.getShovelEvevation({patternId:d}).pipe((0,Ot.U)(function(M){M.geoJson.features.length||t.treeService.noData$.next({type:"shovelElevation",show:!0}),t.shovelElevation=M.geoJson,o.z5.drawShovelElevation(t.map,t.shovelElevation,t.mineSite),t.isShovelElevationShown=!0}),(0,Ze.x)(function(){t.mapStateService.mapLoading$.next(!1)}),(0,P.R)(this.destroy$)).subscribe(function(){t.cdr&&!t.cdr.destroyed&&t.cdr.detectChanges()})}},{key:"removeElevation",value:function(){!this.isShovelElevationShown&&this.shovelElevation$ instanceof St.L&&(this.mapStateService.mapLoading$.next(!1),this.shovelElevation$.next(),this.shovelElevation$.complete()),g.WC.removeLayers(this.map,["shovel-elevation"],["shovelElevationData"]),g.WC.updateVisibility(Et,[],this.map),this.shovelElevation={features:[]},this.isShovelElevationShown=!1}}]),s}(g.eO);return c.\u0275fac=function(r){return new(r||c)(e.Y36(yt.I),e.Y36(F.yU),e.Y36(F.P2),e.Y36(F.c5),e.Y36(e.sBO))},c.\u0275cmp=e.Xpm({type:c,selectors:[["dabo-shovel-elevation"]],inputs:{map:"map",mineSite:"mineSite"},features:[e.qOj],decls:0,vars:0,template:function(r,s){},encapsulation:2}),c}(),fe=i(87545),Ne=i(22868),Tt=i(68896),Dt=i(21086),_n=i(11660),mn=function(){var c=function(f){(0,G.Z)(s,f);var r=(0,p.Z)(s);function s(l,t,n,d,M,E){var Y;return(0,x.Z)(this,s),(Y=r.call(this)).mapStateService=l,Y.activatedRoute=t,Y.router=n,Y.treeService=d,Y.mapFacadeService=M,Y.patternsService=E,Y.map=null,Y.setActiveColorMode=new e.vpe,Y.isKPI=!1,Y}return(0,B.Z)(s,[{key:"ngOnInit",value:function(){var t=this;this.colorMap=this.selectedDataPointColorMap,this.setActiveColorMode.emit({colorMap:this.colorMap,blastDirection:!1,feedback:!1,shovelOpAlarm:!1,shovelElevation:!1,dataPointsActive:!0}),this.isKPI=this.router.url.includes("/report"),this.activatedRoute.data.pipe((0,fe.w)(function(){return t.isKPI?(t.reqParams={patternId:+t.activatedRoute.snapshot.params.id},g.WC.removeLayers(t.map,["dataPoints","selected_dataPoints"],["dataPoints"]),t.mapStateService.dataPointsData$.next({}),t.mapStateService.dataPointsData$):Tt.E}),(0,fe.w)(function(n){return t.getDataPoints(n)}),(0,P.R)(this.destroy$)).subscribe(),this.patternsService.polygons$.pipe((0,fe.w)(function(n){return t.isKPI?Tt.E:(n&&(t.reqParams=t.patternsService.getSelectedPatternIdsAsParams()),t.mapStateService.dataPointsData$)}),(0,fe.w)(function(n){return t.getDataPoints(n)}),(0,P.R)(this.destroy$)).subscribe(),o.WO.checkLayers(["blastDirection",O.r.PRECONDITIONING,O.r.BLASTIQ_COMMENT,S.a.COLORCODES,"colorCodes_hole_id",S.a.COLORCODES_SELECTED,re.u.COLORCODES_NODATA_PER_METRIC,re.u.COLORCODES_MISSING_DATA,re.u.COLORCODES_NODATA_SYMBOL,S.a.HOTSPOTS],this.map)&&g.WC.updateVisibility([],["blastDirection",O.r.PRECONDITIONING,O.r.BLASTIQ_COMMENT,S.a.COLORCODES,"colorCodes_hole_id",S.a.COLORCODES_SELECTED,re.u.COLORCODES_NODATA_PER_METRIC,re.u.COLORCODES_MISSING_DATA,re.u.COLORCODES_NODATA_SYMBOL,S.a.HOTSPOTS],this.map)}},{key:"selectedDataPointColorMap",get:function(){var t=this.mapStateService.selectedColorMap$.getValue();return t===a.N.DIGGING_CONDITIONS_3D?a.N.DIGGING_CONDITIONS_TOP:t}},{key:"getDataPoints",value:function(t){return(0,C.isEmpty)(t)?this.loadDataPoints():(o.WO.checkLayers(["dataPoints"],this.map)&&(this.map.moveLayer("polygons","dataPoints"),this.map.moveLayer("polygons-outline","dataPoints"),this.mapStateService.dataPointsLoading$.next(!1),g.WC.updateVisibility(["dataPoints","selected_dataPoints"],[],this.map)),(0,Dt.of)(!0))}},{key:"loadDataPoints",value:function(){var t=this;return g.WC.removeLayers(this.map,["dataPoints","selected_dataPoints"],["dataPoints"]),((0,C.isEmpty)(this.reqParams.patternId)&&!g.ZA.isCDA(this.mineSite)||g.ZA.isCDA(this.mineSite)&&(0,C.isEmpty)(this.reqParams.patternId)&&(0,C.isEmpty)(this.reqParams.blastId))&&!this.isKPI?(0,Dt.of)(!0):this.mapFacadeService.getDataPoints(this.reqParams).pipe((0,Ze.x)(function(){t.mapStateService.mapLoading$.next(!1),t.mapStateService.dataPointsLoading$.next(!1)}),(0,Ne.b)(function(n){n.geoJson.isNoData?(t.treeService.noData$.next({type:"pattern",show:!0}),t.mapStateService.dataPointsData$.next({isNoData:n.geoJson.isNoData,data:{type:"FeatureCollection",features:[]}})):(t.drawDataPoints(n.geoJson,t.colorMap),t.mapStateService.dataPointsData$.next({isNoData:n.geoJson.isNoData,type:"geoJsonLoaded",data:n.geoJson}))}))}},{key:"ngOnChanges",value:function(){(0,o.qg)(this.colorMap)&&this.updateDataPoints()}},{key:"ngOnDestroy",value:function(){var t=this.mapStateService.selectedColorMap$.getValue();this.setActiveColorMode.emit({colorMap:(0,o.tH)(t)?a.N.DIGGING_CONDITIONS_3D:t,blastDirection:!1,feedback:!1,shovelOpAlarm:!1,shovelElevation:!1,dataPointsActive:!0,disableFeedback:!0}),(0,L.Z)((0,k.Z)(s.prototype),"ngOnDestroy",this).call(this),o.WO.checkLayers(["dataPoints"],this.map)&&g.WC.updateVisibility([],["dataPoints","selected_dataPoints"],this.map),this.mapStateService.dataPointsLoading$.next(!1)}},{key:"drawDataPoints",value:function(t,n){g.Ny.drawDataPoints(this.map,t,n,this.mineSite),g.WC.addCursorPointer(this.map,["dataPoints"]),this.setFilters()}},{key:"updateDataPoints",value:function(){!this.colorMap||!o.WO.checkLayers(["dataPoints"],this.map)||(this.map.setPaintProperty("dataPoints","circle-color",{property:this.colorMap,type:"interval",stops:_n.R.getStopsForMine(this.colorMap,this.mineSite)}),this.colorMap&&this.setFilters())}},{key:"setFilters",value:function(){if(this.colorMap===a.N.LOADING_TIME){var t=["==",["typeof",["get","loadingTime"]],"number"];this.mapStateService.setDimmedExpression({value:t}),this.map.setFilter("dataPoints",t)}else if([a.N.BOULDER_LOCATION,a.N.DIGGING_CONDITIONS].includes(this.colorMap)||(0,o.tH)(this.colorMap)){var n=[">",["get",this.colorMap],0];this.mapStateService.setDimmedExpression({value:n}),this.map.setFilter("dataPoints",n)}else{var d=["==",["typeof",["get",this.colorMap]],"number"];this.mapStateService.setDimmedExpression({value:d}),this.map.setFilter("dataPoints",d)}this.map.setFilter("selected_dataPoints",["in",["get","uniqueDataPointId"],""])}}]),s}(g.eO);return c.\u0275fac=function(r){return new(r||c)(e.Y36(F.I3),e.Y36(v.gz),e.Y36(v.F0),e.Y36(F.yU),e.Y36(F.NL),e.Y36(F.c5))},c.\u0275cmp=e.Xpm({type:c,selectors:[["dabo-data-points"]],inputs:{map:"map",colorMap:"colorMap",mineSite:"mineSite",mapSettings:"mapSettings"},outputs:{setActiveColorMode:"setActiveColorMode"},features:[e.qOj,e.TTD],decls:0,vars:0,template:function(r,s){},encapsulation:2}),c}(),fn=i(43772),lt=i(82304),un=function(){var c=function(f){(0,G.Z)(s,f);var r=(0,p.Z)(s);function s(l,t,n,d,M,E,Y,$,oe,ce,Q,be){var le;return(0,x.Z)(this,s),(le=r.call(this)).cdr=l,le.coalSeamsDataService=t,le.compareService=n,le.holeStateService=d,le.mapApiService=M,le.mapStateService=E,le.mineStateService=Y,le.patternsService=$,le.permissionsService=oe,le.polygonToolSelectionService=ce,le.router=Q,le.treeService=be,le.map=null,le}return(0,B.Z)(s,[{key:"ngOnInit",value:function(){this.loadHotSpots()}},{key:"ngOnDestroy",value:function(){this.removeHotSpots()}},{key:"loadHotSpots",value:function(){var t=this,n=this.patternsService.getSelectedPatternIds();this.mapStateService.mapLoading$.next(!0),this.hotSpots$=this.mapApiService.getHotSpots({patternId:n}).pipe((0,Ze.x)(function(){t.mapStateService.mapLoading$.next(!1)}),(0,fn.map)(function(d){d.geoJson.features.length||t.treeService.noData$.next({type:"hotSpotsView",show:!0}),t.hotSpots=d.geoJson,g.WC.drawHotSpots(t.map,t.hotSpots,t.mineStateService.getSelectedMineArea()),g.WC.addHoverTooltip(t.map,[S.a.HOTSPOTS])}),(0,P.R)(this.destroy$)).subscribe()}},{key:"removeHotSpots",value:function(){this.hotSpots$ instanceof St.L&&(this.mapStateService.mapLoading$.next(!1),this.hotSpots$.next(),this.hotSpots$.complete()),g.WC.removeLayers(this.map,[S.a.HOTSPOTS],["hotspots"]),g.WC.updateVisibility([],[],this.map),this.hotSpots={features:[]}}}]),s}(g.eO);return c.\u0275fac=function(r){return new(r||c)(e.Y36(e.sBO),e.Y36(lt.C),e.Y36(me.zY),e.Y36(F.$c),e.Y36(F.P2),e.Y36(F.I3),e.Y36(F.Hj),e.Y36(F.c5),e.Y36(F.$A),e.Y36(me.nY),e.Y36(v.F0),e.Y36(F.yU))},c.\u0275cmp=e.Xpm({type:c,selectors:[["dabo-hotspots"]],inputs:{map:"map",colorMap:"colorMap",mineSite:"mineSite",mapSettings:"mapSettings"},features:[e.qOj],decls:0,vars:0,template:function(r,s){},encapsulation:2}),c}();function hn(c,f){if(1&c){var r=e.EpF();e.TgZ(0,"div",12),e.NdJ("click",function(){return e.CHM(r),e.oxw().toggleState()}),e.ALo(1,"transloco"),e._uU(2),e.ALo(3,"transloco"),e._UZ(4,"span",13),e.qZA()}2&c&&(e.s9C("matTooltip",e.lcZ(1,2,"viewModeFormTranslations.closeModeViews")),e.xp6(2),e.hij(" ",e.lcZ(3,4,"viewModeFormTranslations.viewModeLabel")," "))}function Cn(c,f){if(1&c&&(e.TgZ(0,"mat-radio-button",24),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&c){var r=e.oxw().$implicit;e.Q6J("value",r.colorMapValue),e.xp6(1),e.hij(" ",e.lcZ(2,2,r.viewModeFormTranslations)," ")}}function Mn(c,f){if(1&c&&(e.TgZ(0,"div"),e.YNc(1,Cn,3,4,"mat-radio-button",23),e.qZA()),2&c){var r=f.$implicit,s=e.oxw(3);e.xp6(1),e.Q6J("ngIf",s.permission.colorMap.settings[r.colorMapKey])}}function bn(c,f){if(1&c&&(e.TgZ(0,"div",21),e.YNc(1,Mn,2,1,"div",22),e.qZA()),2&c){var r=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",r.viewModesConfigsDrilling)("ngForTrackBy",r.trackByColorMapValue)}}function On(c,f){if(1&c&&(e.TgZ(0,"mat-radio-button",24),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&c){var r=e.oxw().$implicit;e.Q6J("value",r.colorMapValue),e.xp6(1),e.hij(" ",e.lcZ(2,2,r.viewModeFormTranslations)," ")}}function vn(c,f){if(1&c&&(e.TgZ(0,"div"),e.YNc(1,On,3,4,"mat-radio-button",23),e.qZA()),2&c){var r=f.$implicit,s=e.oxw(3);e.xp6(1),e.Q6J("ngIf",s.permission.colorMap.settings[r.colorMapKey])}}function Pn(c,f){if(1&c&&(e.TgZ(0,"div",21),e.YNc(1,vn,2,1,"div",22),e.qZA()),2&c){var r=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",r.viewModesConfigsBlasting)("ngForTrackBy",r.trackByColorMapValue)}}function Sn(c,f){if(1&c&&(e.TgZ(0,"mat-radio-button",24),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&c){var r=e.oxw().$implicit,s=e.oxw(3);e.Q6J("value",s.getRadioBtnValue(r.colorMapKey,r.colorMapValue)),e.xp6(1),e.hij(" ",e.lcZ(2,2,r.viewModeFormTranslations)," ")}}function yn(c,f){if(1&c&&(e.TgZ(0,"div"),e.YNc(1,Sn,3,4,"mat-radio-button",23),e.qZA()),2&c){var r=f.$implicit,s=e.oxw(3);e.xp6(1),e.Q6J("ngIf",s.permission.colorMap.settings[r.colorMapKey])}}function En(c,f){if(1&c&&(e.TgZ(0,"div",21),e.YNc(1,yn,2,1,"div",22),e.qZA()),2&c){var r=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",r.viewModesConfigsFragmentation)("ngForTrackBy",r.trackByColorMapValue)}}function Tn(c,f){if(1&c&&(e.TgZ(0,"mat-radio-button",24),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&c){var r=e.oxw().$implicit;e.Q6J("value",r.colorMapValue),e.xp6(1),e.hij(" ",e.lcZ(2,2,r.viewModeFormTranslations)," ")}}function Dn(c,f){if(1&c&&(e.TgZ(0,"div"),e.YNc(1,Tn,3,4,"mat-radio-button",23),e.qZA()),2&c){var r=f.$implicit,s=e.oxw(3);e.xp6(1),e.Q6J("ngIf",s.permission.colorMap.settings[r.colorMapKey])}}function In(c,f){if(1&c&&(e.TgZ(0,"div",21),e.YNc(1,Dn,2,1,"div",22),e.qZA()),2&c){var r=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",r.viewModesConfigsDigging)("ngForTrackBy",r.trackByColorMapValue)}}function An(c,f){if(1&c&&(e.TgZ(0,"mat-radio-button",24),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&c){var r=e.oxw().$implicit,s=e.oxw(3);e.Q6J("value",s.getRadioBtnValue(r.colorMapKey,r.colorMapValue)),e.xp6(1),e.hij(" ",e.lcZ(2,2,r.viewModeFormTranslations)," ")}}function Ln(c,f){if(1&c&&(e.TgZ(0,"div"),e.YNc(1,An,3,4,"mat-radio-button",23),e.qZA()),2&c){var r=f.$implicit,s=e.oxw(3);e.xp6(1),e.Q6J("ngIf",s.permission.colorMap.settings[r.colorMapKey])}}function Nn(c,f){if(1&c&&(e.TgZ(0,"div",21),e.YNc(1,Ln,2,1,"div",22),e.qZA()),2&c){var r=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",r.viewModesConfigsDataPointMode)("ngForTrackBy",r.trackByColorMapValue)}}function Rn(c,f){if(1&c&&(e.TgZ(0,"mat-radio-group",25)(1,"mat-radio-button",26),e._uU(2),e.ALo(3,"transloco"),e.qZA()()),2&c){var r=e.oxw(2);e.xp6(1),e.Q6J("value",!0)("checked",r.selectedColorMap===r.colorMapsEnum.SHOVEL_OPERATOR_FEEDBACK),e.xp6(1),e.hij(" ",e.lcZ(3,3,"viewModeFormTranslations.shovOpFeedback")," ")}}function xn(c,f){if(1&c&&(e.TgZ(0,"mat-radio-group",27)(1,"mat-radio-button",26),e._uU(2),e.ALo(3,"transloco"),e.qZA()()),2&c){var r=e.oxw(2);e.xp6(1),e.Q6J("value",!0)("checked",r.selectedColorMap===r.colorMapsEnum.SHOVEL_OPERATOR_ALARM),e.xp6(1),e.hij(" ",e.lcZ(3,3,"viewModeFormTranslations.shovelOpAlarms")," ")}}function wn(c,f){if(1&c&&(e.TgZ(0,"mat-radio-group",28)(1,"mat-radio-button",26),e._uU(2),e.ALo(3,"transloco"),e.ALo(4,"transloco"),e.qZA()()),2&c){var r=e.oxw(2);e.xp6(1),e.Q6J("value",!0)("checked",r.selectedColorMap===r.colorMapsEnum.SHOVEL_ELEVATION),e.xp6(1),e.hij(" ",r.isRDOMine?e.lcZ(3,3,"viewModeFormTranslations.loaderElevation"):e.lcZ(4,5,"viewModeFormTranslations.shovelElevation")," ")}}var It=function(f,r){return{active:f,"eye-active":r}};function kn(c,f){if(1&c&&(e.TgZ(0,"div",29),e._UZ(1,"mat-checkbox",30),e.TgZ(2,"div",31),e._UZ(3,"span",32),e._uU(4),e.ALo(5,"transloco"),e.qZA()()),2&c){var r=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.WLB(4,It,"show"===r.state,"hide"===r.state&&r.form.value.colorMap)),e.xp6(3),e.hij(" ",e.lcZ(5,2,"viewModeFormTranslations.blastDirection")," ")}}function Fn(c,f){if(1&c&&(e.TgZ(0,"form",14)(1,"mat-radio-group",15),e.YNc(2,bn,2,2,"div",16),e.YNc(3,Pn,2,2,"div",16),e.YNc(4,En,2,2,"div",16),e.YNc(5,In,2,2,"div",16),e.YNc(6,Nn,2,2,"div",16),e.qZA(),e.YNc(7,Rn,4,5,"mat-radio-group",17),e.YNc(8,xn,4,5,"mat-radio-group",18),e.YNc(9,wn,5,7,"mat-radio-group",19),e.YNc(10,kn,6,7,"div",20),e.qZA()),2&c){var r=e.oxw();e.ekj("visibility-settings-form__comparing-page",r.isComparePage),e.Q6J("@visibilitySetting",r.state)("formGroup",r.form),e.xp6(2),e.Q6J("ngIf",r._mapSettings.holesMode),e.xp6(1),e.Q6J("ngIf",r._mapSettings.holesMode),e.xp6(1),e.Q6J("ngIf",r._mapSettings.holesMode),e.xp6(1),e.Q6J("ngIf",r._mapSettings.holesMode),e.xp6(1),e.Q6J("ngIf",r._mapSettings.dataPointsMode),e.xp6(1),e.Q6J("ngIf",r.shovelOperator&&r.permission.colorMap.settings.shovelOperatorFeedback&&r._mapSettings.holesMode),e.xp6(1),e.Q6J("ngIf",r.shovelOperator&&r.permission.colorMap.settings.shovelOperatorAlarm&&r._mapSettings.holesMode),e.xp6(1),e.Q6J("ngIf",r.shovelOperator&&r.permission.colorMap.settings.shovelElevation&&r._mapSettings.holesMode),e.xp6(1),e.Q6J("ngIf",r.permission.blastDirection&&r._mapSettings.holesMode)}}function Bn(c,f){if(1&c&&e._UZ(0,"dabo-loading-layer",33),2&c){var r=e.oxw();e.Q6J("map",r.map)}}function Zn(c,f){if(1&c){var r=e.EpF();e.TgZ(0,"dabo-color-map-layers",34),e.NdJ("setActiveColorMode",function(t){return e.CHM(r),e.oxw().visibilityUpdated(t)}),e.qZA()}if(2&c){var s=e.oxw();e.Q6J("colorMap",s.selectedColorMap)("map",s.map)}}function Hn(c,f){if(1&c&&e._UZ(0,"dabo-digging-conditions-3d",33),2&c){var r=e.oxw();e.Q6J("map",r.map)}}function Gn(c,f){if(1&c&&e._UZ(0,"dabo-blastability",33),2&c){var r=e.oxw();e.Q6J("map",r.map)}}function Vn(c,f){if(1&c&&e._UZ(0,"dabo-shovel-operator-event",35),2&c){var r=e.oxw();e.Q6J("colorMap",r.selectedColorMap)("map",r.map)}}function Un(c,f){if(1&c&&e._UZ(0,"dabo-shovel-elevation",36),2&c){var r=e.oxw();e.Q6J("map",r.map)("mineSite",r.mineArea)}}function Yn(c,f){if(1&c){var r=e.EpF();e.TgZ(0,"dabo-data-points",37),e.NdJ("setActiveColorMode",function(t){return e.CHM(r),e.oxw().visibilityUpdated(t)}),e.qZA()}if(2&c){var s=e.oxw();e.Q6J("map",s.map)("mineSite",s.mineArea)("colorMap",s.selectedColorMap)("mapSettings",s._mapSettings)}}function Wn(c,f){if(1&c&&e._UZ(0,"dabo-hotspots",38),2&c){var r=e.oxw();e.Q6J("map",r.map)("mineSite",r.mineArea)("mapSettings",r._mapSettings)}}var jn=function(f,r){return{"visibility-settings-box--shadow":f,"visibility-settings__hide":r}},Kn=function(f,r){return{"all-border-radius":f,"border-radius":r}},At=a.N.SHOVEL_OPERATOR_FEEDBACK,Lt=a.N.SHOVEL_OPERATOR_ALARM,Jn=a.N.SHOVEL_ELEVATION,$n=pe.K.COMPARING,Nt=function(){var c=function(f){(0,G.Z)(s,f);var r=(0,p.Z)(s);function s(l,t,n,d,M,E,Y,$,oe,ce){var Q;return(0,x.Z)(this,s),(Q=r.call(this)).cdr=l,Q.formBuilder=t,Q.permissionService=n,Q.treeDataService=d,Q.mineStateService=M,Q.legendFilteringService=E,Q.patternsService=Y,Q.mapStateService=$,Q.customEventService=oe,Q.router=ce,Q.shovelOperator=!1,Q.visibilityEmitter=new e.vpe,Q.state="hide",Q.sameLogicColorMaps=we,Q.shovelOpColorMaps=[At,Lt],Q.isComparePage=Q.router.url.includes($n),Q.colorMapsEnum=a.N,Q}return(0,B.Z)(s,[{key:"mapData",set:function(t){this.map=t.map,this.mapType=t.mapType}},{key:"mapSettings",set:function(t){this._mapSettings=t}},{key:"ngOnInit",value:function(){this.pageType=this.isReportsPage?"kpiReportPage":"mainPage",this.mineArea=this.mineStateService.getSelectedMineArea(),this.viewModesConfigsDrilling=D[this.mineArea],this.viewModesConfigsBlasting=w[this.mineArea],this.viewModesConfigsDigging=te[this.mineArea],this.viewModesConfigsFragmentation=j[this.mineArea],this.viewModesConfigsDataPointMode=ge[this.mineArea],this.getPermission(),this.initForm(),this.initViewMode(),this.visibilityUpdated({colorMap:this.selectedColorMap,blastDirection:!1,feedback:!1,shovelOpAlarm:!1,shovelElevation:!1,coalSeamsDisabled:!1}),this.updateCoalsSeamsVisibility(!1),this.subscribeOnNavigationEnd()}},{key:"getPermission",value:function(){var t=this;this.permissionService.permissions$.pipe((0,P.R)(this.destroy$)).subscribe(function(n){t.permission=n[t.pageType].components.map.controls.visibilitySettings.settings})}},{key:"initViewMode",value:function(){var t=this;this.patternsService.polygons$.pipe((0,_.P)(function(n){return!!n}),(0,P.R)(this.destroy$)).subscribe(function(n){g.WC.updateMap(t.map,n,t.mineArea,t._mapSettings),t.selectedColorMap=t.preservedColorMap,t.cdr.detectChanges()})}},{key:"ngOnDestroy",value:function(){(0,L.Z)((0,k.Z)(s.prototype),"ngOnDestroy",this).call(this),this.updateCoalsSeamsVisibility(!0)}},{key:"trackByColorMapValue",value:function(t,n){return n.colorMapValue}},{key:"isRDOMine",get:function(){return g.ZA.isRDO(this.mineArea)}},{key:"isCda",get:function(){return g.ZA.isCDA(this.mineArea)}},{key:"isMetalMine",value:function(){return g.ZA.isMetalMine(this.mineArea)}},{key:"isFragmentationColorMap",get:function(){return(0,o.lH)(this.selectedColorMap)}},{key:"isFragmentationColorMapOnCda",get:function(){return(0,o.lH)(this.selectedColorMap)&&g.ZA.isCDA(this.mineArea)}},{key:"resetForm",value:function(){var t=this.mapStateService.selectedColorMap$.getValue();this.visibilityEmitter.emit(t),this.form.patchValue({colorMap:t,colorMapEnabled:!1,blastDirection:!1,shovelOpAlarm:!1,shovelElevation:!1},{emitEvent:!1}),this.form.get("feedback").patchValue(!1,{emitEvent:!1}),this.state="hide",this.cdr&&!this.cdr.destroyed&&this.cdr.detectChanges()}},{key:"toggleState",value:function(){this.state="show"===this.state?"hide":"show"}},{key:"onHide",value:function(){this.state="hide"}},{key:"preservedColorMap",get:function(){var t;return null!==(t=this.mapStateService.selectedColorMap$.getValue())&&void 0!==t?t:o.MN.getDefaultColorMap(this.mineArea)}},{key:"initForm",value:function(){var t,d,n=this,M=((0,T.Z)(t={},a.N.HOLE_DEPTH_COMPLIANCE_MEAS_DESIGN,a.N.HOLE_DEPTH_COMPLIANCE),(0,T.Z)(t,a.N.HOLE_DEPTH_COMPLIANCE_MEAS_DRILLED,a.N.HOLE_DEPTH_COMPLIANCE),t),E=(0,o.Z9)(this.preservedColorMap)?a.N.ZINC:this.preservedColorMap;this.form=this.formBuilder.group({colorMap:null!==(d=M[this.preservedColorMap]||E)&&void 0!==d?d:this.preservedColorMap,blastDirection:!1,feedback:!1,shovelOpAlarm:!1,shovelElevation:!1}),this.form.get("colorMap").valueChanges.pipe((0,P.R)(this.destroy$)).subscribe(function(Y){n.sendSelectColorMapEvent(),"main"===n.mapType&&n.resetLegendFiltering(),n.treeDataService.noData$.getValue()&&"pattern"!==n.treeDataService.noData$.getValue().type&&n.treeDataService.noData$.next({show:!1}),n.form.get("feedback").patchValue(!1,{emitEvent:!1}),n.form.get("shovelElevation").patchValue(!1,{emitEvent:!1}),n.form.get("shovelOpAlarm").patchValue(!1,{emitEvent:!1}),n.visibilityUpdated({colorMap:Y,blastDirection:n.form.value.blastDirection,feedback:!1,shovelOpAlarm:!1,shovelElevation:!1,coalSeamsDisabled:!1})}),this.form.get("feedback").valueChanges.pipe((0,P.R)(this.destroy$)).subscribe(function(){n.sendSelectColorMapEvent(),n.form.get("colorMap").patchValue("not set",{emitEvent:!1}),n.form.get("shovelElevation").patchValue(!1,{emitEvent:!1}),n.form.get("shovelOpAlarm").patchValue(!1,{emitEvent:!1}),n.treeDataService.noData$.next({show:!1}),n.visibilityUpdated({colorMap:At,blastDirection:n.form.value.blastDirection,feedback:!0,shovelOpAlarm:!1,shovelElevation:!1,coalSeamsDisabled:!0})}),this.form.get("shovelOpAlarm").valueChanges.pipe((0,P.R)(this.destroy$)).subscribe(function(){n.sendSelectColorMapEvent(),n.form.get("colorMap").patchValue("not set",{emitEvent:!1}),n.form.get("feedback").patchValue(!1,{emitEvent:!1}),n.form.get("shovelElevation").patchValue(!1,{emitEvent:!1}),n.treeDataService.noData$.next({show:!1}),n.visibilityUpdated({colorMap:Lt,blastDirection:n.form.value.blastDirection,feedback:!1,shovelOpAlarm:!0,shovelElevation:!1,coalSeamsDisabled:!0})}),this.form.get("shovelElevation").valueChanges.pipe((0,P.R)(this.destroy$)).subscribe(function(){n.sendSelectColorMapEvent(),n.form.get("colorMap").patchValue("not set",{emitEvent:!1}),n.form.get("feedback").patchValue(!1,{emitEvent:!1}),n.form.get("shovelOpAlarm").patchValue(!1,{emitEvent:!1}),n.treeDataService.noData$.next({show:!1}),n.visibilityUpdated({colorMap:Jn,blastDirection:!1,feedback:!1,shovelOpAlarm:!1,shovelElevation:!0,coalSeamsDisabled:!0})}),this.form.get("blastDirection").valueChanges.pipe((0,P.R)(this.destroy$)).subscribe(function(Y){var $=n.form.value;$.shovelElevation||n.visibilityUpdated({colorMap:n.selectedColorMap,blastDirection:Y,feedback:$.feedback,shovelOpAlarm:$.shovelOpAlarm,shovelElevation:$.shovelElevation,emitColorMap:!1,coalSeamsDisabled:$.feedback||$.shovelOpAlarm})})}},{key:"visibilityUpdated",value:function(t){this.selectedColorMap=t.colorMap,this.map.getLayer("blastDirection")&&this.map.setLayoutProperty("blastDirection","visibility",t.blastDirection?"visible":"none"),t.disableFeedback&&this.form.get("blastDirection").patchValue(!1,{emitEvent:!1}),!(0,C.isNil)(t.dataPointsActive)&&t.dataPointsActive&&(this.form.get("colorMap").patchValue(t.colorMap,{emitEvent:!0}),this.form.get("blastDirection").patchValue(!1,{emitEvent:!1})),!1!==t.emitColorMap&&this.visibilityEmitter.emit(this.selectedColorMap),this._mapSettings.dataPointsMode||this.updateCoalsSeamsVisibility(t.coalSeamsDisabled)}},{key:"getRadioBtnValue",value:function(t,n){return this.isFragmentationColorMap&&t===a.N.AVERAGE_FRAGMENTATION?this.selectedColorMap:n}},{key:"updateCoalsSeamsVisibility",value:function(t){!this.map.getLayer("coal-seams")||this.map.setLayoutProperty("coal-seams","visibility",t?"none":"visible")}},{key:"resetLegendFiltering",value:function(){this.legendFilteringService.legends$.next({})}},{key:"sendSelectColorMapEvent",value:function(){this.customEventService.event(I.R.SELECT_COLORMAP,{color_map_name:this.selectedColorMap})}},{key:"subscribeOnNavigationEnd",value:function(){var t=this;this.router.events.pipe((0,y.h)(function(n){return n instanceof v.m2}),(0,_.P)()).subscribe(function(){return t.sendSelectColorMapEvent()})}}]),s}(g.eO);return c.\u0275fac=function(r){return new(r||c)(e.Y36(e.sBO),e.Y36(Me.qu),e.Y36(F.$A),e.Y36(F.yU),e.Y36(F.Hj),e.Y36(F.ol),e.Y36(F.c5),e.Y36(F.I3),e.Y36(F.qL),e.Y36(v.F0))},c.\u0275cmp=e.Xpm({type:c,selectors:[["dabo-visibility-mode-form"]],inputs:{mapData:"mapData",mapSettings:"mapSettings",isReportsPage:"isReportsPage",shovelOperator:"shovelOperator"},outputs:{visibilityEmitter:"visibilityEmitter"},features:[e._Bn([{provide:u.Hn,useValue:{scope:"view-mode-form",alias:"viewModeFormTranslations"}}]),e.qOj],decls:16,vars:25,consts:[["daboClickOutsideDetector","","fxLayout","column wrap",1,"visibility-settings-box",3,"ngClass","clickOutsideEmitter"],["fxLayout","row",1,"visibility-settings-header",3,"ngClass"],["type","button","fxFlex","32px",1,"reset-btn","center-icon","visibility-btn",3,"matTooltip","ngClass","click"],[1,"icon","icon-map-visibility"],["class","visibility-settings-header__info","fxLayout","row","fxLayoutAlign","space-between center",3,"matTooltip","click",4,"ngIf"],["class","visibility-settings-form","fxLayout","column","novalidate","","autocomplete","off",3,"visibility-settings-form__comparing-page","formGroup",4,"ngIf"],[3,"map",4,"ngIf"],[3,"colorMap","map","setActiveColorMode",4,"ngIf"],[3,"colorMap","map",4,"ngIf"],[3,"map","mineSite",4,"ngIf"],[3,"map","mineSite","colorMap","mapSettings","setActiveColorMode",4,"ngIf"],[3,"map","mineSite","mapSettings",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"visibility-settings-header__info",3,"matTooltip","click"],[1,"icon","center-icon","icon-close"],["fxLayout","column","novalidate","","autocomplete","off",1,"visibility-settings-form",3,"formGroup"],["formControlName","colorMap"],["class","group",4,"ngIf"],["formControlName","feedback",4,"ngIf"],["formControlName","shovelOpAlarm",4,"ngIf"],["formControlName","shovelElevation",4,"ngIf"],["class","toggle-container","fxFlex","","fxLayout","row","fxLayoutAlign","flex-start center",4,"ngIf"],[1,"group"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","radio-button",3,"value",4,"ngIf"],[1,"radio-button",3,"value"],["formControlName","feedback"],[1,"radio-button",3,"value","checked"],["formControlName","shovelOpAlarm"],["formControlName","shovelElevation"],["fxFlex","","fxLayout","row","fxLayoutAlign","flex-start center",1,"toggle-container"],["formControlName","blastDirection",3,"ngClass"],[1,"icon-container"],[1,"icon"],[3,"map"],[3,"colorMap","map","setActiveColorMode"],[3,"colorMap","map"],[3,"map","mineSite"],[3,"map","mineSite","colorMap","mapSettings","setActiveColorMode"],[3,"map","mineSite","mapSettings"]],template:function(r,s){1&r&&(e.TgZ(0,"div",0),e.NdJ("clickOutsideEmitter",function(){return s.onHide()}),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return s.toggleState()}),e.ALo(3,"transloco"),e._UZ(4,"span",3),e.qZA(),e.YNc(5,hn,5,6,"div",4),e.qZA(),e.TgZ(6,"div"),e.YNc(7,Fn,11,13,"form",5),e.qZA()(),e.YNc(8,Bn,1,1,"dabo-loading-layer",6),e.YNc(9,Zn,1,2,"dabo-color-map-layers",7),e.YNc(10,Hn,1,1,"dabo-digging-conditions-3d",6),e.YNc(11,Gn,1,1,"dabo-blastability",6),e.YNc(12,Vn,1,2,"dabo-shovel-operator-event",8),e.YNc(13,Un,1,2,"dabo-shovel-elevation",9),e.YNc(14,Yn,1,4,"dabo-data-points",10),e.YNc(15,Wn,1,3,"dabo-hotspots",11)),2&r&&(e.Q6J("ngClass",e.WLB(16,jn,"show"===s.state,s._mapSettings.dataPointsMode&&s.isFragmentationColorMapOnCda||s._mapSettings.hotSpotsMode)),e.xp6(1),e.Q6J("ngClass",e.WLB(19,Kn,"hide"===s.state,"show"===s.state)),e.xp6(1),e.s9C("matTooltip",e.lcZ(3,14,"viewModeFormTranslations.viewModeTooltip")),e.Q6J("ngClass",e.WLB(22,It,"show"===s.state,"hide"===s.state&&s.form.value.colorMap)),e.xp6(3),e.Q6J("ngIf","show"===s.state),e.xp6(2),e.Q6J("ngIf","show"===s.state),e.xp6(1),e.Q6J("ngIf","loading"===s.selectedColorMap&&s._mapSettings.holesMode),e.xp6(1),e.Q6J("ngIf",s.sameLogicColorMaps.includes(s.selectedColorMap)&&s._mapSettings.holesMode),e.xp6(1),e.Q6J("ngIf",s.selectedColorMap===s.colorMapsEnum.DIGGING_CONDITIONS_3D),e.xp6(1),e.Q6J("ngIf","blastability"===s.selectedColorMap&&s._mapSettings.holesMode),e.xp6(1),e.Q6J("ngIf",s.shovelOpColorMaps.includes(s.selectedColorMap)&&s._mapSettings.holesMode),e.xp6(1),e.Q6J("ngIf","shovelElevation"===s.selectedColorMap&&s._mapSettings.holesMode),e.xp6(1),e.Q6J("ngIf",s._mapSettings.dataPointsMode),e.xp6(1),e.Q6J("ngIf",s._mapSettings.hotSpotsMode))},directives:[We.H,Oe.xw,Ce.mk,Oe.yH,Te.gM,Ce.O5,Oe.Wh,Me._Y,Me.JL,Me.sg,ke.VQ,Me.JJ,Me.u,Ce.sg,ke.U0,je.oG,Ke,ot,ae,qt,en,gn,mn,un],pipes:[u.Ot],styles:['@font-face{font-family:dabaha;src:url(/assets/fonts/dabaha.eot);src:url(/assets/fonts/dabaha.eot?#iefix) format("embedded-opentype"),url(/assets/fonts/dabaha.ttf) format("truetype"),url(/assets/fonts/dabaha.woff) format("woff"),url(/assets/fonts/dabaha.svg) format("svg");font-weight:400;font-style:normal;font-display:block}.icon[_ngcontent-%COMP%]{font-family:dabaha!important;speak:none;width:16px;height:16px;font-size:16px;font-style:normal;font-weight:400;font-feature-settings:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon--disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:initial}.icon--hidden[_ngcontent-%COMP%]{display:none}.icon-byc[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\ea04";color:#008cff}.icon-byc[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\ea05";margin-left:-1em;color:#008cff}.icon-byc[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\ea06";margin-left:-1em;color:#586b7a}.icon-byc[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\ea07";margin-left:-1em;color:#586b7a}.icon-information[_ngcontent-%COMP%]:before{content:"\\ea03";color:#586b7a}.icon-colormap[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9fe";color:#f25050}.icon-colormap[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9ff";margin-left:-1em;color:#f2c94c}.icon-colormap[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\ea00";margin-left:-1em;color:#1f8ff7}.icon-colormap[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\ea01";margin-left:-1em;color:#39be04}.icon-colormap[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\ea02";margin-left:-1em;color:#586b7a}.icon-drillbit[_ngcontent-%COMP%]:before{content:"\\e9fc";color:#00afbd}.icon-report[_ngcontent-%COMP%]:before{content:"\\e9fa";color:#0065bd}.icon-quality[_ngcontent-%COMP%]:before{content:"\\e9fb";color:#d5b1f1}.icon-permissions[_ngcontent-%COMP%]:before{content:"\\e9f9";color:#00afbd}.icon-batchedit[_ngcontent-%COMP%]:before{content:"\\e9f8";color:#0165bd}.icon-comment[_ngcontent-%COMP%]:before{content:"\\e9f4";color:#0065bd}.icon-actions[_ngcontent-%COMP%]:before{content:"\\e9f5";color:#0065bd}.icon-add-comment[_ngcontent-%COMP%]:before{content:"\\e9f6";color:#0065bd}.icon-scorecard[_ngcontent-%COMP%]:before{content:"\\e9f7";color:#0065bd}.icon-data-error[_ngcontent-%COMP%]:before{content:"\\e9f3";color:#586b7a}.icon-BL-1z[_ngcontent-%COMP%]:before{content:"\\e9e5";color:#366cfb}.icon-BL-2z-1[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9e6";color:#366cfb}.icon-BL-2z-1[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9e7";margin-left:-1em;color:#eef3fb}.icon-BL-2z-2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9e8";color:#eef3fb}.icon-BL-2z-2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9e9";margin-left:-1em;color:#366cfb}.icon-BL-3z-1[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9ea";color:#366cfb}.icon-BL-3z-1[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9eb";margin-left:-1em;color:#b8d3fd}.icon-BL-3z-1[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9ec";margin-left:-1em;color:#eef3fb}.icon-BL-3z-2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9ed";color:#b8d3fd}.icon-BL-3z-2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9ee";margin-left:-1em;color:#366cfb}.icon-BL-3z-2[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9ef";margin-left:-1em;color:#eef3fb}.icon-BL-3z-3[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9f0";color:#e3edfb}.icon-BL-3z-3[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9f1";margin-left:-1em;color:#f4f8fb}.icon-BL-3z-3[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9f2";margin-left:-1em;color:#366cfb}.icon-hole-pumped[_ngcontent-%COMP%]:before{content:"\\e9e3"}.icon-history[_ngcontent-%COMP%]:before{content:"\\e9e2";color:#586b7a}.icon-crusher[_ngcontent-%COMP%]:before{content:"\\e9e4";color:#0165bd}.icon-calculator[_ngcontent-%COMP%]:before{content:"\\e9e1";color:#0165bd}.icon-issue[_ngcontent-%COMP%]:before{content:"\\e9de";color:#e68537}.icon-nitrate[_ngcontent-%COMP%]:before{content:"\\e9df";color:#0165bd}.icon-vibration[_ngcontent-%COMP%]:before{content:"\\e9e0";color:#0165bd}.icon-angled[_ngcontent-%COMP%]:before{content:"\\e9dd"}.icon-userguide[_ngcontent-%COMP%]:before{content:"\\e9dc";color:#0165bd}.icon-crew[_ngcontent-%COMP%]:before{content:"\\e9db";color:#586b7a}.icon-bench[_ngcontent-%COMP%]:before{content:"\\e9d7";color:#586b7a}.icon-pat-group[_ngcontent-%COMP%]:before{content:"\\e9d8";color:#586b7a}.icon-pat-small[_ngcontent-%COMP%]:before{content:"\\e9d9";color:#586b7a}.icon-patt[_ngcontent-%COMP%]:before, .icon-patt-light[_ngcontent-%COMP%]:before{content:"\\e9da";color:#586b7a}.icon-patt-light[_ngcontent-%COMP%]:before{opacity:.5}.icon-safety[_ngcontent-%COMP%]:before{content:"\\e9d6";color:#0165bd}.icon-godown[_ngcontent-%COMP%]:before{content:"\\e9d3";color:#586b7a}.icon-growup[_ngcontent-%COMP%]:before{content:"\\e9d4";color:#586b7a}.icon-growup-light[_ngcontent-%COMP%]:before{content:"\\e9d4";color:#fff;opacity:.5}.icon-circle[_ngcontent-%COMP%]:before{content:"\\e9d5";color:#586b7a}.icon-sliders[_ngcontent-%COMP%]:before{content:"\\e9d2";color:#586b7a}.icon-chart[_ngcontent-%COMP%]:before{content:"\\e9d1";color:#586b7a}.icon-no-data-2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9cb";color:#8bade0}.icon-no-data-2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9cc";margin-left:-1em;color:#586b7a}.icon-no-data-3[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9cd";color:#586b7a}.icon-no-data-3[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9ce";margin-left:-1em;color:#8bade0}.icon-no-data-4[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9cf";color:#8bade0}.icon-no-data-4[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9d0";margin-left:-1em;color:#586b7a}.icon-connection[_ngcontent-%COMP%]:before{content:"\\e9c8";color:#586b7a}.icon-dashboard[_ngcontent-%COMP%]:before{content:"\\e9c9";color:#586b7a}.icon-temperature[_ngcontent-%COMP%]:before{content:"\\e9ca";color:#586b7a}.icon-menu-1[_ngcontent-%COMP%]:before{content:"\\e9c6";color:#586b7a}.icon-menu-2[_ngcontent-%COMP%]:before{content:"\\e9c7";color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9b4";color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9b5";margin-left:-1em;color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9b6";margin-left:-1em;color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e9b7";margin-left:-1em;color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e9b8";margin-left:-1em;color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e9b9";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3-6[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e9ba";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3-6[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e9bb";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3-6[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e9bc";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9bd";color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9be";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9bf";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e9c0";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e9c1";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e9c2";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e9c3";margin-left:-1em;color:#586b7a}.icon-w1-2[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e9c4";margin-left:-1em;color:#586b7a}.icon-w1-2[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e9c5";margin-left:-1em;color:#586b7a}.icon-hole-precond[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9b2";color:#000;opacity:.75}.icon-hole-precond[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9b3";margin-left:-1em;color:#fff}.icon-w1[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e97c";color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e97d";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e97e";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e97f";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e980";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e981";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e982";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e983";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e984";margin-left:-1em;color:#586b7a}.icon-w2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e985";color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e986";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e987";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e988";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e989";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e98a";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e98b";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e98c";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e98d";margin-left:-1em;color:#586b7a}.icon-w3[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e98e";color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e98f";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e990";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e991";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e992";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e993";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e994";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e995";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e996";margin-left:-1em;color:#586b7a}.icon-w4[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e997";color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e998";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e999";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e99a";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e99b";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e99c";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e99d";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e99e";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e99f";margin-left:-1em;color:#586b7a}.icon-w5[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9a0";color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9a1";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9a2";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e9a3";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e9a4";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e9a5";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e9a6";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e9a7";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e9a8";margin-left:-1em;color:#586b7a}.icon-w6[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9a9";color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9aa";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9ab";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e9ac";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e9ad";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e9ae";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e9af";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e9b0";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e9b1";margin-left:-1em;color:#586b7a}.icon-T-Icon[_ngcontent-%COMP%]:before{content:"\\e97a";color:#fff}.icon-tasks[_ngcontent-%COMP%]:before{content:"\\e97b";color:#586b7a}.icon-pdf_template[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e967";color:#fff}.icon-pdf_template[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e968";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e969";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e96a";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e96b";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e96c";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e96d";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e96e";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e96f";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path10[_ngcontent-%COMP%]:before{content:"\\e970";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path11[_ngcontent-%COMP%]:before{content:"\\e971";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path12[_ngcontent-%COMP%]:before{content:"\\e972";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path13[_ngcontent-%COMP%]:before{content:"\\e973";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path14[_ngcontent-%COMP%]:before{content:"\\e974";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path15[_ngcontent-%COMP%]:before{content:"\\e975";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path16[_ngcontent-%COMP%]:before{content:"\\e976";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path17[_ngcontent-%COMP%]:before{content:"\\e977";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path18[_ngcontent-%COMP%]:before{content:"\\e978";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path19[_ngcontent-%COMP%]:before{content:"\\e979";margin-left:-.7998046875em;color:#d0dae0}.icon-ellipsis[_ngcontent-%COMP%]:before{content:"\\e966";color:#586b7a}.icon-edit[_ngcontent-%COMP%]:before{content:"\\e965";color:#586b7a}.icon-help-center[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e963";color:#ffe845}.icon-help-center[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e964";margin-left:-1em;color:#000;opacity:.5029}.icon-driver[_ngcontent-%COMP%]:before{content:"\\e95a";color:#0165bd}.icon-eye-crossed[_ngcontent-%COMP%]:before{content:"\\e95b";color:#586b7a}.icon-eye[_ngcontent-%COMP%]:before{content:"\\e95c";color:#586b7a}.icon-grade[_ngcontent-%COMP%]:before{content:"\\e95d";color:#586b7a}.icon-ropes-2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e95e";color:#586b7a}.icon-ropes-2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e95f";margin-left:-1em;color:#0165bd}.icon-ropes[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e960";color:#586b7a}.icon-ropes[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e961";margin-left:-1em;color:#0165bd}.icon-score[_ngcontent-%COMP%]:before{content:"\\e962";color:#586b7a}.icon-search[_ngcontent-%COMP%]:before{content:"\\e959";color:#586b7a}.icon-progress[_ngcontent-%COMP%]:before{content:"\\e958";color:#586b7a}.icon-day-shift[_ngcontent-%COMP%]:before{content:"\\e955";color:#fcd47d}.icon-night-shift[_ngcontent-%COMP%]:before{content:"\\e956";color:#7d8c9a}.icon-segment[_ngcontent-%COMP%]:before{content:"\\e957";color:#586b7a}.icon-print[_ngcontent-%COMP%]:before{content:"\\e954";color:#586b7a}.icon-success[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e951";color:#fff}.icon-success[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e952";margin-left:-1em;color:#8bade0}.icon-success[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e953";margin-left:-1em;color:#39be04}.icon-misfire[_ngcontent-%COMP%]:before{content:"\\e950";color:#ff8200}.icon-no-selection[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e949";color:#fff}.icon-no-selection[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e94a";margin-left:-1em;color:#8bade0}.icon-no-selection[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e94b";margin-left:-1em;color:#eaeef6}.icon-no-selection[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e94c";margin-left:-1em;color:#1f8ff7}.icon-no-selection[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e94d";margin-left:-1em;color:#586b7a}.icon-home[_ngcontent-%COMP%]:before{content:"\\e948";color:#586b7a}.icon-feedback-normal[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e93f";color:#31495d;opacity:.8504}.icon-feedback-normal[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e940";margin-left:-.7861328125em;color:#ffaf00}.icon-feedback-normal[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e941";margin-left:-.7861328125em;color:#fff}.icon-feedback-selected[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e942";color:#0165bd}.icon-feedback-selected[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e943";margin-left:-.7861328125em;color:#fff}.icon-feedback-selected[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e944";margin-left:-.7861328125em;color:#ffaf00}.icon-feedback-selected[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e945";margin-left:-.7861328125em;color:#586b7a}.icon-map-feedback-small[_ngcontent-%COMP%]:before{content:"\\e946";color:#ffaf00}.icon-map-feedback[_ngcontent-%COMP%]:before{content:"\\e947";color:#586b7a}.icon-equip-driller[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e911";color:#fff}.icon-equip-driller[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e912";margin-left:-1em;color:#0165bd}.icon-equip-driller[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e913";margin-left:-1em;color:#0165bd}.icon-equip-loader[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e939";color:#fff}.icon-equip-loader[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e93a";margin-left:-1em;color:#0165bd}.icon-equip-loader[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e93b";margin-left:-1em;color:#0165bd}.icon-equip-shovel[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e93c";color:#fff}.icon-equip-shovel[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e93d";margin-left:-1em;color:#0165bd}.icon-equip-shovel[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e93e";margin-left:-1em;color:#0165bd}.icon-alert[_ngcontent-%COMP%]:before{content:"\\e900";color:#ff8200}.icon-arrow-down[_ngcontent-%COMP%]:before{content:"\\e901";color:#586b7a}.icon-arrow-left[_ngcontent-%COMP%]:before{content:"\\e902";color:#586b7a}.icon-arrow-right[_ngcontent-%COMP%]:before{content:"\\e903";color:#586b7a}.icon-arrow-top[_ngcontent-%COMP%]:before{content:"\\e904";color:#586b7a}.icon-blast[_ngcontent-%COMP%]:before, .icon-blast-light[_ngcontent-%COMP%]:before{content:"\\e905";color:#f25050}.icon-blast-light[_ngcontent-%COMP%]:before{color:#586b7a;opacity:.5}.icon-calendar[_ngcontent-%COMP%]:before{content:"\\e906";color:#0165bd}.icon-checkmark[_ngcontent-%COMP%]:before{content:"\\e907";color:#586b7a}.icon-close[_ngcontent-%COMP%]:before{content:"\\e908";color:#586b7a}.icon-coal[_ngcontent-%COMP%]:before{content:"\\e909";color:#586b7a}.icon-cost[_ngcontent-%COMP%]:before{content:"\\e90a";color:#ff8200}.icon-critical[_ngcontent-%COMP%]:before{content:"\\e90b";color:#c55563}.icon-datepicker[_ngcontent-%COMP%]:before{content:"\\e90c";color:#586b7a}.icon-destination[_ngcontent-%COMP%]:before{content:"\\e90d";color:#39be04}.icon-drill[_ngcontent-%COMP%]:before{content:"\\e90e";color:#00afbd}.icon-empty[_ngcontent-%COMP%]:before{content:"\\e90f";color:#a4afbe}.icon-env[_ngcontent-%COMP%]:before{content:"\\e910";color:#39be04}.icon-filter[_ngcontent-%COMP%]:before{content:"\\e914";color:#586b7a}.icon-flag[_ngcontent-%COMP%]:before{content:"\\e915";color:#f54f63}.icon-grid[_ngcontent-%COMP%]:before{content:"\\e916";color:#0165bd}.icon-group[_ngcontent-%COMP%]:before{content:"\\e917";color:#586b7a}.icon-help[_ngcontent-%COMP%]:before{content:"\\e918";color:#586b7a}.icon-help-light[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e963";color:#586b7a;opacity:.2}.icon-help-light[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e964";margin-left:-1em;color:#586b7a;opacity:.75}.icon-hole[_ngcontent-%COMP%]:before{content:"\\e919";color:#0165bd}.icon-kpi[_ngcontent-%COMP%]:before{content:"\\e91a";color:#0165bd}.icon-kpi-cda[_ngcontent-%COMP%]:before{content:"\\e91a";color:#e1c06b}.icon-letter[_ngcontent-%COMP%]:before{content:"\\e91b";color:#586b7a}.icon-list[_ngcontent-%COMP%]:before{content:"\\e91c";color:#0165bd}.icon-load[_ngcontent-%COMP%]:before{content:"\\e91d";color:#0165bd}.icon-loaded[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e91e";color:#a4afbe}.icon-loaded[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e91f";margin-left:-1em;color:#1f8ff7}.icon-mail[_ngcontent-%COMP%]:before{content:"\\e920";color:#586b7a}.icon-map-collapse[_ngcontent-%COMP%]:before{content:"\\e921";color:#586b7a}.icon-map-compare-tool[_ngcontent-%COMP%]:before{content:"\\e922";color:#586b7a}.icon-map-expand[_ngcontent-%COMP%]:before{content:"\\e923";color:#586b7a}.icon-map-legend[_ngcontent-%COMP%]:before{content:"\\e924";color:#586b7a}.icon-map-polygon-tool[_ngcontent-%COMP%]:before{content:"\\e925";color:#586b7a}.icon-map-toggle[_ngcontent-%COMP%]:before{content:"\\e926";color:#586b7a}.icon-map-visibility[_ngcontent-%COMP%]:before{content:"\\e927";color:#586b7a}.icon-minus[_ngcontent-%COMP%]:before{content:"\\e928";color:#586b7a}.icon-no-data[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e929";color:#fff}.icon-no-data[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e94e";margin-left:-1em;color:#8bade0}.icon-no-data[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e94f";margin-left:-1em;color:#586b7a}.icon-notifications[_ngcontent-%COMP%]:before{content:"\\e92a";color:#586b7a}.icon-pattern[_ngcontent-%COMP%]:before{content:"\\e92b";color:#0165bd}.icon-piechart[_ngcontent-%COMP%]:before{content:"\\e92c";color:#00afbd}.icon-plus[_ngcontent-%COMP%]:before{content:"\\e92d";color:#586b7a}.icon-refresh[_ngcontent-%COMP%]:before{content:"\\e92e";color:#586b7a}.icon-road[_ngcontent-%COMP%]:before{content:"\\e92f"}.icon-roadblock[_ngcontent-%COMP%]:before{content:"\\e930";color:#f25050}.icon-roadpin[_ngcontent-%COMP%]:before{content:"\\e931";color:#ff8200}.icon-settings[_ngcontent-%COMP%]:before{content:"\\e932";color:#586b7a}.icon-shovel[_ngcontent-%COMP%]:before{content:"\\e933";color:#0165bd}.icon-target[_ngcontent-%COMP%]:before{content:"\\e934";color:#586b7a}.icon-time[_ngcontent-%COMP%]:before{content:"\\e935";color:#586b7a}.icon-truck[_ngcontent-%COMP%]:before{content:"\\e936";color:#0165bd}.icon-user[_ngcontent-%COMP%]:before{content:"\\e937";color:#586b7a}.icon-waste[_ngcontent-%COMP%]:before{content:"\\e938";color:#586b7a}.icon-info[_ngcontent-%COMP%]:before{content:"\\ea03";color:#586b7a}[_nghost-%COMP%]{position:relative;box-sizing:border-box;margin-bottom:10px;width:-moz-fit-content;width:fit-content}  .radio-button .mat-radio-outer-circle{border-color:#001e3a4d}  .toggle-container .mat-checkbox-frame{border-color:#001e3a4d}  .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#1f8ff7}  .mat-radio-button .mat-radio-label-content{font-size:13px;font-weight:400;letter-spacing:-.1px}  .mat-radio-button.mat-radio-disabled .mat-radio-label-content{color:#00000061}  .mat-radio-button.mat-accent:not(.mat-radio-disabled) .mat-radio-label-content{color:#2e384d}  .mat-radio-button.mat-accent .mat-radio-inner-circle,   .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background-color:#1f8ff7!important}  .mat-radio-group .mat-radio-container,   .mat-radio-group .mat-radio-outer-circle,   .mat-radio-group .mat-radio-inner-circle{width:18px;height:18px}  .mat-radio-group .mat-radio-button .mat-radio-ripple{height:36px;width:36px;left:calc(50% - 18px);top:calc(50% - 18px)}.visibility-settings-box[_ngcontent-%COMP%]{background-color:#fff;position:relative;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;display:block;border-radius:2px}.visibility-settings-box--shadow[_ngcontent-%COMP%]{box-shadow:1px 1px 15px 2px #0003}.visibility-settings-header.all-border-radius[_ngcontent-%COMP%]{border-radius:4px}.visibility-settings-header.border-radius[_ngcontent-%COMP%]{border-radius:4px 4px 0 0}.visibility-settings-header__info[_ngcontent-%COMP%]{width:calc(100% - 32px);font-size:13px;font-weight:500;box-shadow:3px 8px 24px #586b7a1a;z-index:1;padding-left:5px}.visibility-settings-header__info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{cursor:pointer;opacity:.4;width:32px;height:100%;font-size:16px}.visibility-settings-header__info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{opacity:1}.visibility-settings-header[_ngcontent-%COMP%]:hover{background-color:#f7f9fd;cursor:pointer}.visibility-settings__hide[_ngcontent-%COMP%]{display:none!important}.visibility-settings-form[_ngcontent-%COMP%]{border-radius:0 0 4px 4px;z-index:0;padding:13px 13px 13px 0;overflow-y:auto;max-height:calc(100vh - 160px)}.visibility-settings-form[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:transparent}.visibility-settings-form[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.visibility-settings-form__comparing-page[_ngcontent-%COMP%]{max-height:500px;padding-bottom:11px;margin-bottom:2px}.visibility-settings-form__comparing-page[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:transparent}.visibility-settings-form__comparing-page[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.visibility-settings-form[_ngcontent-%COMP%]   .mat-slide-toggle[_ngcontent-%COMP%]{display:block;padding-left:20px}.visibility-settings-form[_ngcontent-%COMP%]   .mat-radio[_ngcontent-%COMP%]    -button{display:block;padding-left:40px}.visibility-settings-form[_ngcontent-%COMP%]   .mat-radio[_ngcontent-%COMP%]    -container{width:18px;height:18px}.visibility-settings-form[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]{margin-top:11px;padding:13px 5px 0 8px;border-top:1px solid #f3f5ff}.visibility-settings-form[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .mat-checkbox[_ngcontent-%COMP%]{line-height:0}.visibility-settings-form[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-size:13px;font-weight:400;color:#2b3034;margin-left:8px}.visibility-settings-form[_ngcontent-%COMP%]   .radio-button[_ngcontent-%COMP%]{padding-bottom:4px;padding-left:8px;display:block}.visibility-settings-form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]:not(:last-child){margin-bottom:6px}'],data:{animation:ne},changeDetection:0}),c}(),ue=i(48924),Qn=i(77604),zn=i(36787),Xn=i(23753),qn=i(61715),eo=i(69898),Re=i(98711),He=i(67258),to=i(4430),no=["mapPanelContainer"],Rt=Z.H.DATA_POINTS,xt=Z.H.HOLES,oo=Z.H.PATTERN,ao=Z.H.HOTSPOTS,io=a.N.BLASTABILITY,ro=a.N.LOADING,co=a.N.SHORT_HOLE,so=a.N.SHOVEL_OPERATOR_FEEDBACK,lo=a.N.SHOVEL_OPERATOR_ALARM,Ge=X.L.LEFT,wt=X.L.RIGHT,kt=Re.K.MULTI_DATAPOINTS,Ft=Re.K.MULTI_HOLES,po=Re.K.POLYGON,go=Re.K.DATAPOINT,_o=Re.K.HOLE_ASSAYS,Bt=pe.K.COMPARING,Zt=ee.D.BLASTABILITY_TOP,xe=ee.D.BLASTABILITY_MID,Ht=ee.D.BLASTABILITY_TOE,ye=z.w.BMM_CIRCLE,Ve=z.w.BMM_ICON,Gt=z.w.BMM_ID,Vt=z.w.BMM_SELECTED,Ue=re.u.COLORCODES_MISSING_DATA,pt=re.u.COLORCODES_NODATA_PER_METRIC,mo=re.u.COLORCODES_NODATA_SYMBOL,Ut=S.a.BLAST_PERIMETER_FIRST_LINE,Yt=S.a.BLAST_PERIMETER_SECOND_LINE,Wt=S.a.BLAST_PERIMETER_THIRD_LINE,fo=He.x.MAP_CLICK,uo=function(){var c=function(f){(0,G.Z)(s,f);var r=(0,p.Z)(s);function s(l,t,n,d,M,E,Y,$,oe,ce,Q,be,le){var U;return(0,x.Z)(this,s),(U=r.call(this)).cdr=l,U.mapStateService=t,U.permissionsService=n,U.treeService=d,U.mineStateService=M,U.polygonToolSelectionService=E,U.mapFacadeService=Y,U.router=$,U.compareService=oe,U.patternsService=ce,U.coalSeamsDataService=Q,U.holeStateService=be,U.mapApiService=le,U.mapType="main",U.mapLoaded=new e.vpe,U.isShovelOpEventEnabled=new e.vpe,U.selectedVisibility=new e.vpe,U.holesTableFilters=new e.vpe,U.dataPointTableFilters=new e.vpe,U.colorMapEnum=a.N,U.isComparePage=U.router.url.includes(Bt),U.disableClick=!1,U.disableClickByShovelOpEnabled=!1,U.polygonToolDataIsProcessing=!1,U.panelInfo=null,U.updatedMapSettings=null,U.shovelOperatorsEventData={features:[]},U.shovelElevation={features:[]},U.shortHoleEnabled={main:!1,compare:!1},U.showPolygonToolButton=!1,U.isPreservedSelectionByLegendFilter=!1,U.popup=new eo.Popup({closeButton:!1}),U.mapTooltipHelper=new o.qi,U.draw=null,U._settings=null,U.permissionsService.permissions$.pipe((0,P.R)(U.destroy$)).subscribe(function(Ye){U.holeViewPermission=Ye.mainPage.components.map.controls.viewSwitcher.holesView,U.permission=Ye.mainPage.components}),U}return(0,B.Z)(s,[{key:"settings",set:function(t){this._settings=t,this._settings.isComparePage=this.isCompare,this.mapStateService.filterRequestNeeded=!0,this.isRDO=g.ZA.isRDO(this.mineStateService.getSelectedMineArea()),this.updateMapSettings({startDraw:!1,multiDataPoints:!1,multiHoles:!1},t),this._settings&&this.map&&this.setMapDataSettings(t),this.showPolygonTool("mapSettings",t),this.cdr.detectChanges()}},{key:"mapMode",get:function(){var t=this._settings;switch(!0){case t.dataPointsMode:return Rt;case t.holesMode:return xt;case t.hotSpotsMode:return ao;default:return oo}}},{key:"isAssays",get:function(){return(0,o.Z9)(this.colorMap)}},{key:"isMainMap",get:function(){return"compare"!==this.mapType}},{key:"isCda",get:function(){return g.ZA.isCDA(this.mineStateService.getSelectedMineArea())}},{key:"isHVC",get:function(){return g.ZA.isHVC(this.mineStateService.getSelectedMineArea())}},{key:"hasActiveSelectionsForHoles",get:function(){return this._settings.holesMode&&this.polygonToolSelectionService.hasActiveSelectionsForMapMode(xt)}},{key:"hasActiveSelectionsForDataPoints",get:function(){return this._settings.dataPointsMode&&this.polygonToolSelectionService.hasActiveSelectionsForMapMode(Rt)}},{key:"hasStartedToDraw",get:function(){return this.draw&&"draw_polygon"===this.draw.getMode()}},{key:"isDataPointTablePresent",get:function(){return this._settings.dataPointsMode&&this.colorMap===a.N.DIGGING_CONDITIONS}},{key:"isHoleTablePresent",get:function(){return this.kpiPage&&this._settings.holesMode||(0,o.Z9)(this.colorMap)}},{key:"angledHolesLayers",get:function(){return g.iZ.angledHolesLayers}},{key:"setMapDataSettings",value:function(t){if(this.mapStateService.setMapMode(this.mapMode),this.legend=this.colorMap,this.polygonToolSelectionService.setPreserveEntityFilteringState(null),this.isPreservingSelectionsAvailable(this.colorMap)?(this.resetHoleTableFilter(),this.resetDataPointTableFilter()):this.resetState(),this.map.getLayer("points_id")&&this.map.getLayer(O.r.POINTS_REDRILLED)&&this.map.getLayer(O.r.POINTS_OVERLOADED)&&this.removeHolesMarkers(),t.dataPointsMode&&g.WC.updateVisibility([],[].concat((0,b.Z)(this.angledHolesLayers),[S.a.POLYGONS_LABEL_PATTERN_ID,S.a.HOTSPOTS]),this.map),t.hotSpotsMode&&g.WC.updateVisibility([],[S.a.POLYGONS_LABEL_PATTERN_ID],this.map),t.holesMode&&g.WC.updateVisibility([],[S.a.POLYGONS_LABEL_PATTERN_ID,S.a.HOTSPOTS],this.map),t.patternMode){var n=[].concat((0,b.Z)(o.WO.generateLayersNames(["points",S.a.COLORCODES])),[O.r.PRECONDITIONING,O.r.BLASTIQ_COMMENT,"blastDirection",O.r.COLORCODES_MISFIRES,O.r.POINTS_MISFIRES,"coal-seams",ye,Ve,Gt,Vt,S.a.COLORCODES_CAVED_ID,O.r.PUMPED,O.r.COLORCODES_MISFIRES,S.a.HOTSPOTS],(0,b.Z)(this.angledHolesLayers),[O.r.LoadingBreak]);g.WC.updateVisibility([S.a.POLYGONS_LABEL_PATTERN_ID],n,this.map),this.map.moveLayer(S.a.POLYGONS_LABEL_PATTERN_ID),this.map.setLayerZoomRange(S.a.POLYGONS_LABEL_PATTERN_ID,0,0),o.WO.resetHighlightedPolygonState(this.map,["polygons","polygons-outline"],this._settings.patternMode)}}},{key:"loadMap",value:function(t){var n=this;this.map=t,this.mapLoaded.emit(t),this.worker=new Worker(i.tu(new URL(i.p+i.u(87),i.b))),g.WC.addControls(this.map,{nav:"bottom-right",attributionControl:"bottom-right"}),g.WC.addCursorPointer(this.map,["points",S.a.COLORCODES,ye,Ve,Vt,Ue,pt,Zt,xe,Ht,"colorCodes_noLoad","colorCodes_caved"]),this.isCompare=this.router.url.includes(Bt),["touchend","click"].forEach(function(d){n.map.on(d,"points",function(M){n.disableClick||n.disableClickByShovelOpEnabled?M.preventDefault():n.holeViewPermission.holeViewInspector.visible&&(!n._settings.opEventEnabled||!n.isMainMap)&&(n.map.setFilter("selected_points",["in","uniqueHoleId"].concat(M.features[0].properties.uniqueHoleId)),n.showPanel(a.N.LOADING,M.features[0]))}),n.onHoleClickHandler(d,S.a.COLORCODES,S.a.COLORCODES),n.onHoleClickHandler(d,pt,S.a.COLORCODES),n.onHoleClickHandler(d,Ue,S.a.COLORCODES),n.onHoleClickHandler(d,"colorCodes_noLoad",S.a.COLORCODES),n.onHoleClickHandler(d,"colorCodes_caved",S.a.COLORCODES),n.onHoleClickHandler(d,S.a.COLORCODES_MID_SIZE,S.a.COLORCODES),n.onHoleClickHandler(d,Zt,xe),n.onHoleClickHandler(d,xe,xe),n.onHoleClickHandler(d,Ht,xe),n.onHoleClickHandler(d,ye,S.a.COLORCODES),n.map.on(d,"dataPoints",function(M){n.disableClick?M.preventDefault():(n.map.setFilter("selected_dataPoints",["in","uniqueDataPointId"].concat(M.features[0].properties.uniqueDataPointId)),n.panelInfo={feature:M.features[0],type:go},n.cdr.detectChanges())})}),this.map.on("click","polygons",function(d){if(n._settings.patternMode&&!n.disableClick){var M=n.map.queryRenderedFeatures(d.point,{layers:["polygons"]});n.showPatternInfo(g.WC.patternInfoParser(M[0],"center","holesQuantity","dates","diggingConditions","shortHolesQuantity","dataSource","costs","polygonsIds","assaysMetrics","avgHoleDepth","blasting")),n.cdr.detectChanges()}}),this.map.on("click","unclustered-point",function(d){n.map.setFilter("unclustered-point-selected",["in","eventId"].concat(d.features[0].properties.eventId)),n.map.setFilter("unclustered-point-selected-abbr",["in","eventId"].concat(d.features[0].properties.eventId)),n.shovelOperatorsEventDataPanel(d.features[0])}),this.map.on("draw.create",function(d){n.updatedMapSettings.startDraw?(n.beforeProcessingSelection(),n.handlePolygonToolSelection(t,d)):n.draw.delete(d.features[0].id)}),this.map.on("click",function(){n.hasStartedToDraw||n.beforeEmptySelection()}),["mousemove"].forEach(function(d){n.addLayersHoverEvent(d)}),["mouseleave"].forEach(function(d){n.removeLayersHoverEvent(d)}),(0,zn.T)(this.mapStateService.getTriggerPolygonToolPreserving().pipe((0,Ne.b)(function(){n.polygonToolSelectionService.setPreserveEntityFilteringState(null),n.isPreservedSelectionByLegendFilter=!0})),this.mapStateService.colorMapChanged$(),this.mapStateService.mapModeChanged$()).pipe((0,y.h)(function(){return n.isPreservingSelectionsAvailable(n.mapStateService.selectedColorMap$.getValue())}),(0,h.b)(300),(0,Ne.b)(function(){n.hasStartedToDraw&&n.handleStopDrawing(),n.beforeProcessingSelection()}),(0,fe.w)(function(){return n.polygonToolSelectionService.preserveEntityFilteringChanged().pipe((0,_.P)())}),(0,fe.w)(function(){return n.prepareWebWorkerPayload()}),(0,fe.w)(function(){return n.waitForPolygonToolWebWorkerResponse()}),(0,fe.w)(function(d){return n.waitForLoadedTiles(d,t)}),(0,P.R)(this.destroy$)).subscribe(function(d){n.handlePreserveSelection(t,d.data,n.colorMap)}),this.polygonToolSelectionService.triggerMapPanelAction$.pipe((0,P.R)(this.destroy$)).subscribe(function(d){var M=n.getPolygonToolSettings(n.mineStateService.getSelectedMineArea());n.handleMapPanelActions(d,n.map,M),n.cdr.detectChanges()}),this.patternsService.selectedPolygons$.pipe((0,Ne.b)(function(){n.resetPolygonToolState()}),(0,P.R)(this.destroy$)).subscribe(function(d){n.panelInfo=null,n.shortHoleEnabled[n.mapType]=!1,n.mapStateService.dataPointsData$.next({}),n.mapStateService.cleanAssays();var M=Array.from(d).map(function($){return String((null==$?void 0:$.value)||$)});if(g.WC.removeLayers(n.map,[O.r.PRECONDITIONING,O.r.BLASTIQ_COMMENT,S.a.HOTSPOTS],[]),n.isAssays&&g.WC.removeLayers(n.map,[S.a.COLORCODES,"colorCodes_hole_id",S.a.COLORCODES_SELECTED,pt,Ue,mo,O.r.WEATHERED],[]),0===M.length){if(n.map&&!n.kpiPage){g.WC.resizeMap(n.map),n.resetVisibilitySetting();var Y=["polygons","polygons-outline","polygons-dashed-outline","blastDirection",O.r.PRECONDITIONING,O.r.BLASTIQ_COMMENT,O.r.NOT_LINED,O.r.POINTS_MISFIRES,O.r.COLORCODES_MISFIRES,O.r.PUMPED,Ve,ye,Gt].concat((0,b.Z)(n.angledHolesLayers),[S.a.COLORCODES_CAVED_ID,S.a.POLYGONS_LABEL_PATTERN_ID,"preconditionAreas","preconditionAreas-outline",Ut,Yt,Wt,S.a.HOTSPOTS]);g.WC.removeLayers(n.map,Y,["polygons","preconditionAreas","blastPerimeter"])}}else n.patternsService.setPolygonIdField(),n.colorMap=n.initColorMap(),n.cdr.detectChanges();n.cdr.detectChanges()}),this.patternsService.polygons$.pipe((0,y.h)(function(d){return d&&!d.doNotTriggerUpdate}),(0,P.R)(this.destroy$)).subscribe(function(d){var M,E=n.patternsService.getSelectedPatternIds();n.colorMap=n.initColorMap(),n.resetTableFilterByPolygonTool(),n.featureCollectionForRearrange=d.patternPolygons,n._settings.comparisonMode||n.addDrawControl(),n.resetVisibilitySetting(),n.disableClick=!1,n.polygonsData=d,n.mapStateService.rearrangeMapBordersToLoadedPolygons$.next(!0),n.shortHoleEnabled[n.mapType]=!1,0!==E.length||n.kpiPage||g.WC.removeLayers(n.map,["polygons","polygons-outline","polygons-dashed-outline","blastDirection",S.a.COLORCODES_CAVED_ID,O.r.NOT_LINED,O.r.PUMPED,O.r.POINTS_MISFIRES,O.r.COLORCODES_MISFIRES,Ve,ye,"preconditionAreas","preconditionAreas-outline",Ut,Yt,Wt,S.a.HOTSPOTS],["polygons","preconditionAreas","blastPerimeter"]),null===(M=n.map.getSource("polygons"))||void 0===M||M.setData(d.patternPolygons),n.cdr.detectChanges()}),this.coalSeamsDataService.coalSeamMapData$.pipe((0,P.R)(this.destroy$)).subscribe(function(d){var M;o.WO.checkLayers(["coal-seams"],n.map)||g.WC.drawCoalSeams(n.map);var E=!(0,C.isEmpty)(d.features)&&!(null===(M=n._settings)||void 0===M?void 0:M.patternMode)&&n.polygonToolSelectionService.isPolygonToolAvailable(n.colorMap);n.map.setLayoutProperty("coal-seams","visibility",E?"visible":"none"),n.map.getSource("coal-seams").setData(d),n.cdr.markForCheck()})}},{key:"onFilteringCompleted",value:function(t){this.polygonToolSelectionService.setPreserveEntityFilteringState(t),!1===t&&this.resetState()}},{key:"showPanel",value:function(t,n){this.selectedHole=n.properties.uniqueHoleId,this.kpiPage&&this.mapStateService.setHolesTableData$.next({type:"getSelectedHole",hole:this.selectedHole});var d=o.pE.findHoleFeatureById(this.selectedHole,this.polygonsData.holes);t!==so&&t!==lo&&this.permission.holesTable.visible&&this.kpiPage&&g.LZ.autoScroll(this.selectedHole,"hole-details-table",111),this.panelInfo={type:t,defaultHoleData:o.pE.getHoleDataProperties(d.properties)},this.cdr.detectChanges()}},{key:"showPanelForAssays",value:function(t){var n,d=o.pE.findHoleFeatureById(t.uniqueHoleId,null===(n=this.mapStateService.assays$.getValue())||void 0===n?void 0:n.current);this.panelInfo={type:_o,assayHoleData:d.properties,colorMap:this.colorMap},this.cdr.detectChanges()}},{key:"resetState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.holeStateService.resetHoleState(),this.panelInfo=null,n){var M=n===Ge?wt:Ge;this.compareService.resetMatchError(M)}this.isMainMap&&(this.cleanPolygonToolSelections(),this.polygonToolSelectionService.cleanMapSelectionState(),this.polygonToolSelectionService.getChartsData()&&!this.polygonToolSelectionService.getChartsData().reset&&this.polygonToolSelectionService.chartsDataBySelection$.next({charts:[],reset:!0,reduplicate:d}),t||this.updateMapSettings({multiHoles:!1,multiDataPoints:!1,startDraw:!1}),this.cdr&&!this.cdr.destroyed&&this.cdr.detectChanges(),this.resetTableFilterByPolygonTool(),this.disableClick=!1),g.pf.resetPaintProperties(this.map),o.WO.resetSelectedState(this.map,this.patternsService.getPolygonIdField(),this._settings.patternMode)}},{key:"showPatternInfo",value:function(t){o.WO.highlightSelectedPolygon(this.map,t,"polygons",this._settings.patternMode),this.panelInfo={type:po,lngLat:t.properties.center,feature:t},this.cdr.detectChanges()}},{key:"onPressingEscapeButton",value:function(){this.isMainMap&&this.hasStartedToDraw&&(this.handleStopDrawing(),this.handleSavingDimmingEffectOnStopDraw())}},{key:"handleStopDrawing",value:function(){this.updatedMapSettings&&(this.updateMapSettings({startDraw:!1}),!this.updatedMapSettings.multiDataPoints&&!this.updatedMapSettings.multiHoles&&(this.disableClick=!1),this.cdr.detectChanges()),this.draw.changeMode("simple_select"),this.polygonToolSelectionService.setPolygonSelectionState(!1)}},{key:"duplicate",value:function(t,n){if(this.draw&&this.map){var d=n.features,M=n.side;this.resetState(!1,M,!0),this.disableClick=!0,this.draw.add(d),this.beforeProcessingSelection(),this.handlePolygonToolSelection(t,d,M)}}},{key:"updateMapSettings",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.updatedMapSettings;this.updatedMapSettings=Object.assign(Object.assign({},n),t)}},{key:"handleStartDraw",value:function(){this.draw.changeMode("draw_polygon"),this.updateMapSettings({startDraw:!0}),this.disableClick=!0,this.polygonToolSelectionService.setPolygonSelectionState(!0),this.cdr.detectChanges()}},{key:"isPreservingSelectionsAvailable",value:function(t){return this.polygonToolSelectionService.isPolygonToolAvailable(t,this.mineStateService.getSelectedMineArea())&&this.isMainMap&&this._settings&&this._settings.controlsVisible&&(this._settings.holesMode||this._settings.dataPointsMode)&&this.polygonToolSelectionService.hasActiveSelections()&&this.polygonToolSelectionService.isPolygonToolAvailableInMode(this.mapMode,this.mineStateService.getSelectedMineArea())}},{key:"removeHolesMarkers",value:function(){var t=this;["points"].forEach(function(n){t.map.setLayoutProperty("".concat(n,"_id"),"visibility",t._settings.holesMode?"visible":"none"),t.map.setLayoutProperty("".concat(n,"_redrilled"),"visibility",t._settings.holesMode?"visible":"none"),t.map.setLayoutProperty("".concat(n,"_overloaded"),"visibility",t._settings.holesMode?"visible":"none")})}},{key:"showPolygonTool",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,d=this.mineStateService.getSelectedMineArea(),M=this.polygonToolSelectionService.isPolygonToolAvailableInMode(this.mapMode,d);this.showPolygonToolButton=!(!M||n.dataPointsMode&&(0,o.GV)(this.colorMap))&&(!("mapSettings"!==t||!this.isMainMap||!n.holesMode&&!n.dataPointsMode||!this.polygonToolSelectionService.isPolygonToolAvailable(this.colorMap,d))||!n.patternMode&&!!this.polygonToolSelectionService.isPolygonToolAvailable(this.colorMap,d)&&"colorMap"===t&&this.isMainMap&&this.polygonToolSelectionService.isPolygonToolAvailable(this.colorMap,d)),this.cdr.detectChanges()}},{key:"handlePreserveSelection",value:function(t,n,d){var M=this,E=n.allIds,Y=n.selections,$=n.allIdMapping,oe=this.getPolygonToolSettings(this.mineStateService.getSelectedMineArea());this.isMainMap&&(0,o.JH)(this.mapMode,function(){M.panelInfo={type:kt},M.updateMapSettings({multiDataPoints:!0,multiHoles:!1})},function(){M.panelInfo={type:Ft},M.updateMapSettings({multiDataPoints:!1,multiHoles:!0})})(),this.polygonToolSelectionService.updateMapSelectionState(this.mapMode,"preserveSelection",{selectionsData:Y,colorMap:d}),t.getLayer(oe.selectingLayer)&&(this.polygonToolSelectionService.setDimmedFilter(oe,t,E),this.filterTableByPolygonTool(E,$)),this.finishProcessingSelection()}},{key:"getPolygonToolSettings",value:function(t){var n=function(){var M;return(0,T.Z)(M={},io,g.ZA.isMetalMine(t)?ue.polygonToolBlastabilitySettingsCopper:ue.polygonToolBlastabilitySettingsCoal),(0,T.Z)(M,ro,ue.polygonToolLoadingSettings),(0,T.Z)(M,a.N.DIGGING_CONDITIONS_3D,ue.polygonToolDiggingConditions3dMapSettings),(0,T.Z)(M,co,g.ZA.isMetalMine(t)?null:ue.polygonToolShortHoleSettinsCoal),(0,T.Z)(M,"default",ue.polygonToolColorMapSettings),M};return null===this.colorMap?ue.polygonToolLoadingSettings:(0,o.JH)(this.mapMode,ue.polygonToolDataPointsSettings,n()[this.colorMap]||n().default)}},{key:"addLayersHoverEvent",value:function(t){var n=this;this.map.on(t,"coal-seams",function(d){n.mapTooltipHelper.showPopup(n.map,n.popup,d)})}},{key:"removeLayersHoverEvent",value:function(t){var n=this;this.map.on(t,"coal-seams",function(){n.mapTooltipHelper.hidePopup(n.map,n.popup)})}},{key:"onHoleClickHandler",value:function(t,n,d){var M=this;this.map.on(t,n,function(E){if(M.disableClick||M.disableClickByShovelOpEnabled)E.preventDefault();else{if(M.sendHoleClickEvent(E.features[0].properties.uniqueHoleId),M.colorMap!==M.colorMapEnum.BLASTABILITY||n!==Ue&&n!==ye){if(M.colorMap===M.colorMapEnum.SHOVEL_ELEVATION)return;M.map.setFilter("selected_".concat(d),["in","uniqueHoleId"].concat(E.features[0].properties.uniqueHoleId))}else M.map.setFilter("selected_blastabilityMidZone",["in","uniqueHoleId"].concat(E.features[0].properties.uniqueHoleId));M.isAssays?M.showPanelForAssays(E.features[0].properties):M.showPanel(M.legend,E.features[0])}})}},{key:"sendHoleClickEvent",value:function(t){(this.colorMap===this.colorMapEnum.DRILLING_XY_COLLAR_DEVIATION||this.colorMap===this.colorMapEnum.DRILL_COMPLIANCE&&this.isHVC)&&this.isHVC&&this.holeStateService.setHoleState({eventType:fo,payload:t})}},{key:"shovelOperatorsEventDataPanel",value:function(t){var n=this;this.shovelOperatorsEventData&&this.shovelOperatorsEventData.hasOwnProperty("features")&&(setTimeout(function(){n.mapPanelContainer.scrollToOpEvent(t)},0),this.panelInfo={feature:t,type:this.colorMap}),this.cdr.detectChanges()}},{key:"cleanPolygonToolSelections",value:function(){this.draw&&(g.WC.overridePolygonToolStyles(this.map,W.C.SANDY_BROWN),this.draw.changeMode("simple_select"),this.draw.deleteAll())}},{key:"addDrawControl",value:function(){if(this.permission.map.controls.polygonTool&&!this.draw){var t=g.WC.addControls(this.map,{draw:{position:"top-right"}});this.draw=t.draw}}},{key:"handlePolygonToolSelection",value:function(t,n,d){var M=this;this.polygonToolSelectionService.rearrangeMapBordersToDrawnArea(t,n).pipe((0,fe.w)(function(){return M.prepareWebWorkerPayload()}),(0,fe.w)(function(){return M.waitForPolygonToolWebWorkerResponse()}),(0,fe.w)(function(E){return M.waitForLoadedTiles(E,t)}),(0,P.R)(this.destroy$)).subscribe(function(E){try{M.handleDrawSelection(t,E.data,d)}catch(Y){M.finishProcessingSelection(),M.draw.delete(n.features[0].id),M.handleStopDrawing()}finally{M.finishProcessingSelection()}})}},{key:"prepareWebWorkerPayload",value:function(){var t=this;return this.mapFacadeService.loadFeatureCollection().pipe((0,Ne.b)(function(n){return t.sendWebWorkerPayload(n)}),(0,_.P)())}},{key:"waitForPolygonToolWebWorkerResponse",value:function(){return(0,Xn.R)(this.worker,"message").pipe((0,_.P)())}},{key:"waitForLoadedTiles",value:function(t,n){return(0,qn.F)(1e3).pipe((0,Qn.h)(t),(0,y.h)(function(){return n.areTilesLoaded()}),(0,_.P)())}},{key:"sendWebWorkerPayload",value:function(t){this.worker.postMessage({selectedFeatures:this.draw.getAll().features,idField:this.getPolygonToolSettings(this.mineStateService.getSelectedMineArea()).idField,legendExpression:this.mapStateService.dimmedExpression$.getValue().value,featureCollection:t,needsTableUpdate:this.isDataPointTablePresent})}},{key:"handleDrawSelection",value:function(t,n,d){var M=this,E=n.selections,Y=n.allIds,$=n.allIdMapping,oe=E[E.length-1].selectionId,ce=this.getPolygonToolSettings(this.mineStateService.getSelectedMineArea());0===E[E.length-1].ids.length?(this.draw.delete(oe),this.handleStopDrawing(),this.beforeEmptySelection(),this.isComparePage&&d&&this.compareService.setNoSelectedHoleError(d,this.colorMap),this.handleSavingDimmingEffectOnStopDraw()):(this.isComparePage&&d&&this.compareService.resetMatchError(d===Ge?wt:Ge),this.polygonToolSelectionService.setDimmedFilter(ce,t,Y),this.filterTableByPolygonTool(Y,$),this.polygonToolSelectionService.updateMapSelectionState(this.mapMode,"draw",{colorMap:this.colorMap,selectionsData:E}),this.isMainMap?(0,o.JH)(this.mapMode,function(){M.panelInfo={type:kt},M.updateMapSettings({multiDataPoints:!0,multiHoles:!1})},function(){M.panelInfo={type:Ft},M.updateMapSettings({multiDataPoints:!1,multiHoles:!0})})():(this.updateMapSettings({multiDataPoints:!1,multiHoles:!1}),this.disableClick=!1))}},{key:"beforeProcessingSelection",value:function(){this.polygonToolDataIsProcessing=!0,this.mapStateService.mapLoading$.next(!0),this.cdr.detectChanges()}},{key:"finishProcessingSelection",value:function(){this.polygonToolDataIsProcessing=!1,this.mapStateService.mapLoading$.next(!1),this.isPreservedSelectionByLegendFilter=!1,this.polygonToolSelectionService.setPreserveEntityFilteringState(null===this.polygonToolSelectionService.getPreserveEntityFilteringState()&&null),this.cdr.detectChanges()}},{key:"filterDataPointTable",value:function(t){this.isDataPointTablePresent&&this.dataPointTableFilters.emit(t)}},{key:"resetDataPointTableFilter",value:function(){this.isDataPointTablePresent&&this.dataPointTableFilters.emit("")}},{key:"filterHoleTable",value:function(t){var n=t.length?t.join(","):"null";this.isHoleTablePresent&&this.holesTableFilters.emit(n)}},{key:"resetHoleTableFilter",value:function(){this.isHoleTablePresent&&this.holesTableFilters.emit("")}},{key:"filterTableByPolygonTool",value:function(t,n){this.filterHoleTable(t),this.filterDataPointTable(n)}},{key:"resetTableFilterByPolygonTool",value:function(){this.resetDataPointTableFilter(),this.resetHoleTableFilter()}},{key:"resetVisibilitySetting",value:function(){this.visibilitySetting&&(this.legend=null,this.visibilitySetting.resetForm())}},{key:"beforeEmptySelection",value:function(){this.polygonToolSelectionService.hasActiveSelections()&&this.polygonToolSelectionService.updateMapSelectionState(this.mapMode,"selectionEmpty",Object.assign({},this.polygonToolSelectionService.getMapSelectionState(this.mapMode)))}},{key:"handleMapPanelActions",value:function(t,n,d){var M=t.ids,E=t.type,Y=t.selectionId,$=t.extraInformation,oe=t.idMapping;if("duplicate"===E&&this.draw){var ce=this.draw.getAll();this.compareService.polygonTool.next({features:ce,side:$})}"startDraw"===E?this.handleStartDrawType(d,n):"stopDraw"===E&&this.hasStartedToDraw&&this.isMainMap?(this.handleStopDrawing(),this.handleSavingDimmingEffectOnStopDraw()):"delete"===E&&this.handleDeleteType(Y,M,d,oe,n)}},{key:"handleSavingDimmingEffectOnStopDraw",value:function(){if(this.isMainMap&&this.polygonToolSelectionService.hasActiveSelections()){var t=this.polygonToolSelectionService.getPreviousEntityIds(this.mapMode);this.polygonToolSelectionService.setDimmedFilter(this.getPolygonToolSettings(this.mineStateService.getSelectedMineArea()),this.map,t)}}},{key:"handleStartDrawType",value:function(t,n){var d=this;this.draw&&this.draw.changeMode("draw_polygon"),g.WC.overridePolygonToolStyles(this.map,W.C.HELIOTROPE),this.isMainMap?((0,o.JH)(this.mapMode,function(){return d.updateMapSettings({startDraw:!0,multiDataPoints:!0,multiHoles:!1})},function(){return d.updateMapSettings({startDraw:!0,multiDataPoints:!1,multiHoles:!0})})(),this.disableClick=!0):(this.updateMapSettings({startDraw:!1,multiDataPoints:!1,multiHoles:!1}),this.disableClick=!1),this.polygonToolSelectionService.removeDimmingFilter(t,n)}},{key:"handleDeleteType",value:function(t,n,d,M,E){this.draw&&(this.draw.delete(t),this.hasStartedToDraw&&this.isMainMap&&this.handleStopDrawing()),this.isMainMap&&(this.polygonToolSelectionService.hasActiveSelections()?this.filterTableByPolygonTool(n,M):this.resetTableFilterByPolygonTool(),n.length?this.polygonToolSelectionService.setDimmedFilter(d,E,n):this.polygonToolSelectionService.removeDimmingFilter(d,E)),g.WC.overridePolygonToolStyles(this.map,W.C.SANDY_BROWN)}},{key:"resetPolygonToolState",value:function(){this.showPolygonToolButton=!1,this.isMainMap&&this.hasStartedToDraw&&this.handleStopDrawing(),this.polygonToolSelectionService.hasActiveSelections()&&this.resetState(),this.polygonToolDataIsProcessing&&this.finishProcessingSelection()}},{key:"initColorMap",value:function(){var t=this.mapStateService.selectedColorMap$.getValue(),n=this.mineStateService.getSelectedMineArea();return null===t?to.M.getDefaultColorMap(n):t}}]),s}(g.eO);return c.\u0275fac=function(r){return new(r||c)(e.Y36(e.sBO),e.Y36(F.I3),e.Y36(F.$A),e.Y36(F.yU),e.Y36(F.Hj),e.Y36(me.nY),e.Y36(F.NL),e.Y36(v.F0),e.Y36(me.zY),e.Y36(F.c5),e.Y36(lt.C),e.Y36(F.$c),e.Y36(F.P2))},c.\u0275dir=e.lG2({type:c,viewQuery:function(r,s){var l;1&r&&(e.Gf(Nt,5),e.Gf(no,5)),2&r&&(e.iGM(l=e.CRH())&&(s.visibilitySetting=l.first),e.iGM(l=e.CRH())&&(s.mapPanelContainer=l.first))},inputs:{mapType:"mapType",kpiPage:"kpiPage",compareSide:"compareSide",settings:"settings"},outputs:{mapLoaded:"mapLoaded",isShovelOpEventEnabled:"isShovelOpEventEnabled",selectedVisibility:"selectedVisibility",holesTableFilters:"holesTableFilters",dataPointTableFilters:"dataPointTableFilters"},features:[e.qOj]}),c}(),jt=i(47903),dt=i(56121),ho=i(21265),Co=i(11066),Mo=i(86411),bo=i(13817),Oo=function(){var c=function(f){(0,G.Z)(s,f);var r=(0,p.Z)(s);function s(l,t,n){var d;return(0,x.Z)(this,s),(d=r.call(this)).mapStateService=l,d.cdr=t,d.panelService=n,d.shovelOperatorsEventCopy={features:[]},d.shovelOperatorsEvent={features:[]},d.map=null,d}return(0,B.Z)(s,[{key:"shovelOpEventData",set:function(t){this.shovelOperatorsEventCopy.features=t.features,this.shovelOperatorsEvent.features=t.features}},{key:"ngOnDestroy",value:function(){(0,L.Z)((0,k.Z)(s.prototype),"ngOnDestroy",this).call(this)}},{key:"ngOnInit",value:function(){var t=this;this.mapStateService.selectedShovelOperatorsEvent$.pipe((0,P.R)(this.destroy$)).subscribe(function(n){var E,d=n.filters,M=n.events;!d||(o.WO.checkLayers(["unclustered-point","unclustered-point-abbr"],t.map)&&(t.map.setFilter("unclustered-point",["in","categoryKey"].concat((0,b.Z)(d))),t.map.setFilter("unclustered-point-abbr",["in","categoryKey"].concat((0,b.Z)(d)))),M?(t.shovelOperatorsEventCopy=M,t.shovelOperatorsEvent=t.filterByLegend(M,d)):t.shovelOperatorsEvent=t.filterByLegend(t.shovelOperatorsEventCopy,d),t.panelService.emitOperatorEventData(t.shovelOperatorsEvent),null===(E=t.map.getSource("shovelOperatorsEvent"))||void 0===E||E.setData(t.shovelOperatorsEvent),t.cdr.detectChanges())})}},{key:"filterByLegend",value:function(t,n){return{features:t.features.filter(function(M){return n.includes(M.properties.categoryKey)})}}}]),s}(g.eO);return c.\u0275fac=function(r){return new(r||c)(e.Y36(F.I3),e.Y36(e.sBO),e.Y36(me.dJ))},c.\u0275cmp=e.Xpm({type:c,selectors:[["dabo-shovel-event-filter"]],inputs:{map:"map",opEventEnabled:"opEventEnabled",visibilityEnabled:"visibilityEnabled",shovelOpEventData:"shovelOpEventData"},features:[e.qOj],decls:0,vars:0,template:function(r,s){},styles:[".disabled[_ngcontent-%COMP%]{color:#d6d8dc!important}.mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{width:calc(100% - 23px)}  .first-date-class{background:whitesmoke;border-radius:100%}  button.mat-icon-button:hover:enabled{background-color:unset!important;color:unset!important}  .mat-form-field-label:enabled,   .mat-input-element:enabled{color:#0165bd!important;padding-left:5px}  .map-filter__date-filter .mat-form-field-label{padding-left:5px}  .mat-focused .mat-form-field-label{color:transparent!important}  .mat-form-field{font-size:14px}  .mat-form-field-underline{display:none}  .icon-close{cursor:pointer}mat-icon[_ngcontent-%COMP%]{width:18px;height:24px;padding-top:3px;font-size:18px;position:relative;float:right;top:-3px;cursor:pointer;color:#0165bd}.map-filter[_ngcontent-%COMP%]{width:auto;height:auto;position:relative;box-sizing:border-box}.map-filter[_ngcontent-%COMP%]   .filter-wrapper[_ngcontent-%COMP%]{padding:8px 14px 16px;background-color:#fff;max-height:471px;overflow:auto}.map-filter[_ngcontent-%COMP%]   .filter-wrapper.date-range-only[_ngcontent-%COMP%]{padding-bottom:0}.map-filter.opened[_ngcontent-%COMP%]{width:285px;box-shadow:1px 1px 15px 2px #0003}.map-filter__btn[_ngcontent-%COMP%]{display:inline-flex;flex-wrap:nowrap;align-items:center;height:32px;min-width:32px;font-size:12px;border:none;transition:none}.map-filter__btn.opened[_ngcontent-%COMP%]{min-width:100%;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom:1px solid #f3f5ff;background-color:#fff!important;box-shadow:0 8px 24px #586b7a1a}.map-filter__btn.opened[_ngcontent-%COMP%]:hover{color:#586b7a}.map-filter__btn.opened[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]:before{color:#586b7a}.map-filter__btn.opened[_ngcontent-%COMP%]:hover   .icon-filter[_ngcontent-%COMP%]:before{color:#0165bd}.map-filter__btn.opened[_ngcontent-%COMP%]   .icon-filter[_ngcontent-%COMP%]:before, .map-filter__btn.opened[_ngcontent-%COMP%]   .icon-filter[_ngcontent-%COMP%]:hover{color:#0165bd}.map-filter__btn[_ngcontent-%COMP%]   .icon-filter[_ngcontent-%COMP%]{margin-right:0}.map-filter__btn[_ngcontent-%COMP%]   .icon-close[_ngcontent-%COMP%]{position:absolute;right:10px;opacity:.4}.map-filter__btn[_ngcontent-%COMP%]   .icon-close[_ngcontent-%COMP%]:hover, .map-filter__btn[_ngcontent-%COMP%]   .icon-close[_ngcontent-%COMP%]:focus{opacity:1}.map-filter__footer[_ngcontent-%COMP%]{padding:0 14px 10px;background-color:#fff;border-radius:0 0 2px 2px}.map-filter__footer[_ngcontent-%COMP%]   .toggle-selection[_ngcontent-%COMP%], .map-filter__footer[_ngcontent-%COMP%]   .apply[_ngcontent-%COMP%]{width:50%}.map-filter__btn[_ngcontent-%COMP%]{min-width:32px}.map-filter__btn[_ngcontent-%COMP%]   .icon-filter[_ngcontent-%COMP%]{margin-right:0;margin-left:2px}.map-filter__btn[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]{margin-left:10px}.map-filter__list[_ngcontent-%COMP%]{padding:0}.map-filter__list-item[_ngcontent-%COMP%]{padding:0 4px}.map-filter[_ngcontent-%COMP%]   .filter-wrapper[_ngcontent-%COMP%]{padding:8px 14px 16px;background-color:#fff;max-height:555px;overflow:auto}.map-filter[_ngcontent-%COMP%]   .filter-list-wrapper[_ngcontent-%COMP%]{padding:4px 0}.map-filter[_ngcontent-%COMP%]   .flex-horizontal[_ngcontent-%COMP%]{display:flex}.map-filter[_ngcontent-%COMP%]   .flex-horizontal[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{flex:1}.map-filter[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-size:13px;color:#2e384dd9;text-transform:capitalize}.map-filter[_ngcontent-%COMP%]   .filter-name[_ngcontent-%COMP%]{color:#2e384d57}"],changeDetection:0}),c}(),vo=i(97740),Po=i(51275),So=i(30304),yo=i(1400),Eo=i(16952),To=i(25245);function Do(c,f){if(1&c){var r=e.EpF();e.TgZ(0,"div",1)(1,"span",2),e._UZ(2,"mat-icon",3),e.ALo(3,"transloco"),e.qZA(),e.TgZ(4,"span",4),e._uU(5),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return e.CHM(r),e.oxw().closeNotification()}),e.TgZ(7,"mat-icon",6),e._uU(8,"close"),e.qZA()()()}if(2&c){var s=e.oxw();e.xp6(2),e.s9C("matTooltip",e.lcZ(3,2,"map.missing_data")),e.xp6(3),e.Oqu(s.notificationText)}}var Io=function(){var c=function(f){(0,G.Z)(s,f);var r=(0,p.Z)(s);function s(l,t,n){var d;return(0,x.Z)(this,s),(d=r.call(this)).cdr=l,d.treeService=t,d.localizationLocalService=n,d}return(0,B.Z)(s,[{key:"ngOnInit",value:function(){var t=this;this.treeService.noData$.pipe((0,y.h)(function(n){return!!n}),(0,P.R)(this.destroy$)).subscribe(function(n){n.hasOwnProperty("type")&&(t.notificationText=t.getNotificationsText(n.type)),t.toggleNotifications(n.show)})}},{key:"showNotification",value:function(){var t=this;this.showMessage=!0,this.showMessage&&(this.timer=setTimeout(function(){t.closeNotification()},3e4)),this.cdr.markForCheck()}},{key:"closeNotification",value:function(){this.showMessage=!1,clearTimeout(this.timer),this.cdr.detectChanges()}},{key:"getNotificationsText",value:function(t){return"pattern"===t||"shovelElevation"===t||"hotSpotsView"===t?this.localizationLocalService.translateText("map.missing_data"):"shovelOperatorFeedback"===t&&this.isMainMap?"There is no Shovel Op. Feedback for the selected elevation level":t===a.N.SHOVEL_OPERATOR_ALARM&&this.isMainMap?"There is no Shovel Op. Alarms for the selected elevation level":void 0}},{key:"toggleNotifications",value:function(t){t&&this.notificationText?this.showNotification():this.closeNotification()}}]),s}(g.eO);return c.\u0275fac=function(r){return new(r||c)(e.Y36(e.sBO),e.Y36(F.yU),e.Y36(Eo.bM))},c.\u0275cmp=e.Xpm({type:c,selectors:[["dabo-map-no-data-message"]],inputs:{isMainMap:"isMainMap"},features:[e.qOj],decls:1,vars:1,consts:[["class","map-no-data-message__container","fxLayout","row",4,"ngIf"],["fxLayout","row",1,"map-no-data-message__container"],[1,"map-no-data-message__icon__alert"],["fxLayoutAlign","center center",1,"icon","icon-alert",3,"matTooltip"],[1,"map-no-data-message__message"],[1,"map-no-data-message__close-button",3,"click"],["fxLayoutAlign","center center",1,"map-no-data-message__icon__close"]],template:function(r,s){1&r&&e.YNc(0,Do,9,4,"div",0),2&r&&e.Q6J("ngIf",s.showMessage)},directives:[Ce.O5,Oe.xw,To.Hw,Oe.Wh,Te.gM],pipes:[u.Ot],styles:[".map-no-data-message__container[_ngcontent-%COMP%]{max-width:16rem;min-width:9rem;background-color:#fff;align-items:center;padding:6px 8px;border-radius:18px;color:#f54f63;font-family:Rubik,sans-serif;font-size:11px;font-weight:500}.map-no-data-message__icon__alert[_ngcontent-%COMP%]{padding:4px}.map-no-data-message__icon__close[_ngcontent-%COMP%]{padding:4px;width:18px;height:18px;font-size:16px;font-weight:600;color:#586b7a}.map-no-data-message__message[_ngcontent-%COMP%]{padding:0 4px;line-height:1.18}.map-no-data-message__close-button[_ngcontent-%COMP%]{padding:0;background-color:#0000;border:0 #f0f8ff;cursor:pointer}.map-no-data-message__close-button[_ngcontent-%COMP%]:hover{opacity:1}.map-no-data-message__close-button[_ngcontent-%COMP%]:focus, .map-no-data-message__close-button[_ngcontent-%COMP%]:active{outline:none}.icon-alert[_ngcontent-%COMP%]{width:16px;height:16px}.icon-alert[_ngcontent-%COMP%]:before{color:#f54f63}"],changeDetection:0}),c}(),Ao=function(f,r){return{map:f,mapType:r}};function Lo(c,f){if(1&c){var r=e.EpF();e.TgZ(0,"dabo-visibility-mode-form",19),e.NdJ("focusOutEmitter",function(){return e.CHM(r),e.oxw(2).focusOut()})("visibilityEmitter",function(t){return e.CHM(r),e.oxw(2).updateVisibilityState(t)}),e.qZA()}if(2&c){var s=e.oxw(2);e.Q6J("isReportsPage",s.kpiPage)("mapData",e.WLB(4,Ao,s.map,s.mapType))("mapSettings",s._settings)("shovelOperator","main"===s.mapType)}}function No(c,f){if(1&c&&(e.TgZ(0,"div",17),e.YNc(1,Lo,1,7,"dabo-visibility-mode-form",18),e.qZA()),2&c){var r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.map)}}function Ro(c,f){if(1&c){var r=e.EpF();e.TgZ(0,"dabo-filter",22),e.NdJ("completeFilteringEmitter",function(t){return e.CHM(r),e.oxw(2).onFilteringCompleted(t)}),e.qZA()}if(2&c){var s=e.oxw(2);e.Q6J("filtersDisabled",s.disableClick)("hidden",s.isFilterHidden())("map",s.map)("mapType",s.mapType)("colorMap",s.colorMap)("mapSettings",s._settings)("mineArea",s.mineStateService.getSelectedMineArea())("isPolygonToolUsed",s.polygonToolSelectionService.hasActiveSelections())}}function xo(c,f){if(1&c&&e._UZ(0,"dabo-shovel-event-filter",23),2&c){var r=e.oxw(2);e.Q6J("shovelOpEventData",r.shovelOperatorsEventData)("opEventEnabled",r._settings.opEventEnabled)("map",r.map)("visibilityEnabled",r.colorMap)}}function wo(c,f){if(1&c&&(e.TgZ(0,"div",17),e.YNc(1,Ro,1,8,"dabo-filter",20),e.ALo(2,"async"),e.YNc(3,xo,1,4,"dabo-shovel-event-filter",21),e.qZA()),2&c){var r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.map&&!r.isCda&&e.lcZ(2,2,r.distributionChartService.patternIdsForRequest$).length),e.xp6(2),e.Q6J("ngIf","main"===r.mapType&&r._settings.opEventEnabled&&!r._settings.loading)}}function ko(c,f){if(1&c){var r=e.EpF();e.TgZ(0,"div",24)(1,"button",25),e.NdJ("click",function(){return e.CHM(r),e.oxw().onRemoveSelection()}),e._uU(2),e.ALo(3,"transloco"),e.qZA()()}if(2&c){var s=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,1,"mapControlsTranslation."+s.getRemoveSelectionMessage())," ")}}function Fo(c,f){if(1&c&&e._UZ(0,"dabo-coordinates-bar",28),2&c){var r=e.oxw(2);e.Q6J("map",r.map)}}function Bo(c,f){if(1&c&&(e.TgZ(0,"mgl-control",26),e.YNc(1,Fo,1,1,"dabo-coordinates-bar",27),e.qZA()),2&c){var r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.map)}}function Zo(c,f){1&c&&(e.TgZ(0,"mgl-control",26),e.Hsn(1),e.qZA())}var Ho=function(f,r){return{compare:f,singleItem:r}};function Go(c,f){if(1&c){var r=e.EpF();e.TgZ(0,"mgl-control",26)(1,"button",29),e.NdJ("click",function(){return e.CHM(r),e.oxw().togglePolygonTool()}),e.ALo(2,"transloco"),e._UZ(3,"span",30),e.qZA()()}if(2&c){var s=e.oxw();e.xp6(1),e.ekj("active",s.disableClick),e.s9C("matTooltip",e.lcZ(2,5,"mapControlsTranslation.polygon_tool")),e.Q6J("matTooltipPosition","left")("ngClass",e.WLB(7,Ho,s.isComparePage,s.isRDO||s.isCda))}}var Vo=function(f,r){return{type:f,settings:r}};function Uo(c,f){if(1&c){var r=e.EpF();e.TgZ(0,"mgl-control",31)(1,"dabo-map-legend",32),e.NdJ("selectedColormap",function(t){return e.CHM(r),e.oxw().updateVisibilityState(t)})("selectLegend",function(){return e.CHM(r),e.oxw().onLegendFiltering()}),e.qZA()()}if(2&c){var s=e.oxw();e.xp6(1),e.Q6J("updatedSettings",s.updatedMapSettings)("mapType",s.mapType)("legendData",e.WLB(5,Vo,s.legend,s._settings))("map",s.map)("isKPI",s.kpiPage)}}function Yo(c,f){1&c&&e._UZ(0,"div",33)}var Wo=function(){return[12]},gt=function(f,r){return[f,r]},jo=function(f){return[f,49.750330560335236]},Ko=function(){return[180,84]},_t=function(){return[13,39]},Ee=function(f){return[f]},mt=function(){return[6,18]},ft=function(){return[13,6,39,18]},ut=function(f,r,s){return{stretchX:f,stretchY:r,content:s}},Jo=function(f,r){return{opened:f,wide:r}},$o=["*"],Qo=He.x.CHART_CLICK,Kt=He.x.CHART_CLICK_SELECTION,zo=a.N.SHORT_HOLE,Xo=a.N.SHOVEL_OPERATOR_FEEDBACK,qo=a.N.SHOVEL_OPERATOR_ALARM,ea=function(){var c=function(f){(0,G.Z)(s,f);var r=(0,p.Z)(s);function s(l,t,n,d,M,E,Y,$,oe,ce,Q,be,le,U,Ye,ta,na,Jt,$t,oa,aa){var ie;return(0,x.Z)(this,s),(ie=r.call(this,l,t,n,d,M,$,oe,ce,Q,be,le,Jt,$t)).cdr=l,ie.mapStateService=t,ie.permissionsService=n,ie.treeService=d,ie.mineStateService=M,ie.panelService=E,ie.visibilityService=Y,ie.polygonToolSelectionService=$,ie.mapFacadeService=oe,ie.router=ce,ie.compareService=Q,ie.patternsService=be,ie.coalSeamsDataService=le,ie.distributionChartService=U,ie.blastPerimeterService=Ye,ie.subdrillesFilteringService=ta,ie.customEventService=na,ie.holeStateService=Jt,ie.mapApiService=$t,ie.compareControlVisibleService=oa,ie.mapFilterVisibilityService=aa,ie}return(0,B.Z)(s,[{key:"legendVisible",get:function(){var t;return this._settings.controlsVisible&&(null===(t=this.permission.map.controls.viewSwitcher[o.WC.getActiveViewMode(this._settings)])||void 0===t?void 0:t.mapLegend)}},{key:"ngOnInit",value:function(){var t=this;this.panelService.shovelOpEventData$.pipe((0,P.R)(this.destroy$)).subscribe(function(n){t.shovelOperatorsEventData.features=n.features,t.cdr.detectChanges()}),this.panelService.panelInfoData$.pipe((0,P.R)(this.destroy$)).subscribe(function(n){var d=o.WC.updateHoleProperties(t.polygonsData.holes,n),M=o.WC.updatePolygonProperties(t.polygonsData.patternPolygons,n),E=Object.assign(Object.assign({},t.polygonsData),{doNotTriggerUpdate:!0});E.holes=Object.assign(Object.assign({},t.polygonsData.holes),{features:d}),E.patternPolygons=Object.assign(Object.assign({},t.polygonsData.patternPolygons),{features:M}),t.polygonsData=E,t.mapStateService.filterRequestNeeded=!1,t.map.getSource("colorCodes").setData(E.holes),t.map.getSource("polygons").setData(E.patternPolygons),t.patternsService.polygons$.next(E),t.cdr.detectChanges()}),this.visibilityService.isShovelOpModeEnabled$.pipe((0,P.R)(this.destroy$)).subscribe(function(n){t.isShovelOpEventEnabled.emit(n),t.disableClickByShovelOpEnabled=n}),this.mapStateService.rearrangeMapBordersToLoadedPolygons$.pipe((0,h.b)(300),(0,P.R)(this.destroy$)).subscribe(function(n){n&&t.map&&t.featureCollectionForRearrange&&"main"===t.mapType&&o.WC.RearrangeMapBordersToLoadedPolygons(t.map,t.featureCollectionForRearrange,t.polygonToolSelectionService.hasActiveSelections())}),this.handleDistributionChartClickEvents()}},{key:"ngOnDestroy",value:function(){(0,L.Z)((0,k.Z)(s.prototype),"ngOnDestroy",this).call(this),this.map&&(this.map=null,this.panelInfo=null),this.worker&&this.worker.terminate(),this.blastPerimeterService.setBlastPerimeterState(!1),this.subdrillesFilteringService.setSubdrillesState(!0),"main"===this.mapType&&!this._settings.comparisonMode&&(this.patternsService.polygons$.next(null),this.mapStateService.dataPointsData$.next({}),this.mapStateService.cleanAssays())}},{key:"getRemoveSelectionMessage",value:function(){return 1===this.polygonToolSelectionService.getMapSelectionState(this.mapMode).selectionsData.length&&this.hasStartedToDraw?ue.polygonToolButtonLabels.cancelDraw:this.hasStartedToDraw?void 0:2===this.polygonToolSelectionService.getMapSelectionState(this.mapMode).selectionsData.length?ue.polygonToolButtonLabels.removeAllSelections:ue.polygonToolButtonLabels.removeSelection}},{key:"togglePolygonTool",value:function(){if(this.isMainMap)return this.hasStartedToDraw?this.handleStopDrawing():this.handleStartDraw()}},{key:"findOperatorEvent",value:function(t){this.map.setFilter("unclustered-point-selected",["in","eventId"].concat(t.properties.eventId)),this.map.setFilter("unclustered-point-selected-abbr",["in","eventId"].concat(t.properties.eventId)),this.map.flyTo({center:t.geometry.coordinates.slice(),zoom:22})}},{key:"onLegendFiltering",value:function(){![a.N.SHOVEL_ELEVATION,a.N.SHOVEL_OPERATOR_FEEDBACK,a.N.SHOVEL_OPERATOR_ALARM].includes(this.colorMap)&&!this.polygonToolSelectionService.hasActiveSelections()&&this.closeMapPanel()}},{key:"closeMapPanel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.resetState(t),this.kpiPage&&(this.selectedHole=null,this.mapStateService.setHolesTableData$.next({type:"getSelectedHole",hole:this.selectedHole})),this.cdr.detectChanges()}},{key:"showRemoveSelectionButton",value:function(){return(0,o.JH)(this.mapMode,this.updatedMapSettings.multiDataPoints,this.updatedMapSettings.multiHoles&&this.isMainMap)}},{key:"onRemoveSelection",value:function(){this.isMainMap&&(this.hasStartedToDraw?(this.handleStopDrawing(),this.polygonToolSelectionService.updateMapSelectionState(this.mapMode,"selectionEmpty",Object.assign({},this.polygonToolSelectionService.getMapSelectionState(this.mapMode))),this.handleSavingDimmingEffectOnStopDraw()):!this.hasStartedToDraw&&(this.hasActiveSelectionsForDataPoints||this.hasActiveSelectionsForHoles)&&(this.handleStopDrawing(),this.resetState())),this.cdr&&!this.cdr.destroyed&&this.cdr.detectChanges()}},{key:"updateVisibilityState",value:function(t){this.colorMap=t,this.isPreservingSelectionsAvailable(t)||this.resetState(),this.legend=t,"main"===this.mapType&&this.selectedVisibility.emit({colorMap:t,mapType:this.mapType}),this.showPolygonTool("colorMap",this._settings),g.ZA.isMetalMine(this.mineStateService.getSelectedMineArea())||this.checkForPointsColor(t),this.shortHoleEnabled[this.mapType]=!g.ZA.isMetalMine(this.mineStateService.getSelectedMineArea())&&this.colorMap===zo,this.cdr.detectChanges()}},{key:"checkForPointsColor",value:function(t){!this._settings.holesMode||o.WO.checkLayers(["points"],this.map)&&this.map.setPaintProperty("points","circle-color",t===Xo||t===qo?"rgba(0, 30, 58, 0.16)":["get","color"])}},{key:"isFilterHidden",value:function(){return this.mapFilterVisibilityService.isHidden(this.mineStateService.getSelectedMineArea(),this.colorMap)}},{key:"isComparingVisible",value:function(){return this.compareControlVisibleService.isVisible(this.mineStateService.getSelectedMineArea(),this.colorMap,this._settings)}},{key:"onResized",value:function(t){this.map&&this.map.resize()}},{key:"focusOut",value:function(){this.customEventService.event(I.R.SELECT_COLORMAP,{color_map_name:this.colorMap})}},{key:"handleDistributionChartClickEvents",value:function(){var t=this;this.holeStateService.holeStateChanged().pipe((0,y.h)(function(n){return n.eventType===Qo||n.eventType===Kt}),(0,P.R)(this.destroy$)).subscribe(function(n){var d=t.polygonsData.holes.features.find(function(E){return E.properties.uniqueHoleId===n.payload}),M={properties:null==d?void 0:d.properties};n.eventType===Kt&&(t.closeMapPanel(),t.holeStateService.setHoleState({eventType:He.x.MAP_CLICK,payload:n.payload})),t.map.setFilter(S.a.COLORCODES_SELECTED,["in","uniqueHoleId"].concat(n.payload)),t.map.flyTo({center:null==d?void 0:d.geometry.coordinates,zoom:19}),t.showPanel(t.legend,M)})}}]),s}(uo);return c.\u0275fac=function(r){return new(r||c)(e.Y36(e.sBO),e.Y36(yt.I),e.Y36(F.$A),e.Y36(F.yU),e.Y36(F.Hj),e.Y36(me.dJ),e.Y36(st.G),e.Y36(me.nY),e.Y36(F.NL),e.Y36(v.F0),e.Y36(me.zY),e.Y36(F.c5),e.Y36(lt.C),e.Y36(F.wP),e.Y36(jt.nA),e.Y36(jt.Jq),e.Y36(F.qL),e.Y36(F.$c),e.Y36(F.P2),e.Y36(me.xh),e.Y36(me.hA))},c.\u0275cmp=e.Xpm({type:c,selectors:[["dabo-map"]],features:[e._Bn([st.G,{provide:u.Hn,useValue:{scope:"map-controls",alias:"mapControlsTranslation"}}]),e.qOj],ngContentSelectors:$o,decls:21,vars:73,consts:[["daboKeydownEscape","",3,"zoom","center","maxBounds","attributionControl","preserveDrawingBuffer","mapLoad","keydownEmitter","resized"],["id","db_label_black","url","assets/images/db_label_52x24_blck.png",3,"options"],["id","db_label_blue","url","assets/images/db_label_52x24_blue.png",3,"options"],["id","db_label_red","url","assets/images/db_label_52x24_red.png",3,"options"],["position","top-left"],[1,"controls-top-left-container"],[1,"controls-top-left-container__row"],["class","controls-top-left-container__item",4,"ngIf"],["class","wrap-remove-selection",4,"ngIf"],["position","top-right",4,"ngIf"],["position","bottom-right"],["position","bottom-left",4,"ngIf"],[3,"compareSide","panelInfo","isReportsPage","colorMap","ngClass","closeMapPanel","flyToOpEvent"],["mapPanelContainer",""],[1,"map-no-data-message","z-index-2"],[3,"isMainMap"],["class","background-overlay",4,"ngIf"],[1,"controls-top-left-container__item"],["daboPageVisibility","",3,"isReportsPage","mapData","mapSettings","shovelOperator","focusOutEmitter","visibilityEmitter",4,"ngIf"],["daboPageVisibility","",3,"isReportsPage","mapData","mapSettings","shovelOperator","focusOutEmitter","visibilityEmitter"],[3,"filtersDisabled","hidden","map","mapType","colorMap","mapSettings","mineArea","isPolygonToolUsed","completeFilteringEmitter",4,"ngIf"],[3,"shovelOpEventData","opEventEnabled","map","visibilityEnabled",4,"ngIf"],[3,"filtersDisabled","hidden","map","mapType","colorMap","mapSettings","mineArea","isPolygonToolUsed","completeFilteringEmitter"],[3,"shovelOpEventData","opEventEnabled","map","visibilityEnabled"],[1,"wrap-remove-selection"],[1,"reset-btn","mapboxgl-remove-filters",3,"click"],["position","top-right"],[3,"map",4,"ngIf"],[3,"map"],[1,"polygon-tool-btn",3,"matTooltip","matTooltipPosition","ngClass","click"],[1,"icon","icon-map-polygon-tool"],["position","bottom-left"],[3,"updatedSettings","mapType","legendData","map","isKPI","selectedColormap","selectLegend"],[1,"background-overlay"]],template:function(r,s){1&r&&(e.F$t(),e.TgZ(0,"mgl-map",0),e.NdJ("mapLoad",function(t){return s.loadMap(t)})("keydownEmitter",function(){return s.onPressingEscapeButton()})("resized",function(t){return s.onResized(t)}),e._UZ(1,"mgl-image",1)(2,"mgl-image",2)(3,"mgl-image",3),e.TgZ(4,"mgl-control",4)(5,"div",5)(6,"div",6),e.YNc(7,No,2,1,"div",7),e.YNc(8,wo,4,4,"div",7),e.qZA(),e.YNc(9,ko,4,3,"div",8),e.qZA()(),e.YNc(10,Bo,2,1,"mgl-control",9),e.TgZ(11,"mgl-control",10),e._UZ(12,"dabo-map-fullscreen-button"),e.qZA(),e.YNc(13,Zo,2,0,"mgl-control",9),e.YNc(14,Go,4,10,"mgl-control",9),e.YNc(15,Uo,2,8,"mgl-control",11),e.qZA(),e.TgZ(16,"dabo-map-panel",12,13),e.NdJ("closeMapPanel",function(){return s.closeMapPanel()})("flyToOpEvent",function(t){return s.findOperatorEvent(t)}),e.qZA(),e.TgZ(18,"div",14),e._UZ(19,"dabo-map-no-data-message",15),e.qZA(),e.YNc(20,Yo,1,0,"div",16)),2&r&&(e.Akn("mapbox://styles/torbadesign/ck85z0yhv0moz1iqc3usneq0u?optimize=true"),e.Q6J("zoom",e.DdM(24,Wo))("center",s.isCda?e.WLB(25,gt,-71.10252,-30.25389):e.VKq(28,jo,-114.82821338244763))("maxBounds",e.WLB(34,gt,e.WLB(30,gt,-180,-80),e.DdM(33,Ko)))("attributionControl",!1)("preserveDrawingBuffer",!0),e.xp6(1),e.Q6J("options",e.kEZ(44,ut,e.VKq(38,Ee,e.DdM(37,_t)),e.VKq(41,Ee,e.DdM(40,mt)),e.DdM(43,ft))),e.xp6(1),e.Q6J("options",e.kEZ(55,ut,e.VKq(49,Ee,e.DdM(48,_t)),e.VKq(52,Ee,e.DdM(51,mt)),e.DdM(54,ft))),e.xp6(1),e.Q6J("options",e.kEZ(66,ut,e.VKq(60,Ee,e.DdM(59,_t)),e.VKq(63,Ee,e.DdM(62,mt)),e.DdM(65,ft))),e.xp6(4),e.Q6J("ngIf",s._settings.controlsVisible&&!s._settings.patternMode&&s.permission.map.controls.visibilitySettings.visible),e.xp6(1),e.Q6J("ngIf",s._settings.controlsVisible&&(s._settings.holesMode||s._settings.dataPointsMode)&&s.permission.map.controls.visibilitySettings.visible),e.xp6(1),e.Q6J("ngIf",s.showRemoveSelectionButton()),e.xp6(1),e.Q6J("ngIf",s.permission.map.controls.coordinatesBar),e.xp6(3),e.Q6J("ngIf",s.isComparingVisible()&&s._settings.controlsVisible&&!s._settings.patternMode),e.xp6(1),e.Q6J("ngIf",s._settings.controlsVisible&&s.showPolygonToolButton&&s.permission.map.controls.polygonTool),e.xp6(1),e.Q6J("ngIf",s.legendVisible),e.xp6(1),e.Q6J("compareSide",s.compareSide)("panelInfo",s.panelInfo)("isReportsPage",s.kpiPage)("colorMap",s.colorMap)("ngClass",e.WLB(70,Jo,!!s.panelInfo,s._settings.patternMode||s.updatedMapSettings.multiHoles||s.updatedMapSettings.multiDataPoints)),e.xp6(3),e.Q6J("isMainMap",s.isMainMap),e.xp6(1),e.Q6J("ngIf",s.polygonToolDataIsProcessing))},directives:[dt.Gd,ho.h,Co.a5,dt.cu,dt.Fr,Ce.O5,Nt,Mo.D,bo.z,Oo,vo.j,Po.d,Te.gM,Ce.mk,So.T,yo.w,Io],pipes:[Ce.Ov,u.Ot],styles:['@font-face{font-family:dabaha;src:url(/assets/fonts/dabaha.eot);src:url(/assets/fonts/dabaha.eot?#iefix) format("embedded-opentype"),url(/assets/fonts/dabaha.ttf) format("truetype"),url(/assets/fonts/dabaha.woff) format("woff"),url(/assets/fonts/dabaha.svg) format("svg");font-weight:400;font-style:normal;font-display:block}.icon[_ngcontent-%COMP%]{font-family:dabaha!important;speak:none;width:16px;height:16px;font-size:16px;font-style:normal;font-weight:400;font-feature-settings:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon--disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:initial}.icon--hidden[_ngcontent-%COMP%]{display:none}.icon-byc[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\ea04";color:#008cff}.icon-byc[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\ea05";margin-left:-1em;color:#008cff}.icon-byc[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\ea06";margin-left:-1em;color:#586b7a}.icon-byc[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\ea07";margin-left:-1em;color:#586b7a}.icon-information[_ngcontent-%COMP%]:before{content:"\\ea03";color:#586b7a}.icon-colormap[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9fe";color:#f25050}.icon-colormap[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9ff";margin-left:-1em;color:#f2c94c}.icon-colormap[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\ea00";margin-left:-1em;color:#1f8ff7}.icon-colormap[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\ea01";margin-left:-1em;color:#39be04}.icon-colormap[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\ea02";margin-left:-1em;color:#586b7a}.icon-drillbit[_ngcontent-%COMP%]:before{content:"\\e9fc";color:#00afbd}.icon-report[_ngcontent-%COMP%]:before{content:"\\e9fa";color:#0065bd}.icon-quality[_ngcontent-%COMP%]:before{content:"\\e9fb";color:#d5b1f1}.icon-permissions[_ngcontent-%COMP%]:before{content:"\\e9f9";color:#00afbd}.icon-batchedit[_ngcontent-%COMP%]:before{content:"\\e9f8";color:#0165bd}.icon-comment[_ngcontent-%COMP%]:before{content:"\\e9f4";color:#0065bd}.icon-actions[_ngcontent-%COMP%]:before{content:"\\e9f5";color:#0065bd}.icon-add-comment[_ngcontent-%COMP%]:before{content:"\\e9f6";color:#0065bd}.icon-scorecard[_ngcontent-%COMP%]:before{content:"\\e9f7";color:#0065bd}.icon-data-error[_ngcontent-%COMP%]:before{content:"\\e9f3";color:#586b7a}.icon-BL-1z[_ngcontent-%COMP%]:before{content:"\\e9e5";color:#366cfb}.icon-BL-2z-1[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9e6";color:#366cfb}.icon-BL-2z-1[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9e7";margin-left:-1em;color:#eef3fb}.icon-BL-2z-2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9e8";color:#eef3fb}.icon-BL-2z-2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9e9";margin-left:-1em;color:#366cfb}.icon-BL-3z-1[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9ea";color:#366cfb}.icon-BL-3z-1[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9eb";margin-left:-1em;color:#b8d3fd}.icon-BL-3z-1[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9ec";margin-left:-1em;color:#eef3fb}.icon-BL-3z-2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9ed";color:#b8d3fd}.icon-BL-3z-2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9ee";margin-left:-1em;color:#366cfb}.icon-BL-3z-2[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9ef";margin-left:-1em;color:#eef3fb}.icon-BL-3z-3[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9f0";color:#e3edfb}.icon-BL-3z-3[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9f1";margin-left:-1em;color:#f4f8fb}.icon-BL-3z-3[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9f2";margin-left:-1em;color:#366cfb}.icon-hole-pumped[_ngcontent-%COMP%]:before{content:"\\e9e3"}.icon-history[_ngcontent-%COMP%]:before{content:"\\e9e2";color:#586b7a}.icon-crusher[_ngcontent-%COMP%]:before{content:"\\e9e4";color:#0165bd}.icon-calculator[_ngcontent-%COMP%]:before{content:"\\e9e1";color:#0165bd}.icon-issue[_ngcontent-%COMP%]:before{content:"\\e9de";color:#e68537}.icon-nitrate[_ngcontent-%COMP%]:before{content:"\\e9df";color:#0165bd}.icon-vibration[_ngcontent-%COMP%]:before{content:"\\e9e0";color:#0165bd}.icon-angled[_ngcontent-%COMP%]:before{content:"\\e9dd"}.icon-userguide[_ngcontent-%COMP%]:before{content:"\\e9dc";color:#0165bd}.icon-crew[_ngcontent-%COMP%]:before{content:"\\e9db";color:#586b7a}.icon-bench[_ngcontent-%COMP%]:before{content:"\\e9d7";color:#586b7a}.icon-pat-group[_ngcontent-%COMP%]:before{content:"\\e9d8";color:#586b7a}.icon-pat-small[_ngcontent-%COMP%]:before{content:"\\e9d9";color:#586b7a}.icon-patt[_ngcontent-%COMP%]:before, .icon-patt-light[_ngcontent-%COMP%]:before{content:"\\e9da";color:#586b7a}.icon-patt-light[_ngcontent-%COMP%]:before{opacity:.5}.icon-safety[_ngcontent-%COMP%]:before{content:"\\e9d6";color:#0165bd}.icon-godown[_ngcontent-%COMP%]:before{content:"\\e9d3";color:#586b7a}.icon-growup[_ngcontent-%COMP%]:before{content:"\\e9d4";color:#586b7a}.icon-growup-light[_ngcontent-%COMP%]:before{content:"\\e9d4";color:#fff;opacity:.5}.icon-circle[_ngcontent-%COMP%]:before{content:"\\e9d5";color:#586b7a}.icon-sliders[_ngcontent-%COMP%]:before{content:"\\e9d2";color:#586b7a}.icon-chart[_ngcontent-%COMP%]:before{content:"\\e9d1";color:#586b7a}.icon-no-data-2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9cb";color:#8bade0}.icon-no-data-2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9cc";margin-left:-1em;color:#586b7a}.icon-no-data-3[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9cd";color:#586b7a}.icon-no-data-3[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9ce";margin-left:-1em;color:#8bade0}.icon-no-data-4[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9cf";color:#8bade0}.icon-no-data-4[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9d0";margin-left:-1em;color:#586b7a}.icon-connection[_ngcontent-%COMP%]:before{content:"\\e9c8";color:#586b7a}.icon-dashboard[_ngcontent-%COMP%]:before{content:"\\e9c9";color:#586b7a}.icon-temperature[_ngcontent-%COMP%]:before{content:"\\e9ca";color:#586b7a}.icon-menu-1[_ngcontent-%COMP%]:before{content:"\\e9c6";color:#586b7a}.icon-menu-2[_ngcontent-%COMP%]:before{content:"\\e9c7";color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9b4";color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9b5";margin-left:-1em;color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9b6";margin-left:-1em;color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e9b7";margin-left:-1em;color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e9b8";margin-left:-1em;color:#586b7a}.icon-w3-6[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e9b9";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3-6[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e9ba";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3-6[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e9bb";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3-6[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e9bc";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9bd";color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9be";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9bf";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e9c0";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e9c1";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e9c2";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1-2[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e9c3";margin-left:-1em;color:#586b7a}.icon-w1-2[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e9c4";margin-left:-1em;color:#586b7a}.icon-w1-2[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e9c5";margin-left:-1em;color:#586b7a}.icon-hole-precond[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9b2";color:#000;opacity:.75}.icon-hole-precond[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9b3";margin-left:-1em;color:#fff}.icon-w1[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e97c";color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e97d";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e97e";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e97f";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e980";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e981";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e982";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e983";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w1[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e984";margin-left:-1em;color:#586b7a}.icon-w2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e985";color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e986";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e987";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e988";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e989";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e98a";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e98b";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e98c";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w2[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e98d";margin-left:-1em;color:#586b7a}.icon-w3[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e98e";color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e98f";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e990";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e991";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e992";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e993";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e994";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e995";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w3[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e996";margin-left:-1em;color:#586b7a}.icon-w4[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e997";color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e998";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e999";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e99a";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e99b";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e99c";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e99d";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e99e";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w4[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e99f";margin-left:-1em;color:#586b7a}.icon-w5[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9a0";color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9a1";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9a2";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e9a3";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e9a4";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e9a5";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e9a6";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e9a7";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w5[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e9a8";margin-left:-1em;color:#586b7a}.icon-w6[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e9a9";color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e9aa";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e9ab";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e9ac";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e9ad";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e9ae";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e9af";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e9b0";margin-left:-1em;color:#2e384d;opacity:.2}.icon-w6[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e9b1";margin-left:-1em;color:#586b7a}.icon-T-Icon[_ngcontent-%COMP%]:before{content:"\\e97a";color:#fff}.icon-tasks[_ngcontent-%COMP%]:before{content:"\\e97b";color:#586b7a}.icon-pdf_template[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e967";color:#fff}.icon-pdf_template[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e968";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e969";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e96a";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e96b";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path6[_ngcontent-%COMP%]:before{content:"\\e96c";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path7[_ngcontent-%COMP%]:before{content:"\\e96d";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path8[_ngcontent-%COMP%]:before{content:"\\e96e";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path9[_ngcontent-%COMP%]:before{content:"\\e96f";margin-left:-.7998046875em;color:#f0f2f3}.icon-pdf_template[_ngcontent-%COMP%]   .path10[_ngcontent-%COMP%]:before{content:"\\e970";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path11[_ngcontent-%COMP%]:before{content:"\\e971";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path12[_ngcontent-%COMP%]:before{content:"\\e972";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path13[_ngcontent-%COMP%]:before{content:"\\e973";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path14[_ngcontent-%COMP%]:before{content:"\\e974";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path15[_ngcontent-%COMP%]:before{content:"\\e975";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path16[_ngcontent-%COMP%]:before{content:"\\e976";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path17[_ngcontent-%COMP%]:before{content:"\\e977";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path18[_ngcontent-%COMP%]:before{content:"\\e978";margin-left:-.7998046875em;color:#d0dae0}.icon-pdf_template[_ngcontent-%COMP%]   .path19[_ngcontent-%COMP%]:before{content:"\\e979";margin-left:-.7998046875em;color:#d0dae0}.icon-ellipsis[_ngcontent-%COMP%]:before{content:"\\e966";color:#586b7a}.icon-edit[_ngcontent-%COMP%]:before{content:"\\e965";color:#586b7a}.icon-help-center[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e963";color:#ffe845}.icon-help-center[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e964";margin-left:-1em;color:#000;opacity:.5029}.icon-driver[_ngcontent-%COMP%]:before{content:"\\e95a";color:#0165bd}.icon-eye-crossed[_ngcontent-%COMP%]:before{content:"\\e95b";color:#586b7a}.icon-eye[_ngcontent-%COMP%]:before{content:"\\e95c";color:#586b7a}.icon-grade[_ngcontent-%COMP%]:before{content:"\\e95d";color:#586b7a}.icon-ropes-2[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e95e";color:#586b7a}.icon-ropes-2[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e95f";margin-left:-1em;color:#0165bd}.icon-ropes[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e960";color:#586b7a}.icon-ropes[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e961";margin-left:-1em;color:#0165bd}.icon-score[_ngcontent-%COMP%]:before{content:"\\e962";color:#586b7a}.icon-search[_ngcontent-%COMP%]:before{content:"\\e959";color:#586b7a}.icon-progress[_ngcontent-%COMP%]:before{content:"\\e958";color:#586b7a}.icon-day-shift[_ngcontent-%COMP%]:before{content:"\\e955";color:#fcd47d}.icon-night-shift[_ngcontent-%COMP%]:before{content:"\\e956";color:#7d8c9a}.icon-segment[_ngcontent-%COMP%]:before{content:"\\e957";color:#586b7a}.icon-print[_ngcontent-%COMP%]:before{content:"\\e954";color:#586b7a}.icon-success[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e951";color:#fff}.icon-success[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e952";margin-left:-1em;color:#8bade0}.icon-success[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e953";margin-left:-1em;color:#39be04}.icon-misfire[_ngcontent-%COMP%]:before{content:"\\e950";color:#ff8200}.icon-no-selection[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e949";color:#fff}.icon-no-selection[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e94a";margin-left:-1em;color:#8bade0}.icon-no-selection[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e94b";margin-left:-1em;color:#eaeef6}.icon-no-selection[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e94c";margin-left:-1em;color:#1f8ff7}.icon-no-selection[_ngcontent-%COMP%]   .path5[_ngcontent-%COMP%]:before{content:"\\e94d";margin-left:-1em;color:#586b7a}.icon-home[_ngcontent-%COMP%]:before{content:"\\e948";color:#586b7a}.icon-feedback-normal[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e93f";color:#31495d;opacity:.8504}.icon-feedback-normal[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e940";margin-left:-.7861328125em;color:#ffaf00}.icon-feedback-normal[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e941";margin-left:-.7861328125em;color:#fff}.icon-feedback-selected[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e942";color:#0165bd}.icon-feedback-selected[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e943";margin-left:-.7861328125em;color:#fff}.icon-feedback-selected[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e944";margin-left:-.7861328125em;color:#ffaf00}.icon-feedback-selected[_ngcontent-%COMP%]   .path4[_ngcontent-%COMP%]:before{content:"\\e945";margin-left:-.7861328125em;color:#586b7a}.icon-map-feedback-small[_ngcontent-%COMP%]:before{content:"\\e946";color:#ffaf00}.icon-map-feedback[_ngcontent-%COMP%]:before{content:"\\e947";color:#586b7a}.icon-equip-driller[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e911";color:#fff}.icon-equip-driller[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e912";margin-left:-1em;color:#0165bd}.icon-equip-driller[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e913";margin-left:-1em;color:#0165bd}.icon-equip-loader[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e939";color:#fff}.icon-equip-loader[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e93a";margin-left:-1em;color:#0165bd}.icon-equip-loader[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e93b";margin-left:-1em;color:#0165bd}.icon-equip-shovel[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e93c";color:#fff}.icon-equip-shovel[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e93d";margin-left:-1em;color:#0165bd}.icon-equip-shovel[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e93e";margin-left:-1em;color:#0165bd}.icon-alert[_ngcontent-%COMP%]:before{content:"\\e900";color:#ff8200}.icon-arrow-down[_ngcontent-%COMP%]:before{content:"\\e901";color:#586b7a}.icon-arrow-left[_ngcontent-%COMP%]:before{content:"\\e902";color:#586b7a}.icon-arrow-right[_ngcontent-%COMP%]:before{content:"\\e903";color:#586b7a}.icon-arrow-top[_ngcontent-%COMP%]:before{content:"\\e904";color:#586b7a}.icon-blast[_ngcontent-%COMP%]:before, .icon-blast-light[_ngcontent-%COMP%]:before{content:"\\e905";color:#f25050}.icon-blast-light[_ngcontent-%COMP%]:before{color:#586b7a;opacity:.5}.icon-calendar[_ngcontent-%COMP%]:before{content:"\\e906";color:#0165bd}.icon-checkmark[_ngcontent-%COMP%]:before{content:"\\e907";color:#586b7a}.icon-close[_ngcontent-%COMP%]:before{content:"\\e908";color:#586b7a}.icon-coal[_ngcontent-%COMP%]:before{content:"\\e909";color:#586b7a}.icon-cost[_ngcontent-%COMP%]:before{content:"\\e90a";color:#ff8200}.icon-critical[_ngcontent-%COMP%]:before{content:"\\e90b";color:#c55563}.icon-datepicker[_ngcontent-%COMP%]:before{content:"\\e90c";color:#586b7a}.icon-destination[_ngcontent-%COMP%]:before{content:"\\e90d";color:#39be04}.icon-drill[_ngcontent-%COMP%]:before{content:"\\e90e";color:#00afbd}.icon-empty[_ngcontent-%COMP%]:before{content:"\\e90f";color:#a4afbe}.icon-env[_ngcontent-%COMP%]:before{content:"\\e910";color:#39be04}.icon-filter[_ngcontent-%COMP%]:before{content:"\\e914";color:#586b7a}.icon-flag[_ngcontent-%COMP%]:before{content:"\\e915";color:#f54f63}.icon-grid[_ngcontent-%COMP%]:before{content:"\\e916";color:#0165bd}.icon-group[_ngcontent-%COMP%]:before{content:"\\e917";color:#586b7a}.icon-help[_ngcontent-%COMP%]:before{content:"\\e918";color:#586b7a}.icon-help-light[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e963";color:#586b7a;opacity:.2}.icon-help-light[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e964";margin-left:-1em;color:#586b7a;opacity:.75}.icon-hole[_ngcontent-%COMP%]:before{content:"\\e919";color:#0165bd}.icon-kpi[_ngcontent-%COMP%]:before{content:"\\e91a";color:#0165bd}.icon-kpi-cda[_ngcontent-%COMP%]:before{content:"\\e91a";color:#e1c06b}.icon-letter[_ngcontent-%COMP%]:before{content:"\\e91b";color:#586b7a}.icon-list[_ngcontent-%COMP%]:before{content:"\\e91c";color:#0165bd}.icon-load[_ngcontent-%COMP%]:before{content:"\\e91d";color:#0165bd}.icon-loaded[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e91e";color:#a4afbe}.icon-loaded[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e91f";margin-left:-1em;color:#1f8ff7}.icon-mail[_ngcontent-%COMP%]:before{content:"\\e920";color:#586b7a}.icon-map-collapse[_ngcontent-%COMP%]:before{content:"\\e921";color:#586b7a}.icon-map-compare-tool[_ngcontent-%COMP%]:before{content:"\\e922";color:#586b7a}.icon-map-expand[_ngcontent-%COMP%]:before{content:"\\e923";color:#586b7a}.icon-map-legend[_ngcontent-%COMP%]:before{content:"\\e924";color:#586b7a}.icon-map-polygon-tool[_ngcontent-%COMP%]:before{content:"\\e925";color:#586b7a}.icon-map-toggle[_ngcontent-%COMP%]:before{content:"\\e926";color:#586b7a}.icon-map-visibility[_ngcontent-%COMP%]:before{content:"\\e927";color:#586b7a}.icon-minus[_ngcontent-%COMP%]:before{content:"\\e928";color:#586b7a}.icon-no-data[_ngcontent-%COMP%]   .path1[_ngcontent-%COMP%]:before{content:"\\e929";color:#fff}.icon-no-data[_ngcontent-%COMP%]   .path2[_ngcontent-%COMP%]:before{content:"\\e94e";margin-left:-1em;color:#8bade0}.icon-no-data[_ngcontent-%COMP%]   .path3[_ngcontent-%COMP%]:before{content:"\\e94f";margin-left:-1em;color:#586b7a}.icon-notifications[_ngcontent-%COMP%]:before{content:"\\e92a";color:#586b7a}.icon-pattern[_ngcontent-%COMP%]:before{content:"\\e92b";color:#0165bd}.icon-piechart[_ngcontent-%COMP%]:before{content:"\\e92c";color:#00afbd}.icon-plus[_ngcontent-%COMP%]:before{content:"\\e92d";color:#586b7a}.icon-refresh[_ngcontent-%COMP%]:before{content:"\\e92e";color:#586b7a}.icon-road[_ngcontent-%COMP%]:before{content:"\\e92f"}.icon-roadblock[_ngcontent-%COMP%]:before{content:"\\e930";color:#f25050}.icon-roadpin[_ngcontent-%COMP%]:before{content:"\\e931";color:#ff8200}.icon-settings[_ngcontent-%COMP%]:before{content:"\\e932";color:#586b7a}.icon-shovel[_ngcontent-%COMP%]:before{content:"\\e933";color:#0165bd}.icon-target[_ngcontent-%COMP%]:before{content:"\\e934";color:#586b7a}.icon-time[_ngcontent-%COMP%]:before{content:"\\e935";color:#586b7a}.icon-truck[_ngcontent-%COMP%]:before{content:"\\e936";color:#0165bd}.icon-user[_ngcontent-%COMP%]:before{content:"\\e937";color:#586b7a}.icon-waste[_ngcontent-%COMP%]:before{content:"\\e938";color:#586b7a}.icon-info[_ngcontent-%COMP%]:before{content:"\\ea03";color:#586b7a}[_nghost-%COMP%]{width:100%;height:100%}mgl-map[_ngcontent-%COMP%]{width:100%;height:100%}.map-top-left-controls[_ngcontent-%COMP%]{position:absolute;top:0}.visibility-mode[_ngcontent-%COMP%]{position:absolute;top:10px;left:50%;margin-left:-80px}.map-no-data-message[_ngcontent-%COMP%]{position:absolute;bottom:2vh;left:50%;transform:translate(-50%)}.z-index-1[_ngcontent-%COMP%]{z-index:1}.z-index-2[_ngcontent-%COMP%]{z-index:2}.background-overlay[_ngcontent-%COMP%]{width:100%;height:100%;z-index:1000;background-color:#00000080;position:absolute;top:0;left:0}'],changeDetection:0}),c}()},77069:function(se,R,i){i.d(R,{G:function(){return tt}});var x=i(15671),B=i(43144),L=i(60136),k=i(57777),G=i(48966),p=i(94327),h=i(46940),y=i(10079),T=i(96357),b=i(89255),e=i(81876),g=i(48924),Z=i(57676),a=i(61737),X=i(7625),pe=i(94424),ee=i.n(pe),S=(i(31158),i(17489)),W=i(81042),o=i(65542),v=i(29029),C=i(94720),_=i(93075),u=i(53773),I=i(1249),D=i(30325),w=i(34594),j=i(77093),te=i(23322),ge=i(85899),m=i(69808),_e=i(9112),ne=i(53251),we=i(77446),Me=i(4834),F=i(47423);function We(N,q){if(1&N&&(o.TgZ(0,"h3",12),o._uU(1),o.qZA()),2&N){var J=o.oxw();o.xp6(1),o.Oqu(J.exportMessages.baseHeader)}}function Oe(N,q){if(1&N&&(o.TgZ(0,"h3",12),o._uU(1),o.qZA()),2&N){var J=o.oxw();o.xp6(1),o.Oqu(J.exportMessages.baseHeaderSelectionHoles)}}function Ce(N,q){if(1&N&&(o.TgZ(0,"span",13),o._uU(1),o.ALo(2,"async"),o.qZA()),2&N){var J=o.oxw();o.xp6(1),o.hij("",o.lcZ(2,1,J.minePatternsLength)," patterns")}}function Te(N,q){if(1&N&&(o.TgZ(0,"span",13),o._uU(1),o.qZA()),2&N){var J=o.oxw();o.xp6(1),o.hij(" ",J.exportMessages.highNumberOfPatterns," ")}}function ke(N,q){if(1&N&&(o.TgZ(0,"span",13),o._uU(1),o.qZA()),2&N){var J=o.oxw();o.xp6(1),o.hij(" ",J.exportMessages.noPatternsSelected," ")}}function je(N,q){1&N&&o.GkF(0)}function Ke(N,q){1&N&&o.GkF(0)}function ve(N,q){if(1&N){var J=o.EpF();o.TgZ(0,"div",15)(1,"mat-tab-group",16),o.NdJ("selectedIndexChange",function(V){return o.CHM(J),o.oxw(2).onTabChanged(V)}),o.TgZ(2,"mat-tab",17),o.YNc(3,Ke,1,0,"ng-container",8),o.qZA(),o.TgZ(4,"mat-tab",18)(5,"section",19)(6,"p",20),o._uU(7),o.qZA(),o.TgZ(8,"div",21)(9,"span",22),o._UZ(10,"span",23)(11,"span",24)(12,"span",25)(13,"span",26)(14,"span",27)(15,"span",28)(16,"span",29)(17,"span",30)(18,"span",31)(19,"span",32)(20,"span",33)(21,"span",34)(22,"span",35)(23,"span",36)(24,"span",37)(25,"span",38)(26,"span",39)(27,"span",40)(28,"span",41),o.qZA()()()()()()}if(2&N){var H=o.oxw(2),K=o.MAs(20);o.xp6(3),o.Q6J("ngTemplateOutlet",K),o.xp6(1),o.Q6J("disabled",H.isKPIPerSelectedHoles()),o.xp6(3),o.hij(" ",H.exportMessages.pdfTabHeader," ")}}function Je(N,q){if(1&N&&o.YNc(0,ve,29,3,"div",14),2&N){var J=o.oxw();o.Q6J("ngIf",J.isKPIPerSelectedHoles()||J.isPatternsSelected)}}function Fe(N,q){1&N&&(o.TgZ(0,"mat-checkbox",64),o._uU(1,"QA/QC"),o.qZA())}function Be(N,q){1&N&&(o.TgZ(0,"mat-checkbox",65),o._uU(1,"Costs"),o.qZA())}function De(N,q){1&N&&(o.TgZ(0,"mat-checkbox",66),o._uU(1,"Fragmentation"),o.qZA())}function Pe(N,q){1&N&&(o.TgZ(0,"mat-checkbox",67),o._uU(1,"DABO Common PF"),o.qZA())}function Se(N,q){1&N&&(o.TgZ(0,"mat-checkbox",68),o._uU(1,"Blasted Materials"),o.qZA())}function $e(N,q){1&N&&(o.TgZ(0,"mat-checkbox",69),o._uU(1,"Environmental"),o.qZA())}function Qe(N,q){1&N&&(o.TgZ(0,"mat-checkbox",70),o._uU(1,"Hole Depth Compliance"),o.qZA())}function ze(N,q){if(1&N){var J=o.EpF();o.TgZ(0,"mat-checkbox",71),o.NdJ("change",function(){return o.CHM(J),o.oxw(3).toggleSeparateCharges()}),o._uU(1," Separate Explosive charges "),o.qZA()}}function Xe(N,q){if(1&N){var J=o.EpF();o.TgZ(0,"section",43)(1,"form",44)(2,"div",45)(3,"mat-checkbox",46),o.NdJ("change",function(A){return o.CHM(J),o.oxw(2).controlPatternsFormState(A)}),o._uU(4),o.qZA(),o.TgZ(5,"div",47)(6,"mat-checkbox",48),o._uU(7,"Operational KPI"),o.qZA(),o.YNc(8,Fe,2,0,"mat-checkbox",49),o.TgZ(9,"mat-checkbox",50),o._uU(10,"Pattern Design"),o.qZA(),o.TgZ(11,"mat-checkbox",51),o._uU(12,"Drilling"),o.qZA(),o.TgZ(13,"mat-checkbox",52),o._uU(14,"Blasting"),o.qZA(),o.YNc(15,Be,2,0,"mat-checkbox",53),o.qZA(),o.TgZ(16,"div",54),o.YNc(17,De,2,0,"mat-checkbox",55),o.YNc(18,Pe,2,0,"mat-checkbox",56),o.YNc(19,Se,2,0,"mat-checkbox",57),o.TgZ(20,"mat-checkbox",58),o._uU(21),o.qZA(),o.TgZ(22,"mat-checkbox",59),o._uU(23,"Dates"),o.qZA(),o.YNc(24,$e,2,0,"mat-checkbox",60),o.YNc(25,Qe,2,0,"mat-checkbox",61),o.qZA()()(),o._UZ(26,"mat-divider"),o.TgZ(27,"form",44)(28,"div",45)(29,"mat-checkbox",62),o.NdJ("change",function(){return o.CHM(J),o.oxw(2).toggleHolesReport()}),o._uU(30,"Holes report "),o.qZA(),o.TgZ(31,"div",47),o.YNc(32,ze,2,0,"mat-checkbox",63),o.qZA()()()()}if(2&N){var H=o.oxw(2);o.xp6(1),o.Q6J("formGroup",H.formPatterns),o.xp6(2),o.Q6J("checked",H.areAllWidgetsSelected())("indeterminate",H.areSomePatternWidgetsSelected()&&!H.areAllWidgetsSelected()),o.xp6(1),o.hij("",H.getPatternsCheckboxName()," "),o.xp6(4),o.Q6J("ngIf",!H.isRDO),o.xp6(7),o.Q6J("ngIf",!H.isMetal&&H.isSelectionKPI),o.xp6(2),o.Q6J("ngIf",H.isFragmentationVisible),o.xp6(1),o.Q6J("ngIf",!H.isMetal),o.xp6(1),o.Q6J("ngIf",!H.isRDO),o.xp6(2),o.hij(" ",H.isRDO?"Loader":"Shovel"," "),o.xp6(3),o.Q6J("ngIf",!H.isRDO),o.xp6(1),o.Q6J("ngIf",H.isRDO),o.xp6(2),o.Q6J("formGroup",H.formHoles),o.xp6(2),o.Q6J("checked",H.holesReport),o.xp6(3),o.Q6J("ngIf",!H.isMetal)}}function qe(N,q){if(1&N&&o.YNc(0,Xe,33,15,"section",42),2&N){var J=o.oxw();o.Q6J("ngIf",J.isKPIPerSelectedHoles()||J.isPatternsSelected)}}function et(N,q){if(1&N){var J=o.EpF();o.TgZ(0,"mat-dialog-actions")(1,"div",72)(2,"div",73)(3,"button",74),o.NdJ("click",function(){return o.CHM(J),o.oxw().closeModal()}),o._uU(4,"Cancel"),o.qZA()(),o.TgZ(5,"div",73)(6,"button",75),o.NdJ("click",function(){return o.CHM(J),o.oxw().generateReport()}),o._uU(7),o.qZA()()()()}if(2&N){var H=o.oxw();o.xp6(6),o.Q6J("disabled",!H.isFormValid()||H.loading),o.xp6(1),o.hij(" ",H.isTabMode?"Confirm":"Export XLSX"," ")}}var tt=function(){var N=function(q){(0,L.Z)(H,q);var J=(0,k.Z)(H);function H(K,A,V,de,he,Ie,Ae,nt,Le,ot,at,it){var ae;return(0,x.Z)(this,H),(ae=J.call(this)).dialogRef=K,ae.reportExportService=A,ae.cdr=V,ae.mineStateService=de,ae.fb=he,ae.wsService=Ie,ae.patternsService=Ae,ae.customEventService=nt,ae.downloadService=Le,ae.exportGeneratorService=ot,ae.router=at,ae.data=it,ae.selectedPatterns=[],ae.patternsIds=[],ae.loading=!1,ae.fileError=!1,ae.holesReport=!0,ae.separateCharges=!0,ae.exportMessages=g.exportMessages,ae}return(0,B.Z)(H,[{key:"isHVC",get:function(){return h.ZA.isHVC(this.mineStateService.getSelectedMineArea())}},{key:"isRDO",get:function(){return h.ZA.isRDO(this.mineStateService.getSelectedMineArea())}},{key:"isSelectionKPI",get:function(){return this.router.url.includes("/report/per-selection")}},{key:"isFragmentationVisible",get:function(){return this.isHVC&&!this.isSelectionKPI||this.isRDO}},{key:"ngOnInit",value:function(){var A=this;this.initForm(),this.dialogRef.disableClose=!0,this.isExcelMode=!0,this.isMetal=h.ZA.isMetalMine(this.mineStateService.getSelectedMineArea()),this.patternsService.selectedPolygons$.pipe((0,X.R)(this.destroy$)).subscribe(function(V){A.minePatternsLength=A.getPatternsCount(),A.isPatternsSelected=V.size>0,A.isTabMode=1===V.size,A.patternsIds=Array.from(V).map(function(de){return String((null==de?void 0:de.value)||de)}),A.isKPIPerSelectedHoles()&&(A.isTabMode=!0)}),this.establishConnection(),this.trackGenerationQueue()}},{key:"trackGenerationQueue",value:function(){var A=this;this.reportExportService.generationHandler$.pipe().subscribe(function(V){((null==V?void 0:V.generationCanceled)||(null==V?void 0:V.generationComplete)||(null==V?void 0:V.generationError))&&A.isConnectionEstablished&&A.isConnectionEstablished.unsubscribe()})}},{key:"establishConnection",value:function(){this.wsService.connect({url:Z.yh.reportGeneration})}},{key:"getPageType",value:function(){if(this.data)return this.data.pageType}},{key:"isKPIPerSelectedHoles",value:function(){return"kpiPerSelectedHoles"===this.getPageType()}},{key:"initForm",value:function(){var A={operational_kpi:[!0,[]],pattern_design:[!0,[]],drilling:[!0,[]],shovel:[!0,[]],dates:[!0,[]]},V={environmental:[!0,[]],blasted_materials:[!0,[]],qa_qc:[!0,[]],blasting:[!0,[]]};this.formPatterns=this.fb.group(this.isHVC&&!this.isSelectionKPI?Object.assign(Object.assign(Object.assign({},A),V),{fragmentation:[!0,[]]}):this.isHVC&&this.isSelectionKPI?Object.assign(Object.assign({},A),V):this.isRDO?Object.assign(Object.assign({},A),{blasting:[!0,[]],fragmentation:[!0,[]],hole_depth_compliance:[!0,[]]}):Object.assign(Object.assign(Object.assign({},A),V),!this.isMetal&&this.isSelectionKPI?{dabo_common_pf:[!0,[]],costs:[!0,[]]}:{dabo_common_pf:[!0,[]]})),this.formHoles=this.fb.group({separate_charges:[!0,[]]})}},{key:"areAllWidgetsSelected",value:function(){return this.formPatterns&&Object.values(this.formPatterns.value).every(function(A){return A})}},{key:"areSomePatternWidgetsSelected",value:function(){return this.formPatterns&&Object.values(this.formPatterns.value).some(function(A){return A})}},{key:"isFormValid",value:function(){return!this.isExcelMode||this.areSomePatternWidgetsSelected()||this.holesReport}},{key:"controlPatternsFormState",value:function(A){(0,S.forEach)(this.formPatterns.controls,function(V){V.patchValue(A.checked,{emitEvent:!1})})}},{key:"toggleHolesReport",value:function(){this.holesReport=!this.holesReport;var A=this.formHoles.get("separate_charges");this.holesReport?(A.setValue(!0,{emitEvent:!1}),A.enable({emitEvent:!1})):(A.setValue(!1,{emitEvent:!1}),A.disable({emitEvent:!1})),this.separateCharges=A.value}},{key:"toggleSeparateCharges",value:function(){this.separateCharges=!this.separateCharges}},{key:"generateReport",value:function(){var A=this,V=this.isExcelMode?y.P.XLSX:y.P.PDF,de=this.exportGeneratorService.generateFileName(this.selectedPatterns,V,this.getPageType());this.updateStatuses(de);var he=this.isExcelMode?{patternIds:this.patternsIds,patternDataType:Object.keys(this.formPatterns.value).filter(function(Ae){return A.formPatterns.value[Ae]}),includeHoles:this.holesReport,reportFormat:V,reportType:T.G.KPI,selectedHolesUUID:"",separateCharges:this.separateCharges&&!this.isMetal}:{patternIds:this.patternsIds,patternDataType:Object.keys(this.formPatterns.value),includeHoles:!1,reportFormat:V,reportType:T.G.KPI,selectedHolesUUID:""};this.isKPIPerSelectedHoles()&&(he=Object.assign(Object.assign({},he),{patternIds:[],selectedHolesUUID:this.data.selectedHolesUUID})),this.reportId=(0,W.Z)(),this.startExporting=!0,this.reportExportService.cancelGeneration=!1,this.reportExportService.generationHandler$.next(Object.assign({fileName:de,generationStarted:!0,reportId:this.reportId},he));var Ie=Object.assign(Object.assign({},he),{reportId:this.reportId});this.wsService.send(Ie),this.trackFileStatus(),this.dialogRef.close(!0),this.customEventService.event(b.R.GENERATION_REPORT,{report_type:V})}},{key:"updateStatuses",value:function(A){this.fileError=!1,this.loading=!0,this.cdr.markForCheck(),this.reportExportService.generationHandler$.next({fileName:A,generationStarted:!1,reportId:this.reportId})}},{key:"getPatternsCount",value:function(){return ee().getItem("tree_view_patternsCount_".concat(this.mineStateService.getSelectedMineArea())).then(function(A){return A})}},{key:"closeModal",value:function(){this.dialogRef.close(!0),this.startExporting&&(this.startExporting=!1,this.wsService.closeConnection())}},{key:"onTabChanged",value:function(A){this.isExcelMode=0===A}},{key:"trackFileStatus",value:function(){var A=this;this.reportExportService.cancelGeneration||(this.isConnectionEstablished=this.wsService.on().subscribe(function(V){if(V.status.toLowerCase()===e.p.ERROR&&(A.reportExportService.generationHandler$.next({generationError:!0,error:V.status}),A.wsService.closeConnection()),V.status.toLowerCase()===e.p.SUCCESS){var de=V.report_path.split("/")[2];A.downloadService.download(V.report_path).subscribe(function(he){return(0,p.saveAs)(he,de)}),A.reportExportService.generationHandler$.next({generationComplete:!0}),A.wsService.closeConnection()}},function(V){return A.reportExportService.generationHandler$.next({generationError:!0,error:V}),A.wsService.closeConnection(),(0,a._)(V)}))}},{key:"getPatternsCheckboxName",value:function(){return this.isKPIPerSelectedHoles()?"Selected polygon report":this.isTabMode?"Patterns report":"Pattern report"}}]),H}(h.eO);return N.\u0275fac=function(J){return new(J||N)(o.Y36(G.so),o.Y36(v.j),o.Y36(o.sBO),o.Y36(C.Hj),o.Y36(_.qu),o.Y36(u.l),o.Y36(C.c5),o.Y36(C.qL),o.Y36(C.KS),o.Y36(I.J),o.Y36(D.F0),o.Y36(G.WI))},N.\u0275cmp=o.Xpm({type:N,selectors:[["dabo-report-actions-modal"]],features:[o.qOj],decls:22,vars:10,consts:[[1,"fill-remaining-space"],[1,"icon","icon-close",3,"click"],["fxFill","",3,"fxShow"],["color","primary","mode","indeterminate"],["class","modal-content-title",4,"ngIf"],[1,"export__selected-patterns"],[3,"asList","kpiPatterns","selectedPatternsEmitter"],["class","export-warning-text",4,"ngIf"],[4,"ngTemplateOutlet"],["tabsContent",""],["excelForm",""],[4,"ngIf"],[1,"modal-content-title"],[1,"export-warning-text"],["class","tabs--report-modal","id","tabs",4,"ngIf"],["id","tabs",1,"tabs--report-modal"],["disableRipple","",3,"selectedIndexChange"],["label","Export XLSX"],["label","Export PDF",3,"disabled"],["fxLayout","column","fxLayoutGap","22px",1,"pdf-section"],["fxFill","",1,"pdf-section__message"],["fxFill","","fxFlex","110px",1,"pdf-section__img"],[1,"icon","icon-pdf_template"],[1,"path1"],[1,"path2"],[1,"path3"],[1,"path4"],[1,"path5"],[1,"path6"],[1,"path7"],[1,"path8"],[1,"path9"],[1,"path10"],[1,"path11"],[1,"path12"],[1,"path13"],[1,"path14"],[1,"path15"],[1,"path16"],[1,"path17"],[1,"path18"],[1,"path19"],["class","export-form",4,"ngIf"],[1,"export-form"],[3,"formGroup"],["fxLayout","row wrap",1,"export-form__widget-area"],[1,"export-form__widget-area__report-selector",3,"checked","indeterminate","change"],["fxFlex.gt-sm","calc(50% - 20px)",1,"export-form__widget-area__column--left"],["formControlName","operational_kpi"],["formControlName","qa_qc",4,"ngIf"],["formControlName","pattern_design"],["formControlName","drilling"],["formControlName","blasting"],["formControlName","costs",4,"ngIf"],["fxFlex.gt-sm","calc(50% - 20px)",1,"export-form__widget-area__column--right"],["formControlName","fragmentation",4,"ngIf"],["formControlName","dabo_common_pf",4,"ngIf"],["formControlName","blasted_materials",4,"ngIf"],["formControlName","shovel"],["formControlName","dates"],["formControlName","environmental",4,"ngIf"],["formControlName","hole_depth_compliance",4,"ngIf"],[1,"export-form__widget-area__report-selector",3,"checked","change"],["formControlName","separate_charges",3,"change",4,"ngIf"],["formControlName","qa_qc"],["formControlName","costs"],["formControlName","fragmentation"],["formControlName","dabo_common_pf"],["formControlName","blasted_materials"],["formControlName","environmental"],["formControlName","hole_depth_compliance"],["formControlName","separate_charges",3,"change"],["fxLayout","row wrap","fxLayoutGap","10px","fxFlex.gt-sm","100%"],["fxFlex.gt-sm","calc(50% - 10px)"],["mat-button","","fxFill","",1,"btn","btn--secondary",3,"click"],["mat-button","","fxFill","",1,"btn","btn--primary",3,"disabled","click"]],template:function(J,H){if(1&J&&(o.TgZ(0,"mat-toolbar")(1,"mat-toolbar-row")(2,"h2"),o._uU(3,"Export"),o.qZA(),o._UZ(4,"div",0),o.TgZ(5,"span",1),o.NdJ("click",function(){return H.closeModal()}),o.qZA()()(),o.TgZ(6,"div",2),o._UZ(7,"mat-progress-bar",3),o.qZA(),o.TgZ(8,"mat-dialog-content"),o.YNc(9,We,2,1,"h3",4),o.YNc(10,Oe,2,1,"h3",4),o.TgZ(11,"section",5)(12,"dabo-selected-patterns",6),o.NdJ("selectedPatternsEmitter",function(de){return H.selectedPatterns=de}),o.qZA(),o.YNc(13,Ce,3,3,"span",7),o.qZA(),o.YNc(14,Te,2,1,"span",7),o.YNc(15,ke,2,1,"span",7),o.YNc(16,je,1,0,"ng-container",8),o.YNc(17,Je,1,1,"ng-template",null,9,o.W1O),o.YNc(19,qe,1,1,"ng-template",null,10,o.W1O),o.qZA(),o.YNc(21,et,8,2,"mat-dialog-actions",11)),2&J){var K=o.MAs(18),A=o.MAs(20);o.xp6(6),o.Q6J("fxShow",H.loading),o.xp6(3),o.Q6J("ngIf",!H.isKPIPerSelectedHoles()),o.xp6(1),o.Q6J("ngIf",H.isKPIPerSelectedHoles()),o.xp6(2),o.Q6J("asList",!0)("kpiPatterns",null==H.data?null:H.data.selectedPatterns),o.xp6(1),o.Q6J("ngIf",!H.selectedPatterns.length),o.xp6(1),o.Q6J("ngIf",H.selectedPatterns.length>10),o.xp6(1),o.Q6J("ngIf",0===H.selectedPatterns.length),o.xp6(1),o.Q6J("ngTemplateOutlet",H.isTabMode?K:A),o.xp6(5),o.Q6J("ngIf",H.isKPIPerSelectedHoles()||H.isPatternsSelected)}},directives:[w.Ye,w.rD,j.s9,te.b8,ge.pW,G.xY,m.O5,_e.R,m.tP,ne.SP,ne.uX,j.xw,j.SQ,j.yH,_._Y,_.JL,_.sg,we.oG,_.JJ,_.u,Me.d,G.H8,F.lW],pipes:[m.Ov],styles:[".mat-divider[_ngcontent-%COMP%]{border-top-color:#d2e0f3;margin:16px 0 8px;width:100%}.export__selected-patterns[_ngcontent-%COMP%]{padding:10px;background-color:#fcf7f1;max-height:180px;overflow-y:auto;margin-bottom:10px}.export__selected-patterns[_ngcontent-%COMP%]   .no-selected-patterns[_ngcontent-%COMP%]{color:#f25050}.export-warning-text[_ngcontent-%COMP%]{color:#f25050;font-size:14px;line-height:21px}.export-form[_ngcontent-%COMP%]{padding-top:10px}.export-form__widget-area[_ngcontent-%COMP%]{padding-top:0}.export-form__widget-area[_ngcontent-%COMP%]   .mat-checkbox[_ngcontent-%COMP%]{display:flex;width:100%}.export-form__widget-area__column--left[_ngcontent-%COMP%]{padding:8px 0 0 28px}.export-form__widget-area__column--right[_ngcontent-%COMP%]{padding-top:8px}.export-form__widget-area__report-selector[_ngcontent-%COMP%]{padding-left:4px}.pdf-section[_ngcontent-%COMP%]{margin-top:17px}.pdf-section__message[_ngcontent-%COMP%]{margin-top:0;font-size:14px;line-height:21px;text-align:center;color:#586b7a}.pdf-section__img[_ngcontent-%COMP%]{text-align:center}.pdf-section__img[_ngcontent-%COMP%]   .icon-pdf_template[_ngcontent-%COMP%]{font-size:110px}"],changeDetection:0}),N}()},9112:function(se,R,i){i.d(R,{R:function(){return o}});var x=i(4942),B=i(15671),L=i(43144),k=i(60136),G=i(57777),p=i(65542),P=i(7625),h=i(46940),y=i(9234),T=i(40714),b=i(94720),e=i(78090),g=i(69808),Z=i(11066),a=i(30325);function X(v,C){if(1&v&&(p.TgZ(0,"li",8)(1,"a",9),p._uU(2),p.qZA(),p.TgZ(3,"span",10),p._uU(4),p.qZA()()),2&v){var _=C.$implicit,u=C.last,I=p.oxw(3);p.xp6(1),p.Q6J("routerLink",I.buildReportLink(_.id)),p.xp6(1),p.hij(" ",_.name," "),p.xp6(2),p.Oqu(u?"\xa0":",\xa0")}}function pe(v,C){if(1&v){var _=p.EpF();p.TgZ(0,"ul",6),p.NdJ("resized",function(D){return p.CHM(_),p.oxw(2).onResized(D)}),p.YNc(1,X,5,3,"li",7),p.qZA()}if(2&v){var u=p.oxw(2);p.xp6(1),p.Q6J("ngForOf",u.selectedPatterns)}}function ee(v,C){1&v&&(p.TgZ(0,"span"),p._uU(1,"None"),p.qZA())}function z(v,C){if(1&v&&(p.TgZ(0,"div",2)(1,"p",3),p._uU(2),p.qZA(),p.YNc(3,pe,2,1,"ul",4),p.YNc(4,ee,2,0,"span",5),p.qZA()),2&v){var _=p.oxw();p.Udp("height",_.height,"px"),p.xp6(1),p.Q6J("hidden",_.asList),p.xp6(1),p.hij("",_.getSideDetails(_.side).title," selected pattern(s):"),p.xp6(1),p.Q6J("ngIf",null==_.selectedPatterns?null:_.selectedPatterns.length),p.xp6(1),p.Q6J("ngIf",!(null!=_.selectedPatterns&&_.selectedPatterns.length))}}function re(v,C){if(1&v&&(p.TgZ(0,"li"),p._uU(1),p.ALo(2,"uppercase"),p.qZA()),2&v){var _=C.$implicit,u=p.oxw(2);p.xp6(1),p.AsE("",p.lcZ(2,2,u.mineArea),"-",_.name,"")}}function S(v,C){if(1&v&&(p.TgZ(0,"ul",11),p.YNc(1,re,3,4,"li",12),p.qZA()),2&v){var _=p.oxw();p.xp6(1),p.Q6J("ngForOf",_.selectedPatterns)}}var O=y.L.LEFT,W=y.L.RIGHT,o=function(){var v=function(C){(0,k.Z)(u,C);var _=(0,G.Z)(u);function u(I,D){var w;return(0,B.Z)(this,u),(w=_.call(this)).mineStateService=I,w.compareService=D,w.asList=!1,w.selectedPatternsEmitter=new p.vpe,w.mineArea=w.mineStateService.getSelectedMineArea(),w.getSideDetails=T.oL,w.sideEnum=y.L,w}return(0,L.Z)(u,[{key:"kpiPatterns",set:function(D){this.subscribeOnSelectionPatterns(D)}},{key:"ngOnInit",value:function(){this.subscribeOnBiggestHeight()}},{key:"onResized",value:function(D){var w=this.compareService.selectedPatternsHeight$.getValue();this.compareService.selectedPatternsHeight$.next(Object.assign(Object.assign({},w),(0,x.Z)({},this.side,D.newRect.height)))}},{key:"buildReportLink",value:function(D){return"/".concat(this.mineStateService.getSelectedMineArea(),"/report/per-pattern/").concat(D)}},{key:"subscribeOnBiggestHeight",value:function(){var D=this;this.side&&this.compareService.selectedPatternsHeight$.asObservable().pipe((0,P.R)(this.destroy$)).subscribe(function(w){D.height=w[O]>w[W]?w[O]:w[W]})}},{key:"subscribeOnSelectionPatterns",value:function(D){if(D){if(D.length<1){var w=this.compareService.selectedPatternsHeight$.getValue();this.compareService.selectedPatternsHeight$.next(Object.assign(Object.assign({},w),(0,x.Z)({},this.side,0)))}this.selectedPatterns=Array.from(D),this.selectedPatternsEmitter.emit(this.selectedPatterns)}}}]),u}(h.eO);return v.\u0275fac=function(_){return new(_||v)(p.Y36(b.Hj),p.Y36(e.zY))},v.\u0275cmp=p.Xpm({type:v,selectors:[["dabo-selected-patterns"]],inputs:{asList:"asList",side:"side",kpiPatterns:"kpiPatterns"},outputs:{selectedPatternsEmitter:"selectedPatternsEmitter"},features:[p.qOj],decls:2,vars:2,consts:[["class","selected-patterns",3,"height",4,"ngIf"],["class","selected-patterns__list export-mode",4,"ngIf"],[1,"selected-patterns"],[1,"selected-patterns__title",3,"hidden"],["class","selected-patterns__list",3,"resized",4,"ngIf"],[4,"ngIf"],[1,"selected-patterns__list",3,"resized"],["class","selected-patterns__item_inline",4,"ngFor","ngForOf"],[1,"selected-patterns__item_inline"],["target","_blank",3,"routerLink"],[1,"comma"],[1,"selected-patterns__list","export-mode"],[4,"ngFor","ngForOf"]],template:function(_,u){1&_&&(p.YNc(0,z,5,6,"div",0),p.YNc(1,S,2,1,"ul",1)),2&_&&(p.Q6J("ngIf",!u.asList),p.xp6(1),p.Q6J("ngIf",u.asList))},directives:[g.O5,Z.a5,g.sg,a.yS],pipes:[g.gd],styles:[".selected-patterns[_ngcontent-%COMP%]{font-size:13px;margin-left:20px;margin-bottom:35px;margin-top:10px}.selected-patterns__title[_ngcontent-%COMP%]{margin:0;line-height:20px;font-weight:500}.selected-patterns__list[_ngcontent-%COMP%]{list-style:none;padding:0;margin-top:0}.selected-patterns__list.export-mode[_ngcontent-%COMP%]{margin-bottom:0;font-weight:400;font-size:14px;color:#2e384dd9}.selected-patterns__item_inline[_ngcontent-%COMP%]{display:inline-block}.selected-patterns__item_inline[_ngcontent-%COMP%]   .comma[_ngcontent-%COMP%]{margin-left:-3px}.selected-patterns__item_inline[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#008cff;opacity:.9;text-decoration:none;line-height:16px}"]}),v}()},27350:function(se,R,i){Object.defineProperty(R,"__esModule",{value:!0});var x=i(94072),B=i(32422);R.empty={closed:!0,next:function(k){},error:function(k){if(x.config.useDeprecatedSynchronousErrorHandling)throw k;B.hostReportError(k)},complete:function(){}}},63281:function(se,R,i){var T,x=this&&this.__extends||(T=function(e,g){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,a){Z.__proto__=a}||function(Z,a){for(var X in a)a.hasOwnProperty(X)&&(Z[X]=a[X])})(e,g)},function(b,e){function g(){this.constructor=b}T(b,e),b.prototype=null===e?Object.create(e):(g.prototype=e.prototype,new g)});Object.defineProperty(R,"__esModule",{value:!0});var B=i(59607),L=i(27350),k=i(56052),G=i(32858),p=i(94072),P=i(32422),h=function(T){function b(e,g,Z){var a=T.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=L.empty;break;case 1:if(!e){a.destination=L.empty;break}if("object"==typeof e){e instanceof b?(a.syncErrorThrowable=e.syncErrorThrowable,a.destination=e,e.add(a)):(a.syncErrorThrowable=!0,a.destination=new y(a,e));break}default:a.syncErrorThrowable=!0,a.destination=new y(a,e,g,Z)}return a}return x(b,T),b.prototype[G.rxSubscriber]=function(){return this},b.create=function(e,g,Z){var a=new b(e,g,Z);return a.syncErrorThrowable=!1,a},b.prototype.next=function(e){this.isStopped||this._next(e)},b.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},b.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},b.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,T.prototype.unsubscribe.call(this))},b.prototype._next=function(e){this.destination.next(e)},b.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},b.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},b.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},b}(k.Subscription);R.Subscriber=h;var y=function(T){function b(e,g,Z,a){var X=T.call(this)||this;X._parentSubscriber=e;var pe,ee=X;return B.isFunction(g)?pe=g:g&&(pe=g.next,Z=g.error,a=g.complete,g!==L.empty&&(ee=Object.create(g),B.isFunction(ee.unsubscribe)&&X.add(ee.unsubscribe.bind(ee)),ee.unsubscribe=X.unsubscribe.bind(X))),X._context=ee,X._next=pe,X._error=Z,X._complete=a,X}return x(b,T),b.prototype.next=function(e){if(!this.isStopped&&this._next){var g=this._parentSubscriber;p.config.useDeprecatedSynchronousErrorHandling&&g.syncErrorThrowable?this.__tryOrSetError(g,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},b.prototype.error=function(e){if(!this.isStopped){var g=this._parentSubscriber,Z=p.config.useDeprecatedSynchronousErrorHandling;if(this._error)Z&&g.syncErrorThrowable?(this.__tryOrSetError(g,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(g.syncErrorThrowable)Z?(g.syncErrorValue=e,g.syncErrorThrown=!0):P.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),Z)throw e;P.hostReportError(e)}}},b.prototype.complete=function(){var e=this;if(!this.isStopped){var g=this._parentSubscriber;if(this._complete){var Z=function(){return e._complete.call(e._context)};p.config.useDeprecatedSynchronousErrorHandling&&g.syncErrorThrowable?(this.__tryOrSetError(g,Z),this.unsubscribe()):(this.__tryOrUnsub(Z),this.unsubscribe())}else this.unsubscribe()}},b.prototype.__tryOrUnsub=function(e,g){try{e.call(this._context,g)}catch(Z){if(this.unsubscribe(),p.config.useDeprecatedSynchronousErrorHandling)throw Z;P.hostReportError(Z)}},b.prototype.__tryOrSetError=function(e,g,Z){if(!p.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{g.call(this._context,Z)}catch(a){return p.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=a,e.syncErrorThrown=!0,!0):(P.hostReportError(a),!0)}return!1},b.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},b}(h);R.SafeSubscriber=y},56052:function(se,R,i){Object.defineProperty(R,"__esModule",{value:!0});var x=i(25019),B=i(62556),L=i(59607),k=i(12142),G=function(){function P(h){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,h&&(this._ctorUnsubscribe=!0,this._unsubscribe=h)}return P.prototype.unsubscribe=function(){var h;if(!this.closed){var y=this,T=y._parentOrParents,b=y._ctorUnsubscribe,e=y._unsubscribe,g=y._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,T instanceof P)T.remove(this);else if(null!==T)for(var Z=0;Z<T.length;++Z)T[Z].remove(this);if(L.isFunction(e)){b&&(this._unsubscribe=void 0);try{e.call(this)}catch(ee){h=ee instanceof k.UnsubscriptionError?p(ee.errors):[ee]}}if(x.isArray(g)){Z=-1;for(var X=g.length;++Z<X;){var pe=g[Z];if(B.isObject(pe))try{pe.unsubscribe()}catch(z){h=h||[],z instanceof k.UnsubscriptionError?h=h.concat(p(z.errors)):h.push(z)}}}if(h)throw new k.UnsubscriptionError(h)}},P.prototype.add=function(h){var y=h;if(!h)return P.EMPTY;switch(typeof h){case"function":y=new P(h);case"object":if(y===this||y.closed||"function"!=typeof y.unsubscribe)return y;if(this.closed)return y.unsubscribe(),y;if(!(y instanceof P)){var T=y;(y=new P)._subscriptions=[T]}break;default:throw new Error("unrecognized teardown "+h+" added to Subscription.")}var b=y._parentOrParents;if(null===b)y._parentOrParents=this;else if(b instanceof P){if(b===this)return y;y._parentOrParents=[b,this]}else{if(-1!==b.indexOf(this))return y;b.push(this)}var e=this._subscriptions;return null===e?this._subscriptions=[y]:e.push(y),y},P.prototype.remove=function(h){var y=this._subscriptions;if(y){var T=y.indexOf(h);-1!==T&&y.splice(T,1)}},P.EMPTY=((h=new P).closed=!0,h),P;var h}();function p(P){return P.reduce(function(h,y){return h.concat(y instanceof k.UnsubscriptionError?y.errors:y)},[])}R.Subscription=G},94072:function(se,R){Object.defineProperty(R,"__esModule",{value:!0});var i=!1;R.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(x){if(x){var B=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+B.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=x},get useDeprecatedSynchronousErrorHandling(){return i}}},43772:function(se,R,i){var p,x=this&&this.__extends||(p=function(h,y){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,b){T.__proto__=b}||function(T,b){for(var e in b)b.hasOwnProperty(e)&&(T[e]=b[e])})(h,y)},function(P,h){function y(){this.constructor=P}p(P,h),P.prototype=null===h?Object.create(h):(y.prototype=h.prototype,new y)});Object.defineProperty(R,"__esModule",{value:!0});var B=i(63281);R.map=function L(p,P){return function(y){if("function"!=typeof p)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return y.lift(new k(p,P))}};var k=function(){function p(P,h){this.project=P,this.thisArg=h}return p.prototype.call=function(P,h){return h.subscribe(new G(P,this.project,this.thisArg))},p}();R.MapOperator=k;var G=function(p){function P(h,y,T){var b=p.call(this,h)||this;return b.project=y,b.count=0,b.thisArg=T||b,b}return x(P,p),P.prototype._next=function(h){var y;try{y=this.project.call(this.thisArg,h,this.count++)}catch(T){return void this.destination.error(T)}this.destination.next(y)},P}(B.Subscriber)},32858:function(se,R){Object.defineProperty(R,"__esModule",{value:!0}),R.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),R.$$rxSubscriber=R.rxSubscriber},12142:function(se,R){Object.defineProperty(R,"__esModule",{value:!0});var i=function(){function x(B){return Error.call(this),this.message=B?B.length+" errors occurred during unsubscription:\n"+B.map(function(L,k){return k+1+") "+L.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=B,this}return x.prototype=Object.create(Error.prototype),x}();R.UnsubscriptionError=i},32422:function(se,R){Object.defineProperty(R,"__esModule",{value:!0}),R.hostReportError=function i(x){setTimeout(function(){throw x},0)}},25019:function(se,R){Object.defineProperty(R,"__esModule",{value:!0}),R.isArray=Array.isArray||function(i){return i&&"number"==typeof i.length}},59607:function(se,R){Object.defineProperty(R,"__esModule",{value:!0}),R.isFunction=function i(x){return"function"==typeof x}},62556:function(se,R){Object.defineProperty(R,"__esModule",{value:!0}),R.isObject=function i(x){return null!==x&&"object"==typeof x}},69832:function(se,R,i){i.d(R,{A9:function(){return z},Yi:function(){return S},vV:function(){return O}});var x=i(60136),B=i(57777),L=i(89062),k=i(43144),G=i(15671),p=i(63191),P=i(20449),h=i(65542),y=i(93075),T=i(90508),b=i(15664),e=["button"],g=["*"],Z=new h.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),a=new h.OlP("MatButtonToggleGroup"),X={provide:y.JU,useExisting:(0,h.Gpc)(function(){return z}),multi:!0},pe=0,ee=(0,k.Z)(function W(o,v){(0,G.Z)(this,W),this.source=o,this.value=v}),z=function(){var W=function(){function o(v,C){(0,G.Z)(this,o),this._changeDetector=v,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=function(){},this._onTouched=function(){},this._name="mat-button-toggle-group-".concat(pe++),this.valueChange=new h.vpe,this.change=new h.vpe,this.appearance=C&&C.appearance?C.appearance:"standard"}return(0,k.Z)(o,[{key:"name",get:function(){return this._name},set:function(C){var _=this;this._name=C,this._buttonToggles&&this._buttonToggles.forEach(function(u){u.name=_._name,u._markForCheck()})}},{key:"vertical",get:function(){return this._vertical},set:function(C){this._vertical=(0,p.Ig)(C)}},{key:"value",get:function(){var C=this._selectionModel?this._selectionModel.selected:[];return this.multiple?C.map(function(_){return _.value}):C[0]?C[0].value:void 0},set:function(C){this._setSelectionByValue(C),this.valueChange.emit(this.value)}},{key:"selected",get:function(){var C=this._selectionModel?this._selectionModel.selected:[];return this.multiple?C:C[0]||null}},{key:"multiple",get:function(){return this._multiple},set:function(C){this._multiple=(0,p.Ig)(C)}},{key:"disabled",get:function(){return this._disabled},set:function(C){this._disabled=(0,p.Ig)(C),this._buttonToggles&&this._buttonToggles.forEach(function(_){return _._markForCheck()})}},{key:"ngOnInit",value:function(){this._selectionModel=new P.Ov(this.multiple,void 0,!1)}},{key:"ngAfterContentInit",value:function(){var C;(C=this._selectionModel).select.apply(C,(0,L.Z)(this._buttonToggles.filter(function(_){return _.checked})))}},{key:"writeValue",value:function(C){this.value=C,this._changeDetector.markForCheck()}},{key:"registerOnChange",value:function(C){this._controlValueAccessorChangeFn=C}},{key:"registerOnTouched",value:function(C){this._onTouched=C}},{key:"setDisabledState",value:function(C){this.disabled=C}},{key:"_emitChangeEvent",value:function(){var C=this.selected,_=Array.isArray(C)?C[C.length-1]:C,u=new ee(_,this.value);this._controlValueAccessorChangeFn(u.value),this.change.emit(u)}},{key:"_syncButtonToggle",value:function(C,_){var u=this,I=arguments.length>2&&void 0!==arguments[2]&&arguments[2],D=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!this.multiple&&this.selected&&!C.checked&&(this.selected.checked=!1),this._selectionModel?_?this._selectionModel.select(C):this._selectionModel.deselect(C):D=!0,D?Promise.resolve().then(function(){return u._updateModelValue(I)}):this._updateModelValue(I)}},{key:"_isSelected",value:function(C){return this._selectionModel&&this._selectionModel.isSelected(C)}},{key:"_isPrechecked",value:function(C){return void 0!==this._rawValue&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(function(_){return null!=C.value&&_===C.value}):C.value===this._rawValue)}},{key:"_setSelectionByValue",value:function(C){var _=this;this._rawValue=C,this._buttonToggles&&(this.multiple&&C?(Array.isArray(C),this._clearSelection(),C.forEach(function(u){return _._selectValue(u)})):(this._clearSelection(),this._selectValue(C)))}},{key:"_clearSelection",value:function(){this._selectionModel.clear(),this._buttonToggles.forEach(function(C){return C.checked=!1})}},{key:"_selectValue",value:function(C){var _=this._buttonToggles.find(function(u){return null!=u.value&&u.value===C});_&&(_.checked=!0,this._selectionModel.select(_))}},{key:"_updateModelValue",value:function(C){C&&this._emitChangeEvent(),this.valueChange.emit(this.value)}}]),o}();return W.\u0275fac=function(v){return new(v||W)(h.Y36(h.sBO),h.Y36(Z,8))},W.\u0275dir=h.lG2({type:W,selectors:[["mat-button-toggle-group"]],contentQueries:function(v,C,_){var u;1&v&&h.Suo(_,S,5),2&v&&h.iGM(u=h.CRH())&&(C._buttonToggles=u)},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(v,C){2&v&&(h.uIk("aria-disabled",C.disabled),h.ekj("mat-button-toggle-vertical",C.vertical)("mat-button-toggle-group-appearance-standard","standard"===C.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[h._Bn([X,{provide:a,useExisting:W}])]}),W}(),re=(0,T.Kr)(function(){return(0,k.Z)(function W(){(0,G.Z)(this,W)})}()),S=function(){var W=function(o){(0,x.Z)(C,o);var v=(0,B.Z)(C);function C(_,u,I,D,w,j){var te;(0,G.Z)(this,C),(te=v.call(this))._changeDetectorRef=u,te._elementRef=I,te._focusMonitor=D,te._isSingleSelector=!1,te._checked=!1,te.ariaLabelledby=null,te._disabled=!1,te.change=new h.vpe;var ge=Number(w);return te.tabIndex=ge||0===ge?ge:null,te.buttonToggleGroup=_,te.appearance=j&&j.appearance?j.appearance:"standard",te}return(0,k.Z)(C,[{key:"buttonId",get:function(){return"".concat(this.id,"-button")}},{key:"appearance",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance},set:function(u){this._appearance=u}},{key:"checked",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked},set:function(u){var I=(0,p.Ig)(u);I!==this._checked&&(this._checked=I,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}},{key:"disabled",get:function(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled},set:function(u){this._disabled=(0,p.Ig)(u)}},{key:"ngOnInit",value:function(){var u=this.buttonToggleGroup;this._isSingleSelector=u&&!u.multiple,this.id=this.id||"mat-button-toggle-".concat(pe++),this._isSingleSelector&&(this.name=u.name),u&&(u._isPrechecked(this)?this.checked=!0:u._isSelected(this)!==this._checked&&u._syncButtonToggle(this,this._checked))}},{key:"ngAfterViewInit",value:function(){this._focusMonitor.monitor(this._elementRef,!0)}},{key:"ngOnDestroy",value:function(){var u=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),u&&u._isSelected(this)&&u._syncButtonToggle(this,!1,!1,!0)}},{key:"focus",value:function(u){this._buttonElement.nativeElement.focus(u)}},{key:"_onButtonClick",value:function(){var u=!!this._isSingleSelector||!this._checked;u!==this._checked&&(this._checked=u,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new ee(this,this.value))}},{key:"_markForCheck",value:function(){this._changeDetectorRef.markForCheck()}}]),C}(re);return W.\u0275fac=function(v){return new(v||W)(h.Y36(a,8),h.Y36(h.sBO),h.Y36(h.SBq),h.Y36(b.tE),h.$8M("tabindex"),h.Y36(Z,8))},W.\u0275cmp=h.Xpm({type:W,selectors:[["mat-button-toggle"]],viewQuery:function(v,C){var _;1&v&&h.Gf(e,5),2&v&&h.iGM(_=h.CRH())&&(C._buttonElement=_.first)},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(v,C){1&v&&h.NdJ("focus",function(){return C.focus()}),2&v&&(h.uIk("aria-label",null)("aria-labelledby",null)("id",C.id)("name",null),h.ekj("mat-button-toggle-standalone",!C.buttonToggleGroup)("mat-button-toggle-checked",C.checked)("mat-button-toggle-disabled",C.disabled)("mat-button-toggle-appearance-standard","standard"===C.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[h.qOj],ngContentSelectors:g,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(v,C){if(1&v&&(h.F$t(),h.TgZ(0,"button",0,1),h.NdJ("click",function(){return C._onButtonClick()}),h.TgZ(2,"span",2),h.Hsn(3),h.qZA()(),h._UZ(4,"span",3)(5,"span",4)),2&v){var _=h.MAs(1);h.Q6J("id",C.buttonId)("disabled",C.disabled||null),h.uIk("tabindex",C.disabled?-1:C.tabIndex)("aria-pressed",C.checked)("name",C.name||null)("aria-label",C.ariaLabel)("aria-labelledby",C.ariaLabelledby),h.xp6(5),h.Q6J("matRippleTrigger",_)("matRippleDisabled",C.disableRipple||C.disabled)}},directives:[T.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent;transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .cdk-high-contrast-active .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),W}(),O=function(){var W=(0,k.Z)(function o(){(0,G.Z)(this,o)});return W.\u0275fac=function(v){return new(v||W)},W.\u0275mod=h.oAB({type:W}),W.\u0275inj=h.cJS({imports:[[T.BQ,T.si],T.BQ]}),W}()},9224:function(se,R,i){i.d(R,{QW:function(){return C},a8:function(){return W}});var x=i(43144),B=i(15671),L=i(65542),k=i(76360),G=i(90508),p=["*",[["mat-card-footer"]]],P=["*","mat-card-footer"],W=function(){var _=(0,x.Z)(function u(I){(0,B.Z)(this,u),this._animationMode=I});return _.\u0275fac=function(I){return new(I||_)(L.Y36(k.Qb,8))},_.\u0275cmp=L.Xpm({type:_,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(I,D){2&I&&L.ekj("_mat-animation-noopable","NoopAnimations"===D._animationMode)},exportAs:["matCard"],ngContentSelectors:P,decls:2,vars:0,template:function(I,D){1&I&&(L.F$t(p),L.Hsn(0),L.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),_}(),C=function(){var _=(0,x.Z)(function u(){(0,B.Z)(this,u)});return _.\u0275fac=function(I){return new(I||_)},_.\u0275mod=L.oAB({type:_}),_.\u0275inj=L.cJS({imports:[[G.BQ],G.BQ]}),_}()},32368:function(se,R,i){i.d(R,{rP:function(){return C}}),i(60136),i(57777);var L=i(43144),k=i(15671),G=i(17144),p=i(65542),P=i(90508),v=(i(63191),i(93075),i(76360),i(15664),function(){var _=(0,L.Z)(function u(){(0,k.Z)(this,u)});return _.\u0275fac=function(I){return new(I||_)},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({}),_}()),C=function(){var _=(0,L.Z)(function u(){(0,k.Z)(this,u)});return _.\u0275fac=function(I){return new(I||_)},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({imports:[[v,P.si,P.BQ,G.Q8],v,P.BQ]}),_}()}}]);