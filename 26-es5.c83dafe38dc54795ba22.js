(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"/OSc":function(e,t,a){"use strict";var n=function(e){return e[e.NEW=1]="NEW",e[e.USED=2]="USED",e[e.TRACKING=3]="TRACKING",e[e.FI=6]="FI",e[e.SERVICE_PARTS=5]="SERVICE_PARTS",e[e.CRM=7]="CRM",e}({}),r=a("SnDi");class s{constructor(e={}){this.sectionLine=e.sectionLine,this.value=e.value,this.valueStatus=e.valueStatus,this.valueEdit=e.valueEdit,this.percentage=e.percentage,this.format=e.format,this.label=e.label}static fromJson(e){const t={sectionLine:e.section_line,value:e.value1[0],valueStatus:0,valueEdit:r.b.fromJson({type:r.a.ControlCenter,fields:e.tooltip.map(e=>({id:e.id,uid:e.id,type:e.editable?"input":e.type,field:e.id,label:e.label,value:e.value}))}),percentage:100*e.value1[0]/2,format:"per-round",label:e.section_name};return 0==+e.tooltip[0].value&&(t.value=e.tooltip[1].value,t.format="number"),new s(t)}}var o=a("LvDl");class i{constructor(e={}){this.units=e.units,this.pru=e.pru,this.daysSupply=e.daysSupply,this.aging=e.aging}static fromJson(e){let t,a,n;const s={labels:[],data:{amount:[],units:[]},tooltip:[]};if(e.length){t={sectionLine:o.get(e,"0.section_line"),del:{value:o.get(e,"0.del.0"),format:o.get(e,"0.del.1")},target:{value:o.get(e,"0.obj.0"),format:o.get(e,"0.obj.1")},total:{value:o.get(e,"0.tot.0"),format:o.get(e,"0.tot.1")},graph:{value:o.get(e,"0.graph.0"),valueStatus:o.get(e,"0.graph.2"),percentage:100*o.get(e,"0.graph.0")/2,format:"per-round",valueEdit:r.b.fromJson({type:r.a.ControlCenter,fields:o.get(e,"0.tooltip",[]).map(e=>({id:e.id,uid:e.id,type:e.editable?"input":e.type,field:e.id,label:e.label,value:e.value}))})}},a={grossAvg:{value:o.get(e,"1.value.0"),format:o.get(e,"1.value.1")},front:{sectionLine:o.get(e,"2.section_line"),value:o.get(e,"2.value.0"),format:"per-round",valueStatus:o.get(e,"2.value.2"),percentage:100*o.get(e,"2.value.0")/2,valueEdit:r.b.fromJson({type:r.a.ControlCenter,fields:o.get(e,"2.tooltip")&&o.get(e,"2.tooltip").map(e=>({id:e.id,uid:e.id,type:e.editable?"input":e.type,field:e.id,label:e.label,value:e.value,format:e.type}))})},back:{sectionLine:o.get(e,"3.section_line"),value:o.get(e,"3.value.0"),format:"per-round",valueStatus:o.get(e,"3.value.2"),percentage:100*o.get(e,"3.value.0")/2,valueEdit:r.b.fromJson({type:r.a.ControlCenter,fields:o.get(e,"3.tooltip")&&o.get(e,"3.tooltip").map(e=>({id:e.id,uid:e.id,type:e.editable?"input":e.type,field:e.id,label:e.label,value:e.value,format:e.type}))})}},n={units:{value:o.get(e,"4.units.0"),format:o.get(e,"4.units.1")},value:{value:o.get(e,"4.value.0"),format:o.get(e,"4.value.1")},days:{value:o.get(e,"4.days.0"),format:o.get(e,"4.days.1")}};for(const t of Object.keys(o.get(e,"5.data",[]))){const a=o.get(e,"5.data.".concat(t));s.labels.push(o.get(a,"strval1.0")),s.data.amount.push(o.get(a,"value2.0")),s.data.units.push(o.get(a,"value1.0")),s.rankGrowth=a.color,s.tooltip.push({amount:o.get(a,"value2.0"),units:o.get(a,"value1.0")})}}return new i({units:t,pru:a,daysSupply:n,aging:s})}}var u=a("tFIl");class l{constructor(e={}){this.serviceGross=e.serviceGross,this.serviceOpenRo=e.serviceOpenRo,this.partsGross=e.partsGross,this.openPartsTickets=e.openPartsTickets}static fromJson(e){const t=["serviceGross","serviceOpenRo","partsGross","openPartsTickets"].reduce((t,a,n)=>{const r=e[n],s=r instanceof Object?{value:u.c.number(r.value1&&r.value1[0]),previous:u.c.number(r.value2&&r.value2[0]),delta:u.c.number(r.delta),format:u.c.string(r.value1&&r.value1[1]),rankGrowth:u.c.number(r.value1&&r.value1[2])}:{value:void 0};return t[a]=s,t},{});return new l(t)}}class d{constructor(e={}){this.crmLeads=e.crmLeads,this.crmBudget=e.crmBudget}static fromJson(e,t,a){let n,r,s,o,i,u,l,p,c,v,m,h,g,f,S,b;t?(t.forEach(e=>{"10"===e.sectionLine?s=e.valueEdit.fields[0].value:"20"===e.sectionLine?i=e.valueEdit.fields[0].value:"40"===e.sectionLine?o=e.valueEdit.fields[0].value:"30"===e.sectionLine?u=e.valueEdit.fields[0].value:"50"===e.sectionLine?l=e.valueEdit.fields[0].value:"70"===e.sectionLine?p=e.valueEdit.fields[0].value:"60"===e.sectionLine?c=e.valueEdit.fields[0].value:"80"===e.sectionLine&&(v=e.valueEdit.fields[0].value)}),b={usedInternetLeadsCount:s,internetAppointmentSetCount:o,newInternetLeadsCount:i,phoneCallsCount:u,internetAppointmentSoldCount:l,appointmentsShownCount:p,appointmentsSetCount:c,appointmentsSoldCount:v}):b={usedInternetLeadsCount:0,internetAppointmentSetCount:0,newInternetLeadsCount:0,phoneCallsCount:0,internetAppointmentSoldCount:0,appointmentsShownCount:0,appointmentsSetCount:0,appointmentsSoldCount:0};const C={usedInternetLeadsCount:0,internetAppointmentSetCount:0,newInternetLeadsCount:0,phoneCallsCount:0,internetAppointmentSoldCount:0,appointmentsShownCount:0,appointmentsSetCount:0,appointmentsSoldCount:0},y=this.initializeCRMLeadsToZero();Object.keys(y).forEach(t=>{e.forEach(e=>{y[t]+=e[t]})});const I=this.getLeadsAsPerBugdetEntered(y,b);if(t){const n=this.getColorAsPerBudgetEntered(I,a,C);t.forEach(t=>{"10"===t.sectionLine?(0===t.valueEdit.fields[0].value?(t.value=e[0].usedInternetLeadsCount,t.format="number",t.valueStatus=0):(t.value=I.usedInternetLeadsCount,t.percentage=100*I.usedInternetLeadsCount,t.valueStatus=n.usedInternetLeadsCount,t.format="per-round"),t.valueEdit.fields[1].value=e[0].usedInternetLeadsCount,m=t):"20"===t.sectionLine?(0===t.valueEdit.fields[0].value?(t.value=e[0].newInternetLeadsCount,t.format="number",t.valueStatus=0):(t.value=I.newInternetLeadsCount,t.percentage=100*I.newInternetLeadsCount,t.valueStatus=n.newInternetLeadsCount,t.format="per-round"),t.valueEdit.fields[1].value=e[0].newInternetLeadsCount,g=t):"40"===t.sectionLine?(0===t.valueEdit.fields[0].value?(t.value=e[0].internetAppointmentSetCount,t.format="number",t.valueStatus=0):(t.value=I.internetAppointmentSetCount,t.percentage=100*I.internetAppointmentSetCount,t.valueStatus=n.internetAppointmentSetCount,t.format="per-round"),t.valueEdit.fields[1].value=e[0].internetAppointmentSetCount,h=t):"30"===t.sectionLine?(0===t.valueEdit.fields[0].value?(t.value=e[0].phoneCallsCount,t.format="number",t.valueStatus=0):(t.value=I.phoneCallsCount,t.percentage=100*I.phoneCallsCount,t.valueStatus=n.phoneCallsCount,t.format="per-round"),t.valueEdit.fields[1].value=e[0].phoneCallsCount,f=t):"50"===t.sectionLine&&(0===t.valueEdit.fields[0].value?(t.value=e[0].internetAppointmentSoldCount,t.format="number",t.valueStatus=0):(t.value=I.internetAppointmentSoldCount,t.percentage=100*I.internetAppointmentSoldCount,t.valueStatus=n.internetAppointmentSoldCount,t.format="per-round"),t.valueEdit.fields[1].value=e[0].internetAppointmentSoldCount,S=t)}),r={usedInternetLeadsCount:m,internetAppointmentSetCount:h,newInternetLeadsCount:g,phoneCallsCount:f,internetAppointmentSoldCount:S}}return n=e.length?{usedInternetLeadsCount:{value:I.usedInternetLeadsCount,format:"per-round",valueStatus:0,percentage:100*I.usedInternetLeadsCount},internetAppointmentSetCount:{value:I.internetAppointmentSetCount,format:"per-round",valueStatus:0,percentage:100*I.internetAppointmentSetCount},newInternetLeadsCount:{value:I.newInternetLeadsCount,format:"per-round",valueStatus:0,percentage:100*I.newInternetLeadsCount},phoneCallsCount:{value:I.phoneCallsCount,format:"per-round",valueStatus:0,percentage:100*I.phoneCallsCount},internetAppointmentSoldCount:{value:I.internetAppointmentSoldCount,format:"per-round",valueStatus:0,percentage:100*I.internetAppointmentSoldCount},appointmentsSetCount:{value:e[0].appointmentsSetCount,format:"cnt",valueStatus:0,percentage:100*e[0].appointmentsSetCount},appointmentsShownCount:{value:e[0].appointmentsShownCount,format:"cnt",valueStatus:0,percentage:100*e[0].appointmentsShownCount},appointmentsSoldCount:{value:e[0].appointmentsSoldCount,format:"cnt",valueStatus:0,percentage:100*e[0].appointmentsSoldCount}}:this.setLeadsWhenCrmDataIsNull(),new d({crmBudget:r,crmLeads:n})}static getColorAsPerBudgetEntered(e,t,a){let n;return 0!==t&&t.coloringThreshold.forEach(t=>{if(7===t.sectionId){"New Emails Leads"===t.label?n="newInternetLeadsCount":"Used Emails Leads"===t.label?n="usedInternetLeadsCount":"Phone Calls"===t.label?n="phoneCallsCount":"Website Apt Set"===t.label?n="internetAppointmentSetCount":"Website Apt Sold"===t.label&&(n="internetAppointmentSoldCount");for(const r of Object.keys(e))n===r&&!1===t.reversed&&(100*e[r]>=t.range[0]&&100*e[r]<=t.range[1]?a[r]=0:100*e[r]>=t.range[1]?a[r]=1:100*e[r]<=t.range[1]&&(a[r]=-1))}}),a}static initializeCRMLeadsToZero(){return{usedInternetLeadsCount:0,internetAppointmentSetCount:0,newInternetLeadsCount:0,phoneCallsCount:0,internetAppointmentSoldCount:0,appointmentsShownCount:0,appointmentsSetCount:0,appointmentsSoldCount:0}}static setLeadsWhenCrmDataIsNull(){let e;return e={usedInternetLeadsCount:{value:0,format:"per-round",valueStatus:0,percentage:0},internetAppointmentSetCount:{value:0,format:"per-round",valueStatus:0,percentage:0},newInternetLeadsCount:{value:0,format:"per-round",valueStatus:0,percentage:0},phoneCallsCount:{value:0,format:"per-round",valueStatus:0,percentage:0},internetAppointmentSoldCount:{value:0,format:"per-round",valueStatus:0,percentage:0},appointmentsSetCount:{value:0,format:"cnt",valueStatus:0,percentage:0},appointmentsShownCount:{value:0,format:"cnt",valueStatus:0,percentage:0},appointmentsSoldCount:{value:0,format:"cnt",valueStatus:0,percentage:0}},e}static getLeadsAsPerBugdetEntered(e,t){const a=this.initializeCRMLeadsToZero();return Object.keys(e).forEach(n=>{a[n]=0!==t[n]?e[n]/t[n]:0}),a}}class p{constructor(e={}){this.pageViewPerSession=e.pageViewPerSession,this.averageTimeOnSite=e.averageTimeOnSite,this.bounceRate=e.bounceRate}static fromJson(e){let t,a,n,r,s,o,i;return e.length?(t=0,a=0,n=0,r=0,e.forEach(e=>{t+=e.dataValues.PAGES,a+=e.dataValues.VISITS,n+=e.dataValues.DURATION,r+=e.dataValues.BOUNCED_VISITS}),s=parseFloat((t/a).toFixed(2)),o=parseFloat((n/a).toFixed(2)),i=parseFloat((r/a*100).toFixed(2))):(s=0,o=0,i=0),new p({pageViewPerSession:s,averageTimeOnSite:o,bounceRate:i})}}class c{constructor(e={}){this.doughnutData=[],this.totalVisits=0,this.remainingTotal=0,this.doughnutDataGraph=[],this.doughnutData=e}static fromJson(e){let t,a,n,r=0,s=0,o=[],i=[],u=[];if(e.length){t=e,a=[],r=0,s=0,o=[],i=[],n=[],u=["#004E9A","#44B4D5","#94DED3","#1C97A2","#CDE6C9","#813092"],e.forEach(e=>{r+=e.dataValues.VISITORS,o.push({label:e.dataGrain.SESSION_REFERRER_DISPLAY,value:e.dataValues.VISITORS})});const l=o.sort((e,t)=>t.value-e.value);let d;for(d=0;d<l.length;d++)d<5&&(i.push(l[d].value),n.push(l[d].label)),d>4&&(s+=l[d].value);l.length>5&&(i.push(s),n.push("Others")),a={labels:n,data:i,colors:u}}else t="";return new c({totalVisits:r,configData:a})}}var v=a("cFpF");class m{constructor(e={}){this.sectionLine=e.sectionLine,this.value=e.value,this.valueStatus=e.valueStatus,this.valueEdit=e.valueEdit,this.percentage=e.percentage,this.format=e.format,this.label=e.label}static fromJson(e){const t={sectionLine:e.section_line,value:0,valueStatus:0,valueEdit:v.a.fromJson({fields:e.tooltip.map(e=>({id:e.id,uid:e.id,type:e.editable?"input":e.type,field:e.id,label:e.label,value:e.value}))}),percentage:0,format:"per-round",label:e.section_name};return new m(t)}}a.d(t,"e",(function(){return n})),a.d(t,"g",(function(){return s})),a.d(t,"d",(function(){return i})),a.d(t,"f",(function(){return l})),a.d(t,"a",(function(){return d})),a.d(t,"h",(function(){return p})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return m}))},"/wis":function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a("IheW"),r=a("LRne"),s=a("HDdC"),o=a("lJxs"),i=a("JIr8"),u=a("UXun"),l=a("wd/R"),d=a("w0+v"),p=a("VHTt"),c=a("aR35");class v{constructor(e,t,a,n,r,s){this.http=e,this.api=t,this.apis=a,this.dataAdapter=n,this.session=r,this.dataCache=s}getStoreGroups(){return this.api.get("storegroups").pipe(Object(o.a)(e=>e.map(e=>({label:e.name,value:String(e.groupIndex),data:e.stores}))))}getStores(){return this.api.get("stores").pipe(Object(o.a)(e=>e.map(e=>p.c.fromJson(e))))}getFieldtypes(e="stockType"){const t=[];return t.push({key:"fieldName",value:e}),this.apis.call("GET","/controlcenterdetail/fetchstockdealdata",t).then(e=>e).catch(this.handleError)}getNrtTimeStamp(){return this.api.get("nrttimestamp")}getNrtTimeStampByReportSection(e){return this.api.get("nrttimestamp",{params:{reportSection:e.reportSection}})}getDates(){return this.api.get("kpi/month")}getOpsFilters(){return this.api.get("dtoperations/opsfilters").pipe(Object(o.a)(e=>e.data))}getScreenData(e,t=!0){const a=JSON.stringify(e.dealStatus),n=JSON.stringify(e.dealType),s=e.stockType,o=JSON.stringify(e.storeids);if(t&&this.dataCache.existKey(JSON.stringify(e)))return this.dataCache.getKeyValue(JSON.stringify(e));const l=this.api.get("control-centers",{params:{screen_id:String(e.screenId),section_id:e.sectionId,date_index:e.dateIndex,group_id:e.groupId,store_id:e.storeId,rows:e.names,storeids:o,dealType:n,dealStatus:a,stockType:s,newFilterID:e.newFilterID,usedFilterID:e.usedFilterID,fiFilterID:e.fiFilterID,modelFilterID:e.modelFilterID,contestFilterID:e.contestFilterID,fiPerfFilterID:e.fiPerfFilterID,opsfilter:e.opsfilter}}).pipe(Object(i.a)(()=>(t=!1,this.dataCache.cleanKeyValue(JSON.stringify(e)),Object(r.a)([]))),Object(u.a)(1));return t&&this.dataCache.setKey(JSON.stringify(e),l),l}getVehicleSummaryData(e,t){return this.getScreenData(Object.assign({screenId:{"new-vehicles":d.d.New,"used-vehicles":d.d.Used}[e]},t)).pipe(Object(o.a)(e=>this.dataAdapter.parseGetVehicleSummaryResponse(e)))}getOperationsSummaryData(e){return this.getScreenData(e).pipe(Object(o.a)(e=>this.dataAdapter.parseGetOperationsSummaryResponse(e)))}getSalesByModelDetailGridColumns(e,t,a,n,r,s){return this.api.get("control-centers/".concat(e,"-sales-details"),{params:{store_id:t,date_index:a,model:n,dealType:JSON.stringify(s),dealStatus:JSON.stringify(r)}}).pipe(Object(o.a)(e=>this.dataAdapter.parseGetDetailGrid(e)))}getCRMData(e,t,a,r,s){const o=l(e,"MM/DD/YYYY").format("YYYY-MM-DD"),i=l(t,"MM/DD/YYYY").format("YYYY-MM-DD"),u=this.session.currentUser.stores;let d;"groupId"===r&&"0"===a?d=this.getStoreListForBusinessSegmentAll(u):"groupId"===r?s.groupOrStore.items.forEach(e=>{e.value===a&&(d=this.getEisStoreIds(u,this.getEEStoreIdForBusinessSegment(e.data),r))}):"storeId"===r&&(d=this.getEisStoreIds(u,a,r));const p={entity:"storeId",entityIds:d,startDate:o,endDate:i},v=new n.g;return v.append("Content-Type","application/json"),v.append("Accept","application/json"),v.append("Authorization","Bearer "+this.session.currentUser.IAMTokenId),this.http.post(c.a.baseURL+"dm-crm-leads-services/v1/sales/crmleads/monthly/search",JSON.stringify(p),{headers:v})}getEEStoreIdForBusinessSegment(e){const t=[];return e.forEach(e=>{t.push(e.store_id)}),t}getStoreListForBusinessSegmentAll(e){const t=[];return e.forEach(e=>{null!=e.EisStoreID&&t.push(e.EisStoreID)}),t}getWebsitesSummaryData(e,t,a,r,o,i){return new s.a(s=>{this.getWebIdList(o,r,i).then(r=>{const o={columns:"ANY",webId:r,isYOY:e,isPOP:t,start_month_offset:a-24,end_month_offset:a-24},i=new n.g;i.append("Content-Type","application/json"),i.append("Accept","application/json"),i.append("Authorization","Bearer "+this.session.currentUser.IAMTokenId),this.http.post(c.a.baseURL+"dm-bi-utils-api/v1/dm-edwservices-sessions/timeseries/MONTH/grain/SESSIONS_CHANNEL_GROUP",JSON.stringify(o),{headers:i}).subscribe(e=>{s.next(e),s.complete()})})})}getWebsitesSummaryDataForDoughnut(e,t,a,r,o,i){return new s.a(s=>{this.getWebIdList(o,r,i).then(r=>{const o={columns:"ANY",webId:r,isYOY:e,isPOP:t,start_month_offset:a-24,end_month_offset:a-24},i=new n.g;i.append("Content-Type","application/json"),i.append("Accept","application/json"),i.append("Authorization","Bearer "+this.session.currentUser.IAMTokenId),this.http.post(c.a.baseURL+"dm-bi-utils-api/v1/dm-edwservices-sessions/timeseries/MONTH/grain/SESSION_REFERRER",JSON.stringify(o),{headers:i}).subscribe(e=>{s.next(e),s.complete()})})})}getWebIdList(e,t,a){let n,r=[],s=[];s=this.session.currentUser.stores,"groupId"===t&&"0"===e?r=this.getStoreListForBusinessSegmentAll(s):"groupId"===t?a.groupOrStore.items.forEach(a=>{a.value===e&&(n=this.getEEStoreIdForBusinessSegment(a.data),r=this.getEisStoreIds(s,n,t))}):"storeId"===t&&(r=this.getEisStoreIds(s,e,t));const o=[];return this.getWebIdsForStoreIds(r).then(e=>(e.forEach(e=>{e.webids&&e.webids.forEach(e=>{o.push(e)})}),o))}logError(e){console.log(e)}getWebIdsForStoreIds(e=[]){const t={storeIds:e},a=new n.g;return a.append("Content-Type","application/json"),a.append("Accept","application/json"),a.append("Authorization","Bearer "+this.session.currentUser.IAMTokenId),this.http.post("https://api-dit.connectcdk.com/api/dm-bi-utils-api/v1/stores/detail",JSON.stringify(t),{headers:a}).toPromise().catch(e=>(this.logError(e),[]))}getEisStoreIds(e,t,a){const n=[];return e.forEach(e=>{"groupId"===a?t.forEach(t=>{e.StoreID===t.toString()&&null!=e.EisStoreID&&n.push(e.EisStoreID)}):e.StoreID===t&&n.push(e.EisStoreID)}),n}cleanCache(){this.dataCache.cleanAll()}handleError(e){return Promise.reject(e.error?e.error:e)}}},"0I5a":function(e,t,a){"use strict";var n=a("LvDl"),r=a("/kTj"),s=a("tFIl"),o=a("/gN3"),i=a("w0+v");class u extends s.a{constructor(e={}){super(),this.fillAll(e,["daysFrom","daysTo","value","valueIndicator","money","growth","totalUnits","totalAmount","days"])}}var l=a("SuHJ"),d=a("/OSc");a.d(t,"a",(function(){return p}));class p{constructor(e){this.DEFAULT_COLORING_RANGE=[-50,50],this.debug=e.factory(new.target.name,r.a.All)}parseGetVehicleSummaryResponse(e){const t={};if(e instanceof Array==0||!e.length)return t;const a=e=>e&&e.data instanceof Array&&e.data.length,n=e.find(e=>+e.section_id===l.a.Models),r=e.find(e=>+e.section_id===l.a.UserRanking),s=e.find(e=>+e.section_id===l.a.AgingAnalysis);if(a(n)&&(t[l.a.Models]={id:l.a.Models,name:n.screen_name,data:n.data.map(e=>this.toVehicleSummaryModels(e))}),t[l.a.UserRanking]=a(r)&&a(r.data[0])?{id:l.a.UserRanking,name:r.screen_name,data:r.data[0].data.map((e,t)=>this.toUserRankModel(e,t+1))}:{id:l.a.UserRanking,name:r.screen_name,data:[]},a(s)){const e=a(s.data[0])&&s.data[0].data.map(e=>this.toAgingAnalysisBlockModel(e))||[];e.unshift({totalAmount:s.data[0].daysSupply.value,totalUnits:s.data[0].daysSupply.units[0],days:s.data[0].daysSupply.days[0]}),t[l.a.AgingAnalysis]={id:l.a.AgingAnalysis,name:s.screen_name,data:e}}return t}parseGetOperationsSummaryResponse(e){const t=t=>{const a=e.find(e=>+e.section_id===t);return a&&a.data?a.data:[]};return{newData:d.d.fromJson(t(d.e.NEW)),usedData:d.d.fromJson(t(d.e.USED)),fiData:i.c.fromOperationsSummaryJson(t(d.e.FI)),servicePartsData:d.f.fromJson(t(d.e.SERVICE_PARTS)),trackingData:t(d.e.TRACKING).map(e=>d.g.fromJson(e)),crmBudgetData:t(d.e.CRM).map(e=>d.b.fromJson(e)),crmData:d.a.fromJson(t(d.e.CRM),0,0)}}mergeOperationsSummaryDataWithcrmData(e,t){return e}mergeOperationsSummaryDataWithSettings(e,t){const a=t&&t.coloringThreshold||[],n=(e,t,n,r,s)=>{const o=((e,t,n,r)=>a.find(a=>!(a.screenId!==i.d.Operations||a.sectionId!==e||a.sectionLine!==t||n&&a.field!==n||r&&a.item!==r)))(e,t,r,s);let u=o&&o.range||[...this.DEFAULT_COLORING_RANGE];u=u.map(e=>+e);const l=o&&o.reversed,d=[Math.abs(u[0]+100)/2,(100+u[1])/2],p=[d[0],d[1]-d[0],100-(d[1]-d[0]+d[0])];return{threshold:l?p.reverse():p,reversed:l,valueStatus:2*n<Math.abs(u[0]+100)?l?1:-1:2*n>100+u[1]?l?-1:1:0}};return e.trackingData.forEach(e=>{-1!==["per","per2","per-3f","per-round"].indexOf(e.format)&&Object.assign(e,n(d.e.TRACKING,e.sectionLine,e.percentage))}),Object.assign(e.newData.units.graph,n(d.e.NEW,e.newData.units.sectionLine,e.newData.units.graph.percentage,"graph")),Object.assign(e.newData.pru.front,n(d.e.NEW,e.newData.pru.front.sectionLine,e.newData.pru.front.percentage)),Object.assign(e.newData.pru.back,n(d.e.NEW,e.newData.pru.back.sectionLine,e.newData.pru.back.percentage)),Object.assign(e.usedData.units.graph,n(d.e.USED,e.usedData.units.sectionLine,e.usedData.units.graph.percentage,"graph")),Object.assign(e.usedData.pru.front,n(d.e.USED,e.usedData.pru.front.sectionLine,e.usedData.pru.front.percentage)),Object.assign(e.usedData.pru.back,n(d.e.USED,e.usedData.pru.back.sectionLine,e.usedData.pru.back.percentage)),e}toUserRankModel(e,t){const a=+n.get(e,"salescount.0",0),r=+n.get(e,"salescountbudget.0",0),o=0===r?0:a/r,u={fullName:s.c.string(e.name),avatarUrl:s.c.string(e.avatar),position:s.c.string(e.position),sales:{value:a,format:n.get(e,"salescount.1","cnt")},goal:{value:r,format:n.get(e,"salescountbudget.1","cnt")},graph:{value:o,percentage:100*o/2,format:"per",threshold:[25,50,25]},rankValue:s.c.number(e.current&&e.current[0]),previousRank:s.c.number(e.last&&e.last[0]),rankGrowth:s.c.empty(e.color,e=>Math.sign(e))};return new i.e(u)}parseGetDetailGrid(e){if(!e)throw this.debug.warn("parseGetDetailGrid() raw object:",e),new Error("parseGetDetailGrid() Wrong raw object");if(e.labels instanceof Array==0)throw this.debug.warn("parseGetDetailGrid() raw object:",e),new Error("parseGetDetailGrid() Wrong raw object. 'labels' field is not array");if(!1===e.data)throw this.debug.warn("parseGetDetailGrid() raw object:",e),new Error("parseGetDetailGrid() Wrong raw object. 'data' field is not array");return{columns:e.labels.sort((e,t)=>+e.a-+t.b).map(e=>new o.a({name:e.b,field:e.c})),data:e.data.map(e=>new o.e(e))}}toAgingAnalysisBlockModel(e){const[t,a]=e.strval1&&e.strval1[0]&&e.strval1[0].split("-")||[],n={daysFrom:s.c.string(t),daysTo:s.c.number(a),value:s.c.number(e.value1&&e.value1[0]),money:s.c.number(e.value2&&e.value2[0]),valueIndicator:s.c.empty(e.color,e=>Math.sign(e)),growth:s.c.empty(e.color,e=>Math.sign(e))};return new u(n)}toVehicleSummaryModels(e){let t=[];if(e.data instanceof Array&&e.data[0]){const a=e.data[0],n=0==+a.budget[0]?0:a.actual[0]/a.budget[0],r=0==+a.budget_last_year[0]?0:a.last_year[0]/a.budget_last_year[0],s=e=>{const t=[],a=[];return Object.keys(e[0]).forEach(n=>{a.push(+e[0][n][0]),t.push(e[0][n][1])}),{labels:t,values:a,format:e[1]}},o=s(a.trend_actual),i=s(a.trend_last);t=[{key:"actual",total:{value:+a.actual[0],format:a.actual[1]},goal:{value:+a.budget[0],format:a.budget[1]},graph:{value:n,percentage:100*n/2,format:"per-round",threshold:[25,50,25]},rankGrowth:0},{key:"last_year",total:{value:+a.last_year[0],format:a.last_year[1]},goal:{value:+a.budget_last_year[0],format:a.budget_last_year[1]},graph:{value:r,percentage:100*r/2,format:"per-round",threshold:[25,50,25]},rankGrowth:1},{key:"yoy",total:{value:+a.varianceyoy[0],format:a.varianceyoy[1]},lineChart:{labels:[o.labels,i.labels],data:[o.values,i.values],format:o.format},rankGrowth:-1}]}return{caption:s.c.string(e.section_name),items:t}}}},SuHJ:function(e,t,a){"use strict";var n=function(e){return e[e.Models=1]="Models",e[e.AgingAnalysis=2]="AgingAnalysis",e[e.UserRanking=3]="UserRanking",e}({});a.d(t,"a",(function(){return n}))},VHTt:function(e,t,a){"use strict";var n=function(e){return e[e.XLS=0]="XLS",e[e.PDF=1]="PDF",e}({}),r=a("2Vo4"),s=a("PqYM"),o=a("EY2u"),i=a("lJxs"),u=a("eIep"),l=a("vkgz"),d=a("GyhO"),p=a("nYR2");class c{get decrementer(){return()=>this.decrement()}get incrementor(){return()=>this.increment()}get resetter(){return()=>this.reset()}constructor(e=0){this._value$=new r.a(e),this.value$=this._value$.asObservable(),this.is$=this._value$.pipe(Object(i.a)(e=>Boolean(e)))}increment(){this._value$.next(this._value$.getValue()+1)}decrement(){const e=this._value$.getValue();this._value$.next(e>0?e-1:0)}reset(){this._value$.next(0)}streamJoiner(e=!1){return t=>{return(e?Object(s.a)(0).pipe((a=o.a,Object(u.a)(()=>a))):o.a).pipe(Object(l.a)(()=>{},void 0,this.incrementor),function(...e){return t=>t.lift.call(Object(d.a)(t,...e))}(t),Object(p.a)(this.decrementer));var a}}}var v=a("6LW8");a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return v.a}))},"w0+v":function(e,t,a){"use strict";function n(e,t,a){return{items:e,label:t,default:r(e,a)}}function r(e,t){const a=null!=t?t:e&&e[0]&&e[0].value;return void 0!==a?a:null}a("2Vo4");var s=function(e){return e[e.Operations=1]="Operations",e[e.New=5]="New",e[e.Used=6]="Used",e[e.Fi=7]="Fi",e[e.ServiceParts=3]="ServiceParts",e[e.SalesByModelNew=9]="SalesByModelNew",e[e.SalesByModelUsed=10]="SalesByModelUsed",e}({}),o=a("LvDl"),i=a("tFIl"),u=a("SnDi");class l{constructor(e={}){this.gross=e.gross,this.pvr=e.pvr,this.productPenetration=e.productPenetration,this.financePenetration=e.financePenetration,this.chargeBack=e.chargeBack}static fromOperationsSummaryJson(e){let t,a,n,r;const s=this.makeGetter(e);return e.length&&(t={product:{value:s(0,"value1",0),previous:i.c.number(s(0,"value2",0)),delta:s(0,"delta"),format:s(0,"value1",1),rankGrowth:s(0,"value1",2)},financeReserve:{value:s(1,"value1",0),previous:i.c.number(s(1,"value2",0)),delta:s(1,"delta"),format:s(1,"value1",1),rankGrowth:s(1,"value1",2)}},a={product:{value:s(2,"value1",0),previous:i.c.number(s(2,"value2",0)),delta:s(2,"delta"),format:s(2,"value1",1),rankGrowth:s(2,"value1",2)},financeReserve:{value:s(3,"value1",0),previous:i.c.number(s(3,"value2",0)),delta:s(3,"delta"),format:s(3,"value1",1),rankGrowth:s(3,"value1",2)}},n={value:s(4,"value1",0),previous:i.c.number(s(4,"value2",0)),delta:s(4,"delta"),format:s(4,"value1",1),rankGrowth:s(4,"value1",2)},r={value:s(5,"value1",0),previous:i.c.number(s(5,"value2",0)),delta:s(5,"delta"),format:s(5,"value1",1),rankGrowth:s(5,"value1",2)}),new l({gross:t,pvr:a,productPenetration:n,financePenetration:r})}static fromFiSummaryJson(e){let t,a,n,r,s;const d=this.makeGetter(e);if(e.length){t={product:{value:i.c.number(d(0,"data",0,"value1",0)),previous:i.c.number(d(0,"data",0,"value2",0)),delta:d(0,"data",0,"delta"),format:d(0,"data",0,"value1",1),rankGrowth:d(0,"data",0,"value1",2)},financeReserve:{value:i.c.number(d(0,"data",1,"value1",0)),previous:i.c.number(d(0,"data",1,"value2",0)),delta:d(0,"data",1,"delta"),format:d(0,"data",1,"value1",1),rankGrowth:d(0,"data",1,"value1",2)},total:{value:i.c.number(d(0,"data",2,"value1",0)),previous:i.c.number(d(0,"data",2,"value2",0)),delta:d(0,"data",2,"delta"),format:d(0,"data",2,"value1",1),rankGrowth:d(0,"data",2,"value1",2)}},a={product:{value:i.c.number(d(1,"data",0,"value1",0)),previous:i.c.number(d(1,"data",0,"value2",0)),delta:d(1,"data",0,"delta"),format:d(1,"data",0,"value1",1),rankGrowth:d(1,"data",0,"value1",2)},financeReserve:{value:i.c.number(d(1,"data",1,"value1",0)),previous:i.c.number(d(1,"data",1,"value2",0)),delta:d(1,"data",1,"delta"),format:d(1,"data",1,"value1",1),rankGrowth:d(1,"data",1,"value1",2)},total:{value:i.c.number(d(1,"data",2,"value1",0)),previous:i.c.number(d(1,"data",2,"value2",0)),delta:d(1,"data",2,"delta"),format:d(1,"data",2,"value1",1),rankGrowth:d(1,"data",2,"value1",2)}};const l=i.c.number(d(2,"data",0,"value1",0)),p=d(2,"data",0,"value1",1);n={value:l,previous:i.c.number(d(2,"data",0,"value2",0)),delta:d(2,"data",0,"delta"),format:p,rankGrowth:d(2,"data",0,"value1",2),graph:{value:l,percentage:"per"===p?100*l/2:100,format:"per"===p?"per-round":p,threshold:[25,50,25],valueEdit:u.b.fromJson({type:u.a.ControlCenter,fields:o.get(e,"2.data.0.tooltip",[]).map(e=>({id:e.id,uid:e.id,type:e.editable?"input":e.type,field:e.id,label:e.label,value:e.value}))})}};const c=i.c.number(d(2,"data",1,"value1",0)),v=d(2,"data",1,"value1",1);r={value:c,previous:i.c.number(d(2,"data",1,"value2",0)),delta:d(2,"data",1,"delta"),format:v,rankGrowth:d(2,"data",1,"value1",2),graph:{value:c,percentage:"per"===v?100*c/2:100,format:"per"===v?"per-round":v,threshold:[25,50,25],valueEdit:u.b.fromJson({type:u.a.ControlCenter,fields:o.get(e,"2.data.1.tooltip",[]).map(e=>({id:e.id,uid:e.id,type:e.editable?"input":e.type,field:e.id,label:e.label,value:e.value}))})}},s={value:i.c.number(d(2,"data",2,"value1",0)),previous:i.c.number(d(2,"data",2,"value2",0)),delta:d(2,"data",2,"delta"),format:d(2,"data",2,"value1",1),rankGrowth:d(2,"data",2,"value1",2)}}return new l({gross:t,pvr:a,productPenetration:n,financePenetration:r,chargeBack:s})}static makeGetter(e){return(...t)=>{let a=e;for(const e of t){if(a instanceof Object==0)break;a=a[e]}return a}}}class d extends i.a{constructor(e={}){super(),this.fillAll(e,["fullName","avatarUrl","position","sales","goal","graph","rankValue","previousRank","rankGrowth"])}}class p{constructor(e={}){this.daysFrom=e.daysFrom,this.daysTo=e.daysTo,this.value=e.value,this.valueIndicator=e.valueIndicator,this.money=e.money,this.percentage=e.percentage,this.growth=e.growth}static fromJson(e){const[t,a]=e.strval1[0].split("-");return new p({daysFrom:t||"",daysTo:a||"",value:+e.value1[0],valueIndicator:e.color,money:+e.value2[0],percentage:e.value3[0],growth:e.color})}}a.d(t,"b",(function(){return"0"})),a.d(t,"f",(function(){return n})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return d})),a.d(t,"a",(function(){return p}))}}]);