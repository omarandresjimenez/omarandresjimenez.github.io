(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{"6Ydt":function(l,n,e){"use strict";e.r(n);var t=e("8Y7J");class u{constructor(l){l.addLoaderWithPrefixedTranslations("/cabinet/custom-reports/daily-doc","")}}var o=e("pMnS"),i=e("t68o"),r=e("zbXB"),s=e("HOtD"),a=e("bZzr"),d=e("646r"),c=e("19u4"),h=e("vNrE"),p=e("RHbX"),m=e("Xrj0"),f=e("SVse"),g=e("TSSN"),v=e("iInd"),b=e("jqm9"),w=e("/kTj"),k=e("Asqg"),D=e("1Elx"),C=e("zeHk"),I=e("+bil"),_=e("S+vS"),y=e("ChPW"),x=e("M5gX"),R=e("hfps"),O=e("eeq/"),M=e("mvzq"),F=e("t1ag"),T=e("K5C0"),N=e("+2T5"),S=e("/Mbv"),E=e("98QR"),Y=e("V4Wx"),j=e("zp2H"),A=e("v67E"),G=e("2v1Z"),V=e("bUbq"),L=e("sFX2"),U=e("NxlO"),$=e("XpwZ"),B=e("cMRB"),z=e("itXk"),q=e("Cfvw"),P=e("SxV6"),X=e("wd/R"),H=(e("pFkP"),e("w+fh")),K=e("aR35"),W=e("FmVO");const Z=Object(W.a)(B.b),Q=window.amplitude;class J{constructor(l,n,e,t,u,o,i,r,s,a){this.DailyDocReportApi=l,this.coreCache=n,this.route=e,this.router=t,this.dialog=u,this.session=o,this.format=i,this.window=r,this.tracking=s,this.translate=a,this.loading=!1,this.reportTitle="Daily Doc",this.dateUrl="",this.storegroups=[],this.mainData=[],this.colsgrid=[],this.selectedMonth=null,this.selectedYear=0,this.monthpickerOpened=!1,this.monthpickerYears=[],this.stores=[],this.yearsMap=[],this.storegroupsWithoutAll=[],this.drillDataControl=[],this.drillColsGrid=[],this.drillLoading=!1,this.monthpickerValue=(new Date).getTime().toString(),this.dropdownStoregroupOpened=!1,this.selectedStoregroup={groupIndex:0,name:"All",slno:"",stores:[]},this.i18nBs=B.b,this.subs=[]}set sub(l){this.subs.push(l)}get cabinetUrl(){return K.a.cabinetUrl}ngOnInit(){this.currentUser=this.session.getCurrentUser(),isNaN(parseInt(this.monthpickerValue,10))&&(this.monthpickerValue="0");const l=this;this.sub=Object(z.b)(Object(q.a)(this.DailyDocReportApi.getStores()),this.coreCache.storesById$).subscribe(([l,n])=>{this.storesIndex=n,this.stores=l.map(l=>H.a.fromJson(l))}),this.sub=this.route.params.subscribe(n=>{let e=n.date;e||(e=""),this.dateUrl=e,this.DailyDocReportApi.getCalendar().then(n=>{const t=[],u=[];n.forEach(l=>{const n=new Date(l.date_from),e=n.getFullYear();void 0===t[e]&&(t[e]={title:e.toString(),months:[]}),l.url=X(n).format("MM_YYYY"),t[e].months.unshift(l)});for(const l of Object.keys(t))t[l].months.length&&u.push(t[l]);if(l.monthpickerYears=u,this.yearsMap=u.map(l=>l.title),""!==this.dateUrl){const[l,n]=this.dateUrl.split("_"),e=this.yearsMap.indexOf(n);this.selectedYear=-1!==e?e:u.length-1}else this.selectedYear=u.length-1;const o=t.length-1,i=o>=0?t[o].months.length-1:null;let r;if(null!==i&&(r=t[o].months[i]),!e){this.dateUrl=r.date_from;const l=new Date(this.dateUrl);this.selectedYear=this.selectedYear;const n=`${this.cabinetUrl}/custom-reports/daily-doc/`+`${X(l).format("MM_YYYY")}`;return this.router.navigate([n])}if(this.selectedMonth=this.checkDate(e,t),this.dateUrl=e,null===this.selectedMonth)return this.selectedMonth=r,this.dateUrl=this.selectedMonth.date_from,this.router.navigate([`${this.cabinetUrl}/custom-reports/daily-doc/`+this.selectedMonth.url]);if(t.forEach(l=>{l.months.forEach(l=>{const n=new Date(l.date_from),t=X(n).format("MM_YYYY");l.url=`${this.cabinetUrl}/custom-reports/daily-doc/`+`${X(n).format("MM_YYYY")}`,t===e&&(this.selectedMonth=l)})}),""!==e){const[l,n]=e.split("_");this.monthpickerValue=new Date(`${l}/01/${n}`).getTime().toString()}else this.monthpickerValue=(new Date).getTime().toString();this.setTopLinks(),this.loadPage(),this.DailyDocReportApi.getStoreGroups().then(l=>(this.storegroups=l,this.sub=this.translate.get(Z`business-segment-filter.all`).subscribe(l=>this.storegroups.unshift(new B.a(0,l))),l))})}),Q.getInstance().logEvent("Custom Reports_page_load",{reportName:"Daily Doc",eventName:"page load",eventValue:!0})}windowClick(l){this.dropdownStoregroupOpened&&!l.target.closest(".storegroup-select-box")&&(this.dropdownStoregroupOpened=!1),this.monthpickerOpened&&!l.target.closest(".monthpicker-wrapper")&&(this.monthpickerOpened=!1)}checkDate(l,n){let e=null;return n.forEach(n=>{n.months.forEach(n=>{n.url.indexOf(l)>-1&&!e&&(e=n)})}),e}toggleStoregroupDropdown(){this.dropdownStoregroupOpened=!this.dropdownStoregroupOpened}setTopLinks(){if(""!==this.dateUrl){const[l,n]=this.dateUrl.split("_");this.monthpickerValue=new Date(`${l}/01/${n}`).getTime().toString()}else this.monthpickerValue=(new Date).getTime().toString()}setStoregroup(l){this.selectedStoregroup=l,this.dropdownStoregroupOpened=!1,this.loadPage()}setMonth(l){this.selectedMonth=l,this.monthpickerOpened=!1;const n=new Date(this.selectedMonth.date_from);this.dateUrl=String((n.getMonth()+1).toString().replace(/^([0-9])$/,"0$1")+"_"+n.getFullYear())}toggleMonthpicker(){this.monthpickerOpened=!this.monthpickerOpened}prevYear(){this.selectedYear--}nextYear(){this.selectedYear++}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onExcelExport(){this.sub=this.translate.get("header.report-title").subscribe(l=>{this.maingrid.exportDataAsXls(l)})}onPDFExport(){console.log("PDF export")}drillDownModalInit(l){this.drillModal=l}drillExcelExport(){this.sub=this.translate.get("header.report-title").subscribe(l=>{this.griddrill.exportDataAsXls(l)})}openDrillDetail(l){l.rowItem.lt&&"DOC"===l.rowItem.lt&&"t"!==l.colId.substring(0,1)&&l.colId.indexOf("FI")>=0?(this.drillDetail(+l.rowItem.ln,parseInt(l.colId.substring(1,l.colId.length),10)),this.sub=this.translate.get("drill-down-modal.title").subscribe(n=>{this.drillModal.modalTitle=n+" ["+l.rowItem.ld+"]"}),this.drillModal.showModal()):l.rowItem.lt&&"calc"===l.rowItem.lt&&(this.sub=this.translate.get("messages.calculated-item").subscribe(l=>this.dialog.warning(l)))}onBsFormInit(l){this.bsForm=l}openBsForm(){this.dropdownStoregroupOpened=!1,this.bsForm.showModal()}closeBsForm(){this.bsForm1._setSegment(0,null)}loadPage(){this.loading=!0,this.mainData=[];const l=this.DailyDocReportApi.getReport(this.selectedStoregroup.groupIndex,parseInt(this.selectedMonth.dateindex,10));Object(z.b)(Object(q.a)(l),this.coreCache.storesById$.pipe(Object(P.a)())).subscribe(([l,n])=>{this.colsgrid=[],this.sub=this.translate.get(["header-col1.line_description","header-col1.total"]).subscribe(n=>{if(this.colsgrid.push({text:n["header-col1.line_description"],field:"ld",children:[]}),this.selectedStoregroup.groupIndex<2e3&&this.colsgrid.push({text:n["header-col1.total"],children:[{headerName:"Acc",field:"tAcc",decimalNumber:!0,width:100,numberOfDecimals:0},{headerName:"FI",field:"tFI",decimalNumber:!0,width:100,numberOfDecimals:0},{headerName:"Acc+FI",field:"tTot",decimalNumber:!0,width:100,numberOfDecimals:0}]}),l.stores)for(const e of l.stores)this.colsgrid.push({text:e.storename,field:e.st,children:[{headerName:"Acc",field:"s"+e.st+"Acc",decimalNumber:!0,width:100,numberOfDecimals:0},{headerName:"FI",field:"s"+e.st+"FI",decimalNumber:!0,width:100,numberOfDecimals:0},{headerName:"Acc+FI",field:"s"+e.st+"Tot",decimalNumber:!0,width:100,numberOfDecimals:0}]});this.colsgrid[0].decimalNumber=!1,this.colsgrid[0].supressMove=!0,this.colsgrid[0].pinned=!0});let e=[];for(const t of l.data){for(const l of Object.keys(t)){const n={isnumber:!1,sign:"",value:"",field:l,bold:!1};"title"===t.lt?n.value="ld"!==l?"":t[l]:t[l]&&!isNaN(t[l])&&t[l].indexOf(".")>0?(n.isnumber=!0,n.value=this.formatNumber(parseFloat(t[l].toString().replace(/,/g,"")))):!isNaN(t[l])&&t[l]&&"0"!==t[l].substring(0,1)?(n.isnumber=!0,n.value=t[l]):(n.isnumber=!1,n.value=t[l]),n.field=l,n.bold="bold"===t.font||"title"===t.lt,e.push(n)}this.mainData.push(e),e=[]}this.loading=!1},l=>{this.loading=!1,this.dialog.alert(l.message)})}drillDetail(l,n){this.drillLoading=!0,this.drillDataControl=[];const e=this.DailyDocReportApi.getDrillFIReport(n,parseInt(this.selectedMonth.dateindex,10),l);Object(q.a)(e).subscribe(l=>{this.drillColsGrid=[],this.sub=this.translate.get(["drill-col.deal","drill-col.dealdate","drill-col.status","drill-col.stockno","drill-col.vin","drill-col.make","drill-col.model","drill-col.buyername","drill-col.frontgross","drill-col.backgross","drill-col.totalgross"]).subscribe(l=>{this.drillColsGrid.push({text:l["drill-col.deal"],field:"deal"}),this.drillColsGrid.push({text:l["drill-col.dealdate"],field:"entry"}),this.drillColsGrid.push({text:l["drill-col.status"],field:"status"}),this.drillColsGrid.push({text:l["drill-col.stockno"],field:"Stock"}),this.drillColsGrid.push({text:l["drill-col.vin"],field:"VIN"}),this.drillColsGrid.push({text:l["drill-col.make"],field:"Make"}),this.drillColsGrid.push({text:l["drill-col.model"],field:"model"}),this.drillColsGrid.push({text:l["drill-col.buyername"],field:"FullName"}),this.drillColsGrid.push({text:l["drill-col.frontgross"],field:"FrontGross",sign:"$",decimalNumber:!0}),this.drillColsGrid.push({text:l["drill-col.backgross"],field:"BackGross",sign:"$",decimalNumber:!0}),this.drillColsGrid.push({text:l["drill-col.totalgross"],field:"TotalGross",sign:"$",decimalNumber:!0})});let n=[];this.drillDown={backgross:0,frontgross:0,totalgross:0,count:0};for(const e of l.data){for(const l of Object.keys(e)){const t={isnumber:!1,value:"",field:l,bold:!1};e[l]&&!isNaN(e[l])&&e[l].indexOf(".")>0?(t.isnumber=!0,t.value=this.formatNumber(parseFloat(e[l].toString().replace(/,/g,"")))):!isNaN(e[l])&&e[l]&&"0"!==e[l].substring(0,1)?(t.isnumber=!0,t.value=e[l]):(t.isnumber=!1,t.value=e[l]),t.field=l,n.push(t)}this.drillDataControl.push(n),n=[],this.drillDown.backgross+=+e.BackGross,this.drillDown.frontgross+=+e.FrontGross,this.drillDown.count++,this.drillDown.totalgross+=+e.TotalGross}this.drillLoading=!1},l=>{this.drillLoading=!1,this.dialog.alert(l.message)})}formatNumber(l,n=0){return isNaN(l)||(l=parseFloat(l)+1e-6),this.format.transform(l,0,n)}}var ll=e("f2Qm");class nl extends ll.a{constructor(l){super(l),this.api=l}getStoreGroups(){return this.api.call("GET","/storegroups").then(l=>l).catch(this.handleError)}getCalendar(){return this.api.call("GET","/kpi/month").then(l=>l).catch(this.handleError)}getReport(l,n){const e=[];return e.push({key:"busseg",value:l}),e.push({key:"dateid",value:n}),this.api.call("GET","/dailydoc",e).then(l=>l).catch(this.handleError)}getDrillFIReport(l,n,e){const t=[];return t.push({key:"storeid",value:l}),t.push({key:"dateid",value:n}),t.push({key:"docline",value:e}),this.api.call("GET","/dailydoc/drillfi",t).then(l=>l).catch(this.handleError)}getStores(){return this.api.call("GET","/stores").then(l=>l).catch(this.handleError)}handleError(l){return Promise.reject(l.error?l.error:l)}}var el=e("yK5/"),tl=e("Ntwu"),ul=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]     .c_modal{width:70%;height:80%}[_nghost-%COMP%]     .c_modal__dialog{height:100%}[_nghost-%COMP%]     .c_modal__content{height:100%}"]],data:{}});function ol(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","dropdown-loader"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"app-loader",[],[[8,"className",0]],null,null,p.b,p.a)),t["\u0275did"](2,49152,null,0,m.a,[],null,null)],null,(function(l,n){l(n,1,0,t["\u0275nov"](n,2).cssClassByType)}))}function il(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","dropdown-menu-item"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"span",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.setStoregroup(l.context.$implicit)&&t),t}),null,null)),(l()(),t["\u0275ted"](2,null,["",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.name)}))}function rl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[["class","c_dropdown-std_menu"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,8,"div",[["style","height: auto; max-height: 20pc; overflow-y: auto;"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,ol)),t["\u0275did"](3,16384,null,0,f.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,il)),t["\u0275did"](5,278528,null,0,f.l,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275eld"](6,0,null,null,3,"div",[["class","dropdown-menu-item dropdown-menu-actions"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,2,"button",[["class","btn btn--empty btn--color-primary btn--small"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.openBsForm()&&t),t}),null,null)),(l()(),t["\u0275ted"](8,null,[""," "])),t["\u0275pid"](131072,g.i,[g.j,t.ChangeDetectorRef])],(function(l,n){var e=n.component;l(n,3,0,!e.storegroups.length),l(n,5,0,e.storegroups)}),(function(l,n){var e=n.component;l(n,8,0,t["\u0275unv"](n,8,0,t["\u0275nov"](n,9).transform(e.i18nBs+"business-segment-filter.add-new")))}))}function sl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","monthpicker-loader"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"app-loader",[],[[8,"className",0]],null,null,p.b,p.a)),t["\u0275did"](2,49152,null,0,m.a,[],null,null)],null,(function(l,n){l(n,1,0,t["\u0275nov"](n,2).cssClassByType)}))}function al(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[["class","monthpicker-month-item"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,8,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var u=!0,o=l.component;return"click"===n&&(u=!1!==t["\u0275nov"](l,2).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&u),"click"===n&&(u=!1!==o.setMonth(l.context.$implicit)&&u),u}),null,null)),t["\u0275did"](2,671744,[[6,4]],0,v.r,[v.o,v.a,f.j],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](3,1),t["\u0275did"](4,1720320,null,2,v.q,[v.o,t.ElementRef,t.Renderer2,[2,v.p],[2,v.r]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),t["\u0275qud"](603979776,5,{links:1}),t["\u0275qud"](603979776,6,{linksWithHrefs:1}),t["\u0275pod"](7,{exact:0}),(l()(),t["\u0275ted"](8,null,["",""])),t["\u0275ppd"](9,2)],(function(l,n){var e=l(n,3,0,n.context.$implicit.url);l(n,2,0,e);var t=l(n,7,0,!0);l(n,4,0,t,"active")}),(function(l,n){l(n,1,0,t["\u0275nov"](n,2).target,t["\u0275nov"](n,2).href);var e=t["\u0275unv"](n,8,0,l(n,9,0,t["\u0275nov"](n.parent.parent.parent,0),n.context.$implicit.date_from,"MMM"));l(n,8,0,e)}))}function dl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,10,"div",[["class","monthpicker-year"]],[[8,"hidden",0]],null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,6,"div",[["class","monthpicker-year-header"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"button",[["class","prev-year"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.prevYear()&&t),t}),null,null)),(l()(),t["\u0275eld"](3,0,null,null,0,"span",[["class","icon-arrow-s-left"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,1,"span",[["class","year-title"]],null,null,null,null,null)),(l()(),t["\u0275ted"](5,null,["",""])),(l()(),t["\u0275eld"](6,0,null,null,1,"button",[["class","next-year"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.nextYear()&&t),t}),null,null)),(l()(),t["\u0275eld"](7,0,null,null,0,"span",[["class","icon-arrow-s-right"]],null,null,null,null,null)),(l()(),t["\u0275eld"](8,0,null,null,2,"div",[["class","monthpicker-year-months"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,al)),t["\u0275did"](10,278528,null,0,f.l,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,10,0,n.context.$implicit.months)}),(function(l,n){var e=n.component;l(n,0,0,n.context.index!=e.selectedYear),l(n,2,0,0===e.selectedYear),l(n,5,0,n.context.$implicit.title),l(n,6,0,e.selectedYear==e.monthpickerYears.length-1)}))}function cl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","c_dropdown-std_menu monthpicker"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,sl)),t["\u0275did"](2,16384,null,0,f.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,dl)),t["\u0275did"](4,278528,null,0,f.l,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var e=n.component;l(n,2,0,!e.monthpickerYears.length),l(n,4,0,e.monthpickerYears)}),null)}function hl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"button",[["class","right"]],[[8,"hidden",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onExcelExport()&&t),t}),null,null)),(l()(),t["\u0275eld"](1,16777216,null,null,2,"i",[["class","material-icons"],["tooltipTheme","dark-auto"]],null,[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],(function(l,n,e){var u=!0;return"focusin"===n&&(u=!1!==t["\u0275nov"](l,2).show()&&u),"mouseenter"===n&&(u=!1!==t["\u0275nov"](l,2).show()&&u),"focusout"===n&&(u=!1!==t["\u0275nov"](l,2).hide()&&u),"mouseleave"===n&&(u=!1!==t["\u0275nov"](l,2).hide()&&u),u}),null,null)),t["\u0275did"](2,147456,null,0,b.a,[t.ViewContainerRef,t.ComponentFactoryResolver,t.ChangeDetectorRef,w.b],{content:[0,"content"],tooltipTheme:[1,"tooltipTheme"]},null),(l()(),t["\u0275ted"](-1,null,["file_download"]))],(function(l,n){l(n,2,0,t["\u0275nov"](n.parent,39),"dark-auto")}),(function(l,n){l(n,0,0,n.component.loading)}))}function pl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"ag-grid",[["style","height:100%"]],null,[[null,"openDetailsClick"],["window","resize"]],(function(l,n,e){var u=!0,o=l.component;return"window:resize"===n&&(u=!1!==t["\u0275nov"](l,5).onResize()&&u),"openDetailsClick"===n&&(u=!1!==o.openDrillDetail(e)&&u),u}),k.b,k.a)),t["\u0275prd"](512,null,f.f,f.f,[t.LOCALE_ID]),t["\u0275prd"](512,null,D.a,D.a,[]),t["\u0275prd"](512,null,C.a,C.a,[I.a,_.a,y.a,g.j]),t["\u0275prd"](512,null,x.a,x.a,[]),t["\u0275did"](5,770048,[[1,4],["maingrid",4]],0,R.a,[f.d,f.f,D.a,O.a,C.a,M.a,x.a,F.b,g.j,T.a,w.b,N.a],{data:[0,"data"],headers:[1,"headers"],showTotal:[2,"showTotal"],showCount:[3,"showCount"],allowSort:[4,"allowSort"],formattedValues:[5,"formattedValues"],autoFitColumns:[6,"autoFitColumns"],idGrid:[7,"idGrid"]},{openDetailsClick:"openDetailsClick"})],(function(l,n){var e=n.component;l(n,5,0,e.mainData,e.colsgrid,!1,!1,!1,!1,!1,"maingridp")}),null)}function ml(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","content__section_body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["style","height: calc(100vh - 216px);"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,pl)),t["\u0275did"](3,16384,null,0,f.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,3,0,!n.component.loading)}),null)}function fl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.drillExcelExport()&&t),t}),null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"span",[["class","icon-file-excel"]],null,null,null,null,null))],null,(function(l,n){var e=n.component;l(n,0,0,!e.drillDataControl.length||e.drillLoading)}))}function gl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[["class","c__table"],["style","height:100%;display: grid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,8,"ag-grid",[],null,[["window","resize"]],(function(l,n,e){var u=!0;return"window:resize"===n&&(u=!1!==t["\u0275nov"](l,9).onResize()&&u),u}),k.b,k.a)),t["\u0275prd"](512,null,f.C,f.D,[t.ElementRef,t.KeyValueDiffers,t.Renderer2]),t["\u0275did"](3,278528,null,0,f.p,[f.C],{ngStyle:[0,"ngStyle"]},null),t["\u0275pod"](4,{height:0,width:1}),t["\u0275prd"](512,null,f.f,f.f,[t.LOCALE_ID]),t["\u0275prd"](512,null,D.a,D.a,[]),t["\u0275prd"](512,null,C.a,C.a,[I.a,_.a,y.a,g.j]),t["\u0275prd"](512,null,x.a,x.a,[]),t["\u0275did"](9,770048,[[3,4],["griddrill",4]],0,R.a,[f.d,f.f,D.a,O.a,C.a,M.a,x.a,F.b,g.j,T.a,w.b,N.a],{data:[0,"data"],headers:[1,"headers"],showTotal:[2,"showTotal"],showCount:[3,"showCount"],idGrid:[4,"idGrid"]},null)],(function(l,n){var e=n.component,t=l(n,4,0,"100%","99%");l(n,3,0,t),l(n,9,0,e.drillDataControl,e.drillColsGrid,!1,!1,"maingrid3")}),null)}function vl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","c__table-row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","c__table-cell c__table-loading"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"app-loader",[],[[8,"className",0]],null,null,p.b,p.a)),t["\u0275did"](3,49152,null,0,m.a,[],null,null)],null,(function(l,n){l(n,2,0,t["\u0275nov"](n,3).cssClassByType)}))}function bl(l){return t["\u0275vid"](0,[t["\u0275pid"](0,f.e,[t.LOCALE_ID]),t["\u0275pid"](0,D.a,[]),t["\u0275qud"](671088640,1,{maingrid:0}),t["\u0275qud"](402653184,2,{bsForm1:0}),t["\u0275qud"](671088640,3,{griddrill:0}),t["\u0275qud"](402653184,4,{drillDownModal:0}),(l()(),t["\u0275eld"](6,0,null,null,22,"div",[["class","page__actions_bar page__actions_bar--aligned"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,0,"div",[["class","align-left"]],null,null,null,null,null)),(l()(),t["\u0275eld"](8,0,null,null,20,"div",[["class","align-right"]],null,null,null,null,null)),(l()(),t["\u0275eld"](9,0,null,null,19,"div",[["class","content__section-header__actions"]],null,null,null,null,null)),(l()(),t["\u0275eld"](10,0,null,null,7,"div",[["class","c_dropdown-std less-border storegroup-select-box"]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,4,"div",[["class","c_dropdown-std_value"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleStoregroupDropdown()&&t),t}),null,null)),(l()(),t["\u0275eld"](12,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t["\u0275ted"](13,null,["",": ",""])),t["\u0275pid"](131072,g.i,[g.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](15,0,null,null,0,"span",[["class","icon-arrow-s-down"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,rl)),t["\u0275did"](17,16384,null,0,f.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](18,0,null,null,10,"div",[["class","c_dropdown-std monthpicker-wrapper less-border"]],null,null,null,null,null)),(l()(),t["\u0275eld"](19,0,null,null,7,"div",[["class","c_dropdown-std_value"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleMonthpicker()&&t),t}),null,null)),(l()(),t["\u0275eld"](20,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](21,0,null,null,2,"strong",[],null,null,null,null,null)),(l()(),t["\u0275ted"](22,null,["",""])),t["\u0275ppd"](23,2),(l()(),t["\u0275ted"](24,null,[" "," "])),t["\u0275ppd"](25,2),(l()(),t["\u0275eld"](26,0,null,null,0,"span",[["class","icon-arrow-s-down"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,cl)),t["\u0275did"](28,16384,null,0,f.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](29,0,null,null,12,"div",[["class","content__section"]],null,null,null,null,null)),(l()(),t["\u0275eld"](30,0,null,null,11,"div",[["class","content__section-header content__section-header"]],null,null,null,null,null)),(l()(),t["\u0275eld"](31,0,null,null,3,"h3",[["class","content__section-heading"],["style","float: left;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](32,0,null,null,2,"strong",[],null,null,null,null,null)),(l()(),t["\u0275ted"](33,null,[""," "])),t["\u0275pid"](131072,g.i,[g.j,t.ChangeDetectorRef]),(l()(),t["\u0275and"](16777216,null,null,1,null,hl)),t["\u0275did"](36,16384,null,0,f.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](37,0,null,null,4,"app-tooltip-content",[["style","width:75px"]],[[1,"role",0],[8,"className",0],[2,"tooltip--with-header",null],[4,"top","px"],[4,"left","px"],[2,"in",null],[2,"fade",null]],[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],(function(l,n,e){var u=!0;return"focusin"===n&&(u=!1!==t["\u0275nov"](l,39).mouseIn()&&u),"mouseenter"===n&&(u=!1!==t["\u0275nov"](l,39).mouseIn()&&u),"focusout"===n&&(u=!1!==t["\u0275nov"](l,39).mouseOut()&&u),"mouseleave"===n&&(u=!1!==t["\u0275nov"](l,39).mouseOut()&&u),u}),s.c,s.a)),t["\u0275prd"](512,null,S.a,S.a,[w.b]),t["\u0275did"](39,4440064,[["tooltipUnits",4]],0,E.a,[t.ElementRef,S.a,Y.a,f.d,t.Renderer2,t.ChangeDetectorRef,w.b],null,null),(l()(),t["\u0275ted"](40,1,[" "," "])),t["\u0275pid"](131072,g.i,[g.j,t.ChangeDetectorRef]),(l()(),t["\u0275and"](16777216,null,null,1,null,ml)),t["\u0275did"](43,16384,null,0,f.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](44,0,null,null,5,"app-modal",[["class","modal-bs-form"]],null,[[null,"onInit"],[null,"close"]],(function(l,n,e){var t=!0,u=l.component;return"onInit"===n&&(t=!1!==u.onBsFormInit(e)&&t),"close"===n&&(t=!1!==u.closeBsForm()&&t),t}),j.b,j.a)),t["\u0275prd"](512,null,A.a,A.a,[w.b]),t["\u0275did"](46,1228800,null,0,G.a,[A.a,f.d,t.ElementRef,t.Renderer2,w.b],{modalTitle:[0,"modalTitle"]},{close:"close",onInit:"onInit"}),t["\u0275pid"](131072,g.i,[g.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](48,0,null,0,1,"bs-form",[],null,null,null,V.b,V.a)),t["\u0275did"](49,770048,[[2,4]],0,L.a,[N.a,U.a,_.a,g.j,$.a],{stores:[0,"stores"],segments:[1,"segments"]},null),(l()(),t["\u0275eld"](50,0,null,null,44,"app-modal",[["class","modal-generic"],["modalTitle",""]],null,[[null,"onInit"]],(function(l,n,e){var t=!0;return"onInit"===n&&(t=!1!==l.component.drillDownModalInit(e)&&t),t}),j.b,j.a)),t["\u0275prd"](512,null,A.a,A.a,[w.b]),t["\u0275did"](52,1228800,[[4,4],["drillDownModal",4]],0,G.a,[A.a,f.d,t.ElementRef,t.Renderer2,w.b],{modalTitle:[0,"modalTitle"]},{onInit:"onInit"}),(l()(),t["\u0275eld"](53,0,null,0,34,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](54,0,null,null,33,"div",[["class","small-12 medium-8 column overall-results"]],null,null,null,null,null)),(l()(),t["\u0275eld"](55,0,null,null,32,"table",[["width","90%"]],null,null,null,null,null)),(l()(),t["\u0275eld"](56,0,null,null,3,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](57,0,null,null,2,"td",[["colspan","4"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,fl)),t["\u0275did"](59,16384,null,0,f.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](60,0,null,null,27,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](61,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),t["\u0275ted"](62,null,["",":"])),t["\u0275pid"](131072,g.i,[g.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](64,0,null,null,3,"td",[],null,null,null,null,null)),(l()(),t["\u0275eld"](65,0,null,null,2,"strong",[],null,null,null,null,null)),(l()(),t["\u0275ted"](66,null,["",""])),t["\u0275ppd"](67,2),(l()(),t["\u0275eld"](68,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),t["\u0275ted"](69,null,["",":"])),t["\u0275pid"](131072,g.i,[g.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](71,0,null,null,3,"td",[],null,null,null,null,null)),(l()(),t["\u0275eld"](72,0,null,null,2,"strong",[],null,null,null,null,null)),(l()(),t["\u0275ted"](73,null,["",""])),t["\u0275ppd"](74,2),(l()(),t["\u0275eld"](75,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),t["\u0275ted"](76,null,["",":"])),t["\u0275pid"](131072,g.i,[g.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](78,0,null,null,3,"td",[],null,null,null,null,null)),(l()(),t["\u0275eld"](79,0,null,null,2,"strong",[],null,null,null,null,null)),(l()(),t["\u0275ted"](80,null,["",""])),t["\u0275ppd"](81,2),(l()(),t["\u0275eld"](82,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),t["\u0275ted"](83,null,["",":"])),t["\u0275pid"](131072,g.i,[g.j,t.ChangeDetectorRef]),(l()(),t["\u0275eld"](85,0,null,null,2,"td",[],null,null,null,null,null)),(l()(),t["\u0275eld"](86,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),t["\u0275ted"](87,null,["",""])),(l()(),t["\u0275eld"](88,0,null,0,3,"div",[["style","height:85%"]],null,null,null,null,null)),(l()(),t["\u0275eld"](89,0,null,null,2,"div",[["class","content__section_body"],["style","height:100%;max-height:none"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,gl)),t["\u0275did"](91,16384,null,0,f.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](92,0,null,0,2,"div",[["class","c__table"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,vl)),t["\u0275did"](94,16384,null,0,f.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,17,0,e.dropdownStoregroupOpened),l(n,28,0,e.monthpickerOpened),l(n,36,0,null==e.currentUser?null:e.currentUser.isExportExcelAvailable),l(n,39,0),l(n,43,0,!e.loading),l(n,46,0,t["\u0275inlineInterpolate"](1,"",t["\u0275unv"](n,46,0,t["\u0275nov"](n,47).transform(e.i18nBs+"business-segment-form.title")),"")),l(n,49,0,e.stores,e.storegroupsWithoutAll),l(n,52,0,""),l(n,59,0,null==e.currentUser?null:e.currentUser.isExportExcelAvailable),l(n,91,0,!e.drillLoading),l(n,94,0,e.drillLoading)}),(function(l,n){var e=n.component;l(n,13,0,t["\u0275unv"](n,13,0,t["\u0275nov"](n,14).transform(e.i18nBs+"business-segment-filter.label")),null==e.selectedStoregroup?null:e.selectedStoregroup.name);var u=t["\u0275unv"](n,22,0,l(n,23,0,t["\u0275nov"](n,0),e.monthpickerValue,"MMMM"));l(n,22,0,u);var o=t["\u0275unv"](n,24,0,l(n,25,0,t["\u0275nov"](n,0),e.monthpickerValue,"y"));l(n,24,0,o),l(n,33,0,t["\u0275unv"](n,33,0,t["\u0275nov"](n,34).transform("header.report-title"))),l(n,37,0,t["\u0275nov"](n,39).role,t["\u0275nov"](n,39).hostClass,t["\u0275nov"](n,39).withHeader,t["\u0275nov"](n,39).top,t["\u0275nov"](n,39).left,t["\u0275nov"](n,39).isIn,t["\u0275nov"](n,39).isFade),l(n,40,0,t["\u0275unv"](n,40,0,t["\u0275nov"](n,41).transform("header-icons.download-excel"))),l(n,62,0,t["\u0275unv"](n,62,0,t["\u0275nov"](n,63).transform("drill-down-modal.table.column.frontgross")));var i=t["\u0275unv"](n,66,0,l(n,67,0,t["\u0275nov"](n,1),null==e.drillDown?null:e.drillDown.frontgross,0));l(n,66,0,i),l(n,69,0,t["\u0275unv"](n,69,0,t["\u0275nov"](n,70).transform("drill-down-modal.table.column.backgross")));var r=t["\u0275unv"](n,73,0,l(n,74,0,t["\u0275nov"](n,1),null==e.drillDown?null:e.drillDown.backgross,0));l(n,73,0,r),l(n,76,0,t["\u0275unv"](n,76,0,t["\u0275nov"](n,77).transform("drill-down-modal.table.column.totalgross")));var s=t["\u0275unv"](n,80,0,l(n,81,0,t["\u0275nov"](n,1),null==e.drillDown?null:e.drillDown.totalgross,0));l(n,80,0,s),l(n,83,0,t["\u0275unv"](n,83,0,t["\u0275nov"](n,84).transform("drill-down-modal.table.column.count"))),l(n,87,0,null==e.drillDown?null:e.drillDown.count)}))}function wl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"ng-component",[],null,[["window","click"]],(function(l,n,e){var u=!0;return"window:click"===n&&(u=!1!==t["\u0275nov"](l,2).windowClick(e)&&u),u}),bl,ul)),t["\u0275prd"](512,null,D.a,D.a,[]),t["\u0275did"](2,245760,null,0,J,[nl,el.a,v.a,v.o,_.a,N.a,D.a,tl.a,y.a,g.j],null,null)],(function(l,n){l(n,2,0)}),null)}var kl=t["\u0275ccf"]("ng-component",J,wl,{},{},[]),Dl=e("s7LF"),Cl=e("QQfA"),Il=e("IP0z"),_l=e("s6ns"),yl=e("POq0"),xl=e("821u"),Rl=e("Xd0L"),Ol=e("/HVE"),Ml=e("EwA9"),Fl=e("Qq/Z"),Tl=e("Mc5n"),Nl=e("hOhj"),Sl=e("butG"),El=e("cUpR"),Yl=e("Fwaw"),jl=e("zMNK"),Al=e("5GAg"),Gl=e("SXLW"),Vl=e("FFHx"),Ll=e("iTUp"),Ul=e("l/h6"),$l=e("aBBA"),Bl=e("oiVm"),zl=e("Fbhx"),ql=e("/Lwf"),Pl=e("yotz"),Xl=e("T3zS");e.d(n,"DailyDocModuleNgFactory",(function(){return Hl}));var Hl=t["\u0275cmf"](u,[],(function(l){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,i.a,r.b,r.a,s.b,a.a,d.a,c.a,h.a,kl]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,f.o,f.n,[t.LOCALE_ID,[2,f.F]]),t["\u0275mpd"](4608,Dl.F,Dl.F,[]),t["\u0275mpd"](4608,Cl.c,Cl.c,[Cl.i,Cl.e,t.ComponentFactoryResolver,Cl.h,Cl.f,t.Injector,t.NgZone,f.d,Il.b,[2,f.i]]),t["\u0275mpd"](5120,Cl.j,Cl.k,[Cl.c]),t["\u0275mpd"](5120,_l.c,_l.d,[Cl.c]),t["\u0275mpd"](135680,_l.e,_l.e,[Cl.c,t.Injector,[2,f.i],[2,_l.b],_l.c,[3,_l.e],Cl.e]),t["\u0275mpd"](4608,yl.c,yl.c,[]),t["\u0275mpd"](4608,xl.i,xl.i,[]),t["\u0275mpd"](5120,xl.a,xl.b,[Cl.c]),t["\u0275mpd"](4608,Rl.a,Rl.v,[[2,Rl.f],Ol.a]),t["\u0275mpd"](4608,Ml.a,Ml.a,[w.b]),t["\u0275mpd"](4608,U.a,U.a,[Ml.a,Fl.a]),t["\u0275mpd"](4608,Tl.f,Tl.f,[f.d,t.NgZone,Nl.i,Tl.h]),t["\u0275mpd"](4608,nl,nl,[Sl.a]),t["\u0275mpd"](1073742336,f.c,f.c,[]),t["\u0275mpd"](1073742336,v.s,v.s,[[2,v.x],[2,v.o]]),t["\u0275mpd"](1073742336,g.g,g.g,[]),t["\u0275mpd"](1073742336,Dl.E,Dl.E,[]),t["\u0275mpd"](1073742336,Dl.m,Dl.m,[]),t["\u0275mpd"](1073742336,Il.a,Il.a,[]),t["\u0275mpd"](1073742336,Rl.l,Rl.l,[[2,Rl.d],[2,El.f]]),t["\u0275mpd"](1073742336,Ol.b,Ol.b,[]),t["\u0275mpd"](1073742336,Rl.u,Rl.u,[]),t["\u0275mpd"](1073742336,Yl.c,Yl.c,[]),t["\u0275mpd"](1073742336,jl.g,jl.g,[]),t["\u0275mpd"](1073742336,Nl.f,Nl.f,[]),t["\u0275mpd"](1073742336,Cl.g,Cl.g,[]),t["\u0275mpd"](1073742336,_l.k,_l.k,[]),t["\u0275mpd"](1073742336,yl.d,yl.d,[]),t["\u0275mpd"](1073742336,Al.a,Al.a,[]),t["\u0275mpd"](1073742336,xl.j,xl.j,[]),t["\u0275mpd"](1073742336,Rl.w,Rl.w,[]),t["\u0275mpd"](1073742336,Rl.n,Rl.n,[]),t["\u0275mpd"](1073742336,Gl.AgGridModule,Gl.AgGridModule,[]),t["\u0275mpd"](1073742336,Vl.a,Vl.a,[]),t["\u0275mpd"](1073742336,Ll.a,Ll.a,[]),t["\u0275mpd"](1073742336,Ul.a,Ul.a,[$l.a]),t["\u0275mpd"](1073742336,Bl.a,Bl.a,[]),t["\u0275mpd"](1073742336,zl.a,zl.a,[$l.a]),t["\u0275mpd"](1073742336,Tl.g,Tl.g,[]),t["\u0275mpd"](1073742336,ql.a,ql.a,[]),t["\u0275mpd"](1073742336,Pl.b,Pl.b,[]),t["\u0275mpd"](1073742336,Xl.a,Xl.a,[]),t["\u0275mpd"](1073742336,u,u,[$l.a]),t["\u0275mpd"](256,Rl.e,Rl.i,[]),t["\u0275mpd"](1024,v.m,(function(){return[[{path:"",pathMatch:"full",component:J},{path:":date",component:J}]]}),[])])}))}}]);