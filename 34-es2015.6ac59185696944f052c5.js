(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"/gN3":function(e,t,n){"use strict";var l=n("tFIl");class a extends l.a{constructor(e={}){super(),this.momentIsUtc=!1,this.fillAll(e,["order","name","width","minWidth","pinned","field","tooltipField","align","labelFormat","filter","drillIndex","editable","hide","children","valueGetter","valueFormatter","valueSetter","valueParser","momentFormat","momentIsUtc","customFormatter","cellRenderer","cellEditor","cellEditorParams","cellRendererFramework","cellRendererParams","cellClass","data"])}get hasDrill(){return null!==this.drillIndex}get hasNumericFormat(){return this.labelFormat!==i.Date&&this.labelFormat!==i.Moment&&this.labelFormat!==i.Default&&this.labelFormat!==i.Custom}get hasDefaultFormat(){return this.labelFormat===i.Default}get hasMoneyFormat(){return this.labelFormat===i.Money||this.labelFormat===i.Money2}get hasPercentageFormat(){return this.labelFormat===i.Percentage||this.labelFormat===i.Percentage1DecWithZeroMantissa||this.labelFormat===i.Percentage2DecWithZeroMantissa}}var i=function(e){return e[e.Date=0]="Date",e[e.Moment=1]="Moment",e[e.Money=2]="Money",e[e.Money2=3]="Money2",e[e.MoneyAbbr=4]="MoneyAbbr",e[e.Integer=5]="Integer",e[e.Float=6]="Float",e[e.FloatWithTwoDecimalPlaces=7]="FloatWithTwoDecimalPlaces",e[e.FloatWithOneDecimalPlace=8]="FloatWithOneDecimalPlace",e[e.Cnt=9]="Cnt",e[e.Percentage=10]="Percentage",e[e.Percentage1DecWithZeroMantissa=11]="Percentage1DecWithZeroMantissa",e[e.Percentage2DecWithZeroMantissa=12]="Percentage2DecWithZeroMantissa",e[e.Custom=13]="Custom",e[e.Default=14]="Default",e}({}),r=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e}({}),o=function(e){return e[e.None=0]="None",e[e.String=1]="String",e[e.NumberRange=2]="NumberRange",e[e.DateRange=3]="DateRange",e[e.MultiChoice=4]="MultiChoice",e}({});class s{constructor(e={}){Object.keys(e).forEach(t=>this[t]=new.target.value(e[t]))}static value(e,t=null){return null==e?t:e}}n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return s}))},"2Vgt":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var l=n("8Y7J"),a=n("VHTt");class i{constructor(e){this.authService=e,this.xls=!0,this.pdf=!0,this.disabled=!1,this.small=!1,this.dataExport=new l.EventEmitter}ngOnInit(){this.currentUser=this.authService.getCurrentUser()}exportDataAsXls(){this.dataExport.emit(a.a.XLS)}exportDataAsPdf(){this.dataExport.emit(a.a.PDF)}}},"5uTj":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var l=n("8Y7J");class a{constructor(){this.backToClick=new l.EventEmitter}get hasBackToLink(){return!!this.backToClick.observers.length}ngOnInit(){}onBackToClick(){this.backToClick.emit()}}},FIJs:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));class l{constructor(e){e.addLoaderWithPrefixedTranslations("/cabinet/control-center","")}}},IqdZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var l=n("8Y7J"),a=(n("/kTj"),n("/ynw"));n("zeHk");class i extends a.a{constructor(e,t,n,a,i,r,o){super(e,t,n,a,i,r),this.session=o,this.theme="material",this.cellClick=new l.EventEmitter,this.filterChanged=new l.EventEmitter,this.gridFiltered=new l.EventEmitter,this.gridRowExpandedClosed=new l.EventEmitter}ngOnInit(){super.isFrenchLang=this.session.currentLanguage.toString().startsWith("fr"),super.ngOnInit()}onCellClicked(e){this.cellClick.emit(e)}setQuickFilter(e){this.agGrid.api.setQuickFilter(e)}onFilterChanged(e){const t=this.agGrid.api.getModel();this.gridFiltered.emit(t.rowsToDisplay),this.filterChanged.emit(e)}onrowGroupOpened(e){this.gridRowExpandedClosed.emit({rowIndex:e.rowIndex,expanded:e.node.expanded})}}},JA3b:function(e,t,n){"use strict";var l=n("8Y7J");n("JItt"),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var a=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:calc(100vh - 156px - 48px);background-color:#f5f5f5;padding:20px;margin:0 -20px}.content-body-size-1[_nghost-%COMP%]{height:calc(100vh - 234px - 48px)}.content-body-size-2[_nghost-%COMP%]{height:calc(100vh - 125px - 48px)}.content-body-size-3[_nghost-%COMP%]{height:calc(100vh - 110px - 48px)}.content-body-without-header[_nghost-%COMP%]{height:calc(100vh - 48px)}.content-body-custom[_nghost-%COMP%]{height:calc(100vh - 135px - 48px)}"]],data:{}});function i(e){return l["\u0275vid"](2,[l["\u0275ncd"](null,0)],null,null)}},JItt:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));class l{constructor(){}ngOnInit(){}}},JR9P:function(e,t,n){"use strict";n.r(t);var l=n("8Y7J");class a{constructor(e){e.addLoaderWithPrefixedTranslations("/cabinet/custom-reports/generic-reports","")}}var i=n("pMnS"),r=n("NcP4"),o=n("t68o"),s=n("zbXB"),d=n("GsI2"),u=n("eliu"),c=n("0Xvm"),p=n("VOAG"),g=n("aYrz"),h=n("SZ0J"),m=n("OTv+"),b=n("eeq/"),f=n("/kTj"),v=n("SVse");class x{constructor(){}}var C=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;height:70px;background-color:#fff}.total-item[_ngcontent-%COMP%]{padding:15px 20px;flex:0 0 25%;font-size:16px;font-weight:500;text-align:center}.total-item[_ngcontent-%COMP%]:not(:last-of-type){border-right:1px solid #ddd}.total-item-label[_ngcontent-%COMP%]{display:block;color:#404040}.total-item-value[_ngcontent-%COMP%]{display:block;color:#747474}"]],data:{}});function w(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","total-item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"span",[["class","total-item-label"]],null,null,null,null,null)),(e()(),l["\u0275ted"](2,null,["",""])),(e()(),l["\u0275eld"](3,0,null,null,2,"span",[["class","total-item-value"]],null,null,null,null,null)),(e()(),l["\u0275ted"](4,null,["",""])),l["\u0275ppd"](5,2)],null,(function(e,t){e(t,2,0,t.context.$implicit.label);var n=l["\u0275unv"](t,4,0,e(t,5,0,l["\u0275nov"](t.parent,0),t.context.$implicit.value,"cnt"));e(t,4,0,n)}))}function O(e){return l["\u0275vid"](2,[l["\u0275pid"](0,m.a,[b.a,f.b]),(e()(),l["\u0275and"](16777216,null,null,1,null,w)),l["\u0275did"](2,278528,null,0,v.m,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,2,0,t.component.items)}),null)}var _=n("E+en"),y=n("s7LF"),D=n("ZdEx"),P=n("zXMq"),S=n("2Vgt"),I=n("+2T5"),F=n("UPXx"),M=n("oveR"),R=n("hNGQ"),$=n("+dxm"),j=n("jIY6"),k=n("zeHk"),T=n("+bil"),L=n("S+vS"),A=n("ChPW"),E=n("TSSN"),N=(n("f7ga"),n("wd/R")),V=n("/ynw"),z=n("/gN3"),q=(n("OrbI"),function(e){return e[e.Default=1]="Default",e[e.Primary=10]="Primary",e[e.Secondary=11]="Secondary",e[e.Success=20]="Success",e[e.Info=21]="Info",e[e.Warning=22]="Warning",e[e.Alert=23]="Alert",e}({})),G=n("tFIl");class B extends z.a{constructor(e={}){super(e),this.fill(e,"visibilityType"),this.fill(e,"colorizeType"),this.fill(e,"colorizeRange"),this.fill(e,"colorizeTargetField"),this.fill(e,"colorizeStatus1"),this.fill(e,"colorizeStatus2"),this.fill(e,"fieldCalc")}static fromJson(e){const t={order:+e.colnum,name:e.colName,width:parseInt(e.width,10),field:e.datafield,align:this.mapColumnAlign(e.align),labelFormat:this.mapLabelFormat(e.lf),filter:this.mapColumnFilter(e.filter,e.lf),visibilityType:String(e.State),drillIndex:null===e.DrillColIndx||e.DrillColIndx&&isNaN(e.DrillColIndx)?null:+e.DrillColIndx,editable:G.b.boolean(e.edit),pinned:e.pinned,colorizeType:this.mapColorizeType(e.clrActive),colorizeRange:[G.c.number(e.clrLowerRange),G.c.number(e.clrUpperRange)],colorizeTargetField:G.c.string(e.clrDataField),colorizeStatus1:this.mapColorizeStatus(e.clr1),colorizeStatus2:this.mapColorizeStatus(e.clr2),tooltipField:"ActiveToolTip"===e.fontDataField?e.datafield:"",fieldCalc:e.fieldCalc};return new B(t)}static mapColorizeStatus(e){return{"0xFF0000":q.Alert,"0x00FF00":q.Success,"0x0000FF":q.Info}[e]||q.Default}static mapColorizeType(e){return{1:W.Range,2:W.TargetField}[e]||W.None}static mapLabelFormat(e){const t={date:z.d.Date,amt:z.d.Money,amt2:z.d.Money2,cnt:z.d.Float,reg1:z.d.Float,per:z.d.Percentage,per1:z.d.Percentage1DecWithZeroMantissa,per2:z.d.Percentage2DecWithZeroMantissa,custom:z.d.Custom};return void 0!==t[e]?t[e]:z.d.Default}static mapColumnAlign(e){return{left:z.b.Left,right:z.b.Right,center:z.b.Center}[e]}static mapColumnFilter(e,t){return{amt:z.c.NumberRange,cnt:z.c.NumberRange,reg1:z.c.NumberRange,per:z.c.NumberRange,per1:z.c.NumberRange,per2:z.c.NumberRange}[t]||{none:z.c.String,mRange:z.c.MultiChoice,dRange:z.c.DateRange,nRange:z.c.NumberRange}[e]}}var W=function(e){return e[e.Range=1]="Range",e[e.TargetField=2]="TargetField",e[e.None=3]="None",e}({});class U extends V.a{constructor(e,t,n,l,a,i){super(e,t,n,l,a,i)}mapValueFormatter(e){let t;return t={[z.d.Date]:({data:t})=>{if(!t)return null;if(isNaN(Date.parse(t[e.field])))return t[e.field];const n=N(t[e.field]);return this.formatter.moment(n,b.b.Date)},[z.d.Custom]:({data:t})=>{if(!t)return null;const n=t[e.field];if("title"===t.labelType)return"";if("% Delta"===e.name)return this.formatter.percentage(n,0);if("% of GP"===e.name)return"per"===t.labelFormat?"":this.formatter.percentage(n,0);switch(t.labelFormat){case"amt":return this.formatter.money(n);case"amt2":return this.formatter.money(n,{fractional:2,noZeroMantissa:!1,currencySign:"$"});case"per":return this.formatter.percentage(n,0);default:return this.formatter.number(n,{fractional:0,noZeroMantissa:!0})}}}[e.labelFormat]||super.mapValueFormatter(e).valueFormatter,{valueFormatter:t}}mapCellStyle(e){const t=new Map,n=n=>{if(t.has(n))return t.get(n);if(e.colorizeType===W.Range){if(+n[e.field]>e.colorizeRange[0])return+n[e.field]<e.colorizeRange[1]?e.colorizeStatus1:e.colorizeStatus2}else if(e.colorizeType===W.TargetField)return+n[e.field]<+n[e.colorizeTargetField]?e.colorizeStatus1:e.colorizeStatus2};return Object.assign({},super.mapCellStyle(e),{cellClassRules:{"has-drill-down":({data:t})=>t&&t.hasDrill&&e.hasDrill,"text--success":({data:e})=>e&&n(e)===q.Success,"text--info":({data:e})=>e&&n(e)===q.Info,"text--alert":({data:e})=>e&&n(e)===q.Alert}})}}var J=n("TUN4"),Y=n("K5C0"),Z=n("mvzq"),X=l["\u0275crt"]({encapsulation:0,styles:[F.a],data:{}});function K(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{grid:0}),l["\u0275qud"](402653184,2,{gridElRef:0}),(e()(),l["\u0275eld"](2,16777216,[[2,0]],null,4,"ag-grid-angular",[["appAgGridDragScroll",""],["class","ag-theme-material"]],null,null,null,M.b,M.a)),l["\u0275prd"](512,null,R.AngularFrameworkOverrides,R.AngularFrameworkOverrides,[l.NgZone]),l["\u0275prd"](512,null,$.AngularFrameworkComponentWrapper,$.AngularFrameworkComponentWrapper,[]),l["\u0275did"](5,4898816,[[1,4],["agGrid",4]],1,j.AgGridAngular,[l.ElementRef,l.ViewContainerRef,R.AngularFrameworkOverrides,$.AngularFrameworkComponentWrapper,l.ComponentFactoryResolver],{gridOptions:[0,"gridOptions"],rowData:[1,"rowData"],columnDefs:[2,"columnDefs"],pinnedBottomRowData:[3,"pinnedBottomRowData"],paginationPageSize:[4,"paginationPageSize"],pagination:[5,"pagination"]},null),l["\u0275qud"](603979776,3,{columns:1})],(function(e,t){var n=t.component;e(t,5,0,n.gridOptions,n.rowData,n.columnDefs,n.pinnedBottomRowData,n.pageSize,n.pagination)}),null)}var H=n("S5eV"),Q=n("IqdZ"),ee=n("XNiG"),te=n("fFD9"),ne=n("nYR2"),le=n("zp1y");class ae{constructor(e,t,n,a,i){this.grd=e,this.budgetApi=t,this.dialog=n,this.translate=a,this.loading=new l.EventEmitter,this.cellValueChanged$=new ee.a,this.subs=[],this.debug=i.factory(new.target.name)}get isLoading(){return this._isLoading}set isLoading(e){this._isLoading=e,this.loading.emit(this._isLoading)}set sub(e){this.subs.push(e)}ngOnInit(){this.initGridOptions(),this.initMainStream(),this.initSavingStream()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}initMainStream(){this.sub=this.grd.current$.subscribe(e=>{const t=e.filtersSnapshot.lists["column-switch"];this.debug.assert(void 0!==t,"Column Switch not found. Current: ",e);const n=e.filtersSnapshot.lists.store;this.debug.assert(void 0!==n,"Store ID not found. Current: ",e);const l=e.filtersSnapshot.lists.date;this.debug.assert(void 0!==l,"Date Index not found. Current: ",e);const a=this.budgetApi.getTableColumns(e.reportId,e.tab.tabIndex,t),i=this.budgetApi.getTableRows(e.reportId,e.tab.tabIndex,{storeId:+n,dateIndex:+l});return this.isLoading=!0,a.pipe(Object(te.a)(i),Object(ne.a)(()=>this.isLoading=!1)).subscribe(([e,t])=>{this.columns=e,this.rows=t})})}initSavingStream(){this.sub=this.cellValueChanged$.pipe(Object(le.a)(this.grd.current$)).subscribe(([e,t])=>{let n=e.newValue.replace(/(^\s+|\s+$|^\s*$)/g,"");""===n&&(n="0");const l=n.replace(/[^\d.-]+/g,"");if(e.data[e.colDef.field]=l,e.api.refreshCells({rowNodes:[e.node]}),!/^[\d.-]+$/.test(n))return void this.dialog.warningT("budget.validation.wrong-value");const a=t.filtersSnapshot.lists.store;this.debug.assert(void 0!==a,"Store ID not found. Current: ",t);const i=t.filtersSnapshot.lists.date;return this.debug.assert(void 0!==i,"Date Index not found. Current: ",t),this.isLoading=!0,this.budgetApi.saveTableRow(t.reportId,t.tab.tabIndex,{storeId:+a,dateIndex:+i},e.data.docLine,e.colDef.field,l).pipe(Object(ne.a)(()=>this.isLoading=!1)).subscribe(()=>{this.debug.log("Saved successful")})})}initGridOptions(){this.options={onCellValueChanged:e=>this.cellValueChanged$.next(e)}}}var ie=n("2Vo4"),re=n("itXk"),oe=n("LRne"),se=n("Cfvw"),de=n("pLZG"),ue=n("lJxs"),ce=n("05l1"),pe=n("x+ZX"),ge=n("Kj3r"),he=n("/uUt"),me=n("vkgz"),be=n("eIep"),fe=n("SxV6"),ve=n("w1tV");function xe({lists:e,inputs:t,dateRange:n},l,a){const i={};if(void 0!==e.date&&(i.dateIndex=e.date),e.instance&&"0"!==e.instance&&(i.instance_id=e.instance),void 0!==e.store&&(a&&e.group&&"0"!==e.group?(i.stateStoresAll=0,i.storeId="0"!==e.store?e.store:a.find(t=>+t.groupIndex==+e.group).stores.map(e=>e.store_id).join(",")):(i.stateStoresAll="0"===e.store?1:0,i.storeId=e.store)),void 0!==t.input1){const e=l.inputs.filter(e=>"input1"===e.name)[0];i.stateTxtInput1=1,i.fieldsTxtInput1=e&&e.data||"",i.valueTxtInput1=t.input1||"-empty-value-"}if(n){const{fromTemplate:t,toTemplate:a,fromField:i,toField:r}=l.dateRange,{beginDate:o,endDate:s}=n,d=`${o.month}-${o.day}-${o.year} 00:00`,u=`${s.month}-${s.day}-${s.year} 23:59`,c=":val:",p=(e,t,n)=>console.warn("convertFiltersSnapshotToDataParams(): Field %s used in date-range-picker and in other filters. Value will be overridden. '%s' => '%s' ",e,t,n);void 0!==e[i]&&p(i,e[i],d),void 0!==e[i]&&p(r,e[r],u),e=Object.assign({},e,{[i]:t.replace(c,d),[r]:a.replace(c,u)})}return[{field:"from1",flagParam:"stateFrom1",valueParam:"from1"},{field:"from2",flagParam:"stateFrom1",valueParam:"from2"},{field:"where1",flagParam:"stateWhere1",valueParam:"where1"},{field:"where2",flagParam:"stateWhere2",valueParam:"where2"},{field:"column-switch",flagParam:"stateColumnSwitch",valueParam:"columnSwitch"}].forEach(({field:t,flagParam:n,valueParam:l})=>{void 0!==e[t]&&(i[n]=1,i[l]=e[t])}),i}function Ce(e=!1){let t;const n=["column-switch"];return l=>{const a=l&&t&&n.some(e=>l.lists[e]!==t.lists[e]),i=e?!a:!t||a;return t=l,i}}function we(e,t){return void 0!==t&&e.items.findIndex(e=>String(e.value)===t)>-1?t:String(null!=e.default?e.default:e.items[0]&&e.items[0].value)}class Oe extends G.a{constructor(e={}){super(),this.filters=[],this.busSeg=e.busSeg||null,this.instanceFilter=e.instanceFilter||null,this.storeFilter=e.storeFilter||null,this.storeAllFilter=e.storeAllFilter||null,this.textInput1=e.textInput1||null,this.textInput1Label=e.textInput1Label||null,this.textInput1Fields=e.textInput1Fields||null,this.tabIndex=e.tabIndex||null,this.tabLabel=e.tabLabel||null,this.hideHeader=e.hideHeader||!1,this.summaryRow=e.summaryRow||null,this.summaryLabels=e.summaryLabels instanceof Array?e.summaryLabels.concat():null,this.summaryFields=e.summaryFields instanceof Array?e.summaryFields.concat():null,this.filters=e.filters instanceof Array?e.filters.map(e=>Object.assign({},e)):null,this.dateFilter=e.dateFilter||null,this.dateFilterExternal=e.dateFilterExternal||null,this.dateFilterLabel=e.dateFilterLabel||null,this.budgetEditor=e.budgetEditor||null,this.budgetEditorLabel=e.budgetEditorLabel||null,this.fill(e,"drillDownDataColumnParams")}static fromJson(e){const t={busSeg:!!+e.busSeg,instanceFilter:!!+e.instance_filter,storeFilter:!!+e.storeFilter,storeAllFilter:!!+e.storeFilterAll,textInput1:!!+e.txtInput1,textInput1Label:e.txtInput1Label,textInput1Fields:e.txtInput1Fields,tabIndex:+e.data,tabLabel:e.label,hideHeader:!!+e.hideDGHeader,summaryRow:!!+e.sumRow,summaryLabels:e.sumLabels?String(e.sumLabels).trim().split(/\s*,\s*/):null,summaryFields:e.sumValues?String(e.sumValues).trim().split(/\s*,\s*/):null,filters:[],dateFilter:!!+e.dateFilter,dateFilterExternal:!!+e.dateFilterExternal,dateFilterLabel:e.dateFilterLabel,budgetEditor:!!+e.budgetEntry,budgetEditorLabel:e.budgetName};return+e.cboWhere1&&t.filters.push({field:"where1",label:e.cboWhere1Label}),+e.cboWhere2&&t.filters.push({field:"where2",label:e.cboWhere2Label}),+e.cboFrom1&&t.filters.push({field:"from1",label:e.cboFrom1Label}),+e.cboFrom2&&t.filters.push({field:"from2",label:e.cboFrom2Label}),+e.colSwitch&&t.filters.push({field:"column-switch",label:e.colSwitchLabel}),t.drillDownDataColumnParams=[{columnParamName:"drillParam1",valueParamName:"drillValue1",columnName:G.b.string(e.drillParam1)},{columnParamName:"drillParam2",valueParamName:"drillValue2",columnName:G.b.string(e.drillParam2)},{columnParamName:"drillParam3",valueParamName:"drillValue3",columnName:G.b.string(e.drillParam3)}].filter(e=>null!==e.columnName),new Oe(t)}}class _e{constructor(e={}){this.label=e.label||null,this.dateFrom=e.dateFrom||null,this.dateTo=e.dateTo||null;const t=e.dateIndex;this.dateIndex=null==t||isNaN(t)?null:e.dateIndex}static fromJson(e){return new _e({label:e.label,dateIndex:+e.dateindex,dateFrom:e.date_from,dateTo:e.date_to})}}let ye=(()=>{class e extends z.e{constructor(e={}){super(e)}get hasDrill(){return null!==this.drillRowIndex&&(this.drillType===e.DRILL_TYPE_1||this.drillType===e.DRILL_TYPE_NEW||this.drillType===e.DRILL_TYPE_USED)}getDrillDownData(e){return e.map(e=>Object.assign({},e,{columnValue:this[e.columnName]}))}static fromJson(t){const n={labelFormat:G.b.string(t.lf),labelType:G.b.string(t.lt),drillType:G.b.number(t.drillType),drillRowIndex:G.b.string(t.DrillRowIndx),bold:G.b.boolean(t.bold)},l=["lf","lt","bold","drillType","DrillRowIndx"];return Object.keys(t).filter(e=>-1===l.indexOf(e)).forEach(e=>n[e]=t[e]),new e(n)}}return e.DRILL_TYPE_1=50,e.DRILL_TYPE_2=49,e.DRILL_TYPE_NEW=1,e.DRILL_TYPE_USED=2,e})();var De=n("+Wqw");class Pe{constructor(e={}){this.label=e.label||null,this.value=e.value||null}static fromJson(e,t="strWhere"){return new Pe({label:e.label,value:e[t]})}}var Se=n("Kqap");function Ie(e,t,n){return e.pipe(Object(me.a)(t),Object(Se.a)((e,t)=>(e&&e.unsubscribe(),t?e=n(t):null),null)).subscribe()}var Fe=n("VHTt");class Me{constructor(e,t,n,l,a,i,r,o){this.reportApi=e,this.storeApi=t,this.auth=n,this.userApi=l,this.coreCache=a,this.instanceAppSettingsApi=i,this.translate=r,this.currentReportId$=new ie.a(null),this.currentTab$=new ie.a(null),this.currentFiltersSnapshot$=new ie.a(null),this.tabs$=new ie.a(null),this.columns$=new ie.a(null),this.filters$=new ie.a(null),this.data$=new ie.a(null),this.groups$=new ie.a(null),this.stores$=new ie.a(null),this.currentGroup$=new ie.a(null),this._totals$=new ie.a(null),this.debugSubscriptions=[],this.previousFiltersSnapshot=null,this.salesCountTotal=0,this.totalGrossTotal=0,this.debug=o.factory(new.target.name),this.current$=Object(re.b)([this.currentReportId$,this.currentTab$,this.currentFiltersSnapshot$]).pipe(Object(de.a)(([e,t,n])=>!!e&&!!t&&!!n),Object(ue.a)(([e,t,n])=>({reportId:e,tab:t,filtersSnapshot:n})),Object(ce.a)(1),Object(pe.a)()),this.initInternal()}selectReportById(e){this.previousFiltersSnapshot=null,this.currentReportId$.next(e)}selectTab(e){this.currentTab$.next(e)}changeFilters(e){this.currentFiltersSnapshot$.next(e)}setDisabledStateForListFilterItems(e,t,n){const l=this.filters$.getValue();if(!l||!l.lists||!l.lists.length)return;const a=l.lists.findIndex(t=>t.name===e);if(a<0)return void this.debug.warn("disableListFilterItems(). ListFilter not found. Name: %s",e);const i=l.lists[a],r=i.items.map(e=>t.some(t=>e.value===t)?Object.assign({},e,{disabled:n}):e),o=Object.assign({},l,{lists:l.lists.map(e=>e===i?Object.assign({},i,{items:r}):e)});this.filters$.next(o)}initInternal(){Ie(this.currentReportId$,()=>{this.tabs$.next(null),this.currentTab$.next(null)},e=>this.reportApi.getTabs(e).subscribe(e=>this.tabs$.next(e))),this.tabs$.pipe(Object(de.a)(e=>!!e&&e instanceof Array&&!!e[0]),Object(ue.a)(e=>e[0])).subscribe(e=>this.currentTab$.next(e)),Ie(this.currentTab$,()=>{this.columns$.next(null)},e=>this.reportApi.getColumns(this.currentReportId$.getValue(),{itemId:e.tabIndex}).subscribe(e=>this.columns$.next(e))),Ie(this.currentTab$,()=>{this.filters$.next(null),this.currentFiltersSnapshot$.next(this.previousFiltersSnapshot)},e=>{const t=this.currentReportId$.getValue(),n=this.currentTab$.getValue().tabIndex;return this.loadFilters(t,e,n).subscribe(e=>this.filters$.next(e))}),this.filters$.pipe(Object(de.a)(e=>!!e),Object(ue.a)(e=>function(e,t){const n=e.lists.reduce((e,n)=>Object.assign(e,{[n.name]:we(n,t&&t.lists[n.name])}),{}),l=e.inputs.reduce((e,n)=>Object.assign(e,{[n.name]:t&&void 0!==t.inputs[n.name]?t.inputs[n.name]:n.default||""}),{}),a=new Date;return{lists:n,inputs:l,dateRange:t&&t.dateRange?e.dateRange&&t.dateRange:e.dateRange?{beginDate:{year:a.getFullYear(),month:a.getMonth()+1,day:1},endDate:{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate()}}:null}}(e,this.previousFiltersSnapshot))).subscribe(e=>this.currentFiltersSnapshot$.next(e)),this.currentFiltersSnapshot$.pipe(Object(de.a)(e=>this.currentTab$.value&&this.currentTab$.value.busSeg&&function(e){return!!(e&&e.lists&&e.lists.group)}(e)),Object(ue.a)(e=>e.lists.group),Object(de.a)(e=>this.currentGroup$.getValue()!==e),Object(ge.a)(100),Object(he.a)()).subscribe(e=>this.currentGroup$.next(e)),this.currentFiltersSnapshot$.pipe(Object(de.a)(e=>!!e),Object(me.a)(e=>this.previousFiltersSnapshot=e),Object(de.a)(Ce(!0)),Object(ge.a)(100),Object(he.a)(),Object(me.a)(()=>this.data$.next(null)),Object(be.a)(e=>{const t=this.currentTab$.getValue().tabIndex,n=this.currentReportId$.getValue(),l=xe(e,this.filters$.getValue(),this.groups$.getValue());return this.reportApi.getData(n,Object.assign({itemId:t},l))}),Object(le.a)(this.instanceAppSettingsApi.settings$,this.coreCache.storesById$.pipe(Object(fe.a)()))).subscribe(([{data:e,totals:t},n,l])=>{for(const a of e)if(a.sn){const e=l.get(+a.sn);e&&(a.sn=e[n.storeNameType])}this.data$.next(e),this._totals$.next(t)}),this.totals$=this._totals$.pipe(Object(de.a)(e=>!!e));const e=Object(re.b)([this.tabs$,this.columns$,this.filters$,this.data$]);this.loading$=e.pipe(Object(ue.a)(([e,t,n,l])=>!(e&&t&&n&&l)),Object(he.a)(),Object(ve.a)()),this.report$=e.pipe(Object(de.a)(([e,t,n,l])=>!!(e&&t&&n&&l)),Object(ue.a)(([e,t,n,l])=>Object.assign({tabs:e,columns:t,filters:n,data:l},this.getPinnedBottomRowData(t,l))),Object(ce.a)(1),Object(pe.a)())}getPinnedBottomRowData(e,t){const n=[];let l=2;if(e.length&&t.length){const a=["sdid","sId"],i=e=>{if(!a.find(t=>t===e.field)&&(e.hasNumericFormat||e.hasDefaultFormat)){let n=t.reduce((t,n)=>+n[e.field]+t,0);const a=this.currentReportId$.getValue();return(e.name.toLowerCase().indexOf("avg")>-1||"avg"===e.fieldCalc)&&(721===a?n=0===this.salesCountTotal?0:this.totalGrossTotal/this.salesCountTotal:n/=t.length,l=0),721===a&&(e.name.toLowerCase().indexOf("sales count")>-1&&(this.salesCountTotal=n),e.name.toLowerCase().indexOf("total gross")>-1&&(this.totalGrossTotal=n)),isNaN(n)?"":e.hasDefaultFormat?n.toFixed(l):n}return""},r=e.reduce((e,t,n)=>Object.assign(e,{[t.field]:0===n?"Total":i(t)}),{});e.map(e=>{if(e.fieldCalc){if(e.fieldCalc.indexOf("empty")>-1)return void delete r[e.field];r[e.field]=this.getTotalValue(r,e.fieldCalc,e.field)}}),n.push(r)}return{pinnedBottomRowData:n}}getTotalValue(e,t,n){if(t.indexOf("/")>-1){const n=t.split("/")[0].trim(),l=t.split("/")[1].trim();return(e[n]/(e[l]&&0!==e[l]?e[l]:1)).toFixed(2)}return t.indexOf("empty")>-1?"":e[n]}loadFilters(e,t,n){const l=t.filters.length?Object(re.b)(t.filters.map(t=>this.reportApi.getFilterConfig(e,t.field,n))).pipe(Object(ue.a)(e=>e.map((e,n)=>Object.assign({},e,{label:t.filters[n].label,field:t.filters[n].field}))),Object(ve.a)()):Object(oe.a)([]),a=Object(re.b)(l,this.translate.stream("filter.daterange.name")).pipe(Object(ue.a)(([e,t])=>{if(2!==(e=e.filter(e=>"date-range-picker"===e.type)).length)return null;const n=e.sort((e,t)=>+e.data.index<+t.data.index?-1:+e.data.index>+t.data.index?1:0).map(e=>e.data.template);return{label:t,fromTemplate:n[0],fromField:e[0].field,toTemplate:n[1],toField:e[1].field}})),i=l.pipe(Object(ue.a)(e=>e.filter(e=>["combo-box","combo-box--where"].indexOf(e.type)>-1).map(e=>{const t=e.data;return{label:e.label,name:e.field,items:t.map(({label:e,value:t})=>({name:e,value:String(t)})),default:t[0]&&String(t[0].value)}})));Object(se.a)(this.userApi.getComplexData()).subscribe(e=>{this.groups$.next(e.storegroups);const t=e.stores.map(e=>Fe.c.fromJson(e));this.stores$.next(t)});const r=t.busSeg?Object(re.b)(this.groups$.pipe(Object(de.a)(e=>!!e)),this.translate.stream("filter.business-segment.name"),this.translate.stream("filter.business-segment.all-item")).pipe(Object(ue.a)(([e,t,n])=>{const l=e.map(e=>({name:e.name,value:String(e.groupIndex)}));return l.find(e=>"0"===e.value)||l.unshift({name:n,value:"0"}),{label:t+":",name:"group",items:l,default:l[0]&&l[0].value}})):Object(oe.a)(null),o=t.storeAllFilter||t.storeFilter?Object(re.b)(this.stores$.pipe(Object(de.a)(e=>!!e)),this.groups$.pipe(Object(de.a)(e=>!!e)),this.currentGroup$,this.instanceAppSettingsApi.settings$,this.translate.stream("filter.store.name"),this.translate.stream("filter.store.all-item")).pipe(Object(ue.a)(([e,n,l,a,i,r])=>{if(t.busSeg&&l&&+l){const t=n.find(e=>+e.groupIndex==+l);t&&(e=e.filter(e=>!!t.stores.find(t=>+t.store_id==+e.id)))}e.sort((e,t)=>e.position>t.position?1:t.position>e.position?-1:0);const o=e.map(e=>({name:e[a.storeNameType],value:String(e.id)}));return t.storeAllFilter&&o.unshift({name:r,value:"0"}),{label:i+":",name:"store",items:o,default:o[0]&&o[0].value}})):Object(oe.a)(null),s=t.instanceFilter?Object(re.b)(this.reportApi.getInstances(),this.translate.stream("filter.instance.name"),this.translate.stream("filter.instance.all-item")).pipe(Object(ue.a)(([e,t,n])=>{const l=e.map(e=>({name:e.label,value:String(e.id)}));return{label:t+":",name:"instance",items:l,default:l[0]&&l[0].value}})):Object(oe.a)(null),d=t.dateFilter?Object(re.b)(t.dateFilterExternal?this.reportApi.getDateList(e):Object(se.a)(this.userApi.getComplexData()).pipe(Object(ue.a)(e=>e.month.map(e=>_e.fromJson(e)))),this.translate.stream("filter.date-range.name")).pipe(Object(ue.a)(([e,n])=>({label:t.dateFilterLabel||n+":",name:"date",items:e.map(e=>({name:e.label,value:String(e.dateIndex)})),default:e[0]&&String(e[0].dateIndex)}))):Object(oe.a)(null),u=Object(re.b)([r,o,s,d,i]).pipe(Object(ue.a)(([e,t,n,l,a])=>[e,t,n,l,...a])),c=t.textInput1?Object(oe.a)({name:"input1",label:t.textInput1Label,data:t.textInput1Fields,default:""}):Object(oe.a)(null),p=Object(re.b)([c]);return Object(re.b)(u,p,a).pipe(Object(ue.a)(([e,t,n])=>({lists:e.filter(e=>!!e),inputs:t.filter(e=>!!e),dateRange:n})))}initDebug(){this.addDebugLoggerToStream("currentReportId$"),this.addDebugLoggerToStream("currentTab$"),this.addDebugLoggerToStream("_currentFiltersSnapshot$"),this.addDebugLoggerToStream("currentTab$"),this.addDebugLoggerToStream("currentFiltersSnapshot$"),this.addDebugLoggerToStream("tabs$"),this.addDebugLoggerToStream("filters$"),this.addDebugLoggerToStream("columns$"),this.addDebugLoggerToStream("data$"),setTimeout(()=>{this.addDebugLoggerToStream("report$"),this.addDebugLoggerToStream("loading$")},0)}destroyDebug(){this.debugSubscriptions.forEach(e=>e.unsubscribe())}addDebugLoggerToStream(e){const t=this[e].subscribe(t=>console.log(`DEBUG:NEXT:GenericReport#${e}::`,t),t=>console.log(`DEBUG:ERROR:GenericReport#${e}::`,t),()=>console.log(`DEBUG:COMPLETE:GenericReport#${e}`));this.debugSubscriptions.push(t)}}class Re extends z.a{constructor(){super(...arguments),this.customFormatter=e=>String(+e||0)}static fromJson(e){const t={order:G.b.number(e.colnum),name:G.b.string(e.colName),width:G.b.number(e.width),field:G.b.string(e.datafield),align:this.mapColumnAlign(e.align),labelFormat:this.mapLabelFormat(e.lf),editable:G.b.boolean(e.edit)};return new Re(t)}static mapColumnAlign(e){return{left:z.b.Left,right:z.b.Right,center:z.b.Center}[e]}static mapLabelFormat(e){return null===e?z.d.Custom:z.d.Default}}class $e{constructor(e,t){this.api=e,this.baseUrl="genericrepts",this.debug=t.factory(new.target.name)}getTableColumns(e,t,n){return this.api.get(`${this.baseUrl}/read-budget-col`,{params:{reptIndex:e,itemId:t,colSwitch:n}}).pipe(Object(ue.a)(e=>e.map(e=>Re.fromJson(e))))}getTableRows(e,t,n){return this.api.get(`${this.baseUrl}/read-budget-data`,{params:{reptIndex:e,itemId:t,storeId:n.storeId,dateIndex:n.dateIndex}}).pipe(Object(ue.a)(e=>e.map(e=>new z.e(e))))}saveTableRow(e,t,n,l,a,i){return this.api.post(`${this.baseUrl}/save-budget-data`,{params:{reptIndex:e,itemId:t,storeId:n.storeId,dateIndex:n.dateIndex,docLine:l,field:a,value:i}})}}var je=l["\u0275crt"]({encapsulation:0,styles:["[_nghost-%COMP%] {\n        position: relative;\n    }\n    app-default-grid[_ngcontent-%COMP%] {\n        position: absolute;\n        left: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n    }"],data:{}});function ke(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"app-default-grid",[],null,null,null,H.b,H.a)),l["\u0275prd"](512,null,k.a,k.a,[T.a,L.a,A.a,E.j]),l["\u0275did"](2,4964352,null,0,Q.a,[b.a,k.a,J.a,Y.a,Z.a,f.b,I.a],{data:[0,"data"],columns:[1,"columns"],customGridOptions:[2,"customGridOptions"],loading:[3,"loading"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.rows,n.columns,n.options,n.isLoading)}),null)}var Te=n("uNm5"),Le=n("5uTj"),Ae=n("MlvX"),Ee=n("Xd0L"),Ne=n("dJrM"),Ve=n("HsOI"),ze=n("IP0z"),qe=n("/HVE"),Ge=n("omvX"),Be=n("Azqq"),We=n("JjoW"),Ue=n("hOhj"),Je=n("5GAg");class Ye{constructor(){this.tabChange=new l.EventEmitter,this.currentTabIndex=1}ngOnInit(){}ngOnChanges(e){e.tabs&&this.tabs&&this.tabs[0]&&(this.currentTab=this.tabs[0],this.currentTabIndex=1)}selectTab(e){this.currentTab=this.tabs.find(e=>e.tabIndex===+this.currentTabIndex),this.tabChange.emit(this.currentTab)}}var Ze=l["\u0275crt"]({encapsulation:0,styles:["[_nghost-%COMP%] {\n        display: block;\n        padding-top: 10px;\n    }"],data:{}});function Xe(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(e,t,n){var a=!0;return"click"===t&&(a=!1!==l["\u0275nov"](e,1)._selectViaInteraction()&&a),"keydown"===t&&(a=!1!==l["\u0275nov"](e,1)._handleKeydown(n)&&a),a}),Ae.b,Ae.a)),l["\u0275did"](1,8568832,[[10,4]],0,Ee.p,[l.ElementRef,l.ChangeDetectorRef,[2,Ee.j],[2,Ee.o]],{value:[0,"value"]},null),(e()(),l["\u0275ted"](2,0,["",""]))],(function(e,t){e(t,1,0,t.context.$implicit.tabIndex)}),(function(e,t){e(t,0,0,l["\u0275nov"](t,1)._getTabIndex(),l["\u0275nov"](t,1).selected,l["\u0275nov"](t,1).multiple,l["\u0275nov"](t,1).active,l["\u0275nov"](t,1).id,l["\u0275nov"](t,1)._getAriaSelected(),l["\u0275nov"](t,1).disabled.toString(),l["\u0275nov"](t,1).disabled),e(t,2,0,t.context.$implicit.tabLabel)}))}function Ke(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,23,"mat-form-field",[["class","filter-group-item mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,Ne.b,Ne.a)),l["\u0275did"](1,7520256,null,9,Ve.c,[l.ElementRef,l.ChangeDetectorRef,[2,Ee.h],[2,ze.b],[2,Ve.a],qe.a,l.NgZone,[2,Ge.a]],null,null),l["\u0275qud"](603979776,1,{_controlNonStatic:0}),l["\u0275qud"](335544320,2,{_controlStatic:0}),l["\u0275qud"](603979776,3,{_labelChildNonStatic:0}),l["\u0275qud"](335544320,4,{_labelChildStatic:0}),l["\u0275qud"](603979776,5,{_placeholderChild:0}),l["\u0275qud"](603979776,6,{_errorChildren:1}),l["\u0275qud"](603979776,7,{_hintChildren:1}),l["\u0275qud"](603979776,8,{_prefixChildren:1}),l["\u0275qud"](603979776,9,{_suffixChildren:1}),(e()(),l["\u0275eld"](11,0,null,1,12,"mat-select",[["class","mat-select"],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],(function(e,t,n){var a=!0,i=e.component;return"keydown"===t&&(a=!1!==l["\u0275nov"](e,16)._handleKeydown(n)&&a),"focus"===t&&(a=!1!==l["\u0275nov"](e,16)._onFocus()&&a),"blur"===t&&(a=!1!==l["\u0275nov"](e,16)._onBlur()&&a),"ngModelChange"===t&&(a=!1!==(i.currentTabIndex=n)&&a),"ngModelChange"===t&&(a=!1!==i.selectTab(i.currentTab)&&a),a}),Be.b,Be.a)),l["\u0275prd"](6144,null,Ee.j,null,[We.c]),l["\u0275did"](13,671744,null,0,y.v,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,y.r,null,[y.v]),l["\u0275did"](15,16384,null,0,y.s,[[4,y.r]],null,null),l["\u0275did"](16,2080768,null,3,We.c,[Ue.i,l.ChangeDetectorRef,l.NgZone,Ee.b,l.ElementRef,[2,ze.b],[2,y.u],[2,y.k],[2,Ve.c],[6,y.r],[8,null],We.a,Je.j],{placeholder:[0,"placeholder"]},null),l["\u0275qud"](603979776,10,{options:1}),l["\u0275qud"](603979776,11,{optionGroups:1}),l["\u0275qud"](603979776,12,{customTrigger:0}),l["\u0275pid"](131072,E.i,[E.j,l.ChangeDetectorRef]),l["\u0275prd"](2048,[[1,4],[2,4]],Ve.d,null,[We.c]),(e()(),l["\u0275and"](16777216,null,1,1,null,Xe)),l["\u0275did"](23,278528,null,0,v.m,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component;e(t,13,0,n.currentTabIndex),e(t,16,0,l["\u0275unv"](t,16,0,l["\u0275nov"](t,20).transform("filter.view.caption"))),e(t,23,0,n.tabs)}),(function(e,t){e(t,0,1,["standard"==l["\u0275nov"](t,1).appearance,"fill"==l["\u0275nov"](t,1).appearance,"outline"==l["\u0275nov"](t,1).appearance,"legacy"==l["\u0275nov"](t,1).appearance,l["\u0275nov"](t,1)._control.errorState,l["\u0275nov"](t,1)._canLabelFloat,l["\u0275nov"](t,1)._shouldLabelFloat(),l["\u0275nov"](t,1)._hasFloatingLabel(),l["\u0275nov"](t,1)._hideControlPlaceholder(),l["\u0275nov"](t,1)._control.disabled,l["\u0275nov"](t,1)._control.autofilled,l["\u0275nov"](t,1)._control.focused,"accent"==l["\u0275nov"](t,1).color,"warn"==l["\u0275nov"](t,1).color,l["\u0275nov"](t,1)._shouldForward("untouched"),l["\u0275nov"](t,1)._shouldForward("touched"),l["\u0275nov"](t,1)._shouldForward("pristine"),l["\u0275nov"](t,1)._shouldForward("dirty"),l["\u0275nov"](t,1)._shouldForward("valid"),l["\u0275nov"](t,1)._shouldForward("invalid"),l["\u0275nov"](t,1)._shouldForward("pending"),!l["\u0275nov"](t,1)._animationsEnabled]),e(t,11,1,[l["\u0275nov"](t,15).ngClassUntouched,l["\u0275nov"](t,15).ngClassTouched,l["\u0275nov"](t,15).ngClassPristine,l["\u0275nov"](t,15).ngClassDirty,l["\u0275nov"](t,15).ngClassValid,l["\u0275nov"](t,15).ngClassInvalid,l["\u0275nov"](t,15).ngClassPending,l["\u0275nov"](t,16).id,l["\u0275nov"](t,16).tabIndex,l["\u0275nov"](t,16)._getAriaLabel(),l["\u0275nov"](t,16)._getAriaLabelledby(),l["\u0275nov"](t,16).required.toString(),l["\u0275nov"](t,16).disabled.toString(),l["\u0275nov"](t,16).errorState,l["\u0275nov"](t,16).panelOpen?l["\u0275nov"](t,16)._optionIds:null,l["\u0275nov"](t,16).multiple,l["\u0275nov"](t,16)._ariaDescribedby||null,l["\u0275nov"](t,16)._getAriaActiveDescendant(),l["\u0275nov"](t,16).disabled,l["\u0275nov"](t,16).errorState,l["\u0275nov"](t,16).required,l["\u0275nov"](t,16).empty])}))}var He=n("2F3X"),Qe=n("8CZ8"),et=n("fgD+"),tt=n("bQ1K");class nt{constructor(e,t){this.translate=e,this.cd=t,this.filtersSnapshot={lists:{},inputs:{},dateRange:null},this.filtersChange=new l.EventEmitter,this.dateRange=""}ngOnInit(){}ngOnChanges(){this.filtersSnapshot&&this.filtersSnapshot.dateRange&&this.setValueRange()}setValueRange(){const{beginDate:e,endDate:t}=this.filtersSnapshot.dateRange;this.dateRange=`${e.month}-${e.day}-${e.year}`+"|"+`${t.month}-${t.day}-${t.year}`}dateRangeChanged(e){const[t,n]=e.split("|"),l={day:t.split("-")[2],month:t.split("-")[1],year:t.split("-")[0]},a={day:n.split("-")[2],month:n.split("-")[1],year:n.split("-")[0]};this.dateRange=e,this.changeFilters({lists:Object.assign({},this.filtersSnapshot.lists),inputs:Object.assign({},this.filtersSnapshot.inputs),dateRange:{endDate:a,beginDate:l}}),this.cd.markForCheck()}listChanged(e,t){"group"===e.name&&(this.filtersSnapshot.lists.store="0"),this.changeFilters({lists:Object.assign({},this.filtersSnapshot.lists,{[e.name]:t}),inputs:Object.assign({},this.filtersSnapshot.inputs),dateRange:this.filtersSnapshot.dateRange?Object.assign({},this.filtersSnapshot.dateRange):null}),this.cd.markForCheck()}inputChanged(e,t){this.changeFilters({lists:Object.assign({},this.filtersSnapshot.lists),inputs:Object.assign({},this.filtersSnapshot.inputs,{[e.name]:t}),dateRange:this.filtersSnapshot.dateRange?Object.assign({},this.filtersSnapshot.dateRange):null}),this.cd.markForCheck()}changeFilters(e){this.filtersChange.emit(e)}}var lt=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}[_nghost-%COMP%]     .mydrp{border:0}[_nghost-%COMP%]     .mydrp .selectiongroup{width:180px}.filter[_ngcontent-%COMP%]{display:inline-block;margin-top:5px;margin-bottom:5px}.filter[_ngcontent-%COMP%]:not(:last-child){margin-right:15px}[_nghost-%COMP%]     .filter .label{font-weight:400}.filter--list-box[_ngcontent-%COMP%]{display:inline-block}.filter--list-box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:700}.filter--date-range[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.filter--date-range[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;font-weight:700}.filters-block[_ngcontent-%COMP%]{height:70px;padding:10px 20px 20px}.filter-group-item[_ngcontent-%COMP%]{margin-right:20px}"]],data:{}});function at(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(e,t,n){var a=!0;return"click"===t&&(a=!1!==l["\u0275nov"](e,1)._selectViaInteraction()&&a),"keydown"===t&&(a=!1!==l["\u0275nov"](e,1)._handleKeydown(n)&&a),a}),Ae.b,Ae.a)),l["\u0275did"](1,8568832,[[10,4]],0,Ee.p,[l.ElementRef,l.ChangeDetectorRef,[2,Ee.j],[2,Ee.o]],{value:[0,"value"]},null),(e()(),l["\u0275ted"](2,0,["",""]))],(function(e,t){e(t,1,0,l["\u0275inlineInterpolate"](1,"",t.context.$implicit.value,""))}),(function(e,t){e(t,0,0,l["\u0275nov"](t,1)._getTabIndex(),l["\u0275nov"](t,1).selected,l["\u0275nov"](t,1).multiple,l["\u0275nov"](t,1).active,l["\u0275nov"](t,1).id,l["\u0275nov"](t,1)._getAriaSelected(),l["\u0275nov"](t,1).disabled.toString(),l["\u0275nov"](t,1).disabled),e(t,2,0,t.context.$implicit.name)}))}function it(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,22,"mat-form-field",[["class","filter-group-item mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,Ne.b,Ne.a)),l["\u0275did"](1,7520256,null,9,Ve.c,[l.ElementRef,l.ChangeDetectorRef,[2,Ee.h],[2,ze.b],[2,Ve.a],qe.a,l.NgZone,[2,Ge.a]],null,null),l["\u0275qud"](603979776,1,{_controlNonStatic:0}),l["\u0275qud"](335544320,2,{_controlStatic:0}),l["\u0275qud"](603979776,3,{_labelChildNonStatic:0}),l["\u0275qud"](335544320,4,{_labelChildStatic:0}),l["\u0275qud"](603979776,5,{_placeholderChild:0}),l["\u0275qud"](603979776,6,{_errorChildren:1}),l["\u0275qud"](603979776,7,{_hintChildren:1}),l["\u0275qud"](603979776,8,{_prefixChildren:1}),l["\u0275qud"](603979776,9,{_suffixChildren:1}),(e()(),l["\u0275eld"](11,0,null,1,11,"mat-select",[["class","mat-select"],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],(function(e,t,n){var a=!0,i=e.component;return"keydown"===t&&(a=!1!==l["\u0275nov"](e,16)._handleKeydown(n)&&a),"focus"===t&&(a=!1!==l["\u0275nov"](e,16)._onFocus()&&a),"blur"===t&&(a=!1!==l["\u0275nov"](e,16)._onBlur()&&a),"ngModelChange"===t&&(a=!1!==((null==i.filtersSnapshot?null:i.filtersSnapshot.lists)[e.context.$implicit.name]=n)&&a),"ngModelChange"===t&&(a=!1!==i.listChanged(e.context.$implicit,null==i.filtersSnapshot?null:i.filtersSnapshot.lists[e.context.$implicit.name])&&a),a}),Be.b,Be.a)),l["\u0275prd"](6144,null,Ee.j,null,[We.c]),l["\u0275did"](13,671744,null,0,y.v,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,y.r,null,[y.v]),l["\u0275did"](15,16384,null,0,y.s,[[4,y.r]],null,null),l["\u0275did"](16,2080768,null,3,We.c,[Ue.i,l.ChangeDetectorRef,l.NgZone,Ee.b,l.ElementRef,[2,ze.b],[2,y.u],[2,y.k],[2,Ve.c],[6,y.r],[8,null],We.a,Je.j],{placeholder:[0,"placeholder"]},null),l["\u0275qud"](603979776,10,{options:1}),l["\u0275qud"](603979776,11,{optionGroups:1}),l["\u0275qud"](603979776,12,{customTrigger:0}),l["\u0275prd"](2048,[[1,4],[2,4]],Ve.d,null,[We.c]),(e()(),l["\u0275and"](16777216,null,1,1,null,at)),l["\u0275did"](22,278528,null,0,v.m,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component;e(t,13,0,null==n.filtersSnapshot?null:n.filtersSnapshot.lists[t.context.$implicit.name]),e(t,16,0,t.context.$implicit.label),e(t,22,0,t.context.$implicit.items)}),(function(e,t){e(t,0,1,["standard"==l["\u0275nov"](t,1).appearance,"fill"==l["\u0275nov"](t,1).appearance,"outline"==l["\u0275nov"](t,1).appearance,"legacy"==l["\u0275nov"](t,1).appearance,l["\u0275nov"](t,1)._control.errorState,l["\u0275nov"](t,1)._canLabelFloat,l["\u0275nov"](t,1)._shouldLabelFloat(),l["\u0275nov"](t,1)._hasFloatingLabel(),l["\u0275nov"](t,1)._hideControlPlaceholder(),l["\u0275nov"](t,1)._control.disabled,l["\u0275nov"](t,1)._control.autofilled,l["\u0275nov"](t,1)._control.focused,"accent"==l["\u0275nov"](t,1).color,"warn"==l["\u0275nov"](t,1).color,l["\u0275nov"](t,1)._shouldForward("untouched"),l["\u0275nov"](t,1)._shouldForward("touched"),l["\u0275nov"](t,1)._shouldForward("pristine"),l["\u0275nov"](t,1)._shouldForward("dirty"),l["\u0275nov"](t,1)._shouldForward("valid"),l["\u0275nov"](t,1)._shouldForward("invalid"),l["\u0275nov"](t,1)._shouldForward("pending"),!l["\u0275nov"](t,1)._animationsEnabled]),e(t,11,1,[l["\u0275nov"](t,15).ngClassUntouched,l["\u0275nov"](t,15).ngClassTouched,l["\u0275nov"](t,15).ngClassPristine,l["\u0275nov"](t,15).ngClassDirty,l["\u0275nov"](t,15).ngClassValid,l["\u0275nov"](t,15).ngClassInvalid,l["\u0275nov"](t,15).ngClassPending,l["\u0275nov"](t,16).id,l["\u0275nov"](t,16).tabIndex,l["\u0275nov"](t,16)._getAriaLabel(),l["\u0275nov"](t,16)._getAriaLabelledby(),l["\u0275nov"](t,16).required.toString(),l["\u0275nov"](t,16).disabled.toString(),l["\u0275nov"](t,16).errorState,l["\u0275nov"](t,16).panelOpen?l["\u0275nov"](t,16)._optionIds:null,l["\u0275nov"](t,16).multiple,l["\u0275nov"](t,16)._ariaDescribedby||null,l["\u0275nov"](t,16)._getAriaActiveDescendant(),l["\u0275nov"](t,16).disabled,l["\u0275nov"](t,16).errorState,l["\u0275nov"](t,16).required,l["\u0275nov"](t,16).empty])}))}function rt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","label"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.parent.context.$implicit.label)}))}function ot(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"button",[["class","btn btn--color-primary btn--small btn--empty"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.inputChanged(e.parent.context.$implicit,n.srcElement.previousElementSibling.value)&&l),l}),null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[["class","icon-search"]],null,null,null,null,null))],null,null)}function st(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"label",[["class","filter filter--input-filter"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,rt)),l["\u0275did"](2,16384,null,0,v.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,5,"input",[["class","input__text form-control"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var a=!0,i=e.component;return"input"===t&&(a=!1!==l["\u0275nov"](e,4)._handleInput(n.target.value)&&a),"blur"===t&&(a=!1!==l["\u0275nov"](e,4).onTouched()&&a),"compositionstart"===t&&(a=!1!==l["\u0275nov"](e,4)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l["\u0275nov"](e,4)._compositionEnd(n.target.value)&&a),"change"===t&&(a=!1!==(!e.context.$implicit.applyButton&&i.inputChanged(e.context.$implicit,n.target.value))&&a),a}),null,null)),l["\u0275did"](4,16384,null,0,y.e,[l.Renderer2,l.ElementRef,[2,y.a]],null,null),l["\u0275prd"](1024,null,y.q,(function(e){return[e]}),[y.e]),l["\u0275did"](6,671744,null,0,y.v,[[8,null],[8,null],[8,null],[6,y.q]],{model:[0,"model"]},null),l["\u0275prd"](2048,null,y.r,null,[y.v]),l["\u0275did"](8,16384,null,0,y.s,[[4,y.r]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,ot)),l["\u0275did"](10,16384,null,0,v.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,t.context.$implicit.name),e(t,6,0,n.filtersSnapshot.inputs[t.context.$implicit.name]),e(t,10,0,t.context.$implicit.applyButton)}),(function(e,t){e(t,3,0,t.context.$implicit.placeholder||"",l["\u0275nov"](t,8).ngClassUntouched,l["\u0275nov"](t,8).ngClassTouched,l["\u0275nov"](t,8).ngClassPristine,l["\u0275nov"](t,8).ngClassDirty,l["\u0275nov"](t,8).ngClassValid,l["\u0275nov"](t,8).ngClassInvalid,l["\u0275nov"](t,8).ngClassPending)}))}function dt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"label",[["class","date-range"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"app-datepicker-range",[],null,[[null,"dateChange"]],(function(e,t,n){var l=!0;return"dateChange"===t&&(l=!1!==e.component.dateRangeChanged(n)&&l),l}),He.b,He.a)),l["\u0275prd"](4608,null,Qe.a,et.a,[Qe.e]),l["\u0275did"](3,114688,null,0,tt.a,[],{placeholder:[0,"placeholder"],value:[1,"value"]},{dateChange:"dateChange"}),l["\u0275prd"](256,null,Qe.d,tt.b,[])],(function(e,t){var n=t.component;e(t,3,0,n.filters.dateRange.label,n.dateRange)}),null)}function ut(e){return l["\u0275vid"](2,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","filters-block"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,it)),l["\u0275did"](2,278528,null,0,v.m,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,st)),l["\u0275did"](4,278528,null,0,v.m,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,dt)),l["\u0275did"](6,16384,null,0,v.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,null==n.filters?null:n.filters.lists),e(t,4,0,null==n.filters?null:n.filters.inputs),e(t,6,0,(null==n.filters?null:n.filters.dateRange)&&n.filtersSnapshot)}),null)}var ct=n("JA3b"),pt=n("JItt"),gt=n("zp2H"),ht=n("v67E"),mt=n("2v1Z");n("8Gnb");class bt{constructor(e){this.grdd=e,this.data=[],this.tempData=[],this.loading=!1,this.countFilter="all",this.subs=[]}set sub(e){this.subs.push(e)}ngOnInit(){this.setup$=this.grdd.drillDown$.pipe(Object(ue.a)(e=>e.setup),Object(he.a)()),this.columns$=this.grdd.drillDown$.pipe(Object(ue.a)(e=>e.columns),Object(he.a)()),this.grdd.drillDown$.pipe(Object(ue.a)(e=>e.data),Object(he.a)()).subscribe(e=>{this.tempData=e,this.data=e,this.countFilter="all"}),this.loading$=this.grdd.loading$,this.sub=this.setup$.subscribe(e=>this.title=e&&e.title),this.sub=this.loading$.subscribe(e=>this.loading=e)}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}open(e,t){this.grdd.changeParams(e),this.fileName=t,this.modal.showModal()}closed(){this.title="",this.grdd.changeParams(null)}modelChanged(e){this.rowCount=e.getRowCount()}exportDataAs(e){switch(e){case Fe.a.XLS:this.table.exportDataAsXls(this.fileName);break;case Fe.a.PDF:this.table.exportDataAsPdf(this.fileName);break;default:console.warn("GenericReportDrillDown#exportDataAs: unsupported format")}}onCountOptionChange(){this.data="all"===this.countFilter?this.tempData:this.tempData.filter(e=>+e.TotalSale+ +e.TotalCost!=0)}}class ft{constructor(e,t){this.drillDownApi=e,this.gr=t,this.currentBaseDrillDownParams$=new ie.a(null),this.setup$=new ie.a(null),this.columns$=new ie.a(null),this.data$=new ie.a(null),this.debugSubscriptions=[],this.init()}changeParams(e){this.currentBaseDrillDownParams$.next(e)}init(){this.currentDrillDownParams$=this.currentBaseDrillDownParams$.pipe(Object(le.a)(this.gr.current$),Object(ue.a)(([e,t])=>e?Object.assign({},e,{reportId:t.reportId,tabIndex:t.tab.tabIndex,filtersSnapshot:t.filtersSnapshot}):null)),Ie(this.currentDrillDownParams$,()=>{this.setup$.next(null),this.columns$.next(null),this.data$.next(null)},e=>this.drillDownApi.getSetup(e).subscribe(e=>this.setup$.next(e))),Ie(this.currentDrillDownParams$,()=>{},e=>this.drillDownApi.getColumns(e).subscribe(e=>this.columns$.next(e))),Ie(this.currentDrillDownParams$.pipe(Object(te.a)(this.gr.report$.pipe(Object(ue.a)(e=>e.filters))),Object(ue.a)(([e,t])=>e&&t?[e,t]:null)),()=>{},([e,t])=>{const n=xe(e.filtersSnapshot,t);if(void 0!==e.filtersSnapshot.lists["column-switch"]){const l=t.lists.find(e=>"column-switch"===e.name).items.find(t=>t.value===e.filtersSnapshot.lists["column-switch"]);n.period=l&&l.name}return this.drillDownApi.getData(e,n).subscribe(e=>this.data$.next(e))});const e=this.setup$.pipe(Object(te.a)(this.columns$,this.data$));this.loading$=e.pipe(Object(ue.a)(([e,t,n])=>!e||!t||!n),Object(he.a)(),Object(ve.a)()),this.drillDown$=e.pipe(Object(de.a)(([e,t,n])=>!!e&&!!t&&!!n),Object(ue.a)(([e,t,n])=>({setup:e,columns:t,data:n})),Object(ve.a)())}initDebug(){this.addDebugLoggerToStream("currentDrillDownParams$"),this.addDebugLoggerToStream("setup$"),this.addDebugLoggerToStream("columns$"),this.addDebugLoggerToStream("data$"),setTimeout(()=>{this.addDebugLoggerToStream("drillDown$"),this.addDebugLoggerToStream("loading$")},0)}destroyDebug(){this.debugSubscriptions.forEach(e=>e.unsubscribe())}addDebugLoggerToStream(e){const t=this[e].subscribe(t=>console.log(`DEBUG:NEXT:GenericReportDrillDown#${e}::`,t),t=>console.log(`DEBUG:ERROR:GenericReportDrillDown#${e}::`,t),()=>console.log(`DEBUG:COMPLETE:GenericReportDrillDown#${e}`));this.debugSubscriptions.push(t)}}var vt=l["\u0275crt"]({encapsulation:0,styles:[".c_modal {\n      width: 70%;\n      height: 80%;\n    }\n      .c_modal .c_modal__body {\n      padding: 0;\n    }\n    app-generic-report-table[_ngcontent-%COMP%] {\n      width: 100%;\n      height: calc(100% - 60px);\n    }\n    .drill-down-header[_ngcontent-%COMP%] {\n      height: 60px;\n      padding: 20px 20px 0;\n      font-size: 16px;\n      text-align: right;\n    }\n    app-export-buttons[_ngcontent-%COMP%] {\n      margin-left: 20px;\n      transform: translateY(5px);\n    }"],data:{}});function xt(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{modal:0}),l["\u0275qud"](402653184,2,{table:0}),(e()(),l["\u0275eld"](2,0,null,null,42,"app-modal",[],null,[[null,"close"]],(function(e,t,n){var l=!0;return"close"===t&&(l=!1!==e.component.closed()&&l),l}),gt.b,gt.a)),l["\u0275prd"](512,null,ht.a,ht.a,[f.b]),l["\u0275did"](4,1228800,[[1,4]],0,mt.a,[ht.a,v.d,l.ElementRef,l.Renderer2,f.b],{modalTitle:[0,"modalTitle"]},{close:"close"}),(e()(),l["\u0275eld"](5,0,null,0,35,"div",[["class","drill-down-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](7,null,[""," ",""])),l["\u0275pid"](131072,v.b,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](9,0,null,null,29,"mat-form-field",[["class","filter-group-item mat-form-field"],["style","margin-left: 20px;"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,Ne.b,Ne.a)),l["\u0275did"](10,7520256,null,9,Ve.c,[l.ElementRef,l.ChangeDetectorRef,[2,Ee.h],[2,ze.b],[2,Ve.a],qe.a,l.NgZone,[2,Ge.a]],null,null),l["\u0275qud"](603979776,3,{_controlNonStatic:0}),l["\u0275qud"](335544320,4,{_controlStatic:0}),l["\u0275qud"](603979776,5,{_labelChildNonStatic:0}),l["\u0275qud"](335544320,6,{_labelChildStatic:0}),l["\u0275qud"](603979776,7,{_placeholderChild:0}),l["\u0275qud"](603979776,8,{_errorChildren:1}),l["\u0275qud"](603979776,9,{_hintChildren:1}),l["\u0275qud"](603979776,10,{_prefixChildren:1}),l["\u0275qud"](603979776,11,{_suffixChildren:1}),(e()(),l["\u0275eld"](20,0,null,1,18,"mat-select",[["class","mat-select"],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],(function(e,t,n){var a=!0,i=e.component;return"keydown"===t&&(a=!1!==l["\u0275nov"](e,24)._handleKeydown(n)&&a),"focus"===t&&(a=!1!==l["\u0275nov"](e,24)._onFocus()&&a),"blur"===t&&(a=!1!==l["\u0275nov"](e,24)._onBlur()&&a),"ngModelChange"===t&&(a=!1!==(i.countFilter=n)&&a),"ngModelChange"===t&&(a=!1!==i.onCountOptionChange()&&a),a}),Be.b,Be.a)),l["\u0275did"](21,671744,null,0,y.v,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,y.r,null,[y.v]),l["\u0275did"](23,16384,null,0,y.s,[[4,y.r]],null,null),l["\u0275did"](24,2080768,null,3,We.c,[Ue.i,l.ChangeDetectorRef,l.NgZone,Ee.b,l.ElementRef,[2,ze.b],[2,y.u],[2,y.k],[2,Ve.c],[6,y.r],[8,null],We.a,Je.j],{placeholder:[0,"placeholder"]},null),l["\u0275qud"](603979776,12,{options:1}),l["\u0275qud"](603979776,13,{optionGroups:1}),l["\u0275qud"](603979776,14,{customTrigger:0}),l["\u0275pid"](131072,E.i,[E.j,l.ChangeDetectorRef]),l["\u0275prd"](2048,[[3,4],[4,4]],Ve.d,null,[We.c]),l["\u0275prd"](2048,null,Ee.j,null,[We.c]),(e()(),l["\u0275eld"](31,0,null,1,3,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(e,t,n){var a=!0;return"click"===t&&(a=!1!==l["\u0275nov"](e,32)._selectViaInteraction()&&a),"keydown"===t&&(a=!1!==l["\u0275nov"](e,32)._handleKeydown(n)&&a),a}),Ae.b,Ae.a)),l["\u0275did"](32,8568832,[[12,4]],0,Ee.p,[l.ElementRef,l.ChangeDetectorRef,[2,Ee.j],[2,Ee.o]],{value:[0,"value"]},null),(e()(),l["\u0275ted"](33,0,[" "," "])),l["\u0275pid"](131072,E.i,[E.j,l.ChangeDetectorRef]),(e()(),l["\u0275eld"](35,0,null,1,3,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(e,t,n){var a=!0;return"click"===t&&(a=!1!==l["\u0275nov"](e,36)._selectViaInteraction()&&a),"keydown"===t&&(a=!1!==l["\u0275nov"](e,36)._handleKeydown(n)&&a),a}),Ae.b,Ae.a)),l["\u0275did"](36,8568832,[[12,4]],0,Ee.p,[l.ElementRef,l.ChangeDetectorRef,[2,Ee.j],[2,Ee.o]],{value:[0,"value"]},null),(e()(),l["\u0275ted"](37,0,[" "," "])),l["\u0275pid"](131072,E.i,[E.j,l.ChangeDetectorRef]),(e()(),l["\u0275eld"](39,0,null,null,1,"app-export-buttons",[],[[2,"small",null]],[[null,"dataExport"]],(function(e,t,n){var l=!0;return"dataExport"===t&&(l=!1!==e.component.exportDataAs(n)&&l),l}),P.b,P.a)),l["\u0275did"](40,114688,null,0,S.a,[I.a],{small:[0,"small"]},{dataExport:"dataExport"}),(e()(),l["\u0275eld"](41,0,null,0,3,"app-generic-report-table",[],null,[[null,"modelChange"]],(function(e,t,n){var l=!0;return"modelChange"===t&&(l=!1!==e.component.modelChanged(n)&&l),l}),K,X)),l["\u0275prd"](512,null,k.a,k.a,[T.a,L.a,A.a,E.j]),l["\u0275did"](43,4964352,[[2,4]],0,U,[b.a,k.a,J.a,Y.a,Z.a,f.b],{data:[0,"data"],columns:[1,"columns"],loading:[2,"loading"],pagination:[3,"pagination"]},{modelChange:"modelChange"}),l["\u0275pid"](131072,v.b,[l.ChangeDetectorRef])],(function(e,t){var n=t.component;e(t,4,0,n.title),e(t,21,0,n.countFilter),e(t,24,0,l["\u0275unv"](t,24,0,l["\u0275nov"](t,28).transform("general.count.filter.label"))),e(t,32,0,"all"),e(t,36,0,"nonZero"),e(t,40,0,!0),e(t,43,0,n.data,l["\u0275unv"](t,43,1,l["\u0275nov"](t,44).transform(n.columns$)),n.loading,!0)}),(function(e,t){var n,a=t.component;e(t,7,0,null==(n=l["\u0275unv"](t,7,0,l["\u0275nov"](t,8).transform(a.setup$)))?null:n.summaryCountLabel,a.rowCount||""),e(t,9,1,["standard"==l["\u0275nov"](t,10).appearance,"fill"==l["\u0275nov"](t,10).appearance,"outline"==l["\u0275nov"](t,10).appearance,"legacy"==l["\u0275nov"](t,10).appearance,l["\u0275nov"](t,10)._control.errorState,l["\u0275nov"](t,10)._canLabelFloat,l["\u0275nov"](t,10)._shouldLabelFloat(),l["\u0275nov"](t,10)._hasFloatingLabel(),l["\u0275nov"](t,10)._hideControlPlaceholder(),l["\u0275nov"](t,10)._control.disabled,l["\u0275nov"](t,10)._control.autofilled,l["\u0275nov"](t,10)._control.focused,"accent"==l["\u0275nov"](t,10).color,"warn"==l["\u0275nov"](t,10).color,l["\u0275nov"](t,10)._shouldForward("untouched"),l["\u0275nov"](t,10)._shouldForward("touched"),l["\u0275nov"](t,10)._shouldForward("pristine"),l["\u0275nov"](t,10)._shouldForward("dirty"),l["\u0275nov"](t,10)._shouldForward("valid"),l["\u0275nov"](t,10)._shouldForward("invalid"),l["\u0275nov"](t,10)._shouldForward("pending"),!l["\u0275nov"](t,10)._animationsEnabled]),e(t,20,1,[l["\u0275nov"](t,23).ngClassUntouched,l["\u0275nov"](t,23).ngClassTouched,l["\u0275nov"](t,23).ngClassPristine,l["\u0275nov"](t,23).ngClassDirty,l["\u0275nov"](t,23).ngClassValid,l["\u0275nov"](t,23).ngClassInvalid,l["\u0275nov"](t,23).ngClassPending,l["\u0275nov"](t,24).id,l["\u0275nov"](t,24).tabIndex,l["\u0275nov"](t,24)._getAriaLabel(),l["\u0275nov"](t,24)._getAriaLabelledby(),l["\u0275nov"](t,24).required.toString(),l["\u0275nov"](t,24).disabled.toString(),l["\u0275nov"](t,24).errorState,l["\u0275nov"](t,24).panelOpen?l["\u0275nov"](t,24)._optionIds:null,l["\u0275nov"](t,24).multiple,l["\u0275nov"](t,24)._ariaDescribedby||null,l["\u0275nov"](t,24)._getAriaActiveDescendant(),l["\u0275nov"](t,24).disabled,l["\u0275nov"](t,24).errorState,l["\u0275nov"](t,24).required,l["\u0275nov"](t,24).empty]),e(t,31,0,l["\u0275nov"](t,32)._getTabIndex(),l["\u0275nov"](t,32).selected,l["\u0275nov"](t,32).multiple,l["\u0275nov"](t,32).active,l["\u0275nov"](t,32).id,l["\u0275nov"](t,32)._getAriaSelected(),l["\u0275nov"](t,32).disabled.toString(),l["\u0275nov"](t,32).disabled),e(t,33,0,l["\u0275unv"](t,33,0,l["\u0275nov"](t,34).transform("general.filter.all.label"))),e(t,35,0,l["\u0275nov"](t,36)._getTabIndex(),l["\u0275nov"](t,36).selected,l["\u0275nov"](t,36).multiple,l["\u0275nov"](t,36).active,l["\u0275nov"](t,36).id,l["\u0275nov"](t,36)._getAriaSelected(),l["\u0275nov"](t,36).disabled.toString(),l["\u0275nov"](t,36).disabled),e(t,37,0,l["\u0275unv"](t,37,0,l["\u0275nov"](t,38).transform("general.filter.non-zero.label"))),e(t,39,0,l["\u0275nov"](t,40).small)}))}var Ct=n("mrSG"),wt=n("JX91"),Ot=n("BTBr");const _t=window.amplitude;class yt{constructor(e,t,n,l,a,i,r){this.route=e,this.gr=t,this.topNav=n,this.userApi=l,this.tracking=a,this.translate=i,this.isBudgetLoading=!1,this.isBudgetViewActivated=!1,this.allowPagination=!0,this.onNewColumnsLoaded$=new ee.a,this.tableInitialized$=new ie.a(!1),this.subs=[],this.debug=r.factory(new.target.name)}set sub(e){this.subs.push(e)}ngOnInit(){const e=this.route.params.pipe(Object(ue.a)(e=>+e.id),Object(me.a)(e=>{this.debug.info("Loading report %d...",e),this.gr.selectReportById(e),this.switchBudgetView(!1)}));this.userApi.getReportList("Dealer Apps").pipe(Object(te.a)(this.userApi.getReportList("Custom Apps"),(e,t)=>Object.assign({},e,t)),Object(ue.a)(e=>{const t={};return Object.keys(e).map(t=>e[t]).forEach(e=>Object.keys(e).forEach(n=>t[n]=e[n].reptName)),t}),Object(te.a)(e,(e,t)=>e[t])).subscribe(e=>this.currentReportName=e),this.filters$=this.gr.report$.pipe(Object(ue.a)(e=>e.filters),Object(he.a)()),this.tabs$=this.gr.report$.pipe(Object(ue.a)(e=>e.tabs),Object(he.a)()),this.columns$=this.gr.report$.pipe(Object(ue.a)(e=>e.columns),Object(he.a)()),this.pinnedBottomRowData$=this.gr.report$.pipe(Object(ue.a)(e=>e.pinnedBottomRowData)),this.loading$=this.gr.loading$.pipe(Object(wt.a)(!0)),this.totals$=this.gr.totals$,this.filtersSnapshot$=this.gr.current$.pipe(Object(ue.a)(e=>e.filtersSnapshot),Object(te.a)(this.loading$),Object(de.a)(([e,t])=>!t&&!!e),Object(ue.a)(([e])=>e)),this.initBudgetViewStreams(),this.sub=this.filtersSnapshot$.subscribe(e=>this.filtersSnapshot=e),this.sub=this.filters$.subscribe(e=>this.filters=e),this.sub=this.gr.current$.pipe(Object(ue.a)(e=>e.tab),Object(de.a)(e=>!!e)).subscribe(e=>this.currentTab=e),this.sub=this.gr.report$.pipe(Object(ue.a)(e=>e.data)).subscribe(e=>{this.data=e,this.allowPagination=e.length>1e3}),this.sub=this.filtersSnapshot$.pipe(Object(le.a)(this.filters$)).subscribe(()=>{this.trackAction(Ot.a.Load)}),this.topNav.clearLinks(),this.initGridOptions(),this.debug.streams(this,["columns$"])}ngAfterViewChecked(){this.tableInitialized$.next(!!this.table)}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.debug.destroy()}filtersChanged(e){this.gr.changeFilters(e)}tabChanged(e){this.gr.selectTab(e)}onTrackTableChanges(){this.trackAction(Ot.a.Load,this.table.grid)}exportDataAs(e){return Ct.__awaiter(this,void 0,void 0,(function*(){const t=this.createFileName(),n=yield this.prepareFiltersSnapshotToExport().toPromise();switch(e){case Fe.a.XLS:this.table.exportDataAsXls(t,n),this.trackAction(Ot.a.ExportXls,this.table.grid);break;case Fe.a.PDF:this.table.exportDataAsPdf(t,n,()=>{this.trackAction(Ot.a.ExportPdf,this.table.grid)});break;default:this.debug.warn("GenericReport#exportDataAs: unsupported format")}}))}switchBudgetView(e){if(this.isBudgetViewActivated!==e){if(this.onNewColumnsLoaded$.next(!1),this.filtersSnapshot&&"0"===this.filtersSnapshot.lists.store){const e=this.filters.lists.find(e=>"store"===e.name);this.debug.assert(e,"Can not file list box filter for 'Store'");const t=e.items.find(e=>"0"!==e.value),n=Object.assign({},this.filtersSnapshot,{lists:Object.assign({},this.filtersSnapshot.lists,{store:t.value})});this.gr.changeFilters(n)}this.gr.setDisabledStateForListFilterItems("store",["0"],e),this.isBudgetViewActivated=e}}setBudgetLoading(e){this.isBudgetLoading=e}trackAction(e,t){return Ct.__awaiter(this,void 0,void 0,(function*(){this.tracking.log({page:Ot.b.CustomReports,section:this.currentReportName,subSection:this.currentTab.tabLabel,event:e,params:yield this.prepareFiltersSnapshotToExport().toPromise(),grid:t}),console.log(Ot.b.CustomReports+"_"+this.currentReportName+" page load"),_t.getInstance().logEvent(Ot.b.CustomReports+"_page_load",{reportName:this.currentReportName,eventName:"page load",eventValue:!0})}))}initGridOptions(){this.options={getRowStyle:e=>{if(e.node.rowPinned)return{"font-weight":"bold"}},onCellClicked:e=>{const{data:t,colDef:n}=e,l=this.table.columns.find(e=>e.field===n.field);t&&t.hasDrill&&l&&l.hasDrill&&this.drillDown.open({drillType:t.drillType,drillRowIndex:t.drillRowIndex,drillColumnIndex:l.drillIndex,value:t[n.field],columnsData:t.getDrillDownData(this.currentTab.drillDownDataColumnParams)},this.createFileName("Drill-Down"))},onNewColumnsLoaded:()=>this.onNewColumnsLoaded$.next(!0)}}initBudgetViewStreams(){this.sub=this.filtersSnapshot$.pipe(Object(de.a)(Ce()),Object(te.a)(this.columns$.pipe(Object(de.a)(e=>e instanceof Array&&!!e.length)),this.onNewColumnsLoaded$,this.tableInitialized$.pipe(Object(he.a)())),Object(de.a)(([,,e,t])=>e&&t)).subscribe(([e,t])=>{const n=[],l=[],a=String(e.lists["column-switch"]);if(!this.table)return void this.debug.warn("Can not find table");const i=this.table.grid.columnApi.getColumnState();t.forEach(e=>{i.some(t=>t.colId===e.field)&&("0"===e.visibilityType||e.visibilityType===a?n.push(e.field):l.push(e.field))}),this.table.grid.columnApi.setColumnsVisible(n,!0),this.table.grid.columnApi.setColumnsVisible(l,!1)})}prepareFiltersSnapshotToExport(){const e=this.filters.lists.map(e=>{const t=String(e.label).replace(/[\s:]+$/g,""),n=this.filtersSnapshot.lists[e.name]||e.default,l=e.items.find(e=>e.value===n);return{label:t,value:l?l.name:""}}),t=this.filters.inputs.map(e=>({label:String(e.label).replace(/[\s:]+$/g,""),value:this.filtersSnapshot.inputs[e.name]||e.default})),n=({day:e,month:t,year:n})=>N([n,t-1,e]).format("MM/DD/YYYY");return this.translate.get(["filter.date-range.name-from","filter.date-range.name-to"]).pipe(Object(ue.a)(l=>{const a=this.filters.dateRange?[{label:l["filter.date-range.name-from"],value:n(this.filtersSnapshot.dateRange.beginDate)},{label:l["filter.date-range.name-to"],value:n(this.filtersSnapshot.dateRange.endDate)}]:[];return[...e,...t,...a]}))}createFileName(e){const t=e=>e.replace(/\s/g,"-").replace(/[^\w\d_$.-]/g,"").replace(/-{2,}/g,"-"),n=t(this.currentReportName),l=t(this.currentTab.tabLabel),a=N().format("MM-DD-YYYY");return e?`${n}_${l}_${e}_${a}`:`${n}_${l}_${a}`}}var Dt=n("iInd"),Pt=n("nutA"),St=n("jMGS"),It=l["\u0275crt"]({encapsulation:0,styles:[[".grid-wrapper[_ngcontent-%COMP%]{width:100%;flex:1 1 100%;height:100%;max-width:100%;background-color:#fff;box-shadow:2px 2px 5px 1px #c1bebe}.top-controls-block[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:space-between}.top-controls-block-left[_ngcontent-%COMP%]{width:calc(100% - 160px);flex:1 1 calc(100% - 160px);padding:20px 20px 10px;display:flex;align-items:center}.top-controls-block-right[_ngcontent-%COMP%]{width:160px;flex:1 0 160px;padding:20px 20px 10px;display:flex;align-items:center;justify-content:flex-end}.top-controls-block-heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#404040;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.filters-block[_ngcontent-%COMP%]{height:70px;padding:10px 20px 20px}.grid-block[_ngcontent-%COMP%]{display:flex}.grid-block-content[_ngcontent-%COMP%]{width:calc(100% - 40px);flex:1 0 calc(100% - 40px);position:relative}.grid-block-content[_ngcontent-%COMP%]   app-default-grid[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;will-change:auto;transition:all .5s ease;transform:translate3d(0,0,0)}.grid-block-sidebar[_ngcontent-%COMP%]{width:40px;flex:0 0 40px;border-left:1px solid #ddd}.grid-block-more-info-trigger[_ngcontent-%COMP%]{display:block;height:60px;cursor:pointer;position:relative}.grid-block-more-info-trigger[_ngcontent-%COMP%]:before{content:'\\E5D4';font-family:\"Material Icons\";font-size:24px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.grid-block-more-info-trigger.opened[_ngcontent-%COMP%]:before{content:'\\E5D3'}.top-control-btn[_ngcontent-%COMP%]{color:#5b5b5b;cursor:pointer;margin-left:20px;margin-top:-2px;display:inline-block}.top-control-label[_ngcontent-%COMP%]{color:#747474;font-size:14px;margin-left:10px}.mat-checked[_ngcontent-%COMP%]   .top-control-label[_ngcontent-%COMP%]{color:#2196f3}.tabs-block[_ngcontent-%COMP%]{height:60px;padding:10px 20px 16px}.tab[_ngcontent-%COMP%]{display:inline-block;height:34px;line-height:34px;border-radius:17px;padding-left:15px;padding-right:15px;color:#404040;font-size:14px;font-weight:500;background-color:#e5e5e5;cursor:pointer}.tab.active[_ngcontent-%COMP%], .tab[_ngcontent-%COMP%]:hover{color:#3498db;background-color:#e2eff8}.tab[_ngcontent-%COMP%]:not(:last-child){margin-right:15px}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 0 10px;height:45px}.modal-header-right[_ngcontent-%COMP%]   .top-control-btn[_ngcontent-%COMP%]:last-child{margin-right:-4px}.modal-header.with-outer-padding-overwrite[_ngcontent-%COMP%]{margin-top:-19px;margin-left:-19px;margin-right:-19px;padding:10px 20px}.modal-header.with-padding[_ngcontent-%COMP%]{padding:10px 20px}.modal-body[_ngcontent-%COMP%]{height:calc(100% - 45px);position:relative}.modal-body.with-footer[_ngcontent-%COMP%]{height:calc(100% - 45px - 50px)}.modal-body.full-height[_ngcontent-%COMP%]{height:100%}.modal-body.with-min-size[_ngcontent-%COMP%]{min-width:850px;min-height:300px;margin-left:-19px;margin-right:-19px}.modal-body.with-outer-padding-overwrite[_ngcontent-%COMP%]{margin-left:-19px;margin-right:-19px;margin-bottom:-19px}.modal-body[_ngcontent-%COMP%]   app-default-grid[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0}.modal-footer[_ngcontent-%COMP%]{height:50px;display:flex;align-items:center;justify-content:flex-end;background:#eee;margin:0 -19px -19px;padding:0 19px}.modal-footer-text[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#404040;padding-right:15px}.modal-footer-text.last[_ngcontent-%COMP%]{padding-left:15px;padding-right:0}.modal-footer-text.last[_ngcontent-%COMP%]:before{content:'|';position:relative;left:-13px}.modal-heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.fi-list[_ngcontent-%COMP%]{display:flex;margin:25px 0;padding:15px 0;border-bottom:1px solid #ddd}.fi-list.single[_ngcontent-%COMP%]{padding:5px 0;margin:0;border-bottom:0}.fi-list-item[_ngcontent-%COMP%]{width:33%;flex:0 0 33%;padding:0 5px}.single[_ngcontent-%COMP%]   .fi-list-item[_ngcontent-%COMP%]:nth-of-type(1){padding-left:0}.single[_ngcontent-%COMP%]   .fi-list-item[_ngcontent-%COMP%]:nth-of-type(3){padding-right:0}.penetration-list.horizontal[_ngcontent-%COMP%]{display:flex;align-items:center}.penetration-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin:25px 0;padding:15px 0 30px;border-bottom:1px solid #ddd}.horizontal[_ngcontent-%COMP%]   .penetration-item[_ngcontent-%COMP%]{width:50%;flex:0 0 50%;padding:10px 15px 10px 0;margin:0;border-bottom:none}.penetration-title[_ngcontent-%COMP%]{width:30%;flex:0 0 30%;font-size:14px;color:#404040;padding-right:5px;overflow:hidden;text-overflow:ellipsis}.penetration-graph[_ngcontent-%COMP%]{width:50%;flex:0 0 50%;padding:0 5px}.penetration-rank[_ngcontent-%COMP%]{width:20%;flex:0 0 20%;padding:0 5px;text-align:center}.chargeback[_ngcontent-%COMP%]{text-align:center;margin:50px 0 30px}.chargeback[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{margin:0 0 5px;font-size:20px;font-weight:600}.chargeback-value[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#404040}.control-btn-settings[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;position:relative;cursor:pointer}.control-btn-settings[_ngcontent-%COMP%]:before{content:'\\e8b8';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#5b5b5b;font-size:24px;font-family:\"Material Icons\"}.drill-info[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;list-style:none;padding:0;margin:0}.drill-info-item[_ngcontent-%COMP%]{color:#404040;font-size:14px;margin-right:25px}.drill-info-label[_ngcontent-%COMP%]{font-weight:400}.drill-info-value[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]{display:block}.filters[_ngcontent-%COMP%]{display:flex}.generic-report-top-block[_ngcontent-%COMP%]{height:70px;margin-bottom:20px;background-color:#fff;box-shadow:2px 2px 5px 1px #c1bebe}.grid-wrapper[_ngcontent-%COMP%]{height:calc(100% - 90px);box-shadow:2px 2px 5px 1px #c1bebe}.grid-block[_ngcontent-%COMP%]{height:calc(100% - 60px)}.grid-block[_ngcontent-%COMP%]   app-generic-report-budget[_ngcontent-%COMP%], .grid-block[_ngcontent-%COMP%]   app-generic-report-table[_ngcontent-%COMP%]{width:100%;height:100%}"]],data:{}});function Ft(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","generic-report-top-block"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"app-generic-summary",[],null,null,null,O,C)),l["\u0275did"](2,49152,null,0,x,[],{items:[0,"items"]},null),l["\u0275pid"](131072,v.b,[l.ChangeDetectorRef])],(function(e,t){var n=t.component;e(t,2,0,l["\u0275unv"](t,2,0,l["\u0275nov"](t,3).transform(n.totals$)))}),null)}function Mt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"app-c-checkbox",[],null,[[null,"cChange"]],(function(e,t,n){var l=!0;return"cChange"===t&&(l=!1!==e.component.switchBudgetView(n)&&l),l}),_.b,_.a)),l["\u0275prd"](5120,null,y.q,(function(e){return[e]}),[D.a]),l["\u0275did"](2,49152,null,0,D.a,[f.b],{label:[0,"label"],disabled:[1,"disabled"]},{cChange:"cChange"}),l["\u0275pid"](131072,v.b,[l.ChangeDetectorRef])],(function(e,t){var n=t.component;e(t,2,0,null==n.currentTab?null:n.currentTab.budgetEditorLabel,l["\u0275unv"](t,2,1,l["\u0275nov"](t,3).transform(n.loading$))||n.isBudgetViewActivated&&n.isBudgetLoading)}),null)}function Rt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"app-export-buttons",[["theme","default"]],[[2,"small",null]],[[null,"dataExport"]],(function(e,t,n){var l=!0;return"dataExport"===t&&(l=!1!==e.component.exportDataAs(n)&&l),l}),P.b,P.a)),l["\u0275did"](1,114688,null,0,S.a,[I.a],null,{dataExport:"dataExport"})],(function(e,t){e(t,1,0)}),(function(e,t){e(t,0,0,l["\u0275nov"](t,1).small)}))}function $t(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"app-generic-report-table",[["class","generic-report-table"]],null,[[null,"onTrackChanges"]],(function(e,t,n){var l=!0;return"onTrackChanges"===t&&(l=!1!==e.component.onTrackTableChanges()&&l),l}),K,X)),l["\u0275prd"](512,null,k.a,k.a,[T.a,L.a,A.a,E.j]),l["\u0275did"](2,4964352,[[2,4]],0,U,[b.a,k.a,J.a,Y.a,Z.a,f.b],{data:[0,"data"],pinnedBottomRowData:[1,"pinnedBottomRowData"],columns:[2,"columns"],customGridOptions:[3,"customGridOptions"],loading:[4,"loading"],pagination:[5,"pagination"]},{onTrackChanges:"onTrackChanges"}),l["\u0275pid"](131072,v.b,[l.ChangeDetectorRef]),l["\u0275pid"](131072,v.b,[l.ChangeDetectorRef]),l["\u0275pid"](131072,v.b,[l.ChangeDetectorRef])],(function(e,t){var n=t.component;e(t,2,0,n.data,l["\u0275unv"](t,2,1,l["\u0275nov"](t,3).transform(n.pinnedBottomRowData$)),l["\u0275unv"](t,2,2,l["\u0275nov"](t,4).transform(n.columns$)),n.options,l["\u0275unv"](t,2,4,l["\u0275nov"](t,5).transform(n.loading$)),n.allowPagination)}),null)}function jt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"app-generic-report-budget",[["class","generic-report-body"]],null,[[null,"loading"]],(function(e,t,n){var l=!0;return"loading"===t&&(l=!1!==e.component.setBudgetLoading(n)&&l),l}),ke,je)),l["\u0275did"](1,245760,null,0,ae,[Me,$e,L.a,E.j,f.b],null,{loading:"loading"})],(function(e,t){e(t,1,0)}),null)}function kt(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{drillDown:0}),l["\u0275qud"](671088640,2,{table:0}),(e()(),l["\u0275eld"](2,0,null,null,10,"app-content-header",[],null,null,null,Te.b,Te.a)),l["\u0275prd"](512,null,v.B,v.C,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](4,278528,null,0,v.l,[v.B],{ngClass:[0,"ngClass"]},null),l["\u0275pad"](5,1),l["\u0275did"](6,114688,null,0,Le.a,[],{caption:[0,"caption"]},null),(e()(),l["\u0275eld"](7,0,null,0,5,"div",[["class","filters"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,2,"app-generic-report-footer",[],null,[[null,"tabChange"]],(function(e,t,n){var l=!0;return"tabChange"===t&&(l=!1!==e.component.tabChanged(n)&&l),l}),Ke,Ze)),l["\u0275did"](9,638976,null,0,Ye,[],{tabs:[0,"tabs"]},{tabChange:"tabChange"}),l["\u0275pid"](131072,v.b,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](11,0,null,null,1,"app-generic-report-filters",[],null,[[null,"filtersChange"]],(function(e,t,n){var l=!0;return"filtersChange"===t&&(l=!1!==e.component.filtersChanged(n)&&l),l}),ut,lt)),l["\u0275did"](12,638976,null,0,nt,[E.j,l.ChangeDetectorRef],{filters:[0,"filters"],filtersSnapshot:[1,"filtersSnapshot"]},{filtersChange:"filtersChange"}),(e()(),l["\u0275eld"](13,0,null,null,20,"app-content-body",[],null,null,null,ct.b,ct.a)),l["\u0275prd"](512,null,v.B,v.C,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](15,278528,null,0,v.l,[v.B],{ngClass:[0,"ngClass"]},null),l["\u0275pad"](16,1),l["\u0275did"](17,114688,null,0,pt.a,[],null,null),(e()(),l["\u0275and"](16777216,null,0,1,null,Ft)),l["\u0275did"](19,16384,null,0,v.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](20,0,null,0,13,"div",[["class","grid-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,7,"div",[["class","top-controls-block"]],null,null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,0,"div",[["class","top-controls-block-left"]],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,5,"div",[["class","top-controls-block-right"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Mt)),l["\u0275did"](25,16384,null,0,v.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,2,null,Rt)),l["\u0275did"](27,16384,null,0,v.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275pid"](131072,v.b,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](29,0,null,null,4,"div",[["class","grid-block"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,$t)),l["\u0275did"](31,16384,null,0,v.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,jt)),l["\u0275did"](33,16384,null,0,v.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](34,0,null,null,1,"app-generic-report-drill-down",[],null,null,null,xt,vt)),l["\u0275did"](35,245760,[[1,4]],0,bt,[ft],null,null)],(function(e,t){var n=t.component,a=e(t,5,0,"content-header-size-2");e(t,4,0,a),e(t,6,0,n.currentReportName),e(t,9,0,l["\u0275unv"](t,9,0,l["\u0275nov"](t,10).transform(n.tabs$))),e(t,12,0,n.filters,n.filtersSnapshot);var i=e(t,16,0,"content-body-size-2");e(t,15,0,i),e(t,17,0),e(t,19,0,(null==n.currentTab?null:n.currentTab.summaryRow)&&(null==n.data?null:n.data.length)>0),e(t,25,0,null==n.currentTab?null:n.currentTab.budgetEditor),e(t,27,0,!l["\u0275unv"](t,27,0,l["\u0275nov"](t,28).transform(n.loading$))&&!n.isBudgetViewActivated),e(t,31,0,!n.isBudgetViewActivated),e(t,33,0,n.isBudgetViewActivated),e(t,35,0)}),null)}function Tt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"app-generic-report",[],null,null,null,kt,It)),l["\u0275did"](1,8634368,null,0,yt,[Dt.a,Me,Pt.a,St.a,A.a,E.j,f.b],null,null)],(function(e,t){e(t,1,0)}),null)}var Lt=l["\u0275ccf"]("app-generic-report",yt,Tt,{},{},[]),At=n("POq0"),Et=n("QQfA"),Nt=n("Mz6y"),Vt=n("cUpR"),zt=n("s6ns"),qt=n("821u"),Gt=n("IheW"),Bt=n("Mc5n");class Wt{constructor(e){this.api=e,this.baseUrl="genericrept"}getTabs(e){return this.api.get(`${this.baseUrl}/setup`,{params:{reptIndex:e}}).pipe(Object(ue.a)(e=>e.map(e=>"0"!==String(e.colSwitch)?Object.assign(e,{colSwitchLabel:"View"}):e)),Object(ue.a)(e=>e.map(e=>Oe.fromJson(e))))}getColumns(e,t={}){return this.api.get(`${this.baseUrl}/col`,{params:Object.assign({reptIndex:e},t)}).pipe(Object(ue.a)(e=>e.map(e=>B.fromJson(e))))}getData(e,t={}){return this.api.get(`${this.baseUrl}/data`,{params:Object.assign({reptIndex:e},t)}).pipe(Object(ue.a)(e=>({data:e.data.map(e=>ye.fromJson(e)),totals:e.totals})))}getDateList(e,t={}){return this.api.get(`${this.baseUrl}/datefilterexternal`,{params:Object.assign({reptIndex:e},t)}).pipe(Object(ue.a)(e=>e.map(e=>_e.fromJson(e))))}getFilterConfig(e,t,n){return"column-switch"===t&&(t="view"),this.api.get(`${this.baseUrl}/filter`,{params:{reptIndex:e,cboType:t,itemID:n}}).pipe(Object(ue.a)(e=>class{constructor(e={}){this.type=e.type||null,this.data=e.data?Object(De.a)({},e.data):null}static fromJson(e){const t={type:e.type,data:null};switch(t.type){case"combo-box":e.data instanceof Array&&(t.data=e.data.map(e=>Pe.fromJson(e,"data")));break;case"combo-box--where":e.data instanceof Array&&(t.data=e.data.map(e=>Pe.fromJson(e)));break;case"date-picker":console.warn("date-picker filter does not implemented");break;case"date-range-picker":t.data={template:e.data.template,index:e.data.index};break;case"number-range-picker":console.warn("number-range-picker filter does not implemented");break;default:console.warn("Incorrect filter type:",t.type)}return t}}.fromJson(e)))}getInstances(){return this.api.get("instances")}}var Ut=n("Qq/Z");class Jt{constructor(e={}){this.title=new.target.value(e.title),this.summaryCount=new.target.value(e.summaryCount),this.summaryCountLabel=new.target.value(e.summaryCountLabel)}static fromJson(e){return new Jt({title:e.title,summaryCount:!!+e.summaryCount,summaryCountLabel:e.summaryCountLabel})}static value(e,t=null){return null==e?t:e}}class Yt{constructor(e,t){this.api=e,this.baseUrl="genericrept",this.debug=t.factory(new.target.name)}getSetup(e){return this.api.get(`${this.baseUrl}/drillsetup50`,{params:this.mapParams(e)}).pipe(Object(ue.a)(e=>e[0]&&Jt.fromJson(e[0])))}getColumns(e){return this.api.get(`${this.baseUrl}/drillcol50`,{params:this.mapParams(e)}).pipe(Object(ue.a)(e=>e.map(e=>B.fromJson(e))))}getData(e,t={}){return this.api.get(`${this.baseUrl}/drilldata50`,{params:Object.assign({},this.mapParams(e),t)}).pipe(Object(ue.a)(e=>e.map(e=>ye.fromJson(e))))}mapParams(e){const t={reportId:"reptIndex",tabIndex:"itemId",drillType:"drillType",drillRowIndex:"DrillRowIndx",drillColumnIndex:"DrillColIndx",columnSwitch:"colSwitch"},n=Object.keys(t).reduce((n,l)=>null==e[l]?n:Object.assign(n,{[t[l]]:e[l]}),{});return(e.columnsData||[]).forEach(e=>{this.debug.assert(void 0===n[e.columnParamName]&&void 0===n[e.valueParamName],"Duplicate drill column params. Param: %O. MappedParams: %O",e,n),n[e.columnParamName]=e.columnName,n[e.valueParamName]=e.columnValue}),n}}class Zt{constructor(e={}){this.id=e.id||null,this.name=e.name||null,this.shortName=e.shortName||null,this.abbrev=e.abbrev||null,this.position=e.position||0}static fromJson(e){return new Zt({id:e.StoreID,name:e.StoreName,shortName:e.StoreName2,abbrev:e.StoreAbbrev,position:e.position})}get abbreviation(){let e="";return this.abbrev?e=this.abbrev:this.name&&(e=this.name.match(/\d*(?:\.\d+)?/g).join(""),e+=this.name.replace(""===name?"_":name,"_").replace("of","").match(/\b\w/g).join("").trim()),e}set abbreviation(e){this.abbrev=e}}class Xt{constructor(e){this.api=e,this.baseUrl="/stores"}getStores(e={}){return this.api.get(`${this.baseUrl}`,{params:e}).pipe(Object(ue.a)(e=>e.map(e=>Zt.fromJson(e))))}}var Kt=n("yK5/"),Ht=n("XpwZ"),Qt=n("zMNK"),en=n("o/Hh"),tn=n("FIJs"),nn=n("aBBA"),ln=n("gQiY"),an=n("xSwO"),rn=n("Fwaw"),on=n("l0Bn"),sn=n("kPC6"),dn=n("SXLW"),un=n("tdaM"),cn=n("0sx3"),pn=n("oapL"),gn=n("ZwOa"),hn=n("wN6G"),mn=n("iTUp"),bn=n("/Lwf"),fn=n("yotz"),vn=n("T3zS");n.d(t,"GenericReportsModuleNgFactory",(function(){return xn}));var xn=l["\u0275cmf"](a,[],(function(e){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[i.a,r.a,o.a,s.b,s.a,d.a,u.a,c.a,p.a,g.a,h.e,h.d,h.c,Lt]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](4608,v.p,v.o,[l.LOCALE_ID,[2,v.G]]),l["\u0275mpd"](4608,y.F,y.F,[]),l["\u0275mpd"](4608,At.c,At.c,[]),l["\u0275mpd"](4608,Et.c,Et.c,[Et.i,Et.e,l.ComponentFactoryResolver,Et.h,Et.f,l.Injector,l.NgZone,v.d,ze.b,[2,v.j]]),l["\u0275mpd"](5120,Et.j,Et.k,[Et.c]),l["\u0275mpd"](5120,We.a,We.b,[Et.c]),l["\u0275mpd"](5120,Nt.b,Nt.c,[Et.c]),l["\u0275mpd"](4608,Vt.e,Ee.c,[[2,Ee.g],[2,Ee.l]]),l["\u0275mpd"](5120,zt.c,zt.d,[Et.c]),l["\u0275mpd"](135680,zt.e,zt.e,[Et.c,l.Injector,[2,v.j],[2,zt.b],zt.c,[3,zt.e],Et.e]),l["\u0275mpd"](4608,qt.i,qt.i,[]),l["\u0275mpd"](5120,qt.a,qt.b,[Et.c]),l["\u0275mpd"](4608,Ee.a,Ee.v,[[2,Ee.f],qe.a]),l["\u0275mpd"](4608,Gt.k,Gt.q,[v.d,l.PLATFORM_ID,Gt.o]),l["\u0275mpd"](4608,Gt.r,Gt.r,[Gt.k,Gt.p]),l["\u0275mpd"](5120,Gt.a,(function(e){return[e]}),[Gt.r]),l["\u0275mpd"](4608,Gt.n,Gt.n,[]),l["\u0275mpd"](6144,Gt.l,null,[Gt.n]),l["\u0275mpd"](4608,Gt.j,Gt.j,[Gt.l]),l["\u0275mpd"](6144,Gt.b,null,[Gt.j]),l["\u0275mpd"](4608,Gt.f,Gt.m,[Gt.b,l.Injector]),l["\u0275mpd"](4608,Gt.c,Gt.c,[Gt.f]),l["\u0275mpd"](4608,J.a,J.a,[f.b]),l["\u0275mpd"](4608,Ee.b,Ee.b,[]),l["\u0275mpd"](4608,Qe.p,Qe.p,[]),l["\u0275mpd"](5120,Qe.b,Qe.c,[Et.c]),l["\u0275mpd"](4608,Qe.a,Qe.g,[[2,Qe.e],qe.a]),l["\u0275mpd"](4608,Bt.f,Bt.f,[v.d,l.NgZone,Ue.i,Bt.h]),l["\u0275mpd"](4608,Wt,Wt,[Ut.a]),l["\u0275mpd"](4608,Yt,Yt,[Ut.a,f.b]),l["\u0275mpd"](4608,$e,$e,[Ut.a,f.b]),l["\u0275mpd"](4608,Xt,Xt,[Ut.a]),l["\u0275mpd"](4608,Me,Me,[Wt,Xt,I.a,St.a,Kt.a,Ht.a,E.j,f.b]),l["\u0275mpd"](4608,ft,ft,[Yt,Me]),l["\u0275mpd"](1073742336,v.c,v.c,[]),l["\u0275mpd"](1073742336,y.E,y.E,[]),l["\u0275mpd"](1073742336,y.m,y.m,[]),l["\u0275mpd"](1073742336,Dt.s,Dt.s,[[2,Dt.x],[2,Dt.o]]),l["\u0275mpd"](1073742336,E.g,E.g,[]),l["\u0275mpd"](1073742336,At.d,At.d,[]),l["\u0275mpd"](1073742336,Ve.e,Ve.e,[]),l["\u0275mpd"](1073742336,ze.a,ze.a,[]),l["\u0275mpd"](1073742336,Qt.g,Qt.g,[]),l["\u0275mpd"](1073742336,qe.b,qe.b,[]),l["\u0275mpd"](1073742336,Ue.f,Ue.f,[]),l["\u0275mpd"](1073742336,Et.g,Et.g,[]),l["\u0275mpd"](1073742336,Ee.l,Ee.l,[[2,Ee.d],[2,Vt.f]]),l["\u0275mpd"](1073742336,Ee.u,Ee.u,[]),l["\u0275mpd"](1073742336,Ee.s,Ee.s,[]),l["\u0275mpd"](1073742336,Ee.q,Ee.q,[]),l["\u0275mpd"](1073742336,We.d,We.d,[]),l["\u0275mpd"](1073742336,en.a,en.a,[]),l["\u0275mpd"](1073742336,tn.a,tn.a,[nn.a]),l["\u0275mpd"](1073742336,ln.a,ln.a,[]),l["\u0275mpd"](1073742336,Je.a,Je.a,[]),l["\u0275mpd"](1073742336,Nt.e,Nt.e,[]),l["\u0275mpd"](1073742336,an.a,an.a,[]),l["\u0275mpd"](1073742336,rn.c,rn.c,[]),l["\u0275mpd"](1073742336,zt.k,zt.k,[]),l["\u0275mpd"](1073742336,qt.j,qt.j,[]),l["\u0275mpd"](1073742336,Ee.w,Ee.w,[]),l["\u0275mpd"](1073742336,Ee.n,Ee.n,[]),l["\u0275mpd"](1073742336,Gt.e,Gt.e,[]),l["\u0275mpd"](1073742336,Gt.d,Gt.d,[]),l["\u0275mpd"](1073742336,on.a,on.a,[]),l["\u0275mpd"](1073742336,sn.a,sn.a,[]),l["\u0275mpd"](1073742336,dn.AgGridModule,dn.AgGridModule,[]),l["\u0275mpd"](1073742336,un.a,un.a,[]),l["\u0275mpd"](1073742336,cn.a,cn.a,[]),l["\u0275mpd"](1073742336,pn.c,pn.c,[]),l["\u0275mpd"](1073742336,gn.c,gn.c,[]),l["\u0275mpd"](1073742336,Qe.q,Qe.q,[]),l["\u0275mpd"](1073742336,Qe.h,Qe.h,[]),l["\u0275mpd"](1073742336,Qe.t,Qe.t,[]),l["\u0275mpd"](1073742336,hn.a,hn.a,[]),l["\u0275mpd"](1073742336,mn.a,mn.a,[]),l["\u0275mpd"](1073742336,Bt.g,Bt.g,[]),l["\u0275mpd"](1073742336,bn.a,bn.a,[]),l["\u0275mpd"](1073742336,fn.b,fn.b,[]),l["\u0275mpd"](1073742336,vn.a,vn.a,[]),l["\u0275mpd"](1073742336,a,a,[nn.a]),l["\u0275mpd"](256,Ee.e,Ee.i,[]),l["\u0275mpd"](256,Gt.o,"XSRF-TOKEN",[]),l["\u0275mpd"](256,Gt.p,"X-XSRF-TOKEN",[]),l["\u0275mpd"](256,Qe.d,Qe.f,[]),l["\u0275mpd"](1024,Dt.m,(function(){return[[{path:":id",component:yt}]]}),[])])}))},"OTv+":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n("/kTj");class l{constructor(e,t){this.formatter=e,this.debug=t.factory(new.target.name)}transform(e,t,n){if(null===e)return 0;switch(Array.isArray(e)&&"from-array"!==t&&(e="%"===e[1]&&"from-array-abbr"!==t?e[0]/100:e[0]),"from-array-abbr"===t&&(t="abbr"),t){case"money":case"amt":return this.formatter.money(e);case"amt2":return this.formatter.money(e,{fractional:2,noZeroMantissa:!1,currencySign:"$"});case"per":return this.formatter.percentage(e);case"per1":return this.formatter.percentage(e,1,!1);case"per2":return this.formatter.percentage(e,2,!1);case"per-3f":return this.formatter.percentage(e,3);case"per-round":return this.formatter.percentage(e,0);case"number":case"cnt":return this.formatter.number(e,{fractional:0});case"cnt0":this.formatter.number(e,{fractional:0,thousandDelimiter:""});case"abbr":return this.formatter.abbrNum(e,n);case"abbr-money":return this.formatter.abbrMoney(e,n);case"from-array":return this.formatter.fromArray(e,n);default:return this.debug.warn("Unknown format: %s. Value: %s",t,e),this.formatter.number(e,{fractional:0})}}}},OrbI:function(e,t,n){"use strict";n("0sx3"),n("zeHk");var l=n("/ynw");n.d(t,"a",(function(){return l.a})),n("TUN4")},S5eV:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var l=n("UPXx"),a=n("8Y7J"),i=n("oveR"),r=n("hNGQ"),o=n("+dxm"),s=n("jIY6"),d=(n("zeHk"),n("+bil"),n("S+vS"),n("ChPW"),n("TSSN"),n("IqdZ"),n("eeq/"),n("TUN4"),n("K5C0"),n("mvzq"),n("/kTj"),n("+2T5"),a["\u0275crt"]({encapsulation:0,styles:[l.a],data:{}}));function u(e){return a["\u0275vid"](0,[a["\u0275qud"](402653184,1,{grid:0}),a["\u0275qud"](402653184,2,{gridElRef:0}),a["\u0275qud"](402653184,3,{agGrid:0}),(e()(),a["\u0275eld"](3,16777216,[[2,0]],null,4,"ag-grid-angular",[["appAgGridDragScroll",""]],[[8,"className",0]],[[null,"cellClicked"],[null,"filterChanged"],[null,"rowGroupOpened"]],(function(e,t,n){var l=!0,a=e.component;return"cellClicked"===t&&(l=!1!==a.onCellClicked(n)&&l),"filterChanged"===t&&(l=!1!==a.onFilterChanged(n)&&l),"rowGroupOpened"===t&&(l=!1!==a.onrowGroupOpened(n)&&l),l}),i.b,i.a)),a["\u0275prd"](512,null,r.AngularFrameworkOverrides,r.AngularFrameworkOverrides,[a.NgZone]),a["\u0275prd"](512,null,o.AngularFrameworkComponentWrapper,o.AngularFrameworkComponentWrapper,[]),a["\u0275did"](6,4898816,[[1,4],[3,4],["agGrid",4]],1,s.AgGridAngular,[a.ElementRef,a.ViewContainerRef,r.AngularFrameworkOverrides,o.AngularFrameworkComponentWrapper,a.ComponentFactoryResolver],{gridOptions:[0,"gridOptions"],rowData:[1,"rowData"],columnDefs:[2,"columnDefs"],pinnedBottomRowData:[3,"pinnedBottomRowData"],paginationPageSize:[4,"paginationPageSize"],groupIncludeFooter:[5,"groupIncludeFooter"],groupIncludeTotalFooter:[6,"groupIncludeTotalFooter"],pagination:[7,"pagination"]},{rowGroupOpened:"rowGroupOpened",cellClicked:"cellClicked",filterChanged:"filterChanged"}),a["\u0275qud"](603979776,4,{columns:1})],(function(e,t){var n=t.component;e(t,6,0,n.gridOptions,n.rowData,n.columnDefs,n.pinnedBottomRowData,n.pageSize,!0,!1,n.pagination)}),(function(e,t){e(t,3,0,a["\u0275inlineInterpolate"](1,"ag-theme-",t.component.theme,""))}))}},UPXx:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var l=["[_nghost-%COMP%]{display:block;position:relative}ag-grid-angular[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:0;bottom:0;height:100%}.ag-theme-material[_ngcontent-%COMP%]{line-height:1.5;font-family:Roboto,Helvetica,Arial,sans-serif;font-size:10pt;font-weight:500;color:#3c3c3c}.ag-theme-material[_ngcontent-%COMP%]     .ag-header-cell-align-left{text-align:left}.ag-theme-material[_ngcontent-%COMP%]     .ag-header-cell-align-left .ag-header-cell-label{justify-content:flex-start}.ag-theme-material[_ngcontent-%COMP%]     .ag-header-cell-align-right{text-align:right}.ag-theme-material[_ngcontent-%COMP%]     .ag-header-cell-align-right .ag-header-cell-label{justify-content:flex-end}.ag-theme-material[_ngcontent-%COMP%]     .ag-header-cell-align-center{text-align:center}.ag-theme-material[_ngcontent-%COMP%]     .ag-header-cell-align-center .ag-header-cell-label{justify-content:center}.ag-theme-material[_ngcontent-%COMP%]     .ag-body-cell-align-left{text-align:left}.ag-theme-material[_ngcontent-%COMP%]     .ag-body-cell-align-left span{justify-content:flex-start}.ag-theme-material[_ngcontent-%COMP%]     .ag-body-cell-align-right{text-align:right}.ag-theme-material[_ngcontent-%COMP%]     .ag-body-cell-align-right span{justify-content:flex-end}.ag-theme-material[_ngcontent-%COMP%]     .ag-body-cell-align-center{text-align:center}.ag-theme-material[_ngcontent-%COMP%]     .ag-body-cell-align-center span{justify-content:center}.ag-theme-material[_ngcontent-%COMP%]     .ag-cell{height:47px}.ag-theme-material[_ngcontent-%COMP%]     .ag-bl-overlay{background-color:rgba(0,0,0,.05)}.ag-theme-material[_ngcontent-%COMP%]     .progress{display:inline-block;width:24px;height:24px}.ag-theme-material[_ngcontent-%COMP%]     .progress--circle{box-sizing:border-box;width:24px;height:24px;border-radius:50%;border:3px solid #004e9a}.ag-theme-material[_ngcontent-%COMP%]     .progress--indeterminate{-webkit-animation:2.25s linear infinite rotate;animation:2.25s linear infinite rotate}.ag-theme-material[_ngcontent-%COMP%]     .progress--indeterminate__inner{-webkit-animation:5s infinite sporadic-rotate;animation:5s infinite sporadic-rotate;display:inline-block;width:24px;height:24px}.ag-theme-material[_ngcontent-%COMP%]     .progress--indeterminate__left-half{position:absolute;top:0;width:12px;height:24px;overflow:hidden;left:0}.ag-theme-material[_ngcontent-%COMP%]     .progress--indeterminate__right-half{position:absolute;top:0;width:12px;height:24px;overflow:hidden;right:0}.ag-theme-material[_ngcontent-%COMP%]     .progress--indeterminate__circle--left{-webkit-animation:1.25s infinite animate-left-circle,5s linear infinite left-circle-colors;animation:1.25s infinite animate-left-circle,5s linear infinite left-circle-colors}.ag-theme-material[_ngcontent-%COMP%]     .progress--indeterminate__circle--right{-webkit-animation:1.25s infinite animate-right-circle,5s linear infinite right-circle-colors;animation:1.25s infinite animate-right-circle,5s linear infinite right-circle-colors;position:relative;right:100%}@-webkit-keyframes rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.ag-theme-material[_ngcontent-%COMP%]     .has-drill-down{cursor:pointer}.ag-theme-material[_ngcontent-%COMP%]     .has-drill-down:hover{background-color:rgba(91,155,213,.2)}.ag-theme-material[_ngcontent-%COMP%]     .cell-bold{font-weight:700}.ag-theme-material[_ngcontent-%COMP%]     .edit-button{display:inline-block;width:20px;height:20px;position:absolute;right:0;top:50%;transform:translate(24px,-50%);cursor:pointer}.ag-theme-material[_ngcontent-%COMP%]     .edit-button:before{content:'\\e3c9';font-family:\"Material Icons\";font-size:20px;color:#747474;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"]},VHTt:function(e,t,n){"use strict";var l=function(e){return e[e.XLS=0]="XLS",e[e.PDF=1]="PDF",e}({}),a=n("2Vo4"),i=n("PqYM"),r=n("EY2u"),o=n("lJxs"),s=n("eIep"),d=n("vkgz"),u=n("GyhO"),c=n("nYR2");class p{get decrementer(){return()=>this.decrement()}get incrementor(){return()=>this.increment()}get resetter(){return()=>this.reset()}constructor(e=0){this._value$=new a.a(e),this.value$=this._value$.asObservable(),this.is$=this._value$.pipe(Object(o.a)(e=>Boolean(e)))}increment(){this._value$.next(this._value$.getValue()+1)}decrement(){const e=this._value$.getValue();this._value$.next(e>0?e-1:0)}reset(){this._value$.next(0)}streamJoiner(e=!1){return t=>{return(e?Object(i.a)(0).pipe((n=r.a,Object(s.a)(()=>n))):r.a).pipe(Object(d.a)(()=>{},void 0,this.incrementor),function(...e){return t=>t.lift.call(Object(u.a)(t,...e))}(t),Object(c.a)(this.decrementer));var n}}}var g=n("6LW8");n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return g.a}))},"fgD+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var l=n("8Y7J"),a=n("Xd0L"),i=n("wd/R");const r=n.n(i).a||i;function o(e,t){const n=Array(e);for(let l=0;l<e;l++)n[l]=t(l);return n}new l.InjectionToken("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function(){return{useUtc:!1}}});class s extends a.a{constructor(e,t){super(),this._options=t,this.setLocale(e||r.locale())}setLocale(e){super.setLocale(e);let t=r.localeData(e);this._localeData={firstDayOfWeek:t.firstDayOfWeek(),longMonths:t.months(),shortMonths:t.monthsShort(),dates:o(31,e=>this.createDate(2017,0,e+1).format("D")),longDaysOfWeek:t.weekdays(),shortDaysOfWeek:t.weekdaysShort(),narrowDaysOfWeek:t.weekdaysMin()}}getYear(e){return this.clone(e).year()}getMonth(e){return this.clone(e).month()}getDate(e){return this.clone(e).date()}getDayOfWeek(e){return this.clone(e).day()}getMonthNames(e){return"long"==e?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(e){return"long"==e?this._localeData.longDaysOfWeek:"short"==e?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(e){return this.clone(e).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(e){return this.clone(e).daysInMonth()}clone(e){return e.clone().locale(this.locale)}createDate(e,t,n){if(t<0||t>11)throw Error(`Invalid month index "${t}". Month index has to be between 0 and 11.`);if(n<1)throw Error(`Invalid date "${n}". Date has to be greater than 0.`);const l=this._createMoment({year:e,month:t,date:n}).locale(this.locale);if(!l.isValid())throw Error(`Invalid date "${n}" for month with index "${t}".`);return l}today(){return this._createMoment().locale(this.locale)}parse(e,t){return e&&"string"==typeof e?this._createMoment(e,t,this.locale):e?this._createMoment(e).locale(this.locale):null}format(e,t){if(e=this.clone(e),!this.isValid(e))throw Error("MomentDateAdapter: Cannot format invalid date.");return e.format(t)}addCalendarYears(e,t){return this.clone(e).add({years:t})}addCalendarMonths(e,t){return this.clone(e).add({months:t})}addCalendarDays(e,t){return this.clone(e).add({days:t})}toIso8601(e){return this.clone(e).format()}deserialize(e){let t;if(e instanceof Date)t=this._createMoment(e).locale(this.locale);else if(this.isDateInstance(e))return this.clone(e);if("string"==typeof e){if(!e)return null;t=this._createMoment(e,r.ISO_8601).locale(this.locale)}return t&&this.isValid(t)?this._createMoment(t).locale(this.locale):super.deserialize(e)}isDateInstance(e){return r.isMoment(e)}isValid(e){return this.clone(e).isValid()}invalid(){return r.invalid()}_createMoment(...e){return this._options&&this._options.useUtc?r.utc(...e):r(...e)}}},gQiY:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));class l{}},uNm5:function(e,t,n){"use strict";var l=n("8Y7J"),a=n("TSSN"),i=n("SVse");n("5uTj"),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return d}));var r=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:156px;background-color:#fff;box-shadow:1px 2px 5px 1px #c1bebe;padding:15px 20px;position:relative;z-index:1;margin:0 -20px}.content-header-size-1[_nghost-%COMP%]{height:234px;padding-bottom:49px}.content-header-size-1[_nghost-%COMP%]     .mat-tab-nav-bar{position:absolute;bottom:-1px;left:20px}.content-header-size-2[_nghost-%COMP%]{height:125px}.content-header-size-2[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{margin-bottom:12px}.content-header-size-3[_nghost-%COMP%]{height:110px}.content-header-size-3[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{margin-top:0}.content-header-custom[_nghost-%COMP%]{height:135px;margin-top:-20px}.content-header-custom[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{margin-bottom:12px}.back-link[_ngcontent-%COMP%]{font-size:14px;color:#3498db;font-weight:600;cursor:pointer}.heading[_ngcontent-%COMP%]{font-size:26px;font-weight:500;line-height:1.2;color:#404040;margin:8px 0 12px}.timestamp[_ngcontent-%COMP%]{font-size:12px;font-weight:400;display:block}"]],data:{}});function o(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","back-link"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onBackToClick()&&l),l}),null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.component.backToLink)}))}function s(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[["class","timestamp"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",": ",""])),l["\u0275pid"](131072,a.i,[a.j,l.ChangeDetectorRef])],null,(function(e,t){var n=t.component;e(t,1,0,l["\u0275unv"](t,1,0,l["\u0275nov"](t,2).transform("widgets.general.lastupdate")),n.lastRefreshed)}))}function d(e){return l["\u0275vid"](2,[(e()(),l["\u0275and"](16777216,null,null,1,null,o)),l["\u0275did"](1,16384,null,0,i.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](2,0,null,null,3,"h2",[["class","heading"]],null,null,null,null,null)),(e()(),l["\u0275ted"](3,null,[""," "])),(e()(),l["\u0275and"](16777216,null,null,1,null,s)),l["\u0275did"](5,16384,null,0,i.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275ncd"](null,0)],(function(e,t){var n=t.component;e(t,1,0,n.hasBackToLink),e(t,5,0,n.lastRefreshed)}),(function(e,t){e(t,3,0,t.component.caption)}))}},zXMq:function(e,t,n){"use strict";var l=n("8Y7J"),a=n("Mz6y"),i=n("QQfA"),r=n("hOhj"),o=n("/HVE"),s=n("5GAg"),d=n("IP0z"),u=n("cUpR"),c=n("TSSN"),p=n("SVse");n("2Vgt"),n("+2T5"),n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return b}));var g=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block}.small[_nghost-%COMP%]{font-size:22px;vertical-align:initial}a[role=button][_ngcontent-%COMP%]{display:inline-block;vertical-align:text-top;color:#51606b}button[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;position:relative;cursor:pointer;color:#5b5b5b;font-family:'Material Icons';font-size:24px;margin-right:20px}button[_ngcontent-%COMP%]:last-child{margin-right:0}button.export-pdf[_ngcontent-%COMP%]:before{content:'\\e415';font:inherit;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}button.export-excel[_ngcontent-%COMP%]:before{content:'\\e884';font:inherit;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"]],data:{}});function h(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"button",[["class","export-pdf"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.exportDataAsPdf()&&l),l}),null,null))],null,(function(e,t){e(t,0,0,t.component.disabled)}))}function m(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,16777216,null,null,2,"button",[["class","export-excel"]],[[8,"disabled",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var a=!0,i=e.component;return"longpress"===t&&(a=!1!==l["\u0275nov"](e,1).show()&&a),"keydown"===t&&(a=!1!==l["\u0275nov"](e,1)._handleKeydown(n)&&a),"touchend"===t&&(a=!1!==l["\u0275nov"](e,1)._handleTouchend()&&a),"click"===t&&(a=!1!==i.exportDataAsXls()&&a),a}),null,null)),l["\u0275did"](1,212992,null,0,a.d,[i.c,l.ElementRef,r.e,l.ViewContainerRef,l.NgZone,o.a,s.c,s.h,a.b,[2,d.b],[2,a.a],[2,u.f]],{message:[0,"message"]},null),l["\u0275pid"](131072,c.i,[c.j,l.ChangeDetectorRef]),(e()(),l["\u0275and"](0,null,null,0))],(function(e,t){e(t,1,0,l["\u0275unv"](t,1,0,l["\u0275nov"](t,2).transform("header-icons.download-excel")))}),(function(e,t){e(t,0,0,t.component.disabled)}))}function b(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,h)),l["\u0275did"](1,16384,null,0,p.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,m)),l["\u0275did"](3,16384,null,0,p.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,1,0,(null==n.currentUser?null:n.currentUser.isExportPdfAvailable)&&n.pdf),e(t,3,0,(null==n.currentUser?null:n.currentUser.isExportExcelAvailable)&&n.xls)}),null)}}}]);