(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+lok":function(e,t,n){"use strict";var l=n("8Y7J"),i=n("jqm9"),s=n("/kTj"),a=n("TSSN"),r=n("giT0"),o=n("xj9N"),u=n("SVse"),c=n("OTv+"),d=n("eeq/");n("emhj"),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return b}));var h=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;align-items:flex-end;height:100%}.fi-block-left[_ngcontent-%COMP%]{width:calc(100% - 23px);flex:0 0 calc(100% - 23px);padding-right:5px}.fi-block-right[_ngcontent-%COMP%]{width:23px;flex:0 0 23px;padding-left:5px}.fi-block-title[_ngcontent-%COMP%]{font-size:14px;color:#747474;text-align:right}.fi-block-sum[_ngcontent-%COMP%]{font-weight:500;font-size:18px;color:#404040;text-align:right}.fi-block-rank-block[_ngcontent-%COMP%]{padding-bottom:4px}"]],data:{}});function g(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,16777216,null,null,6,"div",[["class","growth"],["tooltipTheme","dark"]],null,[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],(function(e,t,n){var i=!0;return"focusin"===t&&(i=!1!==l["\u0275nov"](e,1).show()&&i),"mouseenter"===t&&(i=!1!==l["\u0275nov"](e,1).show()&&i),"focusout"===t&&(i=!1!==l["\u0275nov"](e,1).hide()&&i),"mouseleave"===t&&(i=!1!==l["\u0275nov"](e,1).hide()&&i),i}),null,null)),l["\u0275did"](1,147456,null,0,i.a,[l.ViewContainerRef,l.ComponentFactoryResolver,l.ChangeDetectorRef,s.b],{content:[0,"content"],tooltipTheme:[1,"tooltipTheme"]},null),l["\u0275ppd"](2,3),l["\u0275pod"](3,{value:0}),l["\u0275pid"](131072,a.i,[a.j,l.ChangeDetectorRef]),(e()(),l["\u0275eld"](5,0,null,null,1,"app-growth-indicator",[],[[2,"positive",null],[2,"warning",null],[2,"negative",null]],null,null,r.b,r.a)),l["\u0275did"](6,49152,null,0,o.a,[],{value:[0,"value"]},null),(e()(),l["\u0275and"](0,null,null,0))],(function(e,t){var n=t.component,i=l["\u0275unv"](t,1,0,l["\u0275nov"](t,4).transform("control-center.common.tooltip.previous-month",e(t,3,0,l["\u0275unv"](t,1,0,e(t,2,0,l["\u0275nov"](t.parent.parent,0),n.data.previous,"abbr-money",2)))));e(t,1,0,i,"dark"),e(t,6,0,n.data.rankGrowth)}),(function(e,t){e(t,5,0,l["\u0275nov"](t,6).positiveClass,l["\u0275nov"](t,6).warningClass,l["\u0275nov"](t,6).negativeClass)}))}function p(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","growth"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"app-growth-indicator",[],[[2,"positive",null],[2,"warning",null],[2,"negative",null]],null,null,r.b,r.a)),l["\u0275did"](2,49152,null,0,o.a,[],{value:[0,"value"]},null)],(function(e,t){e(t,2,0,t.component.data.rankGrowth)}),(function(e,t){e(t,1,0,l["\u0275nov"](t,2).positiveClass,l["\u0275nov"](t,2).warningClass,l["\u0275nov"](t,2).negativeClass)}))}function f(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,g)),l["\u0275did"](2,16384,null,0,u.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,p)),l["\u0275did"](4,16384,null,0,u.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],(function(e,t){var n=t.component;e(t,2,0,n.data.previous),e(t,4,0,!n.data.previous)}),null)}function b(e){return l["\u0275vid"](2,[l["\u0275pid"](0,c.a,[d.a,s.b]),(e()(),l["\u0275eld"](1,0,null,null,7,"div",[["class","fi-block-left"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"div",[["class","fi-block-title"]],null,null,null,null,null)),(e()(),l["\u0275ted"](3,null,["",":"])),(e()(),l["\u0275eld"](4,0,null,null,4,"div",[["class","fi-block-sum"]],null,null,null,null,null)),l["\u0275prd"](512,null,u.B,u.C,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](6,278528,null,0,u.l,[u.B],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["\u0275ted"](7,null,["",""])),l["\u0275ppd"](8,3),(e()(),l["\u0275eld"](9,0,null,null,3,"div",[["class","fi-block-right"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,2,"div",[["class","fi-block-rank-block"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,f)),l["\u0275did"](12,16384,null,0,u.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,6,0,"fi-block-sum",n.customValueClass),e(t,12,0,n.showGrowIndicator)}),(function(e,t){var n=t.component;e(t,3,0,n.label);var i=l["\u0275unv"](t,7,0,e(t,8,0,l["\u0275nov"](t,0),n.data.value,"abbr-money",2));e(t,7,0,i)}))}},"05KG":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));class l{}},"1rys":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));class l{}},BFEL:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var l=n("8Y7J"),i=n("LvDl");class s{constructor(){this.save=new l.EventEmitter,this.cancel=new l.EventEmitter,this.fields=[],this.loading=!0}ngOnInit(){}ngOnChanges(e){e.data&&this.data&&(this.fields=i.cloneDeep(this.data).filter(e=>"count"!==e.field))}onSave(){this.loading=!0,this.save.emit(this.fields)}onCancel(){this.cancel.emit(),this.loading=!0}toggle(){this.loading=!1}}},CSbZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));class l{constructor(e){e.addLoaderWithPrefixedTranslations("/widgets/edit-total-fields","")}}},"Cr+6":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));class l{}},DnKK:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var l=n("XNiG"),i=n("1G5W");function s(e){return"function"==typeof e}const a=(e,t="ngOnDestroy")=>n=>{const a=e[t];if(!1===s(a))throw new Error("".concat(e.constructor.name," is using untilDestroyed but doesn't implement ").concat(t));return e.__takeUntilDestroy||(e.__takeUntilDestroy=new l.a,e[t]=function(){s(a)&&a.apply(this,arguments),e.__takeUntilDestroy.next(!0),e.__takeUntilDestroy.complete()}),n.pipe(Object(i.a)(e.__takeUntilDestroy))}},"E+en":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var l=n("8Y7J"),i=n("SVse"),s=(n("s7LF"),n("ZdEx"),n("/kTj"),l["\u0275crt"]({encapsulation:0,styles:["[_nghost-%COMP%] {\n\n    }"],data:{}}));function a(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","c_checkbox-label"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.component.label)}))}function r(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","c_checkbox-label"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.component.label)}))}function o(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"label",[["class","c_checkbox"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,a)),l["\u0275did"](2,16384,null,0,i.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,2,"div",[["class","c_checkbox-toggle"]],[[2,"c_checkbox-toggle__disabled",null]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"input",[["type","checkbox"]],[[8,"disabled",0],[8,"checked",0]],[[null,"change"]],(function(e,t,n){var l=!0;return"change"===t&&(l=!1!==e.component.onChange()&&l),l}),null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"div",[["class","c_checkbox-toggle-view"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,r)),l["\u0275did"](7,16384,null,0,i.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.label&&"left"===n.labelPos),e(t,7,0,n.label&&"right"===n.labelPos)}),(function(e,t){var n=t.component;e(t,3,0,n.disabled),e(t,4,0,n.disabled,n.value)}))}},JLSR:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var l=function(e){return e.Amount="amount",e.Count="count",e}({})},Jrk4:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));class l{}},LL99:function(e,t,n){"use strict";var l=n("wd/R"),i=function(e){return e.List="list",e.Date="date",e.DateMonth="date-month",e.DateRange="date-range",e.Toggle="toggle",e}({});function s(e,t,n){return t&&e&&n?e.filter(e=>e&&t[e.name]&&-1!==n.indexOf(e.name)).map(e=>{let n;switch(e.type){case i.List:const s=e.items.find(n=>n.value===t[e.name]);n=s&&s.label||"";break;case i.DateRange:const[a,r]=t[e.name].split("|");n=l(a).format("MM/DD/YYYY")+" - "+l(r).format("MM/DD/YYYY");break;case i.DateMonth:n=l(t.date).format("MMMM YYYY")||"";break;case i.Toggle:n=e.checked?e.label2:e.label}return{label:e.label,value:n}}).filter(e=>!!e):[]}function a(e,t,n,l,s){return{name:e,label:t,min:l,max:s,type:n||i.Date}}function r(e,t,n,l,s,a){return{name:e,items:t,label:n,type:i.List,default:u(t,l),canAddItem:s,allowSearch:a}}function o(e,t,n,l,s,a){return{name:e,checked:t,value:n,value2:l,label:s,label2:a,type:i.Toggle}}function u(e,t){const n=null!=t?t:e&&e[0]&&e[0].value;return void 0!==n?n:null}var c=n("LvDl"),d=n("tFIl");let h=(()=>{class e extends d.a{constructor(e={}){super();const t=new.target.valuePublicFieldNames;this.fillAll(e,t)}clone(e={}){return super.clone(e)}get isFullyFilled(){return e.valuePublicFieldNames.every(e=>!c.isNil(this[e]))}}return e.valuePublicFieldNames=["group","store","date","dateIndex","dateRange","report","opsfilter"],e})();n.d(t,"a",(function(){return"0"})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return o})),n.d(t,"c",(function(){return h}))},LbCI:function(e,t,n){"use strict";n.r(t);var l=n("8Y7J");class i{constructor(e){e.addLoaderWithPrefixedTranslations("/error-pages","")}}var s=n("pMnS"),a=n("TSSN");class r{constructor(e,t){this.topNav=e,this.appLoader=t}ngOnInit(){setTimeout(()=>this.appLoader.hide()),this.topNav&&this.topNav.clearLinks()}}var o=n("nutA"),u=n("Gg3P"),c=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function d(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","page-404"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),l["\u0275ted"](2,null,["",""])),l["\u0275pid"](131072,a.i,[a.j,l.ChangeDetectorRef])],null,(function(e,t){e(t,2,0,l["\u0275unv"](t,2,0,l["\u0275nov"](t,3).transform("page-404")))}))}var h=l["\u0275ccf"]("ng-component",r,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,d,c)),l["\u0275did"](1,114688,null,0,r,[[2,o.a],u.a],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[]),g=n("SxV6"),p=n("vkgz"),f=n("lJxs"),b=n("/kTj"),m=n("aR35");class v{constructor(e,t,n){this.session=e,this.router=t,this.debug=n.factory(new.target.name)}get cabinetUrl(){return m.a.cabinetUrl}canActivate(e,t){return this.checkLogin(t.url)}checkLogin(e){const t=0===e.indexOf(this.cabinetUrl);return this.session.isLoggedIn$.pipe(Object(g.a)(),Object(p.a)(n=>n&&!t&&this.router.navigate([this.cabinetUrl+e])),Object(f.a)(e=>!e||t))}}var y=n("+2T5"),C=n("iInd"),_=n("aBBA");n.d(t,"ErrorPagesModuleNgFactory",(function(){return O}));var O=l["\u0275cmf"](i,[],(function(e){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[s.a,h]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](4608,v,v,[y.a,C.o,b.b]),l["\u0275mpd"](1073742336,C.s,C.s,[[2,C.x],[2,C.o]]),l["\u0275mpd"](1073742336,a.g,a.g,[]),l["\u0275mpd"](1073742336,i,i,[_.a]),l["\u0275mpd"](1024,C.m,(function(){return[[{path:"not-found",component:r,canActivate:[v]}]]}),[])])}))},MmlZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var l=n("8Y7J"),i=n("MO+k");class s{constructor(e,t){this.elementRef=e,this.formatter=t,this.chartClick=new l.EventEmitter,this.chartConfig={type:"bar",data:{labels:[],datasets:[{backgroundColor:[],borderColor:[],borderWidth:1,data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,tooltips:{titleFontSize:12,callbacks:{label:e=>{const t=this.config.tooltip&&this.config.tooltip.labels;return t&&(this.isMultiple?t[e.datasetIndex][e.index]:t[e.index])},title:e=>{const[t]=e,n=this.config.tooltip&&this.config.tooltip.titles;return n&&(this.isMultiple?n[t.datasetIndex][t.index]:n[t.index])}}},legend:{display:!1},scales:{xAxes:[{display:!0,stacked:!1,scaleLabel:{display:!1},gridLines:{display:!1},ticks:{fontSize:window.innerWidth<400?8:14}}],yAxes:[{display:!0,stacked:!1,scaleLabel:{display:!1},gridLines:{drawTicks:!1,drawBorder:!1},ticks:{padding:8,fontSize:window.innerWidth<400?8:12,callback:e=>e<1&&e>0||e<0&&e>-1?"":this.formatter.abbrNum(e)}}]}}}}ngOnInit(){this.el=this.elementRef.nativeElement,this.canvas=this.el.querySelector("canvas"),this.chart=new i.Chart(this.canvas,this.chartConfig)}ngOnChanges(e){if(this.config){const e=this.chartConfig.data;e.labels=this.config.labels,this.isMultiple?this.config.data.forEach((t,n)=>{e.datasets[n]||(e.datasets[n]={backgroundColor:[],borderColor:[],borderWidth:1,data:[]}),e.datasets[n].data=t,e.datasets[n].backgroundColor=this.getColors(this.config.colors[n]),e.datasets[n].borderColor=e.datasets[n].backgroundColor}):(e.datasets[0].data=this.config.data,e.datasets[0].backgroundColor=this.getColors(this.config.colors),e.datasets[0].borderColor=e.datasets[0].backgroundColor),1===this.config.data.length&&(this.chartConfig.options.scales.yAxes[0].ticks.beginAtZero=!0),this.config.tooltip&&(this.chartConfig.options.tooltips.titleFontSize=this.config.tooltip.titleFontSize||12),this.config.xAxes&&Object.assign(this.chartConfig.options.scales.xAxes[0],this.config.xAxes),this.config.yAxes&&Object.assign(this.chartConfig.options.scales.yAxes[0],this.config.yAxes)}setTimeout(()=>this.chart.update({duration:300}),10)}onChartClick(e){const t=this.chart.getElementsAtEvent(e)[0];t&&this.chartClick.emit({index:t._index,data:this.config.barData&&this.config.barData[t._index]})}getAsDataUrl(){return this.canvas?this.canvas.toDataURL():null}get isMultiple(){return this.config.data&&this.config.data[0]instanceof Array}getColors(e){const t={yellow:"#F0B213",orange:"#E9910B",red:"#D74901","green-light":"#8AA309",green:"#1E8700","blue-light":"#44B4D4",blue:"#00458F","strong-red":"#CC0000","deep-red":"#830000"};return e.map(e=>t[e]||"#8AA309")}}},NNFQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var l=n("MO+k");class i{constructor(e,t){this.elementRef=e,this.formatter=t,this.chartConfig={type:"line",data:{labels:[],datasets:[{cubicInterpolationMode:"monotone",backgroundColor:"rgba(12, 81, 156, 0.55)",borderWidth:3,borderColor:"#0C5192",fill:!0,lineTension:0,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"bevel",pointBorderColor:["#9cbcd3"],pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#9cbcd3",pointHoverBorderWidth:2,pointRadius:0,pointHitRadius:10,spanGaps:!0}]},options:{responsive:!0,maintainAspectRatio:!1,tooltips:{callbacks:{label:e=>this.config.tooltip&&this.config.tooltip.labels&&this.config.tooltip.labels[e.index],title:e=>{const[t]=e;return this.config.tooltip.titles[t.index]}}},legend:{display:!1},scales:{xAxes:[{scaleLabel:{display:!1},gridLines:{display:!1},ticks:{fontSize:window.innerWidth<400?8:14}}],yAxes:[{stacked:!0,scaleLabel:{display:!1},gridLines:{drawTicks:!1,drawBorder:!1},ticks:{padding:8,callback:e=>e<1&&e>0||e<0&&e>-1?"":this.formatter.abbrNum(e)}}]}}}}ngOnInit(){this.el=this.elementRef.nativeElement,this.canvas=this.el.querySelector("canvas"),this.chart=new l.Chart(this.canvas,this.chartConfig)}ngOnChanges(e){if(this.config){const e=this.chartConfig.data;e.labels=this.config.labels,e.datasets[0].data=this.config.data;const t=Math.max(...this.config.data);this.chartConfig.options.scales.yAxes[0].ticks.stepSize=t<11&&t>0?1:0}setTimeout(()=>this.chart.update({duration:300}),10)}}},POq0:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return d}));var l=n("KCVW"),i=n("8Y7J"),s=n("HDdC"),a=n("XNiG"),r=n("Kj3r");let o=(()=>{class e{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return e.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new e},token:e,providedIn:"root"}),e})(),u=(()=>{class e{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,t)=>this._cleanupObserver(t))}observe(e){const t=Object(l.d)(e);return new s.a(e=>{const n=this._observeElement(t).subscribe(e);return()=>{n.unsubscribe(),this._unobserveElement(t)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const t=new a.a,n=this._mutationObserverFactory.create(e=>t.next(e));n&&n.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:n,stream:t,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:t,stream:n}=this._observedElements.get(e);t&&t.disconnect(),n.complete(),this._observedElements.delete(e)}}}return e.ngInjectableDef=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new e(Object(i["\u0275\u0275inject"])(o))},token:e,providedIn:"root"}),e})();class c{constructor(e,t,n){this._contentObserver=e,this._elementRef=t,this._ngZone=n,this.event=new i.EventEmitter,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Object(l.b)(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Object(l.e)(e),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Object(r.a)(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription&&this._currentSubscription.unsubscribe()}}class d{}},RHbX:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));var l=n("8Y7J"),i=n("SVse"),s=(n("Xrj0"),l["\u0275crt"]({encapsulation:0,styles:[".loader--overlay[_nghost-%COMP%], .loader--overlay-transparent[_nghost-%COMP%]\n      {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          left: 0;\n          top: 0;\n          z-index: 15;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n      }\n\n      .loader--overlay[_nghost-%COMP%] {\n          background-color: rgba(255, 255, 255, 0.8);\n      }"],data:{}}));function a(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","c__loader"]],null,null,null,null,null)),l["\u0275prd"](512,null,i.B,i.C,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](2,278528,null,0,i.l,[i.B],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["\u0275eld"](3,0,null,null,0,"div",[["class","c__loader-item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"div",[["class","c__loader-item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"div",[["class","c__loader-item"]],null,null,null,null,null))],(function(e,t){e(t,2,0,"c__loader",t.component.cssClassByType)}),null)}},"W+wd":function(e,t,n){"use strict";var l=n("tFIl");let i=(()=>{class e extends l.a{constructor(e={}){super();const t=new.target.valuePublicFieldNames;this.fillAll(e,t)}clone(e={}){return super.clone(e)}}return e.valuePublicFieldNames=["category","kpiType","group","groupSlno","kpiIndex","date","dateIndex","period","view"],e})();var s=function(e){return e[e.Public=1]="Public",e[e.My=3]="My",e}({}),a=function(e){return e.Docs="0",e.Schedules="1",e.Operarions="2",e}({}),r=function(e){return e.Summary="Summary",e.Details="Details",e.ByStore="By Store",e}({}),o=function(e){return e.Summary="1",e.Accounting="2",e.FiOnly="3",e.FiOnlyNotDelivered="4",e.FiOnlyAccVariance="5",e}({});n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return o}))},X9r4:function(e,t,n){"use strict";var l=n("8Y7J"),i=n("SVse");n("nAQW"),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r}));var s=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;width:100%}.panel__header[_ngcontent-%COMP%]{background-color:#789cb4;border-top-left-radius:5px;border-top-right-radius:5px;height:30px;line-height:30px;padding:0 10px;font-size:16px;font-weight:700;color:#fff}.panel__header--clickable[_ngcontent-%COMP%]{cursor:pointer}.panel__body[_ngcontent-%COMP%]{background-color:#f5f5f5;border-bottom-left-radius:5px;border-bottom-right-radius:5px;height:calc(100% - 30px);padding:10px;overflow:hidden}.panel--white[_nghost-%COMP%]   .panel__body[_ngcontent-%COMP%]{background-color:#fff}.panel--hoverable[_nghost-%COMP%]   .panel__body[_ngcontent-%COMP%]{background-color:#fff;transition:background-color .3s linear}.panel--hoverable[_nghost-%COMP%]   .panel__body[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.panel--disabled[_nghost-%COMP%]   .panel__body[_ngcontent-%COMP%]{position:relative}.panel--disabled[_nghost-%COMP%]   .panel__body[_ngcontent-%COMP%]:after{content:'';position:absolute;left:0;right:0;top:0;bottom:0;opacity:.5;background-color:#f5f5f5}.panel--hoverable.panel--disabled[_nghost-%COMP%]   .panel__body[_ngcontent-%COMP%]:after{background-color:#fff}"]],data:{}});function a(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","title"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,(function(e,t){e(t,1,0,t.component.label)}))}function r(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","panel__header"]],[[2,"panel__header--clickable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onHeaderClick(n)&&l),l}),null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,a)),l["\u0275did"](2,16384,null,0,i.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275ncd"](null,0),(e()(),l["\u0275eld"](4,0,null,null,1,"div",[["class","panel__body"]],null,null,null,null,null)),l["\u0275ncd"](null,1)],(function(e,t){e(t,2,0,t.component.label)}),(function(e,t){e(t,0,0,t.component.isHeaderClickable)}))}},Xrj0:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));class l{constructor(){this.type="default"}get cssClassByType(){return"loader--".concat(this.type)}}},ZdEx:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var l=n("8Y7J");n("/kTj");class i{constructor(e){this.labelPos="right",this.disabled=!1,this.cChange=new l.EventEmitter,this.propagateChange=e=>{},this.propagateTouch=()=>{},this.debug=e.factory(new.target.name)}get value(){return this.debug.log("Getter value:",this._value),this._value}set value(e){this.debug.log("Setter value:",e),this._value=e,this.propagateChange(this._value)}onChange(){this.value=!this.value,this.cChange.emit(this.value),this.debug.log("OnChange. _value: %s",this._value)}writeValue(e){void 0!==e&&(this.value=e)}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.propagateTouch=e}setDisabledState(e){this.disabled=e}}},bPSY:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));class l{constructor(e){this.filterData=e,this.subs=[]}set sub(e){this.subs.push(e)}ngOnInit(){this.setupStreams()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}onFilterChange(e){this.filterData.updateFilter(e)}setupStreams(){this.sub=this.filterData.filtersDef$.subscribe(e=>this.filters=e),this.sub=this.filterData.value$.subscribe(e=>this.snapshot=e)}}},emhj:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var l=n("/kTj");class i{constructor(e){this.customValueClass="valueClass",this.showGrowIndicator=!0,this.debug=e.factory(new.target.name,l.a.All)}get valueClass(){const e=this.data&&this.data.rankGrowth;return{positive:e>0,warning:0===e,negative:e<0}}ngOnInit(){}}},f9bo:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var l=n("8Y7J"),i=(n("s7LF"),n("wd/R")),s=n("/kTj");const a=()=>{};Object(l.forwardRef)(()=>r);class r{constructor(e,t,n){this.cabinetComponent=e,this.translate=t,this.monthChange=new l.EventEmitter,this.disabled=!1,this.years=[],this.selectedYear=0,this.opened=!1,this.monthShortNames=[],this.monthLongNames=[],this.onTouchedCallback=a,this.onChangeCallback=a,this.subs=[],this.debug=n.factory(new.target.name,s.a.All)}get valueMonthLong(){return this.monthLongNames[new Date(this.value).getMonth()]}get valueMonthShort(){return this.monthShortNames[new Date(this.value).getMonth()]}get valueUrl(){return this.makeUrl(new Date(this.value))}get value(){return this.innerValue}set value(e){e!==this.innerValue&&(this.innerValue=e,this.onChangeCallback(e))}set sub(e){this.subs.push(e)}ngOnInit(){this.setupYearsList(),this.setupMonthTranslations()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}onBlur(){this.onTouchedCallback()}writeValue(e){+e===this.innerValue||isNaN(+e)||(this.innerValue=+e)}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}windowClick(e){this.opened&&!e.target.closest(".monthpicker-wrapper")&&(this.opened=!1,this.onBlur())}prevYear(){this.selectedYear--}nextYear(){this.selectedYear++}toggleMonthpicker(){this.opened=!this.disabled&&!this.opened}setMonth(e){this.opened=!1,this.value=new Date(e.date_from).getTime(),this.monthChange.emit(e)}setupYearsList(){this.cabinetComponent.complexDataPromise.then(e=>{const t=[],n=[];e.month.forEach(e=>{const n=new Date(e.date_from),l=n.getFullYear();void 0===t[l]&&(t[l]={title:l.toString(),months:[]});const i=Object.assign({},e,{url:this.makeUrl(n),monthIndex:n.getMonth()});t[l].months.unshift(i)});for(const l of Object.keys(t))t[l].months.length&&n.push(t[l]);return this.years=n,this.selectedYear=n.length-1,n})}setupMonthTranslations(){const e=["month.full.january","month.full.february","month.full.march","month.full.april","month.full.may","month.full.june","month.full.july","month.full.august","month.full.september","month.full.october","month.full.november","month.full.december"],t=["month.short.january","month.short.february","month.short.march","month.short.april","month.short.may","month.short.june","month.short.july","month.short.august","month.short.september","month.short.october","month.short.november","month.short.december"];this.sub=this.translate.stream(e).subscribe(t=>{this.monthLongNames=e.map(e=>t[e])}),this.sub=this.translate.stream(t).subscribe(e=>{this.monthShortNames=t.map(t=>e[t])})}makeUrl(e){return i(e).format("MM_YYYY")}}},ish5:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));class l{}},iv73:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return g}));var l=n("8Y7J"),i=n("RHbX"),s=n("Xrj0"),a=n("SVse"),r=(n("s7LF"),n("f9bo"),n("dyEe"),n("TSSN"),n("/kTj"),l["\u0275crt"]({encapsulation:0,styles:["[_nghost-%COMP%] {\n\n    }"],data:{}}));function o(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","monthpicker-loader"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"app-loader",[],[[8,"className",0]],null,null,i.b,i.a)),l["\u0275did"](2,49152,null,0,s.a,[],null,null)],null,(function(e,t){e(t,1,0,l["\u0275nov"](t,2).cssClassByType)}))}function u(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","monthpicker-month-item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"a",[],[[2,"active",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.setMonth(e.context.$implicit)&&l),l}),null,null)),(e()(),l["\u0275ted"](2,null,["",""])),l["\u0275ppd"](3,1)],null,(function(e,t){var n=t.component;e(t,1,0,n.valueUrl===t.context.$implicit.url);var i=l["\u0275unv"](t,2,0,e(t,3,0,l["\u0275nov"](t.parent.parent.parent.parent,1),n.monthShortNames[t.context.$implicit.monthIndex]));e(t,2,0,i)}))}function c(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[["class","monthpicker-year"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,6,"div",[["class","monthpicker-year-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"button",[["class","prev-year"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.prevYear()&&l),l}),null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","icon-arrow-s-left"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"span",[["class","year-title"]],null,null,null,null,null)),(e()(),l["\u0275ted"](5,null,["",""])),(e()(),l["\u0275eld"](6,0,null,null,1,"button",[["class","next-year"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.nextYear()&&l),l}),null,null)),(e()(),l["\u0275eld"](7,0,null,null,0,"span",[["class","icon-arrow-s-right"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,2,"div",[["class","monthpicker-year-months"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,u)),l["\u0275did"](10,278528,null,0,a.m,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,10,0,t.context.$implicit.months)}),(function(e,t){var n=t.component;e(t,0,0,t.context.index!=n.selectedYear),e(t,2,0,0===n.selectedYear),e(t,5,0,t.context.$implicit.title),e(t,6,0,n.selectedYear==n.years.length-1)}))}function d(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","c_dropdown-std_menu monthpicker"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,o)),l["\u0275did"](2,16384,null,0,a.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,c)),l["\u0275did"](4,278528,null,0,a.m,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component;e(t,2,0,!n.years.length),e(t,4,0,n.years)}),null)}function h(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,11,"div",[["class","c_dropdown-std monthpicker-wrapper less-border"]],[[2,"disabled",null]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,8,"div",[["class","c_dropdown-std_value"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.toggleMonthpicker()&&l),l}),null,null)),(e()(),l["\u0275eld"](2,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"strong",[["class","hide-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275ted"](4,null,["",""])),(e()(),l["\u0275eld"](5,0,null,null,1,"strong",[["class","show-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275ted"](6,null,["",""])),(e()(),l["\u0275ted"](7,null,[" "," "])),l["\u0275ppd"](8,2),(e()(),l["\u0275eld"](9,0,null,null,0,"span",[["class","icon-arrow-s-down"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,d)),l["\u0275did"](11,16384,null,0,a.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,11,0,t.component.opened)}),(function(e,t){var n=t.component;e(t,0,0,n.disabled),e(t,4,0,n.valueMonthLong),e(t,6,0,n.valueMonthShort);var i=l["\u0275unv"](t,7,0,e(t,8,0,l["\u0275nov"](t.parent,0),n.value,"y"));e(t,7,0,i)}))}function g(e){return l["\u0275vid"](0,[l["\u0275pid"](0,a.e,[l.LOCALE_ID]),l["\u0275pid"](0,a.x,[]),(e()(),l["\u0275and"](16777216,null,null,1,null,h)),l["\u0275did"](3,16384,null,0,a.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,3,0,t.component.value)}),null)}},mS0u:function(e,t,n){"use strict";var l=n("8Y7J");n("MmlZ"),n("eeq/"),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var i=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:100%}.chart[_ngcontent-%COMP%]{height:100%;min-width:100%;position:relative}canvas[_ngcontent-%COMP%]{max-width:100%;width:100%;height:100%}"]],data:{}});function s(e){return l["\u0275vid"](2,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","chart"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"canvas",[],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onChartClick(n)&&l),l}),null,null))],null,null)}},nAQW:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var l=n("8Y7J");class i{constructor(){this.hoverable=!1,this.headerClick=new l.EventEmitter,this.disabled=!1}get isHeaderClickable(){return!!this.headerClick.observers.length}ngOnInit(){}onHeaderClick(e){this.headerClick.emit(e)}}},nutA:function(e,t,n){"use strict";var l=n("iInd"),i=n("2Vo4"),s=n("fFD9"),a=n("pLZG"),r=n("q92s"),o=n("eIep"),u=n("SxV6"),c=n("lJxs"),d=(n("/kTj"),n("aR35"));class h{constructor(e,t){this.urlTree=e,this.info=t}get isExact(){return!(!this.info||void 0===this.info.exact)&&this.info.exact}}n.d(t,"a",(function(){return g}));class g{constructor(e,t){this.router=e,this._links$=new i.a([]),this._relativeTo$=new i.a(void 0),this.debug=t.factory(new.target.name),this.setupStreams(),this.debug.streams(this,["selected$","linksWithTree$","_links$","_relativeTo$"])}get cabinetUrl(){return d.a.cabinetUrl}setLinks(e,t){this._links$.next(e),this._relativeTo$.next(t)}clearLinks(){this.setLinks([])}setupStreams(){this.linksWithTree$=this._links$.pipe(Object(s.a)(this._relativeTo$,this.buildUrlLinksWithTree.bind(this)));const e=this.router.events.pipe(Object(a.a)(e=>e instanceof l.e));this.selected$=this.linksWithTree$.pipe(Object(r.a)(e.pipe(Object(o.a)(()=>this.linksWithTree$.pipe(Object(u.a)())))),Object(c.a)(e=>{const t=e.find(e=>this.router.isActive(e.urlTree,e.isExact));return t&&t.info}))}buildUrlLinksWithTree(e,t){return e.map(e=>{const n=this.router.createUrlTree([t?e.url:this.cabinetUrl+e.url],{relativeTo:t});return new h(n,e)})}}},"o/Hh":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));class l{}},o2MB:function(e,t,n){"use strict";var l=n("8Y7J"),i=n("mIlg"),s=n("W0XV"),a=n("+2T5");n("bPSY"),n("nNBh"),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=l["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function o(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"app-filters-group",[],null,[[null,"filterChange"]],(function(e,t,n){var l=!0;return"filterChange"===t&&(l=!1!==e.component.onFilterChange(n)&&l),l}),i.b,i.a)),l["\u0275did"](1,638976,null,0,s.a,[a.a],{filters:[0,"filters"],snapshot:[1,"snapshot"]},{filterChange:"filterChange"})],(function(e,t){var n=t.component;e(t,1,0,n.filters,n.snapshot)}),null)}},oiVm:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));class l{}},qfHn:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var l=function(e){return e.Store="storeId",e.StoreGroup="groupId",e}({})},qp19:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));class l{}},qwjS:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));class l{}},rCmf:function(e,t,n){"use strict";var l=n("8Y7J");n("NNFQ"),n("eeq/"),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var i=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;padding:10px;height:100%;width:100%;overflow:auto;overflow-y:hidden}.chart[_ngcontent-%COMP%]{height:100%;min-width:100%}canvas[_ngcontent-%COMP%]{width:100%;height:100%}"]],data:{}});function s(e){return l["\u0275vid"](2,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","chart"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"canvas",[],null,null,null,null,null))],null,null)}},sVT6:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var l=n("8Y7J"),i=n("/kTj");class s{constructor(e){this.daysClick=new l.EventEmitter,this.debug=e.factory(new.target.name,i.a.All)}get hasDaysLink(){return!!this.daysClick.observers.length}ngOnInit(){}onDaysClick(){this.daysClick.emit({daysFrom:this.data.daysFrom,daysTo:this.data.daysTo})}getGraphWidth(e,t){let n=0;return this.data[t]&&(n=this.data[e]/this.data[t]*100),n<0&&(n=0),n>100&&(n=100),n+"%"}}},ubcW:function(e,t,n){"use strict";var l=n("8Y7J"),i=n("oJZn"),s=n("pBi1"),a=n("5GAg"),r=n("omvX"),o=n("IP0z"),u=n("s7LF"),c=n("TSSN"),d=n("SVse"),h=n("bujt"),g=n("Fwaw"),p=n("BFEL");n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return v}));var f=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.edit-total-fields-label[_ngcontent-%COMP%]{font-size:12px;color:#747474}.edit-total-fields-report-name[_ngcontent-%COMP%]{font-size:14px;color:#404040;margin:0 0 10px}.edit-total-fields-table[_ngcontent-%COMP%]{min-width:230px}.edit-total-fields-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .edit-total-fields-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px;padding:10px 0}.edit-total-fields-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:500;color:#747474}.edit-total-fields-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){text-align:left}.edit-total-fields-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){text-align:right}.edit-total-fields-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:400;color:#404040}.edit-total-fields-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){text-align:left}.edit-total-fields-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){text-align:right}.edit-total-fields-submit-wrapper[_ngcontent-%COMP%]{text-align:right;transform:translate(15px,10px)}.mat-button[_ngcontent-%COMP%]     .mat-button-wrapper{font-weight:400;text-transform:uppercase}"]],data:{}});function b(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,9,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),l["\u0275ted"](3,null,[" "," "])),(e()(),l["\u0275eld"](4,0,null,null,6,"td",[],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,5,"mat-slide-toggle",[["class","mat-slide-toggle"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checked",null],[2,"mat-disabled",null],[2,"mat-slide-toggle-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"focus"]],(function(e,t,n){var i=!0,s=e.component;return"focus"===t&&(i=!1!==l["\u0275nov"](e,6)._inputElement.nativeElement.focus()&&i),"ngModelChange"===t&&(i=!1!==(e.context.$implicit.visible=n)&&i),"change"===t&&(i=!1!==s.toggle()&&i),i}),i.b,i.a)),l["\u0275did"](6,1228800,null,0,s.b,[l.ElementRef,a.h,l.ChangeDetectorRef,[8,null],l.NgZone,s.a,[2,r.a],[2,o.b]],{checked:[0,"checked"]},{change:"change"}),l["\u0275prd"](1024,null,u.q,(function(e){return[e]}),[s.b]),l["\u0275did"](8,671744,null,0,u.v,[[8,null],[8,null],[8,null],[6,u.q]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,u.r,null,[u.v]),l["\u0275did"](10,16384,null,0,u.s,[[4,u.r]],null,null)],(function(e,t){e(t,6,0,t.context.$implicit.visible),e(t,8,0,t.context.$implicit.visible)}),(function(e,t){e(t,3,0,t.context.$implicit.label),e(t,5,1,[l["\u0275nov"](t,6).id,l["\u0275nov"](t,6).disabled?null:-1,l["\u0275nov"](t,6).checked,l["\u0275nov"](t,6).disabled,"before"==l["\u0275nov"](t,6).labelPosition,"NoopAnimations"===l["\u0275nov"](t,6)._animationMode,l["\u0275nov"](t,10).ngClassUntouched,l["\u0275nov"](t,10).ngClassTouched,l["\u0275nov"](t,10).ngClassPristine,l["\u0275nov"](t,10).ngClassDirty,l["\u0275nov"](t,10).ngClassValid,l["\u0275nov"](t,10).ngClassInvalid,l["\u0275nov"](t,10).ngClassPending])}))}function m(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,24,"div",[["class","edit-total-fields"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"span",[["class","edit-total-fields-label"]],null,null,null,null,null)),(e()(),l["\u0275ted"](2,null,["",""])),l["\u0275pid"](131072,c.i,[c.j,l.ChangeDetectorRef]),(e()(),l["\u0275eld"](4,0,null,null,1,"h4",[["class","edit-total-fields-report-name"]],null,null,null,null,null)),(e()(),l["\u0275ted"](5,null,["",""])),(e()(),l["\u0275eld"](6,0,null,null,9,"table",[["class","edit-total-fields-table"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,2,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](9,null,[" "," "])),l["\u0275pid"](131072,c.i,[c.j,l.ChangeDetectorRef]),(e()(),l["\u0275eld"](11,0,null,null,2,"th",[],null,null,null,null,null)),(e()(),l["\u0275ted"](12,null,[" "," "])),l["\u0275pid"](131072,c.i,[c.j,l.ChangeDetectorRef]),(e()(),l["\u0275and"](16777216,null,null,1,null,b)),l["\u0275did"](15,278528,null,0,d.m,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](16,0,null,null,8,"div",[["class","edit-total-fields-submit-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,3,"button",[["color","primary"],["mat-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onSave()&&l),l}),h.b,h.a)),l["\u0275did"](18,180224,null,0,g.b,[l.ElementRef,a.h,[2,r.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(e()(),l["\u0275ted"](19,0,[" "," "])),l["\u0275pid"](131072,c.i,[c.j,l.ChangeDetectorRef]),(e()(),l["\u0275eld"](21,0,null,null,3,"button",[["color","primary"],["mat-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onCancel()&&l),l}),h.b,h.a)),l["\u0275did"](22,180224,null,0,g.b,[l.ElementRef,a.h,[2,r.a]],{color:[0,"color"]},null),(e()(),l["\u0275ted"](23,0,[" "," "])),l["\u0275pid"](131072,c.i,[c.j,l.ChangeDetectorRef])],(function(e,t){var n=t.component;e(t,15,0,n.fields),e(t,18,0,!n.fields.length||n.loading,"primary"),e(t,22,0,"primary")}),(function(e,t){var n=t.component;e(t,2,0,l["\u0275unv"](t,2,0,l["\u0275nov"](t,3).transform("total-fields.report"))),e(t,5,0,n.report),e(t,9,0,l["\u0275unv"](t,9,0,l["\u0275nov"](t,10).transform("edit-total-fields.field-column"))),e(t,12,0,l["\u0275unv"](t,12,0,l["\u0275nov"](t,13).transform("edit-total-fields.total-field"))),e(t,17,0,l["\u0275nov"](t,18).disabled||null,"NoopAnimations"===l["\u0275nov"](t,18)._animationMode),e(t,19,0,l["\u0275unv"](t,19,0,l["\u0275nov"](t,20).transform("edit-total-fields.save-button"))),e(t,21,0,l["\u0275nov"](t,22).disabled||null,"NoopAnimations"===l["\u0275nov"](t,22)._animationMode),e(t,23,0,l["\u0275unv"](t,23,0,l["\u0275nov"](t,24).transform("edit-total-fields.cancel-button")))}))}var v=l["\u0275ccf"]("app-edit-total-fields",p.a,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"app-edit-total-fields",[],null,null,null,m,f)),l["\u0275did"](1,638976,null,0,p.a,[],null,null)],(function(e,t){e(t,1,0)}),null)}),{report:"report",data:"data"},{save:"save",cancel:"cancel"},[])},wKOt:function(e,t,n){"use strict";var l=n("8Y7J"),i=n("OTv+"),s=n("eeq/"),a=n("/kTj"),r=n("TSSN"),o=n("SVse");n("sVT6"),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var u=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.aging-row[_ngcontent-%COMP%]{display:flex;min-height:50px}.aging-col[_ngcontent-%COMP%]{display:flex;align-items:flex-start;border-bottom:1px solid #ddd}.aging-col[_ngcontent-%COMP%]:nth-of-type(1){width:20%;flex:0 0 20%;padding:15px 5px 15px 0}  .compact .aging-col:nth-of-type(1){width:25%;flex:0 0 25%}.aging-col[_ngcontent-%COMP%]:nth-of-type(2){width:40%;flex:0 0 40%;padding:15px 5px}  .compact .aging-col:nth-of-type(2){width:37%;flex:0 0 37%}.aging-col[_ngcontent-%COMP%]:nth-of-type(3){width:40%;flex:0 0 40%;padding:15px 0 15px 5px}  .compact .aging-col:nth-of-type(3){width:38%;flex:0 0 38%}.aging-col[_ngcontent-%COMP%]:last-of-type{border-right:none}.aging-days[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.aging-days[_ngcontent-%COMP%]   .clickable[_ngcontent-%COMP%]{cursor:pointer;color:#3498db}.aging-info[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end;flex-wrap:wrap;width:100%;font-size:14px;font-weight:500}.aging-info-left[_ngcontent-%COMP%]{flex:1 0 80px}  .compact .aging-info-left{width:100%;flex:0 0 100%}.aging-info-right[_ngcontent-%COMP%]{flex:0 0 90px;display:flex;justify-content:flex-end;padding-left:10px}  .compact .aging-info-right{width:100%;flex:0 0 100%}.aging-label[_ngcontent-%COMP%]{width:100%;flex:0 0 100%;font-size:14px;font-weight:400;color:#747474;text-align:right}.aging-col[_ngcontent-%COMP%]:nth-child(1)   .aging-label[_ngcontent-%COMP%]{text-align:left}.aging-info-value[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#404040;text-align:right}.graph[_ngcontent-%COMP%]{width:80px;height:20px;background:#ddd}.graph-bar[_ngcontent-%COMP%]{display:block;width:100%;height:100%}.units[_ngcontent-%COMP%]   .graph-bar[_ngcontent-%COMP%]{background-color:#004e9a}.amount[_ngcontent-%COMP%]   .graph-bar[_ngcontent-%COMP%]{background-color:#44b4d5}"]],data:{}});function c(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["- ",""]))],null,(function(e,t){e(t,1,0,t.component.data.daysTo)}))}function d(e){return l["\u0275vid"](2,[l["\u0275pid"](0,i.a,[s.a,a.b]),(e()(),l["\u0275eld"](1,0,null,null,34,"div",[["class","aging-row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,8,"div",[["class","aging-col"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,7,"div",[["class","aging-days"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,2,"div",[["class","aging-label"]],null,null,null,null,null)),(e()(),l["\u0275ted"](5,null,["",""])),l["\u0275pid"](131072,r.i,[r.j,l.ChangeDetectorRef]),(e()(),l["\u0275eld"](7,0,null,null,3,"span",[],[[2,"clickable",null]],[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;return"click"===t&&(l=!1!==(i.hasDaysLink&&i.onDaysClick())&&l),l}),null,null)),(e()(),l["\u0275ted"](8,null,[" "," "])),(e()(),l["\u0275and"](16777216,null,null,1,null,c)),l["\u0275did"](10,16384,null,0,o.n,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](11,0,null,null,11,"div",[["class","aging-col"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,10,"div",[["class","aging-info units"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,5,"div",[["class","aging-info-left"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,2,"div",[["class","aging-label"]],null,null,null,null,null)),(e()(),l["\u0275ted"](15,null,["",""])),l["\u0275pid"](131072,r.i,[r.j,l.ChangeDetectorRef]),(e()(),l["\u0275eld"](17,0,null,null,1,"div",[["class","aging-info-value"]],null,null,null,null,null)),(e()(),l["\u0275ted"](18,null,["",""])),(e()(),l["\u0275eld"](19,0,null,null,3,"div",[["class","aging-info-right"]],null,null,null,null,null)),(e()(),l["\u0275eld"](20,0,null,null,2,"div",[["class","aging-info-graph"]],null,null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,1,"div",[["class","graph units"]],null,null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,0,"span",[["class","graph-bar"]],[[4,"width",null]],null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,12,"div",[["class","aging-col"]],null,null,null,null,null)),(e()(),l["\u0275eld"](24,0,null,null,11,"div",[["class","aging-info amount"]],null,null,null,null,null)),(e()(),l["\u0275eld"](25,0,null,null,6,"div",[["class","aging-info-left"]],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,2,"div",[["class","aging-label"]],null,null,null,null,null)),(e()(),l["\u0275ted"](27,null,["",""])),l["\u0275pid"](131072,r.i,[r.j,l.ChangeDetectorRef]),(e()(),l["\u0275eld"](29,0,null,null,2,"div",[["class","aging-info-value"]],null,null,null,null,null)),(e()(),l["\u0275ted"](30,null,["",""])),l["\u0275ppd"](31,3),(e()(),l["\u0275eld"](32,0,null,null,3,"div",[["class","aging-info-right"]],null,null,null,null,null)),(e()(),l["\u0275eld"](33,0,null,null,2,"div",[["class","aging-info-graph"]],null,null,null,null,null)),(e()(),l["\u0275eld"](34,0,null,null,1,"div",[["class","graph amount"]],null,null,null,null,null)),(e()(),l["\u0275eld"](35,0,null,null,0,"span",[["class","graph-bar"]],[[4,"width",null]],null,null,null,null))],(function(e,t){e(t,10,0,t.component.data.daysTo)}),(function(e,t){var n=t.component;e(t,5,0,l["\u0275unv"](t,5,0,l["\u0275nov"](t,6).transform("widgets.aging-analysis-block.days.label"))),e(t,7,0,n.hasDaysLink),e(t,8,0,n.data.daysFrom),e(t,15,0,l["\u0275unv"](t,15,0,l["\u0275nov"](t,16).transform("widgets.aging-analysis-block.column.units.name"))),e(t,18,0,n.data.value),e(t,22,0,n.getGraphWidth("value","totalUnits")),e(t,27,0,l["\u0275unv"](t,27,0,l["\u0275nov"](t,28).transform("widgets.aging-analysis-block.column.amount.name")));var i=l["\u0275unv"](t,30,0,e(t,31,0,l["\u0275nov"](t,0),n.data.money,"abbr-money",2));e(t,30,0,i),e(t,35,0,n.getGraphWidth("money","totalAmount"))}))}},ydjR:function(e,t,n){"use strict";var l=n("2Vo4"),i=n("itXk"),s=n("Cfvw"),a=n("lJxs"),r=n("pLZG"),o=n("/uUt"),u=n("fFD9"),c=n("UXun"),d=n("vkgz"),h=n("w0+v"),g=n("LvDl"),p=n("tFIl"),f=n("qfHn");let b=(()=>{class e extends p.a{constructor(e={}){super();const t=new.target.valuePublicFieldNames;this.fillAll(e,t)}get groupOrStore(){return this.by===f.a.StoreGroup?this._storeGroupId:this.by===f.a.Store?this._storeId:void 0}set groupOrStore(e){switch(this.by){case f.a.StoreGroup:this._storeGroupId=e;break;case f.a.Store:this._storeId=e}}clone(e={}){const t=super.clone(e);return void 0===t._storeId&&(t._storeId=e._storeId),void 0===t._storeGroupId&&(t._storeGroupId=e._storeGroupId),t}get isFullyFilled(){return e.valuePublicFieldNames.every(e=>!g.isNil(this[e]))}}return e.valuePublicFieldNames=["by","groupOrStore","date","dateValue","startDate","endDate","opsfilter"],e})();var m=n("8Y7J"),v=n("TSSN"),y=n("/wis"),C=n("+2T5"),_=n("XpwZ");n.d(t,"a",(function(){return O}));let O=(()=>{class e{constructor(e,t,n,i){this.translate=e,this.dataApi=t,this.authService=n,this.instanceAppSettingsApi=i,this.FilterNamesArr$=new l.a(void 0),this.defaultType="All",this.currentDealType=[this.defaultType],this.currentStatus=[this.defaultType],this.currentStockType="",this.dealTypes=[],this.statusDeals=[],this.stockTypes=[],this.isHAG=!1,this._value$=new l.a(void 0),this.filterByDef$=new l.a(void 0),this.filterGroupOrStoreDef$=new l.a(void 0),this.filterDateDef$=new l.a(void 0),this.filterOpsListDef$=new l.a(void 0),this.months$=new l.a(void 0),this._storeGroups$=new l.a(void 0),this.subs=[],this.initStreams()}set sub(e){this.subs.push(e)}init(){this.selectedNewDashboardFilter=this.getSessionStorageItems("selectedNewDashboardFilter"),this.selectedUsedDashboardFilter=this.getSessionStorageItems("selectedUsedDashboardFilter"),this.selectedFIDashboardFilter=this.getSessionStorageItems("selectedFIDashboardFilter"),this.selectedNewSummaryByModelFilter=this.getSessionStorageItems("selectedNewSummaryByModelFilter"),this.selectedNewSummaryContestFilter=this.getSessionStorageItems("selectedNewSummaryContestFilter"),this.selectedUsedSummaryByModelFilter=this.getSessionStorageItems("selectedUsedSummaryByModelFilter"),this.selectedUsedSummaryContestFilter=this.getSessionStorageItems("selectedUsedSummaryContestFilter"),this.selectedNewByModelDetailFilter=this.getSessionStorageItems("selectedNewByModelDetailFilter"),this.selectedNewContestDetailFilter=this.getSessionStorageItems("selectedNewContestDetailFilter"),this.selectedUsedByModelDetailFilter=this.getSessionStorageItems("selectedUsedByModelDetailFilter"),this.selectedUsedContestDetailFilter=this.getSessionStorageItems("selectedUsedContestDetailFilter"),this.selectedFIPerformanceDetailFilter=this.getSessionStorageItems("selectedFIPerformanceDetailFilter"),this.selectedFIMngrContestDetailFilter=this.getSessionStorageItems("selectedFIMngrContestDetailFilter"),this.initSubscriptions(),this.getFieldTypes()}getFieldTypes(){this.dealTypes=[],this.statusDeals=[],this.stockTypes=[],this.currentDealType=[this.defaultType],this.currentStatus=[this.defaultType],this.currentStockType="",this.sub=Object(i.b)(Object(s.a)(this.dataApi.getFieldtypes("stockType")),Object(s.a)(this.dataApi.getFieldtypes("dealType")),Object(s.a)(this.dataApi.getFieldtypes("dealStatus")),this.instanceAppSettingsApi.settings$).subscribe(([e,t,n,l])=>{e.map(e=>{""!==e.stockType&&this.stockTypes.push({key:e.stockType.charAt(0),value:e.stockType})}),t.map(e=>{""!==e.dealType&&" "!==e.dealType&&this.dealTypes.push(e)}),n.map(e=>{""!==e.status&&this.statusDeals.push(e)}),this.currentDealType=this.dealTypes.concat(this.currentDealType),this.currentStatus=this.statusDeals.concat(this.currentStatus),sessionStorage.setItem("currentDealType",JSON.stringify(this.currentDealType)),sessionStorage.setItem("currentStatus",JSON.stringify(this.currentStatus)),sessionStorage.setItem("currentStockType",JSON.stringify(this.currentStockType)),sessionStorage.setItem("dealTypes",JSON.stringify(this.dealTypes)),sessionStorage.setItem("statusDeals",JSON.stringify(this.statusDeals)),sessionStorage.setItem("stockTypes",JSON.stringify(this.stockTypes))})}getSessionStorageItems(e){return"undefined"!==sessionStorage.getItem(e)?sessionStorage.getItem(e):void 0}destroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[]}onBsChange(e){const t=this.filterByDef$.getValue(),n=this.filterGroupOrStoreDef$.getValue(),l=n;switch(e.eventType){case"create":l.items.push({label:e.name,value:e.groupIndex});break;case"update":const t=l.items.find(t=>+t.value==+e.prevGroupIndex);t&&(t.label=e.name,t.value=e.groupIndex,t.data=e.stores);break;case"delete":l.items=l.items.filter(t=>+t.value!=+e.groupIndex),+n==+e.groupIndex&&this.updateValue({groupOrStore:l.items[0]&&l.items[0].value})}this.filterByDef$.next(t)}updateValue(e){const t=this._value$.getValue(),n=t?t.clone(e):new b(e);this._value$.next(n)}updateDate(e){const t=this.months$.getValue(),[n,l]=e.date.split("-"),i=t.find(e=>+e.year==+n&&+e.month==+l);i&&this.updateValue({dateValue:e.date,date:i.dateIndex,startDate:i.startDate,endDate:i.endDate})}pickValueField(e,t=!0){return(t?this.value$:this._value$).pipe(Object(a.a)(t=>t&&t[e]),Object(r.a)(e=>!!e),Object(o.a)())}initStreams(){this.currentUser=this.authService.getCurrentUser(),this.isHAG=this.currentUser.instance_name.indexOf("HAG")>=0,this.storeGroups$=this._storeGroups$.pipe(Object(r.a)(e=>!!e)),this.value$=this._value$.pipe(Object(r.a)(e=>!!e&&e.isFullyFilled)),this.filtersDef$=this.filterByDef$.pipe(Object(u.a)(this.filterGroupOrStoreDef$,this.filterDateDef$,this.filterOpsListDef$),Object(r.a)(([e,t,n,l])=>!!(e&&t&&n&&l)),Object(a.a)(([e,t,n,l])=>({by:e,groupOrStore:t,date:n,opsfilter:l})),Object(c.a)(1))}initSubscriptions(){this.sub=this.translate.stream(["summary.filters.by.label","summary.filters.by.business-segment.label","summary.filters.by.stores.label","filters-group.opsfilter.label"]).pipe(Object(a.a)(e=>Object(h.f)([{label:e["summary.filters.by.business-segment.label"],value:f.a.StoreGroup},{label:e["summary.filters.by.stores.label"],value:f.a.Store}],e["summary.filters.by.label"]))).subscribe(e=>this.filterByDef$.next(e)),this.sub=this.filterByDef$.subscribe(e=>this.updateValue({by:e&&e.default})),this.sub=this.dataApi.getStoreGroups().pipe(Object(u.a)(this.dataApi.getStores(),this.dataApi.getDates(),this.instanceAppSettingsApi.getByType("pages.all.main"),this.translate.get(["summary.filters.date.label","summary.filters.by.business-segment.item.all.label","filters-group.opsfilter.label"]),this.dataApi.getOpsFilters()),Object(a.a)(([e,t,n,l,i,s])=>(e.unshift({label:i["summary.filters.by.business-segment.item.all.label"],value:h.b}),{stores:t.map(e=>({label:e[l?l.storeNameType:"name"],value:String(e.id),position:e.position})),storeGroups:e,months:n.map(e=>{const[t,n,l]=String(e.date_from).split("/");return{month:t,year:l,dateValue:"".concat(l,"-").concat(t,"-").concat(n),dateIndex:e.dateindex.toString(),startDate:e.date_from,endDate:e.date_to}}),t:i,opsFilterList:s.map(e=>({label:String(e.FilterName),value:String(e.FilterID)}))})),Object(d.a)(({storeGroups:e,months:t,t:n,opsFilterList:l})=>{this.months$.next(t),this._storeGroups$.next(e),this.filterDateDef$.next({label:n["summary.filters.date.label"],min:t[t.length-1].dateValue,max:t[0].dateValue}),this.updateValue({dateValue:t[0].dateValue,date:t[0].dateIndex,startDate:t[0].startDate,endDate:t[0].endDate,opsfilter:this.isHAG?l[0].value:l[1].value})}),Object(u.a)(this.pickValueField("by",!1),({stores:e,storeGroups:t,t:n,opsFilterList:l},i)=>{const s=i===f.a.Store?e:i===f.a.StoreGroup?t:[];return[Object(h.f)(s),Object(h.f)(l,n["filters-group.opsfilter.label"])]})).subscribe(e=>{this.filterGroupOrStoreDef$.next(e[0]),this.filterOpsListDef$.next(e[1])}),this.sub=this.filterGroupOrStoreDef$.subscribe(e=>this.updateValue({groupOrStore:e&&e.default}))}}return e.ngInjectableDef=m["\u0275\u0275defineInjectable"]({factory:function(){return new e(m["\u0275\u0275inject"](v.j),m["\u0275\u0275inject"](y.a),m["\u0275\u0275inject"](C.a),m["\u0275\u0275inject"](_.a))},token:e,providedIn:"root"}),e})()},zCXV:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var l=n("2Vo4"),i=n("LRne"),s=n("SxV6"),a=n("eIep"),r=n("nYR2"),o=n("zp1y"),u=n("vkgz"),c=n("CqXF"),d=n("fFD9"),h=n("pLZG"),g=n("lJxs"),p=n("LvDl"),f=n("tFIl"),b=(n("/kTj"),n("W+wd"));const m={measures:!1,categories:!1};class v{constructor(e,t,n,i,s){this.dialog=t,this.instanceAppSettingsApi=n,this.userAppSettingsApi=i,this.translate=s,this.savingSpinner$=new l.a(!1),this.loadingSpinner$=new l.a(!0),this.selectedKpiLevel$=new l.a(void 0),this.rawMeasuresIndex$=new l.a(void 0),this._measuresIndex$=new l.a(void 0),this._categoriesIndex$=new l.a(void 0),this.orderOfMeasures$=new l.a(void 0),this.orderOfCategories$=new l.a(void 0),this._enableSorting$=new l.a(m),this._measureSortingSetting$=new l.a(void 0),this.debug=e.factory(new.target.name),this.initMainStreams(),this.debug.streams(this,["sortedRawMeasures$","sortedMeasures$","sortedCategories$","selectedKpiLevel$","rawMeasuresIndex$","measuresIndex$","categoriesIndex$","orderOfMeasures$","orderOfCategories$","savingSpinner$","loadingSpinner$","spinner$"])}saveSortingOrder(e){this.savingSpinner$.next(!0),this.appSettingsApi.pipe(Object(s.a)(),Object(a.a)(t=>t.save("pages.kpi.dashboard.measures-and-categories-order",e)),Object(r.a)(()=>this.savingSpinner$.next(!1))).subscribe(()=>{this.orderOfCategories$.next(e.categoriesOrder),this.orderOfMeasures$.next(e.measuresOrder),this._enableSorting$.next({measures:e.enableSortingMeasures,categories:e.enableSortingCategories}),this._measureSortingSetting$.next(e)},e=>{this.debug.warn("saveOrder(): Can not save. HTTP Error: %O",e),this.translate.get("modal.set-sorting.server-error.can-not-save-order").subscribe(e=>this.dialog.warning(e+this.dialog.tryAgainLaterMessage))})}reset(e=!1){this._measuresIndex$.next(void 0),this._categoriesIndex$.next(void 0),this.rawMeasuresIndex$.next(void 0),this.orderOfCategories$.next(void 0),this.orderOfMeasures$.next(void 0),this._enableSorting$.next({measures:!1,categories:!1}),e&&this._measureSortingSetting$.next(void 0)}setPayload(e,t){this.loadingSpinner$.next(!0),this.reset();const n=new Map,l=new Map,i=new Map;e.forEach(e=>{const t=e.kpiIndex&&f.c.number(e.kpiIndex);if(this.debug.assert(void 0!==t,"Measure has broken ID. Not processed. Raw ID:",e.id),void 0===t)return;const s={id:t,name:f.c.string(e.name),categoryId:f.c.number(e.section_id)};l.set(s.id,s);let a=i.get(s.categoryId);void 0===a&&(a={id:s.categoryId,name:f.c.string(e.category)},i.set(a.id,a)),n.set(t,e)}),this.rawMeasuresIndex$.next(n),this._measuresIndex$.next(l),this._categoriesIndex$.next(i),this.selectedKpiLevel$.next(t),this.loadSortingOrder().pipe(Object(r.a)(()=>this.loadingSpinner$.next(!1))).subscribe(void 0,()=>{})}loadSortingOrder(){return this.appSettingsApi.pipe(Object(s.a)(),Object(o.a)(this._measureSortingSetting$),Object(a.a)(([e,t])=>t?Object(i.a)(t):e.get("pages.kpi.dashboard.measures-and-categories-order")),Object(u.a)(e=>{this.orderOfMeasures$.next(this.filterSavedIds(e.measuresOrder,this._measuresIndex$)),this.orderOfCategories$.next(this.filterSavedIds(e.categoriesOrder,this._categoriesIndex$)),this._enableSorting$.next({measures:e.enableSortingMeasures,categories:e.enableSortingCategories}),this._measureSortingSetting$.next(e)},()=>{this.orderOfMeasures$.next(void 0),this.orderOfCategories$.next(void 0),this._enableSorting$.next({measures:!1,categories:!1}),this._measureSortingSetting$.next(void 0)}),Object(c.a)(void 0))}filterSavedIds(e,t){const n=t.getValue(),l=n?Array.from(n.keys()):[],i=p.intersection(e,l),s=p.difference(l,e);if(i.length!==e.length){const t=p.difference(e,l);this.debug.log("filterSavedIds()Can not found some measures by ID's that saved in sorting order array. May be this measures has been deleted. ID's:",t)}return[...s,...i]}initMainStreams(){const e=(e,t)=>t.pipe(Object(d.a)(e),Object(h.a)(([,e])=>void 0!==e),Object(g.a)(([e,t])=>e instanceof Array?e.map(e=>t.get(e)):Array.from(t.values())));this.sortedMeasures$=e(this._measuresIndex$,this.orderOfMeasures$),this.sortedCategories$=e(this._categoriesIndex$,this.orderOfCategories$).pipe(Object(d.a)(this.loadingSpinner$),Object(h.a)(([,e])=>!e),Object(g.a)(([e])=>e)),this.sortedRawMeasures$=e(this.rawMeasuresIndex$,this.orderOfMeasures$).pipe(Object(d.a)(this.loadingSpinner$),Object(h.a)(([,e])=>!e),Object(g.a)(([e])=>e)),this.measuresIndex$=this._measuresIndex$.pipe(Object(h.a)(e=>void 0!==e)),this.categoriesIndex$=this._categoriesIndex$.pipe(Object(h.a)(e=>void 0!==e)),this.enableSorting$=this._enableSorting$.asObservable(),this.spinner$=this.loadingSpinner$.pipe(Object(d.a)(this.savingSpinner$,(e,t)=>e||t)),this.appSettingsApi=this.selectedKpiLevel$.pipe(Object(g.a)(e=>e===b.c.My?this.userAppSettingsApi:this.instanceAppSettingsApi))}}}}]);