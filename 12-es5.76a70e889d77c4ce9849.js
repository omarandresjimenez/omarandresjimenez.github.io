!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{OR4m:function(t,n,r){"use strict";r.r(n),r.d(n,"UserModule",function(){return S});var a,o,s,c,l,d=r("3Pt+"),u=r("ofXK"),f=r("cWTo"),h=r("tyNb"),p=r("fXoL"),b=((a=function(){function t(){e(this,t)}return i(t,[{key:"ngOnInit",value:function(){}},{key:"onUserSelected",value:function(e){this.user=e}}]),t}()).\u0275fac=function(e){return new(e||a)},a.\u0275cmp=p.Eb({type:a,selectors:[["app-user-container"]],decls:7,vars:2,consts:[[1,"jumbtron"],[1,"display-4","text-center"],[1,"row"],[1,"col-md-12","grid"],[3,"editUser"]],template:function(e,t){1&e&&(p.Pb(0,"div",0),p.Pb(1,"h1",1),p.wc(2,"Administracion Usuarios"),p.Ob(),p.Lb(3,"hr"),p.Pb(4,"div",2),p.Pb(5,"div",3),p.Pb(6,"app-user-list",4),p.Wb("editUser",function(e){return t.onUserSelected(e)}),p.Ob(),p.Ob(),p.Ob(),p.Ob()),2&e&&p.tc("margin-top",80,"px")},styles:[".grid[_ngcontent-%COMP%]{display:inline-block;height:calc(80vh - 10px);max-width:98%;margin-left:10px}"]}),a),m=[{path:"",component:b}],v=((o=function t(){e(this,t)}).\u0275mod=p.Ib({type:o}),o.\u0275inj=p.Hb({factory:function(e){return new(e||o)},imports:[[h.f.forChild(m)],h.f]}),o),g=r("7pcG"),w=r("5eHb"),y=r("8SKR"),k=r("eIxW"),D=r("3KhC"),N=((s=function(){function t(i,n,r,a,o){e(this,t),this.document=i,this.service=n,this.toast=r,this.modal=a,this.cdr=o}return i(t,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.subs&&this.subs.unsubscribe()}},{key:"initGridOptions",value:function(){this.defaultColDef={width:170,editable:!1,filter:"agTextColumnFilter",floatingFilter:!0,resizable:!0,sortable:!0}}},{key:"prepareGridColumns",value:function(){var e=this;return[{field:"",headerName:"",cellRenderer:function(t){var i=e.document.createElement("span");return i.innerHTML='<i class="fas fa-edit" alt="Edit User"></i>',i.className="link",i.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation(),e.onEditUser(null==t?void 0:t.data)}),i},width:"60px",filter:"",floatingFilter:!1},{field:"name",headerName:"Nombres"},{field:"lastName",headerName:"Apellidos"},{field:"identification",headerName:"Identificacion"},{field:"age",headerName:"Edad",filter:"agNumberColumnFilter"},{field:"email",headerName:"Email"},{field:"phone",headerName:"Telefono"},{field:"regionName",headerName:"Region"},{field:"stateName",headerName:"Departamento"},{field:"cityName",headerName:"Ciudad"},{field:"actorTypeName",headerName:"Tipo Actor"},{field:"establishment",headerName:"Establecimiento"},{field:"creationDate",headerName:"Fecha creado"},{field:"role",headerName:"Role"},{field:"active",headerName:"Activo",width:"100",cellRenderer:function(e){var t;return(null===(t=e.data)||void 0===t?void 0:t.active)?"Si":"No"}}]}},{key:"onSelectRow",value:function(e){var t;null===(t=this.gridApi)||void 0===t||t.getSelectedRows()}},{key:"onDeleteUser",value:function(e){var t=this;this.service.deleteUser(e).subscribe(function(i){t.toast.success("Usuario eliminado"),t.rowData=t.rowData.filter(function(t){return t.id!==e}),t.closeModal("usercard"),t.cdr.markForCheck()})}},{key:"onEditUser",value:function(e){this.selectedUser=e,this.openModal("usercard"),this.cdr.markForCheck()}},{key:"onSaveUser",value:function(e){var t=this;this.service.updateUserAdmin(e.id,e.role,e.active).subscribe(function(i){t.toast.success("Usuario actualizado"),t.rowData=t.rowData.filter(function(t){return t.id!==e.id}),t.rowData.push(e),t.closeModal("usercard"),t.cdr.markForCheck()})}},{key:"onGridReady",value:function(e){var t=this;this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.initGridOptions(),this.columnDefs=this.prepareGridColumns(),this.subs=this.service.getUsers().subscribe(function(e){t.rowData=e,t.cdr.markForCheck()})}},{key:"openModal",value:function(e){this.modal.open(e)}},{key:"closeModal",value:function(e){this.modal.close(e)}}]),t}()).\u0275fac=function(e){return new(e||s)(p.Kb(u.e),p.Kb(g.a),p.Kb(w.c),p.Kb(y.a),p.Kb(p.h))},s.\u0275cmp=p.Eb({type:s,selectors:[["app-user-list"]],decls:6,vars:7,consts:[[2,"height","100%","box-sizing","border-box"],["id","userGrid",1,"ag-theme-alpine",2,"width","100%","height","100%",3,"defaultColDef","columnDefs","rowData","rowSelection","pagination","paginationPageSize","selectionChanged","gridReady"],["userGrid",""],["id","usercard"],["title","Volver",1,"fas","fa-times-circle","close-button-modal",3,"click"],[3,"user","updateUser","deleteUser"]],template:function(e,t){1&e&&(p.Pb(0,"div",0),p.Pb(1,"ag-grid-angular",1,2),p.Wb("selectionChanged",function(e){return t.onSelectRow(e)})("gridReady",function(e){return t.onGridReady(e)}),p.Ob(),p.Ob(),p.Pb(3,"app-jwmodal",3),p.Pb(4,"i",4),p.Wb("click",function(){return t.closeModal("usercard")}),p.Ob(),p.Pb(5,"app-user-card",5),p.Wb("updateUser",function(e){return t.onSaveUser(e)})("deleteUser",function(e){return t.onDeleteUser(e)}),p.Ob(),p.Ob()),2&e&&(p.zb(1),p.fc("defaultColDef",t.defaultColDef)("columnDefs",t.columnDefs)("rowData",t.rowData)("rowSelection","single")("pagination",!0)("paginationPageSize",100),p.zb(4),p.fc("user",t.selectedUser))},directives:[f.a,k.a,D.a],styles:["[_nghost-%COMP%]     .link{text-decoration:none;color:#00f;cursor:pointer}"],changeDetection:0}),s),U=r("ADsi"),C=r("iZEB"),O=r("A39e"),P=r("RYtb"),A=r("orAG"),R=((c=function(){function t(){e(this,t)}return i(t,[{key:"transform",value:function(e,t){var i=t?parseInt(t,10):10;return e?e.length>i?e.substring(0,i)+"...":e:""}}]),t}()).\u0275fac=function(e){return new(e||c)},c.\u0275pipe=p.Jb({name:"limitTo",type:c,pure:!0}),c),E=r("+UiJ"),S=((l=function t(){e(this,t)}).\u0275mod=p.Ib({type:l}),l.\u0275inj=p.Hb({factory:function(e){return new(e||l)},providers:[],imports:[[u.c,v,d.h,U.a,C.a,f.c.withComponents([])]]}),l);p.pc(b,[u.q,u.r,u.s,u.t,u.A,u.w,u.x,u.y,u.z,u.u,u.v,h.g,h.c,h.e,h.d,h.h,d.C,d.s,d.B,d.c,d.t,d.w,d.a,d.z,d.A,d.v,d.n,d.o,d.y,d.j,d.i,d.u,d.b,d.d,d.q,d.r,d.p,k.a,O.a,P.a,A.a,D.a,f.a,f.b,b,N],[u.b,u.G,u.p,u.k,u.E,u.g,u.C,u.F,u.d,u.f,u.i,u.j,u.l,R,E.a])}}])}();