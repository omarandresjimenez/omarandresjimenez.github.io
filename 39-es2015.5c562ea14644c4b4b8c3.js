(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"OTv+":function(n,t,e){"use strict";e.d(t,"a",(function(){return l})),e("/kTj");class l{constructor(n,t){this.formatter=n,this.debug=t.factory(new.target.name)}transform(n,t,e){if(null===n)return 0;switch(Array.isArray(n)&&"from-array"!==t&&(n="%"===n[1]&&"from-array-abbr"!==t?n[0]/100:n[0]),"from-array-abbr"===t&&(t="abbr"),t){case"money":case"amt":return this.formatter.money(n);case"amt2":return this.formatter.money(n,{fractional:2,noZeroMantissa:!1,currencySign:"$"});case"per":return this.formatter.percentage(n);case"per1":return this.formatter.percentage(n,1,!1);case"per2":return this.formatter.percentage(n,2,!1);case"per-3f":return this.formatter.percentage(n,3);case"per-round":return this.formatter.percentage(n,0);case"number":case"cnt":return this.formatter.number(n,{fractional:0});case"cnt0":this.formatter.number(n,{fractional:0,thousandDelimiter:""});case"abbr":return this.formatter.abbrNum(n,e);case"abbr-money":return this.formatter.abbrMoney(n,e);case"from-array":return this.formatter.fromArray(n,e);default:return this.debug.warn("Unknown format: %s. Value: %s",t,n),this.formatter.number(n,{fractional:0})}}}},SjMl:function(n,t,e){"use strict";var l=e("8Y7J"),o=e("lbNG"),a=e("S+vS"),i=e("+2T5"),r=e("TSSN"),s=e("kDjO"),u=e("/kTj"),c=e("SVse"),d=e("OTv+"),p=e("eeq/");e("nEoX"),e.d(t,"a",(function(){return g})),e.d(t,"b",(function(){return y}));var g=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;min-width:80px}.progress[_ngcontent-%COMP%]{width:100%;height:30px;background-color:#e1e1e1;position:relative}.progress.with-scale[_ngcontent-%COMP%]   .scale[_ngcontent-%COMP%], .progress.with-threshold[_ngcontent-%COMP%]   .threshold[_ngcontent-%COMP%]{display:flex}.progress.with-reversed-threshold[_ngcontent-%COMP%]   .threshold[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}.bar[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;width:20%;height:22px;background-color:#00458f;transform:translateY(-50%);z-index:1;color:#fff}.minimum[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{color:#000}.bar[_ngcontent-%COMP%]:before{content:attr(data-value);position:absolute;left:0;top:50%;transform:translateY(-50%);padding:0 4px;font-size:12px;font-weight:700;color:inherit}.target[_ngcontent-%COMP%]{position:absolute;top:50%;width:22px;height:22px;border-radius:50%;z-index:2;transform:translate(-50%,-50%)}.target[_ngcontent-%COMP%]:before{content:'';height:40px;width:2px;display:block;background-color:#000;position:absolute;left:50%;top:-4px;z-index:0;transform:translateX(-50%)}.target[_ngcontent-%COMP%]:after{content:attr(data-target-value);position:absolute;left:50%;bottom:-32px;font-size:12px;font-weight:700;transform:translateX(-50%)}.target-icon[_ngcontent-%COMP%]{display:block;width:100%;height:100%;border-radius:50%;background-color:#000;background-repeat:no-repeat;background-position:center center;background-size:contain;position:relative}.target-icon.field-editable[_ngcontent-%COMP%]{cursor:pointer}.target-icon[_ngcontent-%COMP%]:before{display:none;content:'';width:70px;height:2px;background-color:#000;position:absolute;left:-2px;top:50%;transform:translate(-100%,-50%)}.target-icon.with-line[_ngcontent-%COMP%]:before{display:block}.target-icon.goal[_ngcontent-%COMP%]{background-image:url(/assets/icon/icon-goal.svg)}.target-icon.average[_ngcontent-%COMP%]{background-image:url(/assets/icon/icon-average.svg)}.target-icon.benchmark[_ngcontent-%COMP%]{background-image:url(/assets/icon/icon-benchmark.svg)}.target-icon.previous-period[_ngcontent-%COMP%]{background-image:url(/assets/icon/icon-previous-period.svg)}.target-icon.projection[_ngcontent-%COMP%]{background-image:url(/assets/icon/icon-projection.svg)}.threshold[_ngcontent-%COMP%]{width:100%;height:2px;position:absolute;bottom:0;display:none;justify-content:space-between;align-items:stretch;overflow:hidden}.threshold-item[_ngcontent-%COMP%]{display:block;width:33.3%;height:100%;position:relative}.threshold-item.positive[_ngcontent-%COMP%]{background-color:#1e8700}.threshold-item.warning[_ngcontent-%COMP%]{background-color:#f3c118}.threshold-item.warning[_ngcontent-%COMP%]:after, .threshold-item.warning[_ngcontent-%COMP%]:before{content:'';width:2px;height:100%;background-color:#fff;position:absolute;top:0}.threshold-item.warning[_ngcontent-%COMP%]:before{left:0}.threshold-item.warning[_ngcontent-%COMP%]:after{right:0}.threshold-item.negative[_ngcontent-%COMP%]{background-color:#c00}.scale[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:-2px;display:none;justify-content:space-between;transform:translateY(100%);font-size:10px}.scale[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:1px;margin-top:10px;position:relative;text-align:center}.scale[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after, .scale[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{position:absolute;left:50%}.scale[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:'|';top:0;transform:translate(-50%,-100%);color:#e1e1e1}.scale[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:attr(data-scale-value);bottom:0;transform:translate(-50%,100%);color:#a1a1a1}.scale[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{transform:translateX(-50%)}.scale[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{transform:translateX(50%)}"]],data:{}});function m(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,16777216,null,null,1,"span",[["class","target-icon goal"]],[[8,"title",0],[2,"field-highlighted",null],[2,"field-editable",null]],[[null,"onUpdate"],[null,"click"]],(function(n,t,e){var o=!0,a=n.component;return"click"===t&&(o=!1!==l["\u0275nov"](n,1).openEditor()&&o),"onUpdate"===t&&(o=!1!==a.updateValue(e)&&o),o}),null,null)),l["\u0275did"](1,737280,null,0,o.a,[l.ElementRef,l.ViewContainerRef,l.ComponentFactoryResolver,a.a,i.a,r.j,s.a,u.b],{params:[0,"params"]},{onUpdate:"onUpdate"}),(n()(),l["\u0275and"](0,null,null,0))],(function(n,t){n(t,1,0,t.component.data.valueEdit)}),(function(n,t){n(t,0,0,l["\u0275nov"](t,1).title,l["\u0275nov"](t,1).highlighted,l["\u0275nov"](t,1).editable)}))}function h(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","target-icon goal"]],null,null,null,null,null))],null,null)}function f(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,0,"span",[],[[8,"className",0],[4,"width",null]],null,null,null,null))],null,(function(n,t){n(t,0,0,"threshold-item "+t.context.$implicit,t.component.data.threshold[t.context.index]+"%")}))}function b(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","threshold"]],null,null,null,null,null)),(n()(),l["\u0275and"](16777216,null,null,2,null,f)),l["\u0275did"](2,278528,null,0,c.l,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),l["\u0275pad"](3,3)],(function(n,t){var e=n(t,3,0,"negative","warning","positive");n(t,2,0,e)}),null)}function C(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"span",[],[[1,"data-scale-value",0]],null,null,null,null)),l["\u0275ppd"](1,2)],null,(function(n,t){var e=t.component,o=l["\u0275unv"](t,0,0,n(t,1,0,l["\u0275nov"](t.parent.parent.parent,0),t.context.$implicit,e.scaleFormat));n(t,0,0,o)}))}function x(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","scale"]],null,null,null,null,null)),(n()(),l["\u0275and"](16777216,null,null,1,null,C)),l["\u0275did"](2,278528,null,0,c.l,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(n,t){n(t,2,0,t.component.scaleValues)}),null)}function v(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,14,"div",[["class","progress"]],null,null,null,null,null)),l["\u0275prd"](512,null,c.A,c.B,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](2,278528,null,0,c.k,[c.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),l["\u0275eld"](3,0,null,null,1,"div",[["class","bar"]],[[4,"width",null],[1,"data-value",0]],null,null,null,null)),l["\u0275ppd"](4,2),(n()(),l["\u0275eld"](5,0,null,null,5,"div",[["class","target"]],[[4,"left",null],[1,"data-target-value",0]],null,null,null,null)),l["\u0275ppd"](6,2),(n()(),l["\u0275and"](16777216,null,null,1,null,m)),l["\u0275did"](8,16384,null,0,c.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275and"](16777216,null,null,1,null,h)),l["\u0275did"](10,16384,null,0,c.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275and"](16777216,null,null,1,null,b)),l["\u0275did"](12,16384,null,0,c.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275and"](16777216,null,null,1,null,x)),l["\u0275did"](14,16384,null,0,c.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,t){var e=t.component;n(t,2,0,"progress",e.valueClass),n(t,8,0,e.data.valueEdit),n(t,10,0,!e.data.valueEdit),n(t,12,0,e.hasThreshold),n(t,14,0,e.hasScale)}),(function(n,t){var e=t.component,o=e.width,a=l["\u0275unv"](t,3,1,n(t,4,0,l["\u0275nov"](t.parent,0),e.data.value,e.data.format));n(t,3,0,o,a);var i=e.targetWidth,r=e.data.target&&l["\u0275unv"](t,5,1,n(t,6,0,l["\u0275nov"](t.parent,0),e.data.target,e.data.format));n(t,5,0,i,r)}))}function y(n){return l["\u0275vid"](2,[l["\u0275pid"](0,d.a,[p.a,u.b]),(n()(),l["\u0275and"](16777216,null,null,1,null,v)),l["\u0275did"](2,16384,null,0,c.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,t){n(t,2,0,t.component.data)}),null)}},"fRx+":function(n,t,e){"use strict";e.d(t,"a",(function(){return l}));class l{}},gO9G:function(n,t,e){"use strict";e.r(t);var l=e("8Y7J");const o="cabinet.kpi.summary.";class a{constructor(n){n.addLoaderWithPrefixedTranslations("/cabinet/kpi/summary",o)}}var i=e("pMnS"),r=e("NcP4"),s=e("HOtD"),u=e("t68o"),c=e("tfhy"),d=e("qFRm"),p=e("zbXB"),g=e("GsI2"),m=e("eliu"),h=e("0Xvm"),f=e("VOAG"),b=e("aYrz"),C=e("NFHq"),x=e("RHbX"),v=e("Xrj0"),y=e("TSSN"),O=e("SVse"),k=e("zXMq"),P=e("2Vgt"),w=e("+2T5"),M=e("giT0"),_=e("xj9N"),R=e("rCmf"),S=e("NNFQ"),I=e("eeq/"),T=e("jqm9"),D=e("/kTj"),A=e("/Mbv"),j=e("98QR"),F=e("V4Wx"),V=e("SjMl"),$=e("nEoX"),E=e("bujt"),z=e("Fwaw"),N=e("5GAg"),U=e("omvX"),L=e("FpoO"),B=e("JNvI"),Y=e("pGru"),W=e("YbeN"),X=e("RiRU"),K=e("Mz6y"),q=e("QQfA"),G=e("hOhj"),J=e("/HVE"),H=e("IP0z"),Q=e("cUpR"),Z=e("mS0u"),nn=e("MmlZ"),tn=e("aFUJ");class en{constructor(n,t,e,l,a){this.router=n,this.route=t,this.matDialog=e,this.session=l,this.filterData=a,this.i18n=o,this.isOpened=!0,this.subs=[]}set sub(n){this.subs.push(n)}ngOnInit(){this.initSubscriptions()}ngOnDestroy(){this.subs.forEach(n=>n.unsubscribe())}onToggle(){this.isOpened=!this.isOpened}onItemClick(n){this.isItemSelected(n)||this.filterData.updateFilter({name:"kpiIndex",value:n.kpiIndex})}onValueClick(n,t){n.stopPropagation(),this.router.navigate(["..","by-store"],{relativeTo:this.route.parent}).then(()=>this.filterData.updateFilter({name:"kpiIndex",value:t.kpiIndex}))}isItemSelected(n){return this.selectedKpi&&+n.kpiIndex==+this.selectedKpi}isItemEditable(n){return n.is_public&&this.session.isAdmin()||!n.is_public}getVarianceClass(n,t){return{negative:-1===n,warning:0===n,positive:1===n}}openEditKpiDialog(n){this.filterData.isCreate=!1,this.matDialog.open(tn.a,{panelClass:tn.a.panelClass,data:{kpiIndex:+n.kpiIndex,selectedYear:+this.selectedYear}}).afterClosed().subscribe(n=>{n instanceof Object&&this.filterData.refreshData()})}initSubscriptions(){this.sub=this.filterData.change$.subscribe(n=>{const[t]=n.date.split("-");this.selectedYear=t})}}var ln=e("iInd"),on=e("s6ns"),an=e("dBrL"),rn=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;background-color:#fff;width:40px;flex:0 0 40px;margin:-20px 20px -20px -20px;overflow:hidden;transition:width .5s ease,flex .5s ease;position:relative;box-shadow:2px 2px 5px 1px #c1bebe}.opened[_nghost-%COMP%]{width:430px;flex:0 0 430px}.opened[_nghost-%COMP%]   .sidebar-inner[_ngcontent-%COMP%]{width:430px;transform:translateX(0)}.opened[_nghost-%COMP%]   .sidebar-toggle[_ngcontent-%COMP%]{right:12px}.opened[_nghost-%COMP%]   .sidebar-toggle[_ngcontent-%COMP%]:before{content:'\\e314'}.sidebar-inner[_ngcontent-%COMP%]{height:100%;width:430px;transform:translateX(-100%);transition:transform .5s ease}.sidebar-header[_ngcontent-%COMP%]{height:60px;display:flex;align-items:center;padding:5px 20px}.sidebar-body[_ngcontent-%COMP%]{height:calc(100% - 60px);overflow:auto}.sidebar-toggle[_ngcontent-%COMP%]{width:24px;height:24px;display:block;cursor:pointer;position:absolute;top:19px;right:8px;transition:right .5s ease;z-index:1}.sidebar-toggle[_ngcontent-%COMP%]:before{content:'\\e315';font-family:\"Material Icons\";font-size:24px;color:#747474;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.sidebar-label[_ngcontent-%COMP%]{color:#747474;font-size:14px;margin-left:10px}.sidebar-heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#404040;margin:0}.summary-block[_ngcontent-%COMP%]{position:relative;border-bottom:1px solid #ddd;cursor:pointer}.summary-block[_ngcontent-%COMP%]:before{content:'';width:4px;height:calc(100% + 2px);position:absolute;top:-1px;left:0;background-color:transparent}.summary-block[_ngcontent-%COMP%]:hover{background-color:#eee}.summary-block[_ngcontent-%COMP%]:hover   .summary-block-control[_ngcontent-%COMP%]{display:inline-block}.summary-block[_ngcontent-%COMP%]:hover   .summary-block-value.highlighted[_ngcontent-%COMP%]{color:#3498db}.summary-block.selected[_ngcontent-%COMP%]{background-color:#f3f8fc}.summary-block.selected[_ngcontent-%COMP%]:before{background-color:#3498db}.summary-block-top-row[_ngcontent-%COMP%]{display:flex;padding-top:15px;padding-bottom:7px}.summary-block-top-col[_ngcontent-%COMP%]:nth-of-type(1){width:35%;flex:0 0 35%;padding-left:20px;padding-right:5px}.summary-block-top-col[_ngcontent-%COMP%]:nth-of-type(2){width:45%;flex:0 0 45%;padding-left:5px;padding-right:5px}.summary-block-top-col[_ngcontent-%COMP%]:nth-of-type(3){width:20%;flex:0 0 20%;padding-left:5px;padding-right:20px;text-align:right}.summary-block-bottom-row[_ngcontent-%COMP%]{display:flex;padding-top:7px;padding-bottom:15px}.summary-block-bottom-col[_ngcontent-%COMP%]{width:25%;flex:0 0 25%;text-align:center}.summary-block-bottom-col[_ngcontent-%COMP%]:nth-of-type(1){padding-left:20px;padding-right:5px}.summary-block-bottom-col[_ngcontent-%COMP%]:nth-of-type(2), .summary-block-bottom-col[_ngcontent-%COMP%]:nth-of-type(3){padding-left:5px;padding-right:5px}.summary-block-bottom-col[_ngcontent-%COMP%]:nth-of-type(4){padding-left:5px;padding-right:20px}.summary-block-heading[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#404040;margin:0}.selected[_ngcontent-%COMP%]   .summary-block-heading[_ngcontent-%COMP%]{color:#3498db}.summary-block-subheading[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:#404040}.selected[_ngcontent-%COMP%]   .summary-block-subheading[_ngcontent-%COMP%]{color:#3498db}.summary-block-control[_ngcontent-%COMP%]{display:none;width:24px;height:24px;position:relative;cursor:pointer}.summary-block-control[_ngcontent-%COMP%]:before{content:'';font-family:\"Material Icons\";font-size:24px;color:#747474;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.summary-block-control.settings[_ngcontent-%COMP%]:before{content:'\\e8b8'}.summary-block-label[_ngcontent-%COMP%]{display:block;font-size:14px;color:#747474}.summary-block-value[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#404040}.summary-block-value[_ngcontent-%COMP%]:after{content:'';display:inline-block;border-radius:50%;vertical-align:middle;transform:translateY(-33%)}.summary-block-value.positive[_ngcontent-%COMP%]:after{width:8px;height:8px;margin-left:10px;background-color:#1e8700}.summary-block-value.warning[_ngcontent-%COMP%]:after{width:8px;height:8px;margin-left:10px;background-color:#f3c118}.summary-block-value.negative[_ngcontent-%COMP%]:after{width:8px;height:8px;margin-left:10px;background-color:#c00}"]],data:{}});function sn(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","sidebar-header"]],null,null,null,null,null)),(n()(),l["\u0275eld"](1,0,null,null,2,"h3",[["class","sidebar-heading"]],null,null,null,null,null)),(n()(),l["\u0275ted"](2,null,["",""])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef])],null,(function(n,t){var e=t.component;n(t,2,0,l["\u0275unv"](t,2,0,l["\u0275nov"](t,3).transform(e.i18n+"sidebar.header.caption")))}))}function un(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),l["\u0275ted"](-1,null,["**"]))],null,null)}function cn(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,16777216,null,null,2,"button",[["class","summary-block-control settings"],["type","button"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(n,t,e){var o=!0,a=n.component;return"longpress"===t&&(o=!1!==l["\u0275nov"](n,1).show()&&o),"keydown"===t&&(o=!1!==l["\u0275nov"](n,1)._handleKeydown(e)&&o),"touchend"===t&&(o=!1!==l["\u0275nov"](n,1)._handleTouchend()&&o),"click"===t&&(o=!1!==a.openEditKpiDialog(n.parent.context.$implicit)&&o),o}),null,null)),l["\u0275did"](1,212992,null,0,K.d,[q.c,l.ElementRef,G.e,l.ViewContainerRef,l.NgZone,J.a,N.c,N.h,K.b,[2,H.b],[2,K.a],[2,Q.f]],{message:[0,"message"]},null),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef]),(n()(),l["\u0275and"](0,null,null,0))],(function(n,t){var e=t.component;n(t,1,0,l["\u0275unv"](t,1,0,l["\u0275nov"](t,2).transform(e.i18n+"sidebar.edit-kpi.tooltip")))}),null)}function dn(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,43,"div",[["class","summary-block"]],[[2,"selected",null]],[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onItemClick(n.context.$implicit)&&l),l}),null,null)),(n()(),l["\u0275eld"](1,0,null,null,13,"div",[["class","summary-block-top-row"]],null,null,null,null,null)),(n()(),l["\u0275eld"](2,0,null,null,6,"div",[["class","summary-block-top-col"]],null,null,null,null,null)),(n()(),l["\u0275eld"](3,0,null,null,3,"h4",[["class","summary-block-heading"]],null,null,null,null,null)),(n()(),l["\u0275and"](16777216,null,null,1,null,un)),l["\u0275did"](5,16384,null,0,O.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275ted"](6,null,["",""])),(n()(),l["\u0275eld"](7,0,null,null,1,"span",[["class","summary-block-subheading"]],null,null,null,null,null)),(n()(),l["\u0275ted"](8,null,["",""])),(n()(),l["\u0275eld"](9,0,null,null,2,"div",[["class","summary-block-top-col"]],null,null,null,null,null)),(n()(),l["\u0275eld"](10,0,null,null,1,"app-bar-chart",[],null,null,null,Z.b,Z.a)),l["\u0275did"](11,638976,[[1,4]],0,nn.a,[l.ElementRef,I.a],{config:[0,"config"]},null),(n()(),l["\u0275eld"](12,0,null,null,2,"div",[["class","summary-block-top-col"]],null,null,null,null,null)),(n()(),l["\u0275and"](16777216,null,null,1,null,cn)),l["\u0275did"](14,16384,null,0,O.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275eld"](15,0,null,null,28,"div",[["class","summary-block-bottom-row"]],null,null,null,null,null)),(n()(),l["\u0275eld"](16,0,null,null,5,"div",[["class","summary-block-bottom-col"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onValueClick(e,n.context.$implicit)&&l),l}),null,null)),(n()(),l["\u0275eld"](17,0,null,null,2,"span",[["class","summary-block-label"]],null,null,null,null,null)),(n()(),l["\u0275ted"](18,null,["",""])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef]),(n()(),l["\u0275eld"](20,0,null,null,1,"span",[["class","summary-block-value highlighted"]],null,null,null,null,null)),(n()(),l["\u0275ted"](21,null,["",""])),(n()(),l["\u0275eld"](22,0,null,null,7,"div",[["class","summary-block-bottom-col"]],null,null,null,null,null)),(n()(),l["\u0275eld"](23,0,null,null,2,"span",[["class","summary-block-label"]],null,null,null,null,null)),(n()(),l["\u0275ted"](24,null,["",""])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef]),(n()(),l["\u0275eld"](26,0,null,null,3,"span",[["class","summary-block-value"]],null,null,null,null,null)),l["\u0275prd"](512,null,O.A,O.B,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](28,278528,null,0,O.k,[O.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),l["\u0275ted"](29,null,["",""])),(n()(),l["\u0275eld"](30,0,null,null,7,"div",[["class","summary-block-bottom-col"]],null,null,null,null,null)),(n()(),l["\u0275eld"](31,0,null,null,2,"span",[["class","summary-block-label"]],null,null,null,null,null)),(n()(),l["\u0275ted"](32,null,["",""])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef]),(n()(),l["\u0275eld"](34,0,null,null,3,"span",[["class","summary-block-value"]],null,null,null,null,null)),l["\u0275prd"](512,null,O.A,O.B,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](36,278528,null,0,O.k,[O.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),l["\u0275ted"](37,null,["",""])),(n()(),l["\u0275eld"](38,0,null,null,5,"div",[["class","summary-block-bottom-col"]],null,null,null,null,null)),(n()(),l["\u0275eld"](39,0,null,null,2,"span",[["class","summary-block-label"]],null,null,null,null,null)),(n()(),l["\u0275ted"](40,null,["",""])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef]),(n()(),l["\u0275eld"](42,0,null,null,1,"span",[["class","summary-block-value"]],null,null,null,null,null)),(n()(),l["\u0275ted"](43,null,["",""]))],(function(n,t){var e=t.component;n(t,5,0,t.context.$implicit.isProjected),n(t,11,0,t.context.$implicit.graph),n(t,14,0,e.isItemEditable(t.context.$implicit)),n(t,28,0,"summary-block-value","Schedules"===t.context.$implicit.category&&e.getVarianceClass(t.context.$implicit.variance.color,"-1"===t.context.$implicit.kpiComp)),n(t,36,0,"summary-block-value","Schedules"===t.context.$implicit.category&&e.getVarianceClass(t.context.$implicit.variance.color,"-1"===t.context.$implicit.kpiComp))}),(function(n,t){var e=t.component;n(t,0,0,e.isItemSelected(t.context.$implicit)),n(t,6,0,t.context.$implicit.name),n(t,8,0,t.context.$implicit.description),n(t,18,0,l["\u0275unv"](t,18,0,l["\u0275nov"](t,19).transform(e.i18n+"sidebar.field.value.label"))),n(t,21,0,t.context.$implicit.formatted.value),n(t,24,0,l["\u0275unv"](t,24,0,l["\u0275nov"](t,25).transform(e.i18n+"sidebar.field.variance-per.label"))),n(t,29,0,t.context.$implicit.formatted.variancePer),n(t,32,0,l["\u0275unv"](t,32,0,l["\u0275nov"](t,33).transform(e.i18n+"sidebar.field.variance.label"))),n(t,37,0,t.context.$implicit.formatted.variance),n(t,40,0,l["\u0275unv"](t,40,0,l["\u0275nov"](t,41).transform(e.i18n+"sidebar.field.category.label"))),n(t,43,0,t.context.$implicit.category)}))}function pn(n){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{charts:1}),(n()(),l["\u0275eld"](1,0,null,null,0,"button",[["class","sidebar-toggle"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onToggle()&&l),l}),null,null)),(n()(),l["\u0275eld"](2,0,null,null,5,"div",[["class","sidebar-inner"]],null,null,null,null,null)),(n()(),l["\u0275and"](16777216,null,null,1,null,sn)),l["\u0275did"](4,16384,null,0,O.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275eld"](5,0,null,null,2,"div",[["class","sidebar-body"]],null,null,null,null,null)),(n()(),l["\u0275and"](16777216,null,null,1,null,dn)),l["\u0275did"](7,278528,null,0,O.l,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(n,t){var e=t.component;n(t,4,0,e.measures),n(t,7,0,e.measures)}),null)}var gn=e("fFD9"),mn=e("wd/R"),hn=e("zZFd"),fn=e("W+wd"),bn=e("VHTt"),Cn=function(n){return n.Best="most",n.Worst="worst",n}({}),xn=e("NAMS");class vn{constructor(n,t,e,l){this.filterData=n,this.dataService=t,this.exportService=e,this.dataApi=l,this.i18n=o,this.storesRankType=Cn.Best,this.storesRankTabs=[Cn.Best,Cn.Worst],this.commentType=xn.a.Kpi,this.isCommentsView=!1,this.showWholeTable=!1,this.subs=[]}set sub(n){this.subs.push(n)}ngOnInit(){this.dataService.init(),this.filterData.setCurrentPage(fn.d.Summary),this.filterData.showFilters(["category","kpiType","group","date","period"]),this.initStreams(),this.initSubscriptions()}ngOnDestroy(){this.dataService.destroy(),this.subs.forEach(n=>n.unsubscribe())}toggleCommentsView(){this.isCommentsView=!this.isCommentsView}toggleTable(){this.showWholeTable=!this.showWholeTable}changeStoresRankType(n){this.storesRankType=n}exportDataAs(n){const t=this.filterData.getFiltersListItems();switch(n){case bn.a.PDF:this.exportService.asPdf(this.measures,this.chartsToDataUrls(),t);break;case bn.a.XLS:this.exportService.asXls(this.measures,this.chartsToDataUrls(),t)}}initStreams(){}getReportSection(n){switch(this.measure.category){case"Docs":return hn.a.Docs;case"Operations":return hn.a.Operations;case"Schedules":return hn.a.Schedules}}initSubscriptions(){this.sub=this.filterData.selectedMeasure$.subscribe(n=>{this.measure=n;const t=this.getReportSection(n);t?this.dataApi.getLastRefreshedTime({reportSection:t}).subscribe(n=>{if(n&&n.UpdatedTime){const t=mn.utc(n.UpdatedTime,"YYYY-MM-DD hh:mm");this.lastRefreshed=t.local().format("MMM DD YYYY hh:mm A")}else this.lastRefreshed=null}):this.lastRefreshed=null}),this.sub=this.filterData.measures$.subscribe(n=>{this.measures=n}),this.sub=this.dataService.loading$.pipe(Object(gn.a)(this.exportService.loading$,(n,t)=>n||t)).subscribe(n=>{this.loading=n})}chartsToDataUrls(){const n=new Map;for(const t of this.measures){const e=this.sidebar.charts.find(n=>+n.config.entityId==+t.kpiIndex),l=e?e.getAsDataUrl():null;n.set(t,l)}return n}}var yn=e("2Vo4"),On=e("vkgz"),kn=e("BTBr");class Pn{constructor(n,t,e,l,o){this.filterData=n,this.dataApi=t,this.tracking=e,this.sortingMeasures=l,this.formatter=o,this._loading$=new yn.a(void 0),this.subs=[],this.initInternal()}set sub(n){this.subs.push(n)}destroy(){this.subs.forEach(n=>n.unsubscribe()),this.subs=[]}init(){this.initSubscriptions()}initInternal(){this.loading$=this._loading$.pipe(Object(gn.a)(this.sortingMeasures.spinner$,(n,t)=>n||t))}initSubscriptions(){this.sub=this.filterData.change$.pipe(Object(On.a)(()=>this._loading$.next(!0))).subscribe(n=>{this.dataApi.getSummary(n).subscribe(t=>{for(const e of t){const t={data:[],labels:["","","","","",""],colors:[],tooltip:{titles:[],labels:[]},yAxes:{display:!1},xAxes:{display:!1},entityId:e.kpiIndex},l={"-1":"strong-red",0:"yellow",1:"green"};for(const n of e.trends)t.data.push(+n.value[0]),t.colors.push(l[String(n.color)]||"yellow"),t.tooltip.titles.push(n.hover_pre+", "+this.getFormattedValue(n.value));e.graph=t,e.isProjected=!!+e.is_proj,e.periodType=n.period.toLowerCase(),e.isEXpense="-1"===e.kpiComp;const o=e.detail.find(n=>1===n.type),a=o&&o.data[1]["Budget amount"],i=a[0]||0;e.varianceAmount=[0==+i?0:e.current[0]-i,e.current[1]],e.formatted={value:this.getFormattedValue(e.current),variancePer:this.getFormattedValue(e.variance.value),variance:this.getFormattedValue(e.varianceAmount),budget:this.getFormattedValue(a)};const r=0==+i?0:(e.isProjected?e.current[0]:e.current_actual[0])/i;e.progressBar={value:r,percentage:100*r/2,format:"per"},e.storesRankData={};const s=e.detail.find(n=>2===n.type);if(s&&s.data)for(const n of[Cn.Best,Cn.Worst])e.storesRankData[n]=s.data[n].data.map(n=>({id:n.id,rankGrowth:n.color,name:n.title,total:this.getFormattedValue(n.value),goal:this.formatter.percentage(n.delta[0])}));const u=e.detail.find(n=>3===n.type);if(u){const n={data:[],labels:[],tooltip:{titles:[]}};for(const t of u.data)n.labels.push(t.xaxis),n.tooltip.titles.push(t.hover_pre+", "+this.getFormattedValue(t.value)),n.data.push(+t.value[0]);e.bottomBar={title:-1!==[fn.a.Schedules,fn.a.Operarions].indexOf(e.section_id)?u.title.split("(")[0]:u.title,graph:n}}}this.filterData.setMeasures(t),this._loading$.next(!1),this.trackAction()})})}trackAction(){this.tracking.log({page:kn.b.Kpi,section:kn.c.Summary,event:kn.a.Load,params:this.filterData.getFiltersListItems()})}getFormattedValue(n){let t;switch(n[1]){case"$":t=this.formatter.abbrMoney(n[0],{K:1,M:1});break;case"%":t=this.formatter.percentage(String(n[0]/100));break;default:t=this.formatter.number(n[0],{fractional:0})}return t}}var wn=e("LvDl");class Mn{constructor(n,t,e,l,o,a){this.pdf=n,this.excel=t,this.formatter=e,this.api=l,this.tracking=o,this.translate=a,this._loading$=new yn.a(void 0),this.loading$=this._loading$.asObservable()}asPdf(n,t,e){const l=mn().format("MM/DD/YYYY");this._loading$.next(!0);const a=n=>5*n;this.api.loadImagesAsDataUrl({logo:"/assets/img/logo.png",dashboard:"/assets/img/cdk.png"}).pipe(Object(gn.a)(this.translate.get(["export.file-name","export.pdf.title","export.pdf.alert-date.label","export.pdf.page.label","export.pdf.page.of.label","export.pdf.footer.description","export.column.measures.label","export.column.trends.label","export.column.value.label","export.column.variance-per.label","export.column.variance.label","export.column.category.label"].map(n=>o+n)))).subscribe(([{logo:i,dashboard:r},s])=>{const u=n.map(n=>{const e=this.getColor(n.variance.color),l=t.get(n);return[{alignment:"left",stack:[{text:n.description+(n.isProjected?"**":""),bold:!1},{text:n.name}]},l?{image:l,fit:[a(28),a(15)]}:"",{text:n.formatted.value,margin:[0,a(2),0,0]},{table:{widths:[a(10)],body:[[n.formatted.variancePer]]},layout:{vLineWidth:()=>1,hLineWidth:n=>n?5:1,hLineColor:()=>e,vLineColor:()=>e,paddingLeft:()=>a(8),paddingRight:()=>a(8),paddingTop:()=>a(2),paddingBottom:()=>a(2)}},{table:{widths:[a(10)],body:[[n.formatted.variance]]},layout:{vLineWidth:()=>1,hLineWidth:n=>n?5:1,hLineColor:()=>e,vLineColor:()=>e,paddingLeft:()=>a(8),paddingRight:()=>a(8),paddingTop:()=>a(2),paddingBottom:()=>a(2)}},{text:n.category,margin:[0,a(2),0,0]}]}),c=[{style:[{fontSize:16,bold:!0,alignment:"center"}],table:{dontBreakRows:!0,headerRows:1,widths:["24%","15%","15%","18%","18%","10%"],body:[[{style:["header"],text:s[o+"export.column.measures.label"]},{style:["header"],text:s[o+"export.column.trends.label"]},{style:["header"],text:s[o+"export.column.value.label"]},{style:["header"],text:s[o+"export.column.variance-per.label"]},{style:["header"],text:s[o+"export.column.variance.label"]},{style:["header"],text:s[o+"export.column.category.label"]}]].concat(u)},layout:{vLineWidth:()=>0,hLineWidth:()=>0,paddingLeft:()=>0,paddingRight:()=>0,paddingTop:()=>a(2),paddingBottom:()=>a(2)}}],d={header:{fontSize:18,margin:[0,0,0,a(3)]}},p=[a(10),a(35),a(10),a(15)],g={width:a(210),height:a(297)};this.pdf.generate({header:(n,t)=>[{margin:[a(10),a(10),a(10),a(2)],table:{widths:["33.333%","*","33.333%"],body:[[{image:i,fit:[a(60),a(50)]},{text:s[o+"export.pdf.title"],fontSize:28,alignment:"center"},[{image:r,fit:[a(60),a(50)],alignment:"right"},{text:"https://execeye.dashboardonline.com",margin:[0,a(2),0,0],alignment:"right"}]],[{margin:[0,a(1),0,a(1)],colSpan:3,columns:[{text:s[o+"export.pdf.alert-date.label"]+": "+l,width:"15%"},...e.map(n=>({text:`${n.label}: ${n.value}`,alignment:"center",width:"15%"})),{text:`${s[o+"export.pdf.page.label"]} ${n} ${s[o+"export.pdf.page.of.label"]} ${t}`,alignment:"right",width:"10%"}]}]]},layout:{hLineWidth:(n,t)=>n===t.table.body.length?2:0,vLineWidth:()=>0,paddingLeft:()=>0,paddingRight:()=>0}}],footer:(n,t,e)=>[{margin:[a(10),a(2),a(10),a(10)],table:{widths:["50%","*"],body:[[{text:s[o+"export.pdf.footer.description"],alignment:"left"},{text:`${s[o+"export.pdf.page.label"]} ${n} ${s[o+"export.pdf.page.of.label"]} ${t}`,alignment:"right"}]]},layout:{hLineWidth:(n,t)=>0===n?2:0,vLineWidth:()=>0,paddingTop:()=>a(2),paddingLeft:()=>0,paddingRight:()=>0}}],content:c,styles:d,pageMargins:p,pageSize:g},s[o+"export.file-name"]+" "+l,()=>{this._loading$.next(!1),this.tracking.log({page:kn.b.Kpi,section:kn.c.Summary,event:kn.a.ExportPdf,params:e})})})}asXls(n,t,e){this._loading$.next(!0),this.translate.get(["export.file-name","export.column.measures.label","export.column.trends.label","export.column.value.label","export.column.variance-per.label","export.column.variance.label","export.column.category.label"].map(n=>o+n)).subscribe(t=>{const l={header:{alignment:{horizontal:"center"},font:{bold:!0,name:"Verdana",sz:12,color:{rgb:"000000"}},border:{top:{style:"thin",color:{rgb:"000000"}},bottom:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}}}},data:{alignment:{horizontal:"center"},font:{bold:!1,name:"Verdana",sz:12,color:{rgb:"000000"}},border:{top:{style:"thin",color:{rgb:"000000"}},bottom:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}}}}},a=n=>{let t=isNaN(+n[0])?0:+n[0];const e={s:wn.cloneDeep(l.data),t:"n"};return"$"===n[1]?e.s.numFmt="$#,##0.00":"%"===n[1]&&(e.s.numFmt="#,##0.00%",t/=100),e.v=t,t<0&&(e.s.font.color.rgb="de3918"),e},i=[{v:t[o+"export.column.measures.label"],s:l.header},{v:t[o+"export.column.value.label"],s:l.header},{v:t[o+"export.column.variance-per.label"],s:l.header},{v:t[o+"export.column.variance.label"],s:l.header},{v:t[o+"export.column.category.label"],s:l.header}],r=n.map(n=>[{v:n.description+" - "+n.name,s:Object.assign({},l.data,{alignment:"left"})},a(n.current),a(n.variance.value),a(n.varianceAmount),{v:n.category,s:l.data}]),s={sheetA:{data:{styles:{columns:{0:{alignment:{horizontal:"left"}}}},rows:[...e.map(n=>[`${n.label}: ${n.value}`]),[],i,...r]},"!cols":[{wpx:320},{wpx:100},{wpx:100},{wpx:100}]}};this.excel.generate(s,{},t[o+"export.file-name"]+" "+mn().format("MM/DD/YYYY")),this._loading$.next(!1),this.tracking.log({page:kn.b.Kpi,section:kn.c.Summary,event:kn.a.ExportXls,params:e})})}getColor(n){const t={"-1":"#CC0000",0:"#F0B213",1:"#1E8700"};return t[String(n)]||t[0]}}var _n=e("V3/g"),Rn=l["\u0275crt"]({encapsulation:0,styles:[[".grid-wrapper[_ngcontent-%COMP%]{width:100%;flex:1 1 100%;height:100%;max-width:100%;background-color:#fff;box-shadow:2px 2px 5px 1px #c1bebe}.top-controls-block[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:space-between}.top-controls-block-left[_ngcontent-%COMP%]{width:calc(100% - 160px);flex:1 1 calc(100% - 160px);padding:20px 20px 10px;display:flex;align-items:center}.top-controls-block-right[_ngcontent-%COMP%]{width:160px;flex:1 0 160px;padding:20px 20px 10px;display:flex;align-items:center;justify-content:flex-end}.top-controls-block-heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#404040;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.filters-block[_ngcontent-%COMP%]{height:70px;padding:10px 20px 20px}.grid-block[_ngcontent-%COMP%]{display:flex;height:calc(100% - 60px - 70px)}.grid-block-content[_ngcontent-%COMP%]{width:calc(100% - 40px);flex:1 0 calc(100% - 40px);position:relative}.grid-block-content[_ngcontent-%COMP%]   app-default-grid[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;will-change:auto;transition:all .5s ease;transform:translate3d(0,0,0)}.grid-block-sidebar[_ngcontent-%COMP%]{width:40px;flex:0 0 40px;border-left:1px solid #ddd}.grid-block-more-info-trigger[_ngcontent-%COMP%]{display:block;height:60px;cursor:pointer;position:relative}.grid-block-more-info-trigger[_ngcontent-%COMP%]:before{content:'\\E5D4';font-family:\"Material Icons\";font-size:24px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.grid-block-more-info-trigger.opened[_ngcontent-%COMP%]:before{content:'\\E5D3'}.top-control-btn[_ngcontent-%COMP%]{color:#5b5b5b;cursor:pointer;margin-left:20px;margin-top:-2px;display:inline-block}.top-control-label[_ngcontent-%COMP%]{color:#747474;font-size:14px;margin-left:10px}.mat-checked[_ngcontent-%COMP%]   .top-control-label[_ngcontent-%COMP%]{color:#2196f3}.tabs-block[_ngcontent-%COMP%]{height:60px;padding:10px 20px 16px}.tab[_ngcontent-%COMP%]{display:inline-block;height:34px;line-height:34px;border-radius:17px;padding-left:15px;padding-right:15px;color:#404040;font-size:14px;font-weight:500;background-color:#e5e5e5;cursor:pointer}.tab.active[_ngcontent-%COMP%], .tab[_ngcontent-%COMP%]:hover{color:#3498db;background-color:#e2eff8}.tab[_ngcontent-%COMP%]:not(:last-child){margin-right:15px}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 0 10px;height:45px}.modal-header-right[_ngcontent-%COMP%]   .top-control-btn[_ngcontent-%COMP%]:last-child{margin-right:-4px}.modal-header.with-outer-padding-overwrite[_ngcontent-%COMP%]{margin-top:-19px;margin-left:-19px;margin-right:-19px;padding:10px 20px}.modal-header.with-padding[_ngcontent-%COMP%]{padding:10px 20px}.modal-body[_ngcontent-%COMP%]{height:calc(100% - 45px);position:relative}.modal-body.with-footer[_ngcontent-%COMP%]{height:calc(100% - 45px - 50px)}.modal-body.full-height[_ngcontent-%COMP%]{height:100%}.modal-body.with-min-size[_ngcontent-%COMP%]{min-width:850px;min-height:300px;margin-left:-19px;margin-right:-19px}.modal-body.with-outer-padding-overwrite[_ngcontent-%COMP%]{margin-left:-19px;margin-right:-19px;margin-bottom:-19px}.modal-body[_ngcontent-%COMP%]   app-default-grid[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0}.modal-footer[_ngcontent-%COMP%]{height:50px;display:flex;align-items:center;justify-content:flex-end;background:#eee;margin:0 -19px -19px;padding:0 19px}.modal-footer-text[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#404040;padding-right:15px}.modal-footer-text.last[_ngcontent-%COMP%]{padding-left:15px;padding-right:0}.modal-footer-text.last[_ngcontent-%COMP%]:before{content:'|';position:relative;left:-13px}.modal-heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.fi-list[_ngcontent-%COMP%]{display:flex;margin:25px 0;padding:15px 0;border-bottom:1px solid #ddd}.fi-list.single[_ngcontent-%COMP%]{padding:5px 0;margin:0;border-bottom:0}.fi-list-item[_ngcontent-%COMP%]{width:33%;flex:0 0 33%;padding:0 5px}.single[_ngcontent-%COMP%]   .fi-list-item[_ngcontent-%COMP%]:nth-of-type(1){padding-left:0}.single[_ngcontent-%COMP%]   .fi-list-item[_ngcontent-%COMP%]:nth-of-type(3){padding-right:0}.penetration-list.horizontal[_ngcontent-%COMP%]{display:flex;align-items:center}.penetration-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin:25px 0;padding:15px 0 30px;border-bottom:1px solid #ddd}.horizontal[_ngcontent-%COMP%]   .penetration-item[_ngcontent-%COMP%]{width:50%;flex:0 0 50%;padding:10px 15px 10px 0;margin:0;border-bottom:none}.penetration-title[_ngcontent-%COMP%]{width:30%;flex:0 0 30%;font-size:14px;color:#404040;padding-right:5px;overflow:hidden;text-overflow:ellipsis}.penetration-graph[_ngcontent-%COMP%]{width:50%;flex:0 0 50%;padding:0 5px}.penetration-rank[_ngcontent-%COMP%]{width:20%;flex:0 0 20%;padding:0 5px;text-align:center}.chargeback[_ngcontent-%COMP%]{text-align:center;margin:50px 0 30px}.chargeback[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{margin:0 0 5px;font-size:20px;font-weight:600}.chargeback-value[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#404040}.control-btn-settings[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;position:relative;cursor:pointer}.control-btn-settings[_ngcontent-%COMP%]:before{content:'\\e8b8';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#5b5b5b;font-size:24px;font-family:\"Material Icons\"}.drill-info[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;list-style:none;padding:0;margin:0}.drill-info-item[_ngcontent-%COMP%]{color:#404040;font-size:14px;margin-right:25px}.drill-info-label[_ngcontent-%COMP%]{font-weight:400}.drill-info-value[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]{display:flex;height:100%}.parent[_ngcontent-%COMP%]{display:flex;height:100%;width:100%}.timestamp[_ngcontent-%COMP%]{font-size:12px;position:absolute;left:20px;bottom:0}[_nghost-%COMP%]     .parent .loader--overlay{position:absolute;transform:translate(-50%,-50%);width:calc(100% - 255px);height:calc(100% - 241px);left:255px;top:241px;transform:none}[_nghost-%COMP%]     .parent .loader--overlay.c__loader{left:10%}.kpi-summary[_ngcontent-%COMP%]{width:340px;flex:1 1 340px;height:100%;background-color:#fff;box-shadow:2px 2px 5px 1px #c1bebe;position:relative}.kpi-summary-header[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:space-between;border-bottom:1px solid #ddd;padding:15px 20px;position:relative}.kpi-summary-body[_ngcontent-%COMP%]{height:calc(100% - 60px)}.kpi-summary-body-top[_ngcontent-%COMP%]{height:60%;display:flex;border-bottom:1px solid #ddd;transition:height .5s ease}.kpi-summary-body-top-left[_ngcontent-%COMP%]{width:45%;flex:0 0 45%;overflow:auto}.kpi-summary-body-top-right[_ngcontent-%COMP%]{width:55%;flex:0 0 55%;border-left:1px solid #ddd}.show-whole-table[_ngcontent-%COMP%]   .kpi-summary-body-top[_ngcontent-%COMP%]{height:100%}.kpi-summary-body-bottom[_ngcontent-%COMP%]{height:40%;transition:height .5s ease,opacity .5s ease;opacity:1}.show-whole-table[_ngcontent-%COMP%]   .kpi-summary-body-bottom[_ngcontent-%COMP%]{height:0;opacity:0}.kpi-summary-body-bottom-header[_ngcontent-%COMP%]{height:40px;padding:10px 15px 5px}.kpi-summary-body-bottom-chart[_ngcontent-%COMP%]{height:calc(100% - 40px);padding-left:5px;overflow:auto}.kpi-summary-heading[_ngcontent-%COMP%]{width:calc(100% - 160px);flex:1 1 calc(100% - 160px);font-size:24px;font-weight:500;color:#404040;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.kpi-summary-top-controls[_ngcontent-%COMP%]{width:160px;flex:1 0 160px;text-align:right}.kpi-summary-label[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#404040;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.kpi-summary-info-block[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px 0 10px;min-width:230px}.kpi-summary-info-block-col[_ngcontent-%COMP%]{width:auto;flex:0 0 auto;text-align:center}.kpi-summary-info-block-col[_ngcontent-%COMP%]:nth-of-type(1){padding-left:20px;padding-right:5px}.kpi-summary-info-block-col[_ngcontent-%COMP%]:nth-of-type(2){padding-left:5px;padding-right:5px}.kpi-summary-info-block-col[_ngcontent-%COMP%]:nth-of-type(3){padding-left:5px;padding-right:20px}.kpi-summary-info-block-name[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#404040;display:block}.kpi-summary-info-block-value[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#747474}.kpi-summary-info-block-value.highlighted[_ngcontent-%COMP%]{color:#3498db}.kpi-summary-progress-block[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 20px 20px;min-width:230px}.kpi-summary-progress-block-left[_ngcontent-%COMP%]{width:calc(100% - 30px);flex:0 0 calc(100% - 30px)}.kpi-summary-progress-block-right[_ngcontent-%COMP%]{width:30px;flex:0 0 30px;text-align:right;margin-top:5px}.kpi-summary-indicator[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border-radius:50%}.kpi-summary-indicator.positive[_ngcontent-%COMP%]{background-color:#1e8700}.kpi-summary-indicator.warning[_ngcontent-%COMP%]{background-color:#f3c118}.kpi-summary-indicator.negative[_ngcontent-%COMP%]{background-color:#c00}.kpi-summary-control[_ngcontent-%COMP%]{width:24px;height:24px;position:relative;cursor:pointer}.kpi-summary-control[_ngcontent-%COMP%]:not(:first-of-type){margin-left:15px}.kpi-summary-control[_ngcontent-%COMP%]:before{content:'';font-family:\"Material Icons\";font-size:24px;color:#747474;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.kpi-summary-control.get-app[_ngcontent-%COMP%]:before{content:'\\e884'}.kpi-summary-control.comment[_ngcontent-%COMP%]:before{content:'\\e0b9'}.stores[_ngcontent-%COMP%]{height:100%}.stores-header[_ngcontent-%COMP%]{height:50px;padding:10px 20px 6px}.stores-body[_ngcontent-%COMP%]{height:calc(100% - 100px);overflow:auto}.stores-footer[_ngcontent-%COMP%]{height:50px;padding:6px 20px;border-top:1px solid #ddd}.stores-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.stores-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}.stores-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .stores-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{height:50px;border-bottom:1px solid #ddd}.stores-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-of-type(1), .stores-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-of-type(1){width:10%;text-align:left;padding-left:20px;padding-right:10px}.stores-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-of-type(2), .stores-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-of-type(2){width:40%;text-align:left;padding-left:10px;padding-right:10px}.stores-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-of-type(3), .stores-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-of-type(3){width:25%;text-align:right;padding-left:10px;padding-right:10px}.stores-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-of-type(4), .stores-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-of-type(4){width:25%;text-align:right;padding-left:10px;padding-right:20px}.stores-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#747474}.stores-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#404040}.stores-table[_ngcontent-%COMP%]   app-growth-indicator[_ngcontent-%COMP%]{vertical-align:text-top}.mat-button[_ngcontent-%COMP%]{color:#3498db;text-transform:uppercase}.mat-button[_ngcontent-%COMP%]     .mat-button-wrapper{vertical-align:middle}"]],data:{}});function Sn(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"app-loader",[["type","overlay"]],[[8,"className",0]],null,null,x.b,x.a)),l["\u0275did"](1,49152,null,0,v.a,[],{type:[0,"type"]},null)],(function(n,t){n(t,1,0,"overlay")}),(function(n,t){n(t,0,0,l["\u0275nov"](t,1).cssClassByType)}))}function In(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),l["\u0275ted"](1,null,["",""])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef])],null,(function(n,t){var e=t.component;n(t,1,0,l["\u0275unv"](t,1,0,l["\u0275nov"](t,2).transform(e.i18n+"top-bar.projected.label")))}))}function Tn(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","timestamp"]],null,null,null,null,null)),(n()(),l["\u0275ted"](1,null,["Last updated: ",""]))],null,(function(n,t){n(t,1,0,t.component.lastRefreshed)}))}function Dn(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,12,"div",[["class","kpi-summary-header"]],null,null,null,null,null)),(n()(),l["\u0275eld"](1,0,null,null,3,"h3",[["class","kpi-summary-heading"]],null,null,null,null,null)),(n()(),l["\u0275ted"](2,null,[""," "])),(n()(),l["\u0275and"](16777216,null,null,1,null,In)),l["\u0275did"](4,16384,null,0,O.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275eld"](5,0,null,null,5,"div",[["class","kpi-summary-top-controls"]],null,null,null,null,null)),(n()(),l["\u0275eld"](6,0,null,null,1,"app-export-buttons",[],[[2,"small",null]],[[null,"dataExport"]],(function(n,t,e){var l=!0;return"dataExport"===t&&(l=!1!==n.component.exportDataAs(e)&&l),l}),k.b,k.a)),l["\u0275did"](7,114688,null,0,P.a,[w.a],{disabled:[0,"disabled"]},{dataExport:"dataExport"}),(n()(),l["\u0275eld"](8,0,null,null,2,"button",[["class","top-control-btn"]],[[8,"disabled",0]],[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.toggleCommentsView()&&l),l}),null,null)),(n()(),l["\u0275eld"](9,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(n()(),l["\u0275ted"](-1,null,["comment"])),(n()(),l["\u0275and"](16777216,null,null,1,null,Tn)),l["\u0275did"](12,16384,null,0,O.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,t){var e=t.component;n(t,4,0,e.measure.isProjected),n(t,7,0,e.loading),n(t,12,0,e.lastRefreshed)}),(function(n,t){var e=t.component;n(t,2,0,e.measure.name),n(t,6,0,l["\u0275nov"](t,7).small),n(t,8,0,e.loading)}))}function An(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,2,"span",[["class","tab"]],[[2,"active",null]],[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.changeStoresRankType(n.context.$implicit)&&l),l}),null,null)),(n()(),l["\u0275ted"](1,null,["",""])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef])],null,(function(n,t){var e=t.component;n(t,0,0,t.context.$implicit===e.storesRankType),n(t,1,0,l["\u0275unv"](t,1,0,l["\u0275nov"](t,2).transform(e.i18n+"stores-table.tab."+t.context.$implicit+".label")))}))}function jn(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,10,"tr",[],null,null,null,null,null)),(n()(),l["\u0275eld"](1,0,null,null,3,"td",[],null,null,null,null,null)),(n()(),l["\u0275ted"](2,null,[" "," "])),(n()(),l["\u0275eld"](3,0,null,null,1,"app-growth-indicator",[],[[2,"positive",null],[2,"warning",null],[2,"negative",null]],null,null,M.b,M.a)),l["\u0275did"](4,49152,null,0,_.a,[],{value:[0,"value"]},null),(n()(),l["\u0275eld"](5,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),l["\u0275ted"](6,null,["",""])),(n()(),l["\u0275eld"](7,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),l["\u0275ted"](8,null,["",""])),(n()(),l["\u0275eld"](9,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),l["\u0275ted"](10,null,["",""]))],(function(n,t){n(t,4,0,t.context.$implicit.rankGrowth)}),(function(n,t){n(t,2,0,t.context.$implicit.id),n(t,3,0,l["\u0275nov"](t,4).positiveClass,l["\u0275nov"](t,4).warningClass,l["\u0275nov"](t,4).negativeClass),n(t,6,0,t.context.$implicit.name),n(t,8,0,t.context.$implicit.total),n(t,10,0,t.context.$implicit.goal)}))}function Fn(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","kpi-summary-body-bottom"]],null,null,null,null,null)),(n()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","kpi-summary-body-bottom-header"]],null,null,null,null,null)),(n()(),l["\u0275eld"](2,0,null,null,1,"h4",[["class","kpi-summary-label"]],null,null,null,null,null)),(n()(),l["\u0275ted"](3,null,["",""])),(n()(),l["\u0275eld"](4,0,null,null,2,"div",[["class","kpi-summary-body-bottom-chart"]],null,null,null,null,null)),(n()(),l["\u0275eld"](5,0,null,null,1,"app-line-chart",[],null,null,null,R.b,R.a)),l["\u0275did"](6,638976,null,0,S.a,[l.ElementRef,I.a],{config:[0,"config"]},null)],(function(n,t){n(t,6,0,t.context.ngIf.graph)}),(function(n,t){n(t,3,0,t.context.ngIf.title)}))}function Vn(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,60,"div",[["class","kpi-summary-body"]],[[2,"show-whole-table",null]],null,null,null,null)),(n()(),l["\u0275eld"](1,0,null,null,57,"div",[["class","kpi-summary-body-top"]],null,null,null,null,null)),(n()(),l["\u0275eld"](2,0,null,null,29,"div",[["class","kpi-summary-body-top-left"]],null,null,null,null,null)),(n()(),l["\u0275eld"](3,0,null,null,24,"div",[["class","kpi-summary-info-block"]],null,null,null,null,null)),(n()(),l["\u0275eld"](4,0,null,null,5,"div",[["class","kpi-summary-info-block-col"]],null,null,null,null,null)),(n()(),l["\u0275eld"](5,0,null,null,2,"span",[["class","kpi-summary-info-block-name"]],null,null,null,null,null)),(n()(),l["\u0275ted"](6,null,["",""])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef]),(n()(),l["\u0275eld"](8,0,null,null,1,"span",[["class","kpi-summary-info-block-value"]],null,null,null,null,null)),(n()(),l["\u0275ted"](9,null,["",""])),(n()(),l["\u0275eld"](10,0,null,null,5,"div",[["class","kpi-summary-info-block-col"]],null,null,null,null,null)),(n()(),l["\u0275eld"](11,0,null,null,2,"span",[["class","kpi-summary-info-block-name"]],null,null,null,null,null)),(n()(),l["\u0275ted"](12,null,["",""])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef]),(n()(),l["\u0275eld"](14,0,null,null,1,"span",[["class","kpi-summary-info-block-value highlighted"]],null,null,null,null,null)),(n()(),l["\u0275ted"](15,null,["",""])),(n()(),l["\u0275eld"](16,0,null,null,11,"div",[["class","kpi-summary-info-block-col"]],null,null,null,null,null)),(n()(),l["\u0275eld"](17,16777216,null,null,3,"span",[["class","kpi-summary-info-block-name"],["style","cursor: pointer"],["tooltipTheme","dark-auto"]],null,[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],(function(n,t,e){var o=!0;return"focusin"===t&&(o=!1!==l["\u0275nov"](n,18).show()&&o),"mouseenter"===t&&(o=!1!==l["\u0275nov"](n,18).show()&&o),"focusout"===t&&(o=!1!==l["\u0275nov"](n,18).hide()&&o),"mouseleave"===t&&(o=!1!==l["\u0275nov"](n,18).hide()&&o),o}),null,null)),l["\u0275did"](18,147456,null,0,T.a,[l.ViewContainerRef,l.ComponentFactoryResolver,l.ChangeDetectorRef,D.b],{content:[0,"content"],tooltipTheme:[1,"tooltipTheme"]},null),(n()(),l["\u0275ted"](19,null,["",""])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef]),(n()(),l["\u0275eld"](21,0,null,null,1,"span",[["class","kpi-summary-info-block-value"]],null,null,null,null,null)),(n()(),l["\u0275ted"](22,null,[""," "])),(n()(),l["\u0275eld"](23,0,null,null,4,"app-tooltip-content",[["style","width:150px"]],[[1,"role",0],[8,"className",0],[2,"tooltip--with-header",null],[4,"top","px"],[4,"left","px"],[2,"in",null],[2,"fade",null]],[[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],(function(n,t,e){var o=!0;return"focusin"===t&&(o=!1!==l["\u0275nov"](n,25).mouseIn()&&o),"mouseenter"===t&&(o=!1!==l["\u0275nov"](n,25).mouseIn()&&o),"focusout"===t&&(o=!1!==l["\u0275nov"](n,25).mouseOut()&&o),"mouseleave"===t&&(o=!1!==l["\u0275nov"](n,25).mouseOut()&&o),o}),s.c,s.a)),l["\u0275prd"](512,null,A.a,A.a,[D.b]),l["\u0275did"](25,4440064,[["tooltipVar",4]],0,j.a,[l.ElementRef,A.a,F.a,O.d,l.Renderer2,l.ChangeDetectorRef,D.b],null,null),(n()(),l["\u0275ted"](26,1,[" "," "])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef]),(n()(),l["\u0275eld"](28,0,null,null,3,"div",[["class","kpi-summary-progress-block"]],null,null,null,null,null)),(n()(),l["\u0275eld"](29,0,null,null,2,"div",[["class","kpi-summary-progress-block-left"]],null,null,null,null,null)),(n()(),l["\u0275eld"](30,0,null,null,1,"app-bullet-progress-bar",[],[[2,"theme-default",null],[2,"theme-small",null]],null,null,V.b,V.a)),l["\u0275did"](31,638976,null,0,$.a,[D.b],{data:[0,"data"],scale:[1,"scale"]},null),(n()(),l["\u0275eld"](32,0,null,null,26,"div",[["class","kpi-summary-body-top-right"]],null,null,null,null,null)),(n()(),l["\u0275eld"](33,0,null,null,25,"div",[["class","stores"]],null,null,null,null,null)),(n()(),l["\u0275eld"](34,0,null,null,2,"div",[["class","stores-header"]],null,null,null,null,null)),(n()(),l["\u0275and"](16777216,null,null,1,null,An)),l["\u0275did"](36,278528,null,0,O.l,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),l["\u0275eld"](37,0,null,null,16,"div",[["class","stores-body"]],null,null,null,null,null)),(n()(),l["\u0275eld"](38,0,null,null,15,"table",[["class","stores-table"]],null,null,null,null,null)),(n()(),l["\u0275eld"](39,0,null,null,12,"tr",[],null,null,null,null,null)),(n()(),l["\u0275eld"](40,0,null,null,2,"th",[],null,null,null,null,null)),(n()(),l["\u0275ted"](41,null,["",""])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef]),(n()(),l["\u0275eld"](43,0,null,null,2,"th",[],null,null,null,null,null)),(n()(),l["\u0275ted"](44,null,["",""])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef]),(n()(),l["\u0275eld"](46,0,null,null,2,"th",[],null,null,null,null,null)),(n()(),l["\u0275ted"](47,null,["",""])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef]),(n()(),l["\u0275eld"](49,0,null,null,2,"th",[],null,null,null,null,null)),(n()(),l["\u0275ted"](50,null,["",""])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef]),(n()(),l["\u0275and"](16777216,null,null,1,null,jn)),l["\u0275did"](53,278528,null,0,O.l,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),l["\u0275eld"](54,0,null,null,4,"div",[["class","stores-footer"]],null,null,null,null,null)),(n()(),l["\u0275eld"](55,0,null,null,3,"button",[["mat-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.toggleTable()&&l),l}),E.b,E.a)),l["\u0275did"](56,180224,null,0,z.b,[l.ElementRef,N.h,[2,U.a]],null,null),(n()(),l["\u0275ted"](57,0,["",""])),l["\u0275pid"](131072,y.i,[y.j,l.ChangeDetectorRef]),(n()(),l["\u0275and"](16777216,null,null,1,null,Fn)),l["\u0275did"](60,16384,null,0,O.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,t){var e=t.component;n(t,18,0,l["\u0275nov"](t,25),"dark-auto"),n(t,25,0),n(t,31,0,e.measure.progressBar,!0),n(t,36,0,e.storesRankTabs),n(t,53,0,e.measure.storesRankData[e.storesRankType]),n(t,60,0,e.measure.bottomBar)}),(function(n,t){var e=t.component;n(t,0,0,e.showWholeTable),n(t,6,0,l["\u0275unv"](t,6,0,l["\u0275nov"](t,7).transform(e.i18n+"top-bar."+e.measure.periodType+".label"))),n(t,9,0,e.measure.formatted.value),n(t,12,0,l["\u0275unv"](t,12,0,l["\u0275nov"](t,13).transform(e.i18n+"top-bar.goal.label"))),n(t,15,0,e.measure.formatted.budget),n(t,19,0,l["\u0275unv"](t,19,0,l["\u0275nov"](t,20).transform(e.i18n+"top-bar.deal.label"))),n(t,22,0,e.measure.formatted.variancePer),n(t,23,0,l["\u0275nov"](t,25).role,l["\u0275nov"](t,25).hostClass,l["\u0275nov"](t,25).withHeader,l["\u0275nov"](t,25).top,l["\u0275nov"](t,25).left,l["\u0275nov"](t,25).isIn,l["\u0275nov"](t,25).isFade),n(t,26,0,l["\u0275unv"](t,26,0,l["\u0275nov"](t,27).transform(e.i18n+"top-bar.deal.label.explanation"))),n(t,30,0,l["\u0275nov"](t,31).themeDefault,l["\u0275nov"](t,31).themeSmall),n(t,41,0,l["\u0275unv"](t,41,0,l["\u0275nov"](t,42).transform(e.i18n+"stores-table.column.rank.label"))),n(t,44,0,l["\u0275unv"](t,44,0,l["\u0275nov"](t,45).transform(e.i18n+"stores-table.column.store.label"))),n(t,47,0,l["\u0275unv"](t,47,0,l["\u0275nov"](t,48).transform(e.i18n+"stores-table.column.total.label"))),n(t,50,0,l["\u0275unv"](t,50,0,l["\u0275nov"](t,51).transform(e.i18n+"stores-table.column.goal.label"))),n(t,55,0,l["\u0275nov"](t,56).disabled||null,"NoopAnimations"===l["\u0275nov"](t,56)._animationMode),n(t,57,0,l["\u0275unv"](t,57,0,l["\u0275nov"](t,58).transform(e.i18n+(e.showWholeTable?"stores-table.collapse.label":"stores-table.expand.label"))))}))}function $n(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"app-comments",[],[[8,"className",0]],[[null,"commentsClose"]],(function(n,t,e){var l=!0;return"commentsClose"===t&&(l=!1!==n.component.toggleCommentsView()&&l),l}),L.b,L.a)),l["\u0275did"](1,4964352,null,0,B.a,[Y.a,W.a,X.a,l.ChangeDetectorRef,D.b],{type:[0,"type"],subType:[1,"subType"]},{commentsClose:"commentsClose"})],(function(n,t){var e=t.component;n(t,1,0,e.commentType,null==e.measure?null:e.measure.kpiIndex)}),(function(n,t){n(t,0,0,l["\u0275nov"](t,1).hostClass)}))}function En(n){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{sidebar:0}),(n()(),l["\u0275eld"](1,0,null,null,9,"div",[["class","parent"]],null,null,null,null,null)),(n()(),l["\u0275and"](16777216,null,null,1,null,Sn)),l["\u0275did"](3,16384,null,0,O.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275eld"](4,0,null,null,1,"app-sidebar",[],[[2,"opened",null]],null,null,pn,rn)),l["\u0275did"](5,245760,[[1,4]],0,en,[ln.o,ln.a,on.e,w.a,an.a],{measures:[0,"measures"],selectedKpi:[1,"selectedKpi"]},null),(n()(),l["\u0275eld"](6,0,null,null,4,"div",[["class","kpi-summary"]],null,null,null,null,null)),(n()(),l["\u0275and"](16777216,null,null,1,null,Dn)),l["\u0275did"](8,16384,null,0,O.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275and"](16777216,null,null,1,null,Vn)),l["\u0275did"](10,16384,null,0,O.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),l["\u0275and"](16777216,null,null,1,null,$n)),l["\u0275did"](12,16384,null,0,O.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,t){var e=t.component;n(t,3,0,e.loading),n(t,5,0,e.measures,null==e.measure?null:e.measure.kpiIndex),n(t,8,0,e.measure),n(t,10,0,e.measure),n(t,12,0,e.isCommentsView)}),(function(n,t){n(t,4,0,l["\u0275nov"](t,5).isOpened)}))}function zn(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,En,Rn)),l["\u0275did"](1,245760,null,0,vn,[an.a,Pn,Mn,_n.a],null,null)],(function(n,t){n(t,1,0)}),null)}var Nn=l["\u0275ccf"]("ng-component",vn,zn,{},{},[]),Un=e("POq0"),Ln=e("Xd0L"),Bn=e("s7LF"),Yn=e("IheW"),Wn=e("5cj1"),Xn=e("gavF"),Kn=e("4asF"),qn=e("JjoW"),Gn=e("821u"),Jn=e("TUN4"),Hn=e("SL3A"),Qn=e("h9HI"),Zn=e("Qq/Z"),nt=e("S+vS"),tt=e("zm+G"),et=e("ChPW"),lt=e("zCXV"),ot=e("+bil"),at=e("mvzq"),it=e("zMNK"),rt=e("FFHx"),st=e("xSwO"),ut=e("81ID"),ct=e("oiVm"),dt=e("t5D1"),pt=e("iTUp"),gt=e("PyFA"),mt=e("aBBA"),ht=e("Cr+6"),ft=e("05KG"),bt=e("Ny1k"),Ct=e("LL2G"),xt=e("mpyQ"),vt=e("fRx+"),yt=e("HsOI"),Ot=e("oapL"),kt=e("ZwOa"),Pt=e("elxJ"),wt=e("pBi1"),Mt=e("3Pji"),_t=e("l0Bn"),Rt=e("kPC6"),St=e("SXLW"),It=e("tdaM"),Tt=e("0sx3"),Dt=e("VeTh");e.d(t,"SummaryModuleNgFactory",(function(){return At}));var At=l["\u0275cmf"](a,[],(function(n){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[i.a,r.a,s.b,u.a,c.a,d.a,p.b,p.a,g.a,m.a,h.a,f.a,b.a,C.a,Nn]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](4608,O.o,O.n,[l.LOCALE_ID,[2,O.F]]),l["\u0275mpd"](4608,Un.c,Un.c,[]),l["\u0275mpd"](4608,q.c,q.c,[q.i,q.e,l.ComponentFactoryResolver,q.h,q.f,l.Injector,l.NgZone,O.d,H.b,[2,O.i]]),l["\u0275mpd"](5120,q.j,q.k,[q.c]),l["\u0275mpd"](5120,K.b,K.c,[q.c]),l["\u0275mpd"](4608,Q.e,Ln.c,[[2,Ln.g],[2,Ln.l]]),l["\u0275mpd"](4608,Bn.f,Bn.f,[]),l["\u0275mpd"](4608,Bn.F,Bn.F,[]),l["\u0275mpd"](4608,Yn.n,Yn.n,[]),l["\u0275mpd"](6144,Yn.l,null,[Yn.n]),l["\u0275mpd"](4608,Yn.j,Yn.j,[Yn.l]),l["\u0275mpd"](6144,Yn.b,null,[Yn.j]),l["\u0275mpd"](4608,Yn.f,Yn.m,[Yn.b,l.Injector]),l["\u0275mpd"](4608,Yn.c,Yn.c,[Yn.f]),l["\u0275mpd"](4608,Wn.c,Wn.c,[Yn.c,Q.b]),l["\u0275mpd"](5120,Xn.c,Xn.j,[q.c]),l["\u0275mpd"](5120,on.c,on.d,[q.c]),l["\u0275mpd"](135680,on.e,on.e,[q.c,l.Injector,[2,O.i],[2,on.b],on.c,[3,on.e],q.e]),l["\u0275mpd"](4608,Kn.a,Kn.a,[on.e]),l["\u0275mpd"](4608,Wn.d,Wn.d,[]),l["\u0275mpd"](4608,Ln.b,Ln.b,[]),l["\u0275mpd"](5120,qn.a,qn.b,[q.c]),l["\u0275mpd"](4608,Gn.i,Gn.i,[]),l["\u0275mpd"](5120,Gn.a,Gn.b,[q.c]),l["\u0275mpd"](4608,Ln.a,Ln.v,[[2,Ln.f],J.a]),l["\u0275mpd"](4608,Yn.k,Yn.q,[O.d,l.PLATFORM_ID,Yn.o]),l["\u0275mpd"](4608,Yn.r,Yn.r,[Yn.k,Yn.p]),l["\u0275mpd"](5120,Yn.a,(function(n){return[n]}),[Yn.r]),l["\u0275mpd"](4608,Jn.a,Jn.a,[D.b]),l["\u0275mpd"](4608,Hn.a,Hn.a,[D.b]),l["\u0275mpd"](4608,Qn.a,Qn.a,[Hn.a,Zn.a,nt.a,D.b]),l["\u0275mpd"](4608,tt.a,tt.a,[Qn.a,D.b]),l["\u0275mpd"](4608,Pn,Pn,[an.a,_n.a,et.a,lt.a,I.a]),l["\u0275mpd"](4608,Mn,Mn,[ot.a,at.a,I.a,Zn.a,et.a,y.j]),l["\u0275mpd"](1073742336,O.c,O.c,[]),l["\u0275mpd"](1073742336,ln.s,ln.s,[[2,ln.x],[2,ln.o]]),l["\u0275mpd"](1073742336,H.a,H.a,[]),l["\u0275mpd"](1073742336,Ln.l,Ln.l,[[2,Ln.d],[2,Q.f]]),l["\u0275mpd"](1073742336,J.b,J.b,[]),l["\u0275mpd"](1073742336,Ln.u,Ln.u,[]),l["\u0275mpd"](1073742336,z.c,z.c,[]),l["\u0275mpd"](1073742336,Un.d,Un.d,[]),l["\u0275mpd"](1073742336,N.a,N.a,[]),l["\u0275mpd"](1073742336,it.g,it.g,[]),l["\u0275mpd"](1073742336,G.f,G.f,[]),l["\u0275mpd"](1073742336,q.g,q.g,[]),l["\u0275mpd"](1073742336,K.e,K.e,[]),l["\u0275mpd"](1073742336,y.g,y.g,[]),l["\u0275mpd"](1073742336,rt.a,rt.a,[]),l["\u0275mpd"](1073742336,st.a,st.a,[]),l["\u0275mpd"](1073742336,Bn.E,Bn.E,[]),l["\u0275mpd"](1073742336,Bn.A,Bn.A,[]),l["\u0275mpd"](1073742336,Wn.b,Wn.b,[]),l["\u0275mpd"](1073742336,Xn.i,Xn.i,[]),l["\u0275mpd"](1073742336,Xn.f,Xn.f,[]),l["\u0275mpd"](1073742336,on.k,on.k,[]),l["\u0275mpd"](1073742336,ut.a,ut.a,[]),l["\u0275mpd"](1073742336,ct.a,ct.a,[]),l["\u0275mpd"](1073742336,dt.a,dt.a,[]),l["\u0275mpd"](1073742336,pt.a,pt.a,[]),l["\u0275mpd"](1073742336,gt.a,gt.a,[[3,gt.a],mt.a]),l["\u0275mpd"](1073742336,ht.a,ht.a,[]),l["\u0275mpd"](1073742336,ft.a,ft.a,[]),l["\u0275mpd"](1073742336,Bn.m,Bn.m,[]),l["\u0275mpd"](1073742336,bt.a,bt.a,[mt.a]),l["\u0275mpd"](1073742336,Ct.a,Ct.a,[[3,Ct.a],mt.a]),l["\u0275mpd"](1073742336,xt.a,xt.a,[]),l["\u0275mpd"](1073742336,vt.a,vt.a,[]),l["\u0275mpd"](1073742336,yt.e,yt.e,[]),l["\u0275mpd"](1073742336,Ot.c,Ot.c,[]),l["\u0275mpd"](1073742336,kt.c,kt.c,[]),l["\u0275mpd"](1073742336,Pt.d,Pt.d,[]),l["\u0275mpd"](1073742336,Ln.s,Ln.s,[]),l["\u0275mpd"](1073742336,Ln.q,Ln.q,[]),l["\u0275mpd"](1073742336,qn.d,qn.d,[]),l["\u0275mpd"](1073742336,wt.d,wt.d,[]),l["\u0275mpd"](1073742336,wt.c,wt.c,[]),l["\u0275mpd"](1073742336,Mt.b,Mt.b,[]),l["\u0275mpd"](1073742336,Gn.j,Gn.j,[]),l["\u0275mpd"](1073742336,Ln.w,Ln.w,[]),l["\u0275mpd"](1073742336,Ln.n,Ln.n,[]),l["\u0275mpd"](1073742336,Yn.e,Yn.e,[]),l["\u0275mpd"](1073742336,Yn.d,Yn.d,[]),l["\u0275mpd"](1073742336,_t.a,_t.a,[]),l["\u0275mpd"](1073742336,Rt.a,Rt.a,[]),l["\u0275mpd"](1073742336,St.AgGridModule,St.AgGridModule,[]),l["\u0275mpd"](1073742336,It.a,It.a,[]),l["\u0275mpd"](1073742336,Tt.a,Tt.a,[]),l["\u0275mpd"](1073742336,Dt.a,Dt.a,[mt.a]),l["\u0275mpd"](1073742336,a,a,[mt.a]),l["\u0275mpd"](256,Ln.e,Ln.i,[]),l["\u0275mpd"](256,Yn.o,"XSRF-TOKEN",[]),l["\u0275mpd"](256,Yn.p,"X-XSRF-TOKEN",[]),l["\u0275mpd"](1024,ln.m,(function(){return[[{path:"",component:vn}]]}),[])])}))},giT0:function(n,t,e){"use strict";var l=e("8Y7J");e("xj9N"),e.d(t,"a",(function(){return o})),e.d(t,"b",(function(){return a}));var o=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block;height:18px;width:18px;background-position:0 0;background-size:100% 100%;border-radius:50%;border:2px solid transparent;position:relative;vertical-align:text-bottom}[_nghost-%COMP%]:before{content:'';font-family:\"Material Icons\";font-size:16px;font-weight:600;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.positive[_nghost-%COMP%]{background-color:transparent;border-color:transparent}.positive[_nghost-%COMP%]:before{content:'\\e5d8';color:#1e8700}.warning[_nghost-%COMP%]{background-color:#fff;border-color:#f3c118}.warning[_nghost-%COMP%]:before{content:'\\e5db';color:#f3c118}.negative[_nghost-%COMP%]{background-color:#c00;border-color:#c00}.negative[_nghost-%COMP%]:before{content:'\\e5db';color:#fff}"]],data:{}});function a(n){return l["\u0275vid"](2,[],null,null)}},lbNG:function(n,t,e){"use strict";e.d(t,"a",(function(){return u}));var l=e("8Y7J"),o=e("2Vo4"),a=e("itXk"),i=e("lJxs"),r=(e("/kTj"),e("Q34l")),s=e("A/Dr");class u{constructor(n,t,e,a,i,s,u,c){this.el=n,this.viewContainerRef=t,this.resolver=e,this.dialog=a,this.session=i,this.translate=s,this.editorApi=u,this.editorDisabled=!1,this.editorPlacement="bottom",this.onUpdate=new l.EventEmitter,this.highlighted=!1,this.editable=!1,this.editableAccessLevels=new Set([r.a.Admin,r.a.DashboardSupport]),this.highlightedAccessLevels=new Set([r.a.Corporate,r.a.Admin,r.a.DashboardSupport]),this.params$=new o.a(void 0),this.subs=[],this.debug=c.factory(new.target.name)}get title(){return this.editable?this.translate.instant("editor.editable-field.tooltip-text"):""}set sub(n){this.subs.push(n)}ngOnChanges(n){n.params&&this.params$.next(this.params)}ngOnInit(){this.sub=Object(a.b)(this.params$.pipe(Object(i.a)(n=>(this.debug.assert(!(n&&n.fields)||n.fields instanceof Array==1&&n.fields.length,"Params changed. 'fields' should be an array with at least one item. Params: %O",n),n&&n.fields.filter(n=>!!n.uid).length?n:void 0))),this.session.currentUser$).subscribe(([n,t])=>{const e=t.allowToEditBudget,l=this.highlightedAccessLevels.has(+t.AccessLevel),o=!!n;this.highlighted=l&&o,this.editable=e&&o,this.uidEditInfo=n})}ngOnDestroy(){this.subs.forEach(n=>n.unsubscribe())}openEditor(){if(!this.editable)return;if(this.debug.log("Open editor. Disabled: %s",this.editorDisabled),this.editorDisabled)return;const n=document.createEvent("HTMLEvents");n.initEvent("mouseleave",!0,!0),this.el.nativeElement.dispatchEvent(n);const t=this.resolver.resolveComponentFactory(s.a),e=this.viewContainerRef.createComponent(t),l=e.instance;l.hostElement=this.viewContainerRef.element.nativeElement,l.placement=this.editorPlacement,l.uidEditInfo=this.uidEditInfo,l.theme="dark";const o=l.cancel.subscribe(()=>e.destroy()),a=l.apply.subscribe(n=>{this.debug.assert(this.uidEditInfo,"There is no uid edit info");const t=Object.keys(n).map(n=>this.uidEditInfo.fields.find(t=>t.field===n)).map(t=>({uid:t.uid,field:t.fieldUpdate,value:n[t.field]}));e.destroy(),this.update(t)});e.onDestroy(()=>{o.unsubscribe(),a.unsubscribe()})}update(n){const t=n.map(n=>this.editorApi.updateFieldValue(this.params.type,n));Object(a.b)(t).subscribe(t=>{this.debug.log("Updated:",n),t.forEach(n=>{n.saved&&200!==n.saved.status&&this.dialog.warningT("Something went wrong.",{suffix:this.dialog.tryAgainLaterMessage})}),this.onUpdate.emit()},()=>this.dialog.warningT("Something went wrong.",{suffix:this.dialog.tryAgainLaterMessage}))}}},mpyQ:function(n,t,e){"use strict";e.d(t,"a",(function(){return l}));class l{}},nEoX:function(n,t,e){"use strict";e.d(t,"a",(function(){return a}));var l=e("8Y7J"),o=e("/kTj");let a=(()=>{class n{constructor(n){this.onEditValue=new l.EventEmitter,this.theme="default",this.scale=!0,this.threshold=!1,this.defaultScale=[0,1,2],this.debug=n.factory(new.target.name,o.a.All)}get themeDefault(){return"default"===this.theme}get themeSmall(){return"small"===this.theme}get hasScale(){return this.scale}get scaleValues(){return this.data&&this.data.scale?this.data.scale:this.defaultScale}get scaleFormat(){return this.data&&this.data.scaleFormat?this.data.scaleFormat:"per"}get hasThreshold(){return this.threshold&&this.data&&this.data.threshold&&this.data.threshold.length>0}get valueClass(){return{minimum:(this.data&&this.data.percentage)<5,"with-scale":this.hasScale,"with-threshold":this.hasThreshold&&!this.data.reversed,"with-reversed-threshold":this.hasThreshold&&this.data.reversed}}get width(){let n=this.data.percentage;return n<0&&(n=0),n>100&&(n=100),n+"%"}get targetWidth(){let n=this.data.targetPercentage||50;return n<0&&(n=0),n>100&&(n=100),n+"%"}ngOnInit(){}ngOnChanges(n){n.theme&&this.validateTheme()}updateValue(n){this.onEditValue.emit(n)}validateTheme(){this.debug.assert(n.validThemes.has(this.theme),"Wrong theme: '%s'. Available themes: %o",this.theme,n.validThemes)}}return n.validThemes=new Set(["default","small"]),n})()},xj9N:function(n,t,e){"use strict";e.d(t,"a",(function(){return l}));class l{get positiveClass(){return 1===this.value}get warningClass(){return 0===this.value}get negativeClass(){return-1===this.value}}},zZFd:function(n,t,e){"use strict";e.d(t,"a",(function(){return l}));var l=function(n){return n.Docs="Docs",n.Operations="Operations",n.Schedules="Schedules",n.ServiceTech="ServiceTech",n.ServiceAdvisor="ServiceAdvisor",n.CustomReports="CustomReports",n.ExpenseManagement="ExpenseManagement",n["OCC-New"]="OCC-New",n["OCC-New-Inventory"]="OCC-New-Inventory",n["OCC-New-Inventory-NewAgingAnalysis"]="OCC-New-Inventory-NewAgingAnalysis",n["OCC-New-NewContest-NewSalesContest"]="OCC-New-NewContest-NewSalesContest",n["OCC-New-NewSales"]="OCC-New-NewSales",n["OCC-New-NewSalesContest"]="OCC-New-NewSalesContest",n["OCC-New-NewSales-NewByModel"]="OCC-New-NewSales-NewByModel",n["OCC-Service&Parts"]="OCC-Service&Parts",n["OCC-Service&Parts-OpenPartTickets"]="OCC-Service&Parts-OpenPartTickets",n["OCC-Service&Parts-OpenPartTickets-OpenPartTickets"]="OCC-Service&Parts-OpenPartTickets-OpenPartTickets",n["OCC-Service&Parts-OpenROs"]="OCC-Service&Parts-OpenROs",n["OCC-Service&Parts-OpenROs-OpenROs"]="OCC-Service&Parts-OpenROs-OpenROs",n["OCC-Service&Parts-ServiceAdvisorContest"]="OCC-Service&Parts-ServiceAdvisorContest",n["OCC-Service&Parts-ServiceAdvisorContest-ServiceAdvisor"]="OCC-Service&Parts-ServiceAdvisorContest-ServiceAdvisor",n["OCC-Service&Parts-ServiceDetail"]="OCC-Service&Parts-ServiceDetail",n["OCC-Service&Parts-TechnicianContest"]="OCC-Service&Parts-TechnicianContest",n["OCC-Service&Parts-TechnicianContest-technicianContest"]="OCC-Service&Parts-TechnicianContest-technicianContest",n["OCC-Tracking Section"]="OCC-Tracking Section",n["OCC-Used"]="OCC-Used",n["OCC-Used-Inventory"]="OCC-Used-Inventory",n["OCC-Used-Inventory-UsedAgingAnalysis"]="OCC-Used-Inventory-UsedAgingAnalysis",n["OCC-Used-UsedContest-UsedSalesContest"]="OCC-Used-UsedContest-UsedSalesContest",n["OCC-Used-UsedSales"]="OCC-Used-UsedSales",n["OCC-Used-UsedSalesContest"]="OCC-Used-UsedSalesContest",n["OCC-Used-UsedSales-UsedByModel"]="OCC-Used-UsedSales-UsedByModel",n["OCC-F&I"]="OCC-F&I",n["OCC-F&I-AgingAnalysis-CIT"]="OCC-F&I-AgingAnalysis-CIT",n["OCC-F&I-F&IContest"]="OCC-F&I-F&IContest",n["OCC-F&I-F&IPerformance"]="OCC-F&I-F&IPerformance",n}({})}}]);