(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{OR4m:function(e,t,i){"use strict";i.r(t),i.d(t,"UserModule",function(){return y});var r=i("3Pt+"),a=i("ofXK"),s=i("cWTo"),n=i("tyNb"),o=i("fXoL");let d=(()=>{class e{constructor(){}ngOnInit(){}onUserSelected(e){this.user=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Eb({type:e,selectors:[["app-user-container"]],decls:7,vars:2,consts:[[1,"jumbtron"],[1,"display-4","text-center"],[1,"row"],[1,"col-md-12","grid"],[3,"editUser"]],template:function(e,t){1&e&&(o.Pb(0,"div",0),o.Pb(1,"h1",1),o.wc(2,"Administracion Usuarios"),o.Ob(),o.Lb(3,"hr"),o.Pb(4,"div",2),o.Pb(5,"div",3),o.Pb(6,"app-user-list",4),o.Wb("editUser",function(e){return t.onUserSelected(e)}),o.Ob(),o.Ob(),o.Ob(),o.Ob()),2&e&&o.tc("margin-top",80,"px")},styles:[".grid[_ngcontent-%COMP%]{display:inline-block;height:calc(80vh - 10px);max-width:98%;margin-left:10px}"]}),e})();const l=[{path:"",component:d}];let c=(()=>{class e{}return e.\u0275mod=o.Ib({type:e}),e.\u0275inj=o.Hb({factory:function(t){return new(t||e)},imports:[[n.f.forChild(l)],n.f]}),e})();var u=i("7pcG"),h=i("5eHb"),p=i("8SKR"),m=i("eIxW"),f=i("3KhC");let b=(()=>{class e{constructor(e,t,i,r,a){this.document=e,this.service=t,this.toast=i,this.modal=r,this.cdr=a}ngOnInit(){}ngOnDestroy(){this.subs&&this.subs.unsubscribe()}initGridOptions(){this.defaultColDef={width:170,editable:!1,filter:"agTextColumnFilter",floatingFilter:!0,resizable:!0,sortable:!0}}prepareGridColumns(){return[{field:"",headerName:"",cellRenderer:e=>{const t=this.document.createElement("span");return t.innerHTML='<i class="fas fa-edit" alt="Edit User"></i>',t.className="link",t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.onEditUser(null==e?void 0:e.data)}),t},width:"60px",filter:"",floatingFilter:!1},{field:"name",headerName:"Nombres"},{field:"lastName",headerName:"Apellidos"},{field:"identification",headerName:"Identificacion"},{field:"age",headerName:"Edad",filter:"agNumberColumnFilter"},{field:"email",headerName:"Email"},{field:"phone",headerName:"Telefono"},{field:"regionName",headerName:"Region"},{field:"stateName",headerName:"Departamento"},{field:"cityName",headerName:"Ciudad"},{field:"actorTypeName",headerName:"Tipo Actor"},{field:"establishment",headerName:"Establecimiento"},{field:"creationDate",headerName:"Fecha creado"},{field:"role",headerName:"Role"},{field:"active",headerName:"Activo",width:"100",cellRenderer:e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.active)?"Si":"No"}}]}onSelectRow(e){var t;null===(t=this.gridApi)||void 0===t||t.getSelectedRows()}onDeleteUser(e){this.service.deleteUser(e).subscribe(t=>{this.toast.success("Usuario eliminado"),this.rowData=this.rowData.filter(t=>t.id!==e),this.closeModal("usercard"),this.cdr.markForCheck()})}onEditUser(e){this.selectedUser=e,this.openModal("usercard"),this.cdr.markForCheck()}onSaveUser(e){this.service.updateUserAdmin(e.id,e.role,e.active).subscribe(t=>{this.toast.success("Usuario actualizado"),this.rowData=this.rowData.filter(t=>t.id!==e.id),this.rowData.push(e),this.closeModal("usercard"),this.cdr.markForCheck()})}onGridReady(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.initGridOptions(),this.columnDefs=this.prepareGridColumns(),this.subs=this.service.getUsers().subscribe(e=>{this.rowData=e,this.cdr.markForCheck()})}openModal(e){this.modal.open(e)}closeModal(e){this.modal.close(e)}}return e.\u0275fac=function(t){return new(t||e)(o.Kb(a.e),o.Kb(u.a),o.Kb(h.c),o.Kb(p.a),o.Kb(o.h))},e.\u0275cmp=o.Eb({type:e,selectors:[["app-user-list"]],decls:6,vars:7,consts:[[2,"height","100%","box-sizing","border-box"],["id","userGrid",1,"ag-theme-alpine",2,"width","100%","height","100%",3,"defaultColDef","columnDefs","rowData","rowSelection","pagination","paginationPageSize","selectionChanged","gridReady"],["userGrid",""],["id","usercard"],["title","Volver",1,"fas","fa-times-circle","close-button-modal",3,"click"],[3,"user","updateUser","deleteUser"]],template:function(e,t){1&e&&(o.Pb(0,"div",0),o.Pb(1,"ag-grid-angular",1,2),o.Wb("selectionChanged",function(e){return t.onSelectRow(e)})("gridReady",function(e){return t.onGridReady(e)}),o.Ob(),o.Ob(),o.Pb(3,"app-jwmodal",3),o.Pb(4,"i",4),o.Wb("click",function(){return t.closeModal("usercard")}),o.Ob(),o.Pb(5,"app-user-card",5),o.Wb("updateUser",function(e){return t.onSaveUser(e)})("deleteUser",function(e){return t.onDeleteUser(e)}),o.Ob(),o.Ob()),2&e&&(o.zb(1),o.fc("defaultColDef",t.defaultColDef)("columnDefs",t.columnDefs)("rowData",t.rowData)("rowSelection","single")("pagination",!0)("paginationPageSize",100),o.zb(4),o.fc("user",t.selectedUser))},directives:[s.a,m.a,f.a],styles:["[_nghost-%COMP%]     .link{text-decoration:none;color:#00f;cursor:pointer}"],changeDetection:0}),e})();var g=i("ADsi"),w=i("iZEB"),v=i("A39e"),D=i("RYtb"),N=i("orAG");let U=(()=>{class e{transform(e,t){const i=t?parseInt(t,10):10;return e?e.length>i?e.substring(0,i)+"...":e:""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Jb({name:"limitTo",type:e,pure:!0}),e})();var C=i("+UiJ");let y=(()=>{class e{}return e.\u0275mod=o.Ib({type:e}),e.\u0275inj=o.Hb({factory:function(t){return new(t||e)},providers:[],imports:[[a.c,c,r.h,g.a,w.a,s.c.withComponents([])]]}),e})();o.pc(d,[a.q,a.r,a.s,a.t,a.A,a.w,a.x,a.y,a.z,a.u,a.v,n.g,n.c,n.e,n.d,n.h,r.C,r.s,r.B,r.c,r.t,r.w,r.a,r.z,r.A,r.v,r.n,r.o,r.y,r.j,r.i,r.u,r.b,r.d,r.q,r.r,r.p,m.a,v.a,D.a,N.a,f.a,s.a,s.b,d,b],[a.b,a.G,a.p,a.k,a.E,a.g,a.C,a.F,a.d,a.f,a.i,a.j,a.l,U,C.a])}}]);