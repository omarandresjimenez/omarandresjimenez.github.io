(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"+kfi":function(e,n,l){"use strict";var t=l("tFIl");class i extends t.a{constructor(e={}){super(),this.stores=[],this.fillAll(e,["reportId","reportName","stores"])}}class a extends t.a{constructor(e={}){super(),this.budgetByMonths=[],this.fillAll(e,["id","name","budget","budgetByMonths"])}}var o=function(e){return e.First="first",e.Second="second",e.Third="third",e.Fourth="fourth",e.Finally="finally",e}({});function r(e){return Object.keys(o).some(n=>o[n]===e)}var u=function(e){return e.First="first",e.Last="last",e.Previous="previous",e.Next="next",e}({}),d=function(e){return e[e.SingleEntry=0]="SingleEntry",e[e.ByStore=1]="ByStore",e[e.ByStoreByMonth=2]="ByStoreByMonth",e[e.BudgetFromDocs=3]="BudgetFromDocs",e}({}),s=function(e){return e[e.Docs=0]="Docs",e[e.Schedules=1]="Schedules",e[e.Operations=2]="Operations",e}({}),c=function(e){return e[e.Amount=0]="Amount",e[e.Count=1]="Count",e}({});l.d(n,"g",(function(){return i})),l.d(n,"f",(function(){return a})),l.d(n,"a",(function(){return o})),l.d(n,"h",(function(){return r})),l.d(n,"b",(function(){return u})),l.d(n,"c",(function(){return d})),l.d(n,"d",(function(){return s})),l.d(n,"e",(function(){return c}))},"/gN3":function(e,n,l){"use strict";var t=l("tFIl");class i extends t.a{constructor(e={}){super(),this.momentIsUtc=!1,this.fillAll(e,["order","name","width","minWidth","pinned","field","tooltipField","align","labelFormat","filter","drillIndex","editable","hide","children","valueGetter","valueFormatter","valueSetter","valueParser","momentFormat","momentIsUtc","customFormatter","cellRenderer","cellEditor","cellEditorParams","cellRendererFramework","cellRendererParams","cellClass","data"])}get hasDrill(){return null!==this.drillIndex}get hasNumericFormat(){return this.labelFormat!==a.Date&&this.labelFormat!==a.Moment&&this.labelFormat!==a.Default&&this.labelFormat!==a.Custom}get hasDefaultFormat(){return this.labelFormat===a.Default}get hasMoneyFormat(){return this.labelFormat===a.Money||this.labelFormat===a.Money2}get hasPercentageFormat(){return this.labelFormat===a.Percentage||this.labelFormat===a.Percentage1DecWithZeroMantissa||this.labelFormat===a.Percentage2DecWithZeroMantissa}}var a=function(e){return e[e.Date=0]="Date",e[e.Moment=1]="Moment",e[e.Money=2]="Money",e[e.Money2=3]="Money2",e[e.MoneyAbbr=4]="MoneyAbbr",e[e.Integer=5]="Integer",e[e.Float=6]="Float",e[e.FloatWithTwoDecimalPlaces=7]="FloatWithTwoDecimalPlaces",e[e.FloatWithOneDecimalPlace=8]="FloatWithOneDecimalPlace",e[e.Cnt=9]="Cnt",e[e.Percentage=10]="Percentage",e[e.Percentage1DecWithZeroMantissa=11]="Percentage1DecWithZeroMantissa",e[e.Percentage2DecWithZeroMantissa=12]="Percentage2DecWithZeroMantissa",e[e.Custom=13]="Custom",e[e.Default=14]="Default",e}({}),o=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e}({}),r=function(e){return e[e.None=0]="None",e[e.String=1]="String",e[e.NumberRange=2]="NumberRange",e[e.DateRange=3]="DateRange",e[e.MultiChoice=4]="MultiChoice",e}({});class u{constructor(e={}){Object.keys(e).forEach(n=>this[n]=new.target.value(e[n]))}static value(e,n=null){return null==e?n:e}}l.d(n,"a",(function(){return i})),l.d(n,"d",(function(){return a})),l.d(n,"b",(function(){return o})),l.d(n,"c",(function(){return r})),l.d(n,"e",(function(){return u}))},BXrA:function(e,n,l){"use strict";l.d(n,"a",(function(){return t}));const t="cabinet.kpi."},JA3b:function(e,n,l){"use strict";var t=l("8Y7J");l("JItt"),l.d(n,"a",(function(){return i})),l.d(n,"b",(function(){return a}));var i=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:calc(100vh - 156px - 48px);background-color:#f5f5f5;padding:20px;margin:0 -20px}.content-body-size-1[_nghost-%COMP%]{height:calc(100vh - 234px - 48px)}.content-body-size-2[_nghost-%COMP%]{height:calc(100vh - 125px - 48px)}.content-body-size-3[_nghost-%COMP%]{height:calc(100vh - 110px - 48px)}.content-body-without-header[_nghost-%COMP%]{height:calc(100vh - 48px)}.content-body-custom[_nghost-%COMP%]{height:calc(100vh - 135px - 48px)}"]],data:{}});function a(e){return t["\u0275vid"](2,[t["\u0275ncd"](null,0)],null,null)}},JItt:function(e,n,l){"use strict";l.d(n,"a",(function(){return t}));class t{constructor(){}ngOnInit(){}}},LH5O:function(e,n,l){"use strict";l.d(n,"a",(function(){return t}));class t{}},NFHq:function(e,n,l){"use strict";var t=l("8Y7J"),i=l("RHbX"),a=l("Xrj0"),o=[".ekd-icon[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;background-size:100% 100%;background-position:center center;background-repeat:no-repeat}.ekd-icon--next[_ngcontent-%COMP%]{background-image:url(/assets/icon/arrow-2-right-white.svg)}.ekd-icon--done[_ngcontent-%COMP%]{background-image:url(/assets/icon/tick-inside-circle-white.svg)}.ekd-icon--tick-green[_ngcontent-%COMP%]{background-image:url(/assets/icon/tick-green.svg)}.ekd-divider[_ngcontent-%COMP%]{height:1px;margin:40px 0;background:linear-gradient(to right,#979797 0,#979797 2px,transparent 2px,transparent 100%) right top;background-size:11px;border-bottom:none}.ekd-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:44px;background-color:#004e9a;padding:0 20px}.ekd-header-controls[_ngcontent-%COMP%]{display:flex;align-items:center;transform:translateX(10px)}.ekd-heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#fff;margin:0}.ekd-body[_ngcontent-%COMP%]{padding:0 20px;height:calc(100% - 184px);overflow:auto}.ekd-body[_ngcontent-%COMP%]     .mat-form-field, .ekd-body[_ngcontent-%COMP%]     .mat-form-field-infix{width:100%}.ekd-actions[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:right;padding:11px 20px;border-top:1px solid #ddd;height:60px}.ekd-actions[_ngcontent-%COMP%]     .mat-button{text-transform:uppercase;color:#3498db}.ekd-actions[_ngcontent-%COMP%]     .mat-button[disabled]{color:rgba(116,116,116,.5)}.ekd-radio.mat-radio-checked[_ngcontent-%COMP%]     .mat-radio-inner-circle{background-color:#359be0}.ekd-radio.mat-radio-checked[_ngcontent-%COMP%]     .mat-radio-outer-circle{border-color:#359be0}.ekd-report-list[_ngcontent-%COMP%]{padding-top:6px;margin:0;list-style:none;color:#494949}.ekd-report-list__item[_ngcontent-%COMP%]{height:38px;line-height:20px;padding:8px 20px 8px 0}.ekd-report-list[_ngcontent-%COMP%]     .mat-radio-label-content{padding-top:2px;padding-left:25px}.ekd-search-bar[_ngcontent-%COMP%]{padding:15px 20px;border-bottom:1px solid #ddd;display:flex;align-items:center}.ekd-search-bar-input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;display:block;width:calc(100% - 60px);flex:0 0 calc(100% - 60px);font-size:16px;color:#747474}.ekd-search-bar-input[_ngcontent-%COMP%]:active, .ekd-search-bar-input[_ngcontent-%COMP%]:focus{outline:0}.ekd-search-bar-button[_ngcontent-%COMP%]{display:block;width:24px;height:24px;flex:0 0 24px;margin-right:20px;position:relative;cursor:pointer}.ekd-search-bar-button[_ngcontent-%COMP%]:before{content:'\\e8b6';font-family:\"Material Icons\";font-size:24px;color:#747474;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.ekd-close-btn[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;font-size:24px;cursor:pointer;position:relative}.ekd-close-btn[_ngcontent-%COMP%]:before{content:'\\e5cd';font-family:\"Material Icons\";font-size:24px;color:#fff;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.ekd-toggle-size-btn[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;margin-right:10px;cursor:pointer;position:relative}.ekd-toggle-size-btn[_ngcontent-%COMP%]:before{content:'\\e5d0';font-family:\"Material Icons\";font-size:24px;color:#fff;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.fullscreen[_ngcontent-%COMP%]   .ekd-toggle-size-btn[_ngcontent-%COMP%]:before{content:'\\e5d1'}.ekd-stepper-container[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}.ekd-stepper-container.with-delete-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.ekd-stepper-container.with-delete-btn[_ngcontent-%COMP%]   app-ekd-stepper[_ngcontent-%COMP%]{width:calc(100% - 80px);flex:0 0 calc(100% - 80px)}.ekd-delete-kpi-btn[_ngcontent-%COMP%]{width:24px;height:24px;position:relative;cursor:pointer;margin-right:20px}.ekd-delete-kpi-btn[_ngcontent-%COMP%]:before{content:'\\e872';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:24px;font-family:\"Material Icons\";color:#747474}"],r=l("MlvX"),u=l("Xd0L"),d=l("TSSN"),s=l("dJrM"),c=l("HsOI"),p=l("IP0z"),g=l("/HVE"),h=l("omvX"),m=l("Azqq"),f=l("JjoW"),v=l("s7LF"),b=l("hOhj"),_=l("5GAg"),C=l("SVse"),k=l("s6ns"),y=l("lJxs"),x=l("/kTj");class O{constructor(e,n){this.id=e,this.name=n}}var w=l("jmLE"),S=l("+kfi");class D{constructor(e,n,l){this.stepper=e,this.filterData=n,this.i18n=w.a,this.steps=[new O(1,"kpi_type"),new O(2,"select_report"),new O(3,"edit_kpi")],this.debug=l.factory(new.target.name,x.a.All)}set budgetType(e){e&&(this.budgetTypeVal=e,this.fourthStepValidation())}get isByMonths(){return this.budgetTypeVal===S.c.ByStoreByMonth}set isDocs(e){e&&(this.isDocsVal=e,this.fourthStepValidation())}ngOnInit(){this.currentNumericStep$=this.stepper.currentNumericStep$,this.stepper.currentStep$.subscribe(e=>{this.currentStep=e,this.fourthStepValidation()})}findStatusClass(e,n){return this.currentNumericStep$.pipe(Object(y.a)(l=>({[e+"--done"]:n<l,[e+"--current"]:n===l,[e+"--next"]:n>l})))}fourthStepValidation(){this.isDocsVal&&(this.currentStep===S.a.Third||this.currentStep===S.a.Fourth)&&this.isByMonths&&this.filterData.isCreate?this.steps.push(new O(4,"set_budget")):this.steps=[new O(1,"kpi_type"),new O(2,"select_report"),new O(3,"edit_kpi")]}}var R=l("2Vo4"),I=l("XNiG"),M=l("fFD9");class P{constructor(e,n){this.filterData=n,this.isSectionEqualsDocs$=new R.a(!1),this.budgetType$=new R.a(S.c.SingleEntry),this._isMaximized$=new I.a,this._currentStep$=new R.a(S.a.First),this.stepsOrder=[S.a.First,S.a.Second,S.a.Third,S.a.Finally],this.debug=e.factory(new.target.name,x.a.All),this.initInternal()}toggleSize(e){this._isMaximized$.next(e)}goToDirection(e){switch(e){case S.b.First:this._currentStep$.next(this.stepsOrder[0]);break;case S.b.Last:this._currentStep$.next(this.stepsOrder.slice(-1)[0]);break;case S.b.Next:this.goOn(1);break;case S.b.Previous:this.goOn(-1);break;default:this.debug.warn("Wrong direction: '%s'",e)}}goToStep(e){this._currentStep$.next(e)}goOn(e){const n=this._currentStep$.getValue(),l=this.stepsOrder.indexOf(n);this.debug.assert(-1!==l,"goNextStep() Wrong step.");const t=l+e;if(t<0||t>this.stepsOrder.length-1)throw new Error(`EkdStepperService.goOn(${e}) Wrong count. New step index: ${t}`);this._currentStep$.next(this.stepsOrder[t])}initInternal(){this.currentStep$=this._currentStep$.asObservable(),this.isMaximized$=this._isMaximized$.asObservable(),this.currentNumericStep$=this.currentStep$.pipe(Object(y.a)(e=>{const n=this.stepsOrder.indexOf(e);return this.debug.assert(-1!==n,"Wrong current step: '%s'",e),n+1})),this.currentStep$.pipe(Object(M.a)(this.isSectionEqualsDocs$,this.budgetType$)).subscribe(([e,n,l])=>{this.stepsOrder=(e===S.a.Third||e===S.a.Fourth)&&n&&l===S.c.ByStoreByMonth&&this.filterData.isCreate?[S.a.First,S.a.Second,S.a.Third,S.a.Fourth,S.a.Finally]:[S.a.First,S.a.Second,S.a.Third,S.a.Finally]})}}var F=l("dBrL"),$=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;height:80px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:15px 20px}.steps-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.step[_ngcontent-%COMP%]{display:flex;align-items:center;width:25%;flex:0 0 25%;position:relative}.step[_ngcontent-%COMP%]:nth-of-type(1){justify-content:flex-start}.step[_ngcontent-%COMP%]:nth-of-type(3){justify-content:flex-start!important;justify-content:flex-end}.step-name[_ngcontent-%COMP%]{font-size:14px;color:inherit}.step--current[_ngcontent-%COMP%]   .step-name[_ngcontent-%COMP%], .step--done[_ngcontent-%COMP%]   .step-name[_ngcontent-%COMP%]{color:#404040}.step--next[_ngcontent-%COMP%]   .step-name[_ngcontent-%COMP%]{color:#9e9e9e}.step-number[_ngcontent-%COMP%]{display:inline-block;width:26px;flex:0 0 26px;height:26px;margin-right:10px;border-radius:50%;line-height:26px;font-size:13px;font-weight:400;text-align:center}.step--current[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%], .step--done[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{color:#fff;background-color:#004e9a}.step--next[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{color:#fff;background-color:#9e9e9e}"]],data:{}});function T(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,9,null,null,null,null,null,null,null)),(e()(),t["\u0275eld"](1,0,null,null,8,"div",[["class","step"]],null,null,null,null,null)),t["\u0275prd"](512,null,C.A,C.B,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](3,278528,null,0,C.k,[C.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275eld"](5,0,null,null,1,"span",[["class","step-number"]],null,null,null,null,null)),(e()(),t["\u0275ted"](6,null,["",""])),(e()(),t["\u0275eld"](7,0,null,null,2,"span",[["class","step-name"]],null,null,null,null,null)),(e()(),t["\u0275ted"](8,null,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef])],(function(e,n){var l=n.component;e(n,3,0,"step",t["\u0275unv"](n,3,1,t["\u0275nov"](n,4).transform(l.findStatusClass("step",n.context.$implicit.id))))}),(function(e,n){var l=n.component;e(n,6,0,n.context.$implicit.id),e(n,8,0,t["\u0275unv"](n,8,0,t["\u0275nov"](n,9).transform(l.i18n+"step"+n.context.$implicit.id+".label")))}))}function j(e){return t["\u0275vid"](2,[(e()(),t["\u0275and"](16777216,null,null,1,null,T)),t["\u0275did"](1,278528,null,0,C.l,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){e(n,1,0,n.component.steps)}),null)}var E=l("bujt"),q=l("Fwaw");class V{constructor(e,n){this.stepper=e,this.debug=n.factory(new.target.name,x.a.All)}set appEkdStepNav(e){this.direction=e}onClick(){this.debug.assert(this.direction,"Direction didn't specified"),this.stepper.goToDirection(this.direction)}}var A=l("vkgz"),B=l("pLZG");class N{constructor(e,n,l,t,i){this.ekdApi=e,this.ekdData=n,this.ekdForm=l,this.changeDetectorRef=t,this.i18n=w.a,this.debug=i.factory(new.target.name,x.a.All)}get isKpiTypeDocs(){return this.formGroup.get("kpiTypeId").value===S.d.Docs}ngOnInit(){this.formGroup=this.ekdForm.form.get("kpiType"),this.kpiTypeList$=this.ekdData.kpiTypeList$,this.docReportList$=this.ekdData.docReportList$.pipe(Object(A.a)(e=>{const n=this.formGroup.get("docReportId");null==n.value&&e.length&&(n.setValue(e[0].id),n.updateValueAndValidity(),this.changeDetectorRef.detectChanges())}))}ngAfterContentChecked(){this.ekdData.isEditMode$.pipe(Object(B.a)(e=>!!e)).subscribe(()=>{this.formGroup.get("kpiTypeId").valueChanges.subscribe(()=>{this.formGroup.get("docReportId").setValue(null),this.ekdForm.form.get("report").get("reportId").setValue(null)}),this.formGroup.get("docReportId").valueChanges.subscribe(()=>{this.ekdForm.form.get("report").get("reportId").setValue(null)})})}}var G=l("h9HI"),L=l("zm+G"),K=l("JX91"),z=l("DnKK");class U{constructor(e,n,l){this.fb=e,this.sessionService=l,this.isHAG=!1,this.debug=n.factory("EkdFormService",x.a.All),this.initInternal()}get value(){return this.form.value}ngOnDestroy(){}patch(e){this.form.patchValue(e),this.debug.log("patch() form",this.form)}initInternal(){this.formConfig=this.createConfig(),this.form=this.buildDeepFormGroup(this.formConfig),this.initStepKpiTypeConditionalValidators(),this.initStepDataConditionalValidators(),this.initAssociationStepDataProjectionCheckboxes()}createConfig(){return{kpiType:{kpiTypeId:[null,[v.D.required]],docReportId:[null,[v.D.required]]},report:{reportId:[null,[v.D.required]]},data:{kpiName:[null,[v.D.required,v.D.minLength(3)]],isUseProjection:[!1,[v.D.required]],isUseProRate:[!1,[v.D.required]],isPublicKpi:[!1,[v.D.required]],isExpenseKpi:[!1,null],opsFilter:[null,[v.D.required]],numberDays:[null,[v.D.required]],kpiValueTypeId:[S.e.Amount,[v.D.required]],budgetTypeId:[null,[v.D.required]],budgetFromDocId:[null,[v.D.required]],budgetAmount:[null,[v.D.required]],alerts:[[-100,-50,50,100],[v.D.required]],autoFillPercentage:[100,[v.D.required]]}}}buildDeepFormGroup(e){const n=Object.keys(e).reduce((n,l)=>{const t=e[l];if(t instanceof Array)n[l]=t;else{if(!(t instanceof Object))throw new Error("makeFormGroup() Wrong config");n[l]=this.buildDeepFormGroup(t)}return n},{});return this.fb.group(n)}initStepKpiTypeConditionalValidators(){const e=this.form.get("kpiType");e.get("kpiTypeId").valueChanges.pipe(Object(K.a)(e.get("kpiTypeId").value),Object(z.a)(this)).subscribe(e=>{this.setControlValidatorsState("kpiType","docReportId",e===S.d.Docs)})}initStepDataConditionalValidators(){const e=this.form.get("data");e.get("budgetTypeId").valueChanges.pipe(Object(K.a)(e.get("budgetTypeId").value),Object(z.a)(this)).subscribe(e=>{this.setControlValidatorsState("data","budgetAmount",e===S.c.SingleEntry),this.setControlValidatorsState("data","budgetFromDocId",e===S.c.BudgetFromDocs)});const n=this.form.get("kpiType").get("kpiTypeId");this.currentUser=this.sessionService.getCurrentUser(),this.isHAG=this.currentUser.instance_name.indexOf("HAG")>=0,n.valueChanges.pipe(Object(K.a)(n.value),Object(z.a)(this)).subscribe(e=>{const n=e===S.d.Operations||e===S.d.Schedules;this.setControlValidatorsState("data","numberDays",n),this.setControlValidatorsState("data","kpiValueTypeId",n);const l=this.form.get("report").get("reportId").value;this.setControlValidatorsState("data","opsFilter",e===S.d.Operations&&"6"===l&&!this.isHAG)});const l=this.form.get("report").get("reportId");l.valueChanges.pipe(Object(K.a)(l.value),Object(z.a)(this)).subscribe(e=>{const n=this.form.get("kpiType").get("kpiTypeId").value;this.setControlValidatorsState("data","opsFilter",n===S.d.Operations&&"6"===e&&!this.isHAG)})}setControlValidatorsState(e,n,l){if(!this.formConfig[e])throw new Error("setControlValidatorState() Wrong formGroupName: "+e);if(!this.formConfig[e][n])throw new Error("setControlValidatorState() Wrong formControlName: "+n);const t=this.form.get(e).get(n);l?(t.setValidators(this.formConfig[e][n][1]),t.enable()):(t.clearValidators(),t.disable()),t.updateValueAndValidity()}initAssociationStepDataProjectionCheckboxes(){const e=this.form.get("data"),n=e.get("isUseProjection"),l=e.get("isUseProRate"),t=(e,n)=>e.valueChanges.pipe(Object(z.a)(this),Object(B.a)(e=>e)).subscribe(()=>{n.setValue(!1),n.updateValueAndValidity()});t(n,l),t(l,n)}}var J=t["\u0275crt"]({encapsulation:0,styles:[o,["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]:first-child{margin:50px 0 25px}"]],data:{}});function Z(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,3,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,1)._selectViaInteraction()&&i),"keydown"===n&&(i=!1!==t["\u0275nov"](e,1)._handleKeydown(l)&&i),i}),r.b,r.a)),t["\u0275did"](1,8568832,[[10,4]],0,u.p,[t.ElementRef,t.ChangeDetectorRef,[2,u.j],[2,u.o]],{value:[0,"value"]},null),(e()(),t["\u0275ted"](2,0,[" "," "])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef])],(function(e,n){e(n,1,0,n.context.$implicit.id)}),(function(e,n){var l=n.component;e(n,0,0,t["\u0275nov"](n,1)._getTabIndex(),t["\u0275nov"](n,1).selected,t["\u0275nov"](n,1).multiple,t["\u0275nov"](n,1).active,t["\u0275nov"](n,1).id,t["\u0275nov"](n,1)._getAriaSelected(),t["\u0275nov"](n,1).disabled.toString(),t["\u0275nov"](n,1).disabled),e(n,2,0,t["\u0275unv"](n,2,0,t["\u0275nov"](n,3).transform(l.i18n+"step1.field."+n.context.$implicit.name+".label")))}))}function H(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,1)._selectViaInteraction()&&i),"keydown"===n&&(i=!1!==t["\u0275nov"](e,1)._handleKeydown(l)&&i),i}),r.b,r.a)),t["\u0275did"](1,8568832,[[22,4]],0,u.p,[t.ElementRef,t.ChangeDetectorRef,[2,u.j],[2,u.o]],{value:[0,"value"]},null),(e()(),t["\u0275ted"](2,0,[" "," "]))],(function(e,n){e(n,1,0,n.context.$implicit.id)}),(function(e,n){e(n,0,0,t["\u0275nov"](n,1)._getTabIndex(),t["\u0275nov"](n,1).selected,t["\u0275nov"](n,1).multiple,t["\u0275nov"](n,1).active,t["\u0275nov"](n,1).id,t["\u0275nov"](n,1)._getAriaSelected(),t["\u0275nov"](n,1).disabled.toString(),t["\u0275nov"](n,1).disabled),e(n,2,0,n.context.$implicit.name)}))}function X(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,27,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,s.b,s.a)),t["\u0275did"](1,7520256,null,9,c.c,[t.ElementRef,t.ChangeDetectorRef,[2,u.h],[2,p.b],[2,c.a],g.a,t.NgZone,[2,h.a]],null,null),t["\u0275qud"](603979776,13,{_controlNonStatic:0}),t["\u0275qud"](335544320,14,{_controlStatic:0}),t["\u0275qud"](603979776,15,{_labelChildNonStatic:0}),t["\u0275qud"](335544320,16,{_labelChildStatic:0}),t["\u0275qud"](603979776,17,{_placeholderChild:0}),t["\u0275qud"](603979776,18,{_errorChildren:1}),t["\u0275qud"](603979776,19,{_hintChildren:1}),t["\u0275qud"](603979776,20,{_prefixChildren:1}),t["\u0275qud"](603979776,21,{_suffixChildren:1}),(e()(),t["\u0275eld"](11,0,null,3,3,"mat-label",[],null,null,null,null,null)),t["\u0275did"](12,16384,[[15,4],[16,4]],0,c.f,[],null,null),(e()(),t["\u0275ted"](13,null,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](15,0,null,1,12,"mat-select",[["class","mat-select"],["formControlName","docReportId"],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"keydown"],[null,"focus"],[null,"blur"]],(function(e,n,l){var i=!0;return"keydown"===n&&(i=!1!==t["\u0275nov"](e,20)._handleKeydown(l)&&i),"focus"===n&&(i=!1!==t["\u0275nov"](e,20)._onFocus()&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,20)._onBlur()&&i),i}),m.b,m.a)),t["\u0275prd"](6144,null,u.j,null,[f.c]),t["\u0275did"](17,671744,null,0,v.i,[[3,v.d],[8,null],[8,null],[8,null],[2,v.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,v.r,null,[v.i]),t["\u0275did"](19,16384,null,0,v.s,[[4,v.r]],null,null),t["\u0275did"](20,2080768,null,3,f.c,[b.i,t.ChangeDetectorRef,t.NgZone,u.b,t.ElementRef,[2,p.b],[2,v.u],[2,v.k],[2,c.c],[6,v.r],[8,null],f.a,_.j],null,null),t["\u0275qud"](603979776,22,{options:1}),t["\u0275qud"](603979776,23,{optionGroups:1}),t["\u0275qud"](603979776,24,{customTrigger:0}),t["\u0275prd"](2048,[[13,4],[14,4]],c.d,null,[f.c]),(e()(),t["\u0275and"](16777216,null,1,2,null,H)),t["\u0275did"](26,278528,null,0,C.l,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef])],(function(e,n){var l=n.component;e(n,17,0,"docReportId"),e(n,20,0),e(n,26,0,t["\u0275unv"](n,26,0,t["\u0275nov"](n,27).transform(l.docReportList$)))}),(function(e,n){var l=n.component;e(n,0,1,["standard"==t["\u0275nov"](n,1).appearance,"fill"==t["\u0275nov"](n,1).appearance,"outline"==t["\u0275nov"](n,1).appearance,"legacy"==t["\u0275nov"](n,1).appearance,t["\u0275nov"](n,1)._control.errorState,t["\u0275nov"](n,1)._canLabelFloat,t["\u0275nov"](n,1)._shouldLabelFloat(),t["\u0275nov"](n,1)._hasFloatingLabel(),t["\u0275nov"](n,1)._hideControlPlaceholder(),t["\u0275nov"](n,1)._control.disabled,t["\u0275nov"](n,1)._control.autofilled,t["\u0275nov"](n,1)._control.focused,"accent"==t["\u0275nov"](n,1).color,"warn"==t["\u0275nov"](n,1).color,t["\u0275nov"](n,1)._shouldForward("untouched"),t["\u0275nov"](n,1)._shouldForward("touched"),t["\u0275nov"](n,1)._shouldForward("pristine"),t["\u0275nov"](n,1)._shouldForward("dirty"),t["\u0275nov"](n,1)._shouldForward("valid"),t["\u0275nov"](n,1)._shouldForward("invalid"),t["\u0275nov"](n,1)._shouldForward("pending"),!t["\u0275nov"](n,1)._animationsEnabled]),e(n,13,0,t["\u0275unv"](n,13,0,t["\u0275nov"](n,14).transform(l.i18n+"step1.field.doc-report.label"))),e(n,15,1,[t["\u0275nov"](n,19).ngClassUntouched,t["\u0275nov"](n,19).ngClassTouched,t["\u0275nov"](n,19).ngClassPristine,t["\u0275nov"](n,19).ngClassDirty,t["\u0275nov"](n,19).ngClassValid,t["\u0275nov"](n,19).ngClassInvalid,t["\u0275nov"](n,19).ngClassPending,t["\u0275nov"](n,20).id,t["\u0275nov"](n,20).tabIndex,t["\u0275nov"](n,20)._getAriaLabel(),t["\u0275nov"](n,20)._getAriaLabelledby(),t["\u0275nov"](n,20).required.toString(),t["\u0275nov"](n,20).disabled.toString(),t["\u0275nov"](n,20).errorState,t["\u0275nov"](n,20).panelOpen?t["\u0275nov"](n,20)._optionIds:null,t["\u0275nov"](n,20).multiple,t["\u0275nov"](n,20)._ariaDescribedby||null,t["\u0275nov"](n,20)._getAriaActiveDescendant(),t["\u0275nov"](n,20).disabled,t["\u0275nov"](n,20).errorState,t["\u0275nov"](n,20).required,t["\u0275nov"](n,20).empty])}))}function W(e){return t["\u0275vid"](2,[(e()(),t["\u0275eld"](0,0,null,null,6,"div",[["class","ekd-header"]],null,null,null,null,null)),(e()(),t["\u0275eld"](1,0,null,null,2,"h3",[["class","ekd-heading"]],null,null,null,null,null)),(e()(),t["\u0275ted"](2,null,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](4,0,null,null,2,"div",[["class","ekd-header-controls"]],null,null,null,null,null)),(e()(),t["\u0275eld"](5,0,null,null,1,"button",[["class","ekd-close-btn"],["mat-dialog-close",""],["type","button"]],[[1,"aria-label",0]],[[null,"click"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,6).dialogRef.close(t["\u0275nov"](e,6).dialogResult)&&i),i}),null,null)),t["\u0275did"](6,606208,null,0,k.g,[[2,k.l],t.ElementRef,k.e],{dialogResult:[0,"dialogResult"]},null),(e()(),t["\u0275eld"](7,0,null,null,2,"div",[["class","ekd-stepper-container"]],null,null,null,null,null)),(e()(),t["\u0275eld"](8,0,null,null,1,"app-ekd-stepper",[],null,null,null,j,$)),t["\u0275did"](9,114688,null,0,D,[P,F.a,x.b],null,null),(e()(),t["\u0275eld"](10,0,null,null,35,"div",[["class","ekd-body"]],null,null,null,null,null)),(e()(),t["\u0275eld"](11,0,null,null,34,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,n,l){var i=!0;return"submit"===n&&(i=!1!==t["\u0275nov"](e,13).onSubmit(l)&&i),"reset"===n&&(i=!1!==t["\u0275nov"](e,13).onReset()&&i),i}),null,null)),t["\u0275did"](12,16384,null,0,v.I,[],null,null),t["\u0275did"](13,540672,null,0,v.k,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,v.d,null,[v.k]),t["\u0275did"](15,16384,null,0,v.t,[[4,v.d]],null,null),(e()(),t["\u0275eld"](16,0,null,null,27,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,s.b,s.a)),t["\u0275did"](17,7520256,null,9,c.c,[t.ElementRef,t.ChangeDetectorRef,[2,u.h],[2,p.b],[2,c.a],g.a,t.NgZone,[2,h.a]],null,null),t["\u0275qud"](603979776,1,{_controlNonStatic:0}),t["\u0275qud"](335544320,2,{_controlStatic:0}),t["\u0275qud"](603979776,3,{_labelChildNonStatic:0}),t["\u0275qud"](335544320,4,{_labelChildStatic:0}),t["\u0275qud"](603979776,5,{_placeholderChild:0}),t["\u0275qud"](603979776,6,{_errorChildren:1}),t["\u0275qud"](603979776,7,{_hintChildren:1}),t["\u0275qud"](603979776,8,{_prefixChildren:1}),t["\u0275qud"](603979776,9,{_suffixChildren:1}),(e()(),t["\u0275eld"](27,0,null,3,3,"mat-label",[],null,null,null,null,null)),t["\u0275did"](28,16384,[[3,4],[4,4]],0,c.f,[],null,null),(e()(),t["\u0275ted"](29,null,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](31,0,null,1,12,"mat-select",[["class","mat-select"],["formControlName","kpiTypeId"],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"keydown"],[null,"focus"],[null,"blur"]],(function(e,n,l){var i=!0;return"keydown"===n&&(i=!1!==t["\u0275nov"](e,36)._handleKeydown(l)&&i),"focus"===n&&(i=!1!==t["\u0275nov"](e,36)._onFocus()&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,36)._onBlur()&&i),i}),m.b,m.a)),t["\u0275prd"](6144,null,u.j,null,[f.c]),t["\u0275did"](33,671744,null,0,v.i,[[3,v.d],[8,null],[8,null],[8,null],[2,v.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,v.r,null,[v.i]),t["\u0275did"](35,16384,null,0,v.s,[[4,v.r]],null,null),t["\u0275did"](36,2080768,null,3,f.c,[b.i,t.ChangeDetectorRef,t.NgZone,u.b,t.ElementRef,[2,p.b],[2,v.u],[2,v.k],[2,c.c],[6,v.r],[8,null],f.a,_.j],null,null),t["\u0275qud"](603979776,10,{options:1}),t["\u0275qud"](603979776,11,{optionGroups:1}),t["\u0275qud"](603979776,12,{customTrigger:0}),t["\u0275prd"](2048,[[1,4],[2,4]],c.d,null,[f.c]),(e()(),t["\u0275and"](16777216,null,1,2,null,Z)),t["\u0275did"](42,278528,null,0,C.l,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275and"](16777216,null,null,1,null,X)),t["\u0275did"](45,16384,null,0,C.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),t["\u0275eld"](46,0,null,null,10,"div",[["class","ekd-actions"]],null,null,null,null,null)),(e()(),t["\u0275eld"](47,0,null,null,4,"button",[["mat-button",""],["mat-dialog-close",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-label",0]],[[null,"click"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,49).dialogRef.close(t["\u0275nov"](e,49).dialogResult)&&i),i}),E.b,E.a)),t["\u0275did"](48,180224,null,0,q.b,[t.ElementRef,_.h,[2,h.a]],null,null),t["\u0275did"](49,606208,null,0,k.g,[[2,k.l],t.ElementRef,k.e],{dialogResult:[0,"dialogResult"]},null),(e()(),t["\u0275ted"](50,0,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](52,0,null,null,4,"button",[["appEkdStepNav","next"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,54).onClick()&&i),i}),E.b,E.a)),t["\u0275did"](53,180224,null,0,q.b,[t.ElementRef,_.h,[2,h.a]],{disabled:[0,"disabled"]},null),t["\u0275did"](54,16384,null,0,V,[P,x.b],{appEkdStepNav:[0,"appEkdStepNav"]},null),(e()(),t["\u0275ted"](55,0,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef])],(function(e,n){var l=n.component;e(n,6,0,""),e(n,9,0),e(n,13,0,l.formGroup),e(n,33,0,"kpiTypeId"),e(n,36,0),e(n,42,0,t["\u0275unv"](n,42,0,t["\u0275nov"](n,43).transform(l.kpiTypeList$))),e(n,45,0,l.isKpiTypeDocs),e(n,49,0,""),e(n,53,0,l.formGroup.invalid),e(n,54,0,"next")}),(function(e,n){var l=n.component;e(n,2,0,t["\u0275unv"](n,2,0,t["\u0275nov"](n,3).transform(l.i18n+"header.create.caption"))),e(n,5,0,t["\u0275nov"](n,6).ariaLabel||null),e(n,11,0,t["\u0275nov"](n,15).ngClassUntouched,t["\u0275nov"](n,15).ngClassTouched,t["\u0275nov"](n,15).ngClassPristine,t["\u0275nov"](n,15).ngClassDirty,t["\u0275nov"](n,15).ngClassValid,t["\u0275nov"](n,15).ngClassInvalid,t["\u0275nov"](n,15).ngClassPending),e(n,16,1,["standard"==t["\u0275nov"](n,17).appearance,"fill"==t["\u0275nov"](n,17).appearance,"outline"==t["\u0275nov"](n,17).appearance,"legacy"==t["\u0275nov"](n,17).appearance,t["\u0275nov"](n,17)._control.errorState,t["\u0275nov"](n,17)._canLabelFloat,t["\u0275nov"](n,17)._shouldLabelFloat(),t["\u0275nov"](n,17)._hasFloatingLabel(),t["\u0275nov"](n,17)._hideControlPlaceholder(),t["\u0275nov"](n,17)._control.disabled,t["\u0275nov"](n,17)._control.autofilled,t["\u0275nov"](n,17)._control.focused,"accent"==t["\u0275nov"](n,17).color,"warn"==t["\u0275nov"](n,17).color,t["\u0275nov"](n,17)._shouldForward("untouched"),t["\u0275nov"](n,17)._shouldForward("touched"),t["\u0275nov"](n,17)._shouldForward("pristine"),t["\u0275nov"](n,17)._shouldForward("dirty"),t["\u0275nov"](n,17)._shouldForward("valid"),t["\u0275nov"](n,17)._shouldForward("invalid"),t["\u0275nov"](n,17)._shouldForward("pending"),!t["\u0275nov"](n,17)._animationsEnabled]),e(n,29,0,t["\u0275unv"](n,29,0,t["\u0275nov"](n,30).transform(l.i18n+"step1.field.type.label"))),e(n,31,1,[t["\u0275nov"](n,35).ngClassUntouched,t["\u0275nov"](n,35).ngClassTouched,t["\u0275nov"](n,35).ngClassPristine,t["\u0275nov"](n,35).ngClassDirty,t["\u0275nov"](n,35).ngClassValid,t["\u0275nov"](n,35).ngClassInvalid,t["\u0275nov"](n,35).ngClassPending,t["\u0275nov"](n,36).id,t["\u0275nov"](n,36).tabIndex,t["\u0275nov"](n,36)._getAriaLabel(),t["\u0275nov"](n,36)._getAriaLabelledby(),t["\u0275nov"](n,36).required.toString(),t["\u0275nov"](n,36).disabled.toString(),t["\u0275nov"](n,36).errorState,t["\u0275nov"](n,36).panelOpen?t["\u0275nov"](n,36)._optionIds:null,t["\u0275nov"](n,36).multiple,t["\u0275nov"](n,36)._ariaDescribedby||null,t["\u0275nov"](n,36)._getAriaActiveDescendant(),t["\u0275nov"](n,36).disabled,t["\u0275nov"](n,36).errorState,t["\u0275nov"](n,36).required,t["\u0275nov"](n,36).empty]),e(n,47,0,t["\u0275nov"](n,48).disabled||null,"NoopAnimations"===t["\u0275nov"](n,48)._animationMode,t["\u0275nov"](n,49).ariaLabel||null),e(n,50,0,t["\u0275unv"](n,50,0,t["\u0275nov"](n,51).transform(l.i18n+"step1.button.cancel.label"))),e(n,52,0,t["\u0275nov"](n,53).disabled||null,"NoopAnimations"===t["\u0275nov"](n,53)._animationMode),e(n,55,0,t["\u0275unv"](n,55,0,t["\u0275nov"](n,56).transform(l.i18n+"step1.button.next.label")))}))}var Y=l("elxJ"),Q=l("cUpR"),ee=l("8bJo"),ne=t["\u0275crt"]({encapsulation:2,styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;height:20px;left:0;position:absolute;top:0;transition:transform ease 280ms,background-color ease 280ms;width:20px;transform:scale(.001)}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-checked .mat-radio-inner-circle{transform:scale(.5)}@media (-ms-high-contrast:active){.mat-radio-checked .mat-radio-inner-circle{border:solid 10px}}.mat-radio-label-content{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple,.mat-radio-persistent-ripple{opacity:0}@media (hover:none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{bottom:0;left:50%}@media (-ms-high-contrast:active){.mat-radio-disabled{opacity:.5}}"],data:{}});function le(e){return t["\u0275vid"](2,[t["\u0275qud"](671088640,1,{_inputElement:0}),(e()(),t["\u0275eld"](1,0,[["label",1]],null,12,"label",[["class","mat-radio-label"]],[[1,"for",0]],null,null,null,null)),(e()(),t["\u0275eld"](2,0,null,null,7,"div",[["class","mat-radio-container"]],null,null,null,null,null)),(e()(),t["\u0275eld"](3,0,null,null,0,"div",[["class","mat-radio-outer-circle"]],null,null,null,null,null)),(e()(),t["\u0275eld"](4,0,null,null,0,"div",[["class","mat-radio-inner-circle"]],null,null,null,null,null)),(e()(),t["\u0275eld"](5,0,null,null,3,"div",[["class","mat-radio-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),t["\u0275did"](6,212992,null,0,u.t,[t.ElementRef,t.NgZone,g.a,[2,u.k],[2,h.a]],{centered:[0,"centered"],radius:[1,"radius"],animation:[2,"animation"],disabled:[3,"disabled"],trigger:[4,"trigger"]},null),t["\u0275pod"](7,{enterDuration:0}),(e()(),t["\u0275eld"](8,0,null,null,0,"div",[["class","mat-ripple-element mat-radio-persistent-ripple"]],null,null,null,null,null)),(e()(),t["\u0275eld"](9,0,[[1,0],["input",1]],null,0,"input",[["class","mat-radio-input cdk-visually-hidden"],["type","radio"]],[[8,"id",0],[8,"checked",0],[8,"disabled",0],[8,"tabIndex",0],[1,"name",0],[8,"required",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"change"],[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"change"===n&&(t=!1!==i._onInputChange(l)&&t),"click"===n&&(t=!1!==i._onInputClick(l)&&t),t}),null,null)),(e()(),t["\u0275eld"](10,0,null,null,3,"div",[["class","mat-radio-label-content"]],[[2,"mat-radio-label-before",null]],null,null,null,null)),(e()(),t["\u0275eld"](11,0,null,null,1,"span",[["style","display:none"]],null,null,null,null,null)),(e()(),t["\u0275ted"](-1,null,["\xa0"])),t["\u0275ncd"](null,0)],(function(e,n){var l=n.component,i=e(n,7,0,150);e(n,6,0,!0,20,i,l._isRippleDisabled(),t["\u0275nov"](n,1))}),(function(e,n){var l=n.component;e(n,1,0,l.inputId),e(n,5,0,t["\u0275nov"](n,6).unbounded),e(n,9,0,l.inputId,l.checked,l.disabled,l.tabIndex,l.name,l.required,l.ariaLabel,l.ariaLabelledby,l.ariaDescribedby),e(n,10,0,"before"==l.labelPosition)}))}var te=l("Kj3r"),ie=l("/uUt");class ae{constructor(e,n,l){this.ekdData=e,this.ekdForm=n,this.i18n=w.a,this._searchTerm$=new R.a(void 0),this.debug=l.factory(new.target.name,x.a.All)}ngOnInit(){this.formGroup=this.ekdForm.form.get("report");const{kpiTypeId:e,docReportId:n}=this.ekdForm.value.kpiType;this.ekdData.isSectionEqualsDocs$.next(e===S.d.Docs),this.debug.log("ngOnInit() KPI Type ID: '%s', Doc Report ID: '%s'",e,n),this.reportList$=this.ekdData.getKpiSetupReportList(e,n).pipe(Object(M.a)(this._searchTerm$.pipe(Object(te.a)(400),Object(ie.a)())),Object(y.a)(([e,n])=>e.filter(e=>!n||-1!==e.reportName.toLowerCase().indexOf(n.toLowerCase()))))}onSearch(){this._searchTerm$.next(this.searchTerm)}changeReport(){this.ekdData.isReportChanged$.next(!0)}}var oe=t["\u0275crt"]({encapsulation:0,styles:[o,["[_nghost-%COMP%]{display:block}.ekd-body[_ngcontent-%COMP%]{height:calc(100% - 239px)}"]],data:{}});function re(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,3,"li",[["class","ekd-report-list__item"]],null,null,null,null,null)),(e()(),t["\u0275eld"](1,0,null,null,2,"mat-radio-button",[["class","ekd-radio mat-radio-button"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0]],[[null,"change"],[null,"focus"]],(function(e,n,l){var i=!0,a=e.component;return"focus"===n&&(i=!1!==t["\u0275nov"](e,2)._inputElement.nativeElement.focus()&&i),"change"===n&&(i=!1!==a.changeReport()&&i),i}),le,ne)),t["\u0275did"](2,4440064,[[1,4]],0,Y.b,[[2,Y.c],t.ElementRef,t.ChangeDetectorRef,_.h,ee.c,[2,h.a],[2,Y.a]],{value:[0,"value"]},{change:"change"}),(e()(),t["\u0275ted"](3,0,["",""]))],(function(e,n){e(n,2,0,n.context.$implicit.reportId)}),(function(e,n){e(n,1,0,t["\u0275nov"](n,2).checked,t["\u0275nov"](n,2).disabled,"NoopAnimations"===t["\u0275nov"](n,2)._animationMode,"primary"===t["\u0275nov"](n,2).color,"accent"===t["\u0275nov"](n,2).color,"warn"===t["\u0275nov"](n,2).color,-1,t["\u0275nov"](n,2).id),e(n,3,0,n.context.$implicit.reportName)}))}function ue(e){return t["\u0275vid"](2,[(e()(),t["\u0275eld"](0,0,null,null,6,"div",[["class","ekd-header"]],null,null,null,null,null)),(e()(),t["\u0275eld"](1,0,null,null,2,"h3",[["class","ekd-heading"]],null,null,null,null,null)),(e()(),t["\u0275ted"](2,null,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](4,0,null,null,2,"div",[["class","ekd-header-controls"]],null,null,null,null,null)),(e()(),t["\u0275eld"](5,0,null,null,1,"button",[["class","ekd-close-btn"],["mat-dialog-close",""],["type","button"]],[[1,"aria-label",0]],[[null,"click"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,6).dialogRef.close(t["\u0275nov"](e,6).dialogResult)&&i),i}),null,null)),t["\u0275did"](6,606208,null,0,k.g,[[2,k.l],t.ElementRef,k.e],{dialogResult:[0,"dialogResult"]},null),(e()(),t["\u0275eld"](7,0,null,null,2,"div",[["class","ekd-stepper-container"]],null,null,null,null,null)),(e()(),t["\u0275eld"](8,0,null,null,1,"app-ekd-stepper",[],null,null,null,j,$)),t["\u0275did"](9,114688,null,0,D,[P,F.a,x.b],null,null),(e()(),t["\u0275eld"](10,0,null,null,8,"div",[["class","ekd-search-bar"]],null,null,null,null,null)),(e()(),t["\u0275eld"](11,0,null,null,0,"button",[["class","ekd-search-bar-button"],["type","button"]],null,null,null,null,null)),(e()(),t["\u0275eld"](12,0,null,null,6,"input",[["class","ekd-search-bar-input"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,l){var i=!0,a=e.component;return"input"===n&&(i=!1!==t["\u0275nov"](e,13)._handleInput(l.target.value)&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,13).onTouched()&&i),"compositionstart"===n&&(i=!1!==t["\u0275nov"](e,13)._compositionStart()&&i),"compositionend"===n&&(i=!1!==t["\u0275nov"](e,13)._compositionEnd(l.target.value)&&i),"ngModelChange"===n&&(i=!1!==(a.searchTerm=l)&&i),"ngModelChange"===n&&(i=!1!==a.onSearch()&&i),i}),null,null)),t["\u0275did"](13,16384,null,0,v.e,[t.Renderer2,t.ElementRef,[2,v.a]],null,null),t["\u0275prd"](1024,null,v.q,(function(e){return[e]}),[v.e]),t["\u0275did"](15,671744,null,0,v.v,[[8,null],[8,null],[8,null],[6,v.q]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,v.r,null,[v.v]),t["\u0275did"](17,16384,null,0,v.s,[[4,v.r]],null,null),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](19,0,null,null,16,"div",[["class","ekd-body"]],null,null,null,null,null)),(e()(),t["\u0275eld"](20,0,null,null,15,"form",[["class","ekd-form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,n,l){var i=!0;return"submit"===n&&(i=!1!==t["\u0275nov"](e,22).onSubmit(l)&&i),"reset"===n&&(i=!1!==t["\u0275nov"](e,22).onReset()&&i),i}),null,null)),t["\u0275did"](21,16384,null,0,v.I,[],null,null),t["\u0275did"](22,540672,null,0,v.k,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,v.d,null,[v.k]),t["\u0275did"](24,16384,null,0,v.t,[[4,v.d]],null,null),(e()(),t["\u0275eld"](25,0,null,null,10,"mat-radio-group",[["class","mat-radio-group"],["formControlName","reportId"],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),t["\u0275did"](26,1064960,null,1,Y.c,[t.ChangeDetectorRef],null,null),t["\u0275qud"](603979776,1,{_radios:1}),t["\u0275prd"](1024,null,v.q,(function(e){return[e]}),[Y.c]),t["\u0275did"](29,671744,null,0,v.i,[[3,v.d],[8,null],[8,null],[6,v.q],[2,v.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,v.r,null,[v.i]),t["\u0275did"](31,16384,null,0,v.s,[[4,v.r]],null,null),(e()(),t["\u0275eld"](32,0,null,null,3,"ul",[["class","ekd-report-list"]],null,null,null,null,null)),(e()(),t["\u0275and"](16777216,null,null,2,null,re)),t["\u0275did"](34,278528,null,0,C.l,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275eld"](36,0,null,null,10,"div",[["class","ekd-actions"]],null,null,null,null,null)),(e()(),t["\u0275eld"](37,0,null,null,4,"button",[["appEkdStepNav","previous"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,39).onClick()&&i),i}),E.b,E.a)),t["\u0275did"](38,180224,null,0,q.b,[t.ElementRef,_.h,[2,h.a]],null,null),t["\u0275did"](39,16384,null,0,V,[P,x.b],{appEkdStepNav:[0,"appEkdStepNav"]},null),(e()(),t["\u0275ted"](40,0,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](42,0,null,null,4,"button",[["appEkdStepNav","next"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,44).onClick()&&i),i}),E.b,E.a)),t["\u0275did"](43,180224,null,0,q.b,[t.ElementRef,_.h,[2,h.a]],{disabled:[0,"disabled"]},null),t["\u0275did"](44,16384,null,0,V,[P,x.b],{appEkdStepNav:[0,"appEkdStepNav"]},null),(e()(),t["\u0275ted"](45,0,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef])],(function(e,n){var l=n.component;e(n,6,0,""),e(n,9,0),e(n,15,0,l.searchTerm),e(n,22,0,l.formGroup),e(n,29,0,"reportId"),e(n,34,0,t["\u0275unv"](n,34,0,t["\u0275nov"](n,35).transform(l.reportList$))),e(n,39,0,"previous"),e(n,43,0,l.formGroup.invalid),e(n,44,0,"next")}),(function(e,n){var l=n.component;e(n,2,0,t["\u0275unv"](n,2,0,t["\u0275nov"](n,3).transform(l.i18n+"header.create.caption"))),e(n,5,0,t["\u0275nov"](n,6).ariaLabel||null),e(n,12,0,t["\u0275unv"](n,12,0,t["\u0275nov"](n,18).transform(l.i18n+"step2.field.search.label")),t["\u0275nov"](n,17).ngClassUntouched,t["\u0275nov"](n,17).ngClassTouched,t["\u0275nov"](n,17).ngClassPristine,t["\u0275nov"](n,17).ngClassDirty,t["\u0275nov"](n,17).ngClassValid,t["\u0275nov"](n,17).ngClassInvalid,t["\u0275nov"](n,17).ngClassPending),e(n,20,0,t["\u0275nov"](n,24).ngClassUntouched,t["\u0275nov"](n,24).ngClassTouched,t["\u0275nov"](n,24).ngClassPristine,t["\u0275nov"](n,24).ngClassDirty,t["\u0275nov"](n,24).ngClassValid,t["\u0275nov"](n,24).ngClassInvalid,t["\u0275nov"](n,24).ngClassPending),e(n,25,0,t["\u0275nov"](n,31).ngClassUntouched,t["\u0275nov"](n,31).ngClassTouched,t["\u0275nov"](n,31).ngClassPristine,t["\u0275nov"](n,31).ngClassDirty,t["\u0275nov"](n,31).ngClassValid,t["\u0275nov"](n,31).ngClassInvalid,t["\u0275nov"](n,31).ngClassPending),e(n,37,0,t["\u0275nov"](n,38).disabled||null,"NoopAnimations"===t["\u0275nov"](n,38)._animationMode),e(n,40,0,t["\u0275unv"](n,40,0,t["\u0275nov"](n,41).transform(l.i18n+"step2.button.back.label"))),e(n,42,0,t["\u0275nov"](n,43).disabled||null,"NoopAnimations"===t["\u0275nov"](n,43)._animationMode),e(n,45,0,t["\u0275unv"](n,45,0,t["\u0275nov"](n,46).transform(l.i18n+"step2.button.next.label")))}))}var de=l("Mz6y"),se=l("QQfA"),ce=l("oJZn"),pe=l("pBi1"),ge=l("ZwOa"),he=l("oapL"),me=l("LvDl"),fe=l("itXk");class ve{constructor(e,n,l,t,i){this.parent=e,this.viewContainerRef=n,this.templateRef=l,this.renderer=t,this.validationMessages=i,this.controlFound=!1,this.customMessages$=new R.a({}),this.customFormatters$=new R.a({}),this.defaultMessages$=new R.a({}),this.defaultFormatters$=new R.a({}),this.firstError$=new R.a(void 0)}set appValidationMessage(e){if("string"==typeof e&&e.trim())this.controlName=e,this.controlFound=!1;else{if(!(e instanceof v.g))throw new Error('Invalid value of ValidationMessageDirective.\n        It must be the name a control or link to the control.\n\n        Example 1:\n        <input formControlName="myInput">\n        <div *appValidationMessage="\'myInput\'"></div>\n\n        Example 2:\n        <input [formControl]="form.get(\'myInput\')">\n        <div *appValidationMessage="form.get(\'myInput\')"></div>\n       ');this.control=e,this.controlFound=!0}}set appValidationMessageMessages(e){e instanceof Object&&this.customMessages$.next(e)}set appValidationMessageFormatters(e){e instanceof Object&&(this.checkFormatters(e),this.customFormatters$.next(e))}ngOnChanges(e){this.controlFound||this.findControl(),this.controlFound&&this.initStatusChangeSubscription()}ngOnInit(){this.initMessageSubscription(),this.validationMessages.messages$.pipe(Object(z.a)(this)).subscribe(e=>this.defaultMessages$.next(e)),this.validationMessages.formatters$.pipe(Object(z.a)(this)).subscribe(e=>this.defaultFormatters$.next(e))}ngOnDestroy(){}updateMessageText(e){this.viewElement&&(this.previousTextNode&&(this.renderer.removeChild(this.viewElement,this.previousTextNode),this.previousTextNode=void 0),e&&(this.previousTextNode=this.renderer.createText(e),this.renderer.appendChild(this.viewElement,this.previousTextNode)))}clearEmbeddedView(){this.viewContainerRef.clear(),this.viewElement=void 0,this.previousTextNode=void 0}createEmbeddedView(){if(!this.viewElement){const e=this.viewContainerRef.createEmbeddedView(this.templateRef);this.viewElement=e.rootNodes[0]}}checkFormatters(e){if(!Object.keys(e).every(n=>{const l=e[n];return l instanceof Object&&Object.keys(l).every(e=>l[e]instanceof Function)}))throw new Error("Wrong formatter. Correct interface is { (value: string): string }.")}checkParentType(){if(!(this.parent instanceof v.l||this.parent instanceof v.k))throw new Error("appValidationMessage must be used with a parent formGroup directive.\n        You'll want to add a formGroup directive and pass it an existing FormGroup instance\n        (you can create one in your class)\n      ")}findControl(){if(this.checkParentType(),this.control=this.parent.control.get(this.controlName),!this.control)throw new Error(`Can not find control with specified name.\n        Directive call: *appValidationMessage="'${this.controlName}'"\n        `);this.controlFound=!0}initStatusChangeSubscription(){this.statusChangeSub&&this.statusChangeSub.unsubscribe(),this.statusChangeSub=this.control.statusChanges.pipe(Object(z.a)(this)).subscribe(()=>{if(this.control.invalid){this.createEmbeddedView();const e=Object.keys(this.control.errors)[0];this.firstError$.next({name:e,data:this.control.errors[e]})}else this.clearEmbeddedView(),this.firstError$.next(void 0)})}initMessageSubscription(){Object(fe.b)(Object(fe.b)(this.defaultMessages$,this.customMessages$,(e,n)=>Object.assign({},e,n)),Object(fe.b)(this.defaultFormatters$,this.customFormatters$,(e,n)=>Object(me.defaultsDeep)({},n,e)),this.firstError$).pipe(Object(z.a)(this)).subscribe(e=>{const n=e[2];if(!n)return void this.updateMessageText();const[l,t]=e,i=l[n.name],a=i&&this.substituteVariables(i,n.data instanceof Object?n.data:{},t[n.name]);this.updateMessageText(a)})}substituteVariables(e,n,l){return e.replace(/{{(.+?)}}/g,(e,t)=>{const i=t.trim(),a=n[i],o=l&&l[i];return o?o(a):a})}}var be=l("CyGG"),_e=l("gavF"),Ce=l("2Q+G"),ke=l("S5eV"),ye=l("zeHk"),xe=l("+bil"),Oe=l("S+vS"),we=l("ChPW"),Se=l("IqdZ"),De=l("eeq/"),Re=l("TUN4"),Ie=l("K5C0"),Me=l("mvzq"),Pe=l("+2T5"),Fe=l("eIep"),$e=l("/gN3");class Te{constructor(e,n,l,t,i){this.ekdData=e,this.dialog=n,this.stepper=l,this.translate=t,this.i18n=w.a,this.isMaximized=!1,this.subs=[],this.debug=i.factory(new.target.name,x.a.All)}get isByMonths(){return this.budgetType===S.c.ByStoreByMonth}set sub(e){this.subs.push(e)}ngOnInit(){this.initResizeSubscription()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}ngOnChanges(e){this.debug.log("ngOnChanges() changes",e),e.budgetByStores&&this.budgetByStores&&(this.data=this.budgetByStores),e.budgetType&&!me.isNil(this.budgetType)&&this.initColumns()}autoFill(e){this.debug.log("autoFill() auto fill type: %s",e),this.dialog.confirmAsStream(this.translate.instant(this.i18n+"label.confirm")).pipe(Object(B.a)(e=>!!e),Object(Fe.a)(()=>this.ekdData.autoFill(e,this.formGroup.get("autoFillPercentage").value))).subscribe(()=>this.dialog.successT())}initColumns(){this.columns=[],this.budgetType===S.c.ByStore?this.columns.push(new $e.a({name:this.translate.instant(this.i18n+"label.storename"),field:"name"}),new $e.a({name:this.translate.instant(this.i18n+"label.budget"),field:"budget",editable:!0,valueParser:e=>+e.newValue})):this.isDocs&&this.budgetType===S.c.ByStoreByMonth?this.columns.push(new $e.a({name:this.translate.instant(this.i18n+"label.storename"),field:"name",pinned:"left"}),...[this.translate.instant(this.i18n+"label.January"),this.translate.instant(this.i18n+"label.February"),this.translate.instant(this.i18n+"label.March"),this.translate.instant(this.i18n+"label.April"),this.translate.instant(this.i18n+"label.May"),this.translate.instant(this.i18n+"label.June"),this.translate.instant(this.i18n+"label.July"),this.translate.instant(this.i18n+"label.August"),this.translate.instant(this.i18n+"label.September"),this.translate.instant(this.i18n+"label.October"),this.translate.instant(this.i18n+"label.November"),this.translate.instant(this.i18n+"label.December")].map((e,n)=>new $e.a({name:e,valueParser:e=>+e.newValue,valueSetter:({data:e,oldValue:l,newValue:t})=>{if(l!==t){if(this.debug.log("valueSetter() data: %O, oldValue: %O, newValue: %O",e,l,t),e&&e.budgetByMonths)return t=Math.round(t),e.budgetByMonths[n]=t,!0;this.debug.warn("valueSetter() Can not save value. Wrong field.",e)}return!1},valueGetter:e=>e.data&&Math.round(e.data.budgetByMonths[n]),editable:!0}))):this.debug.warn("initColumns() Unsupported Budget Type: ",this.budgetType)}initResizeSubscription(){this.sub=this.stepper.isMaximized$.subscribe(e=>{this.isMaximized=e,this.fitGridColumns()})}fitGridColumns(){this.gridCmp&&this.gridCmp.agGrid&&this.gridCmp.agGrid.api&&this.isMaximized&&setTimeout(()=>this.gridCmp.agGrid.api.sizeColumnsToFit(),1e3)}}var je=t["\u0275crt"]({encapsulation:0,styles:[o,["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:300px;padding:15px 0 0;border-top:1px solid #ddd;overflow:hidden;transition:.2s ease all;position:relative;z-index:1}.--maximized[_nghost-%COMP%]{transition:.2s ease all;height:500px}  .ag-theme-material .ag-header .ag-header-row .ag-header-cell{padding-left:20px;padding-right:20px;font-size:14px}  .ag-theme-material .ag-body .ag-row .ag-cell.ag-cell-value{padding-left:20px;padding-right:20px;font-size:15px;font-weight:500}.__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;line-height:25px;height:25px;padding:0 20px}.__header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + [_ngcontent-%COMP%]:before{content:'';display:inline-block;width:1px;height:100%;background:linear-gradient(to bottom,#2d2d2d 0,#2d2d2d 2px,transparent 2px,transparent 100%) right top;background-size:1px 5px}.__title-block[_ngcontent-%COMP%]{flex:0 1 auto;height:100%;font-weight:500;font-size:18px;font-family:Roboto,sans-serif;color:#404040}.__budget-type[_ngcontent-%COMP%], .__title[_ngcontent-%COMP%]{font:inherit}.__auto-fill-block[_ngcontent-%COMP%]{display:flex;height:100%;flex:1 1 auto;margin-left:40px;position:relative}.__auto-fill-block[_ngcontent-%COMP%]:before{margin-right:35px}.__auto-fill-label[_ngcontent-%COMP%]{letter-spacing:.32px;color:#747474;font-size:13px}.__auto-fill-input[_ngcontent-%COMP%]{margin-left:10px;display:inline-block;border:1px solid #cacaca;padding:4px 10px;width:185px;line-height:15px;background-color:#fff;color:#8e8e8e}.__auto-fill-input-error[_ngcontent-%COMP%]{width:150px;position:absolute;top:0;left:265px;z-index:1;background:#eaeaea}.__auto-fill-btn[_ngcontent-%COMP%]{margin-left:10px}.__toggle-size-block[_ngcontent-%COMP%]{display:flex;flex:0 1 auto;height:100%;line-height:inherit}.__toggle-size-block[_ngcontent-%COMP%]:before{margin-right:15px}.__toggle-size-btn[_ngcontent-%COMP%]{padding-left:16px;padding-right:27px;background-color:#2e3b44;min-width:130px}.__toggle-size-btn[_ngcontent-%COMP%]   .ekd-icon[_ngcontent-%COMP%]{margin-right:8px;width:12px;height:12px;background-size:100%}.__header-btn[_ngcontent-%COMP%]{border-radius:7px;height:100%;line-height:inherit}.__header-btn[_ngcontent-%COMP%], .__header-btn[_ngcontent-%COMP%]:active, .__header-btn[_ngcontent-%COMP%]:focus{box-shadow:none}.__icon-minimize[_ngcontent-%COMP%]{background:url(/assets/icon/minimize-white.svg) center center no-repeat}.__icon-maximize[_ngcontent-%COMP%]{background:url(/assets/icon/maximize-white.svg) center center no-repeat}.__grid[_ngcontent-%COMP%]{flex:1 1 auto;margin-top:8px;transition:.2s ease margin}"]],data:{}});function Ee(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"mat-error",[["class","__auto-fill-input-error error mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),t["\u0275did"](1,16384,null,0,c.b,[],null,null)],null,(function(e,n){e(n,0,0,t["\u0275nov"](n,1).id)}))}function qe(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,36,"form",[["class","__auto-fill-block"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,n,l){var i=!0;return"submit"===n&&(i=!1!==t["\u0275nov"](e,2).onSubmit(l)&&i),"reset"===n&&(i=!1!==t["\u0275nov"](e,2).onReset()&&i),i}),null,null)),t["\u0275did"](1,16384,null,0,v.I,[],null,null),t["\u0275did"](2,540672,null,0,v.k,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,v.d,null,[v.k]),t["\u0275did"](4,16384,null,0,v.t,[[4,v.d]],null,null),(e()(),t["\u0275eld"](5,0,null,null,2,"span",[["class","__auto-fill-label"]],null,null,null,null,null)),(e()(),t["\u0275ted"](6,null,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](8,0,null,null,6,"input",[["class","ekd-input __auto-fill-input"],["formControlName","autoFillPercentage"],["mat-input",""],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,n,l){var i=!0;return"input"===n&&(i=!1!==t["\u0275nov"](e,9)._handleInput(l.target.value)&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,9).onTouched()&&i),"compositionstart"===n&&(i=!1!==t["\u0275nov"](e,9)._compositionStart()&&i),"compositionend"===n&&(i=!1!==t["\u0275nov"](e,9)._compositionEnd(l.target.value)&&i),"change"===n&&(i=!1!==t["\u0275nov"](e,10).onChange(l.target.value)&&i),"input"===n&&(i=!1!==t["\u0275nov"](e,10).onChange(l.target.value)&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,10).onTouched()&&i),i}),null,null)),t["\u0275did"](9,16384,null,0,v.e,[t.Renderer2,t.ElementRef,[2,v.a]],null,null),t["\u0275did"](10,16384,null,0,v.x,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,v.q,(function(e,n){return[e,n]}),[v.e,v.x]),t["\u0275did"](12,671744,null,0,v.i,[[3,v.d],[8,null],[8,null],[6,v.q],[2,v.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,v.r,null,[v.i]),t["\u0275did"](14,16384,null,0,v.s,[[4,v.r]],null,null),(e()(),t["\u0275and"](16777216,null,null,1,null,Ee)),t["\u0275did"](16,737280,null,0,ve,[[3,v.d],t.ViewContainerRef,t.TemplateRef,t.Renderer2,be.a],{appValidationMessage:[0,"appValidationMessage"]},null),(e()(),t["\u0275eld"](17,16777216,null,null,4,"button",[["aria-haspopup","true"],["class","__header-btn __auto-fill-btn"],["color","primary"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-expanded",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],(function(e,n,l){var i=!0;return"mousedown"===n&&(i=!1!==t["\u0275nov"](e,19)._handleMousedown(l)&&i),"keydown"===n&&(i=!1!==t["\u0275nov"](e,19)._handleKeydown(l)&&i),"click"===n&&(i=!1!==t["\u0275nov"](e,19)._handleClick(l)&&i),i}),E.b,E.a)),t["\u0275did"](18,180224,null,0,q.b,[t.ElementRef,_.h,[2,h.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),t["\u0275did"](19,1196032,null,0,_e.g,[se.c,t.ElementRef,t.ViewContainerRef,_e.c,[2,_e.d],[8,null],[2,p.b],_.h],{menu:[0,"menu"]},null),(e()(),t["\u0275ted"](20,0,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](22,0,null,null,14,"mat-menu",[],null,null,null,Ce.d,Ce.b)),t["\u0275did"](23,1294336,[["autoFillMenuRef",4]],3,_e.h,[t.ElementRef,t.NgZone,_e.a],null,null),t["\u0275qud"](603979776,2,{_allItems:1}),t["\u0275qud"](603979776,3,{items:1}),t["\u0275qud"](603979776,4,{lazyContent:0}),t["\u0275prd"](2048,null,_e.d,null,[_e.h]),t["\u0275prd"](2048,null,_e.b,null,[_e.d]),(e()(),t["\u0275eld"](29,0,null,0,3,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,n,l){var i=!0,a=e.component;return"click"===n&&(i=!1!==t["\u0275nov"](e,30)._checkDisabled(l)&&i),"mouseenter"===n&&(i=!1!==t["\u0275nov"](e,30)._handleMouseEnter()&&i),"click"===n&&(i=!1!==a.autoFill("year")&&i),i}),Ce.c,Ce.a)),t["\u0275did"](30,180224,[[2,4],[3,4]],0,_e.e,[t.ElementRef,C.d,_.h,[2,_e.b]],null,null),(e()(),t["\u0275ted"](31,0,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](33,0,null,0,3,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,n,l){var i=!0,a=e.component;return"click"===n&&(i=!1!==t["\u0275nov"](e,34)._checkDisabled(l)&&i),"mouseenter"===n&&(i=!1!==t["\u0275nov"](e,34)._handleMouseEnter()&&i),"click"===n&&(i=!1!==a.autoFill("month")&&i),i}),Ce.c,Ce.a)),t["\u0275did"](34,180224,[[2,4],[3,4]],0,_e.e,[t.ElementRef,C.d,_.h,[2,_e.b]],null,null),(e()(),t["\u0275ted"](35,0,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef])],(function(e,n){var l=n.component;e(n,2,0,l.formGroup),e(n,12,0,"autoFillPercentage"),e(n,16,0,"autoFillPercentage"),e(n,18,0,l.formGroup.get("autoFillPercentage").invalid,"primary"),e(n,19,0,t["\u0275nov"](n,23)),e(n,23,0)}),(function(e,n){var l=n.component;e(n,0,0,t["\u0275nov"](n,4).ngClassUntouched,t["\u0275nov"](n,4).ngClassTouched,t["\u0275nov"](n,4).ngClassPristine,t["\u0275nov"](n,4).ngClassDirty,t["\u0275nov"](n,4).ngClassValid,t["\u0275nov"](n,4).ngClassInvalid,t["\u0275nov"](n,4).ngClassPending),e(n,6,0,t["\u0275unv"](n,6,0,t["\u0275nov"](n,7).transform(l.i18n+"step3.field.percent-of.label"))),e(n,8,0,t["\u0275nov"](n,14).ngClassUntouched,t["\u0275nov"](n,14).ngClassTouched,t["\u0275nov"](n,14).ngClassPristine,t["\u0275nov"](n,14).ngClassDirty,t["\u0275nov"](n,14).ngClassValid,t["\u0275nov"](n,14).ngClassInvalid,t["\u0275nov"](n,14).ngClassPending),e(n,17,0,t["\u0275nov"](n,18).disabled||null,"NoopAnimations"===t["\u0275nov"](n,18)._animationMode,t["\u0275nov"](n,19).menuOpen||null),e(n,20,0,t["\u0275unv"](n,20,0,t["\u0275nov"](n,21).transform(l.i18n+"step3.button.auto-fill.label"))),e(n,29,0,t["\u0275nov"](n,30).role,t["\u0275nov"](n,30)._highlighted,t["\u0275nov"](n,30)._triggersSubmenu,t["\u0275nov"](n,30)._getTabIndex(),t["\u0275nov"](n,30).disabled.toString(),t["\u0275nov"](n,30).disabled||null),e(n,31,0,t["\u0275unv"](n,31,0,t["\u0275nov"](n,32).transform(l.i18n+"step3.button.smly.label"))),e(n,33,0,t["\u0275nov"](n,34).role,t["\u0275nov"](n,34)._highlighted,t["\u0275nov"](n,34)._triggersSubmenu,t["\u0275nov"](n,34)._getTabIndex(),t["\u0275nov"](n,34).disabled.toString(),t["\u0275nov"](n,34).disabled||null),e(n,35,0,t["\u0275unv"](n,35,0,t["\u0275nov"](n,36).transform(l.i18n+"step3.button.prior-month.label")))}))}function Ve(e){return t["\u0275vid"](2,[t["\u0275qud"](402653184,1,{gridCmp:0}),(e()(),t["\u0275eld"](1,0,null,null,9,"div",[["class","__header"]],null,null,null,null,null)),(e()(),t["\u0275eld"](2,0,null,null,6,"div",[["class","__title-block"]],null,null,null,null,null)),(e()(),t["\u0275eld"](3,0,null,null,2,"span",[["class","__title"]],null,null,null,null,null)),(e()(),t["\u0275ted"](4,null,["",":"])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](6,0,null,null,2,"span",[["class","__budget-type"]],null,null,null,null,null)),(e()(),t["\u0275ted"](7,null,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275and"](16777216,null,null,1,null,qe)),t["\u0275did"](10,16384,null,0,C.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),t["\u0275eld"](11,0,null,null,2,"app-default-grid",[["class","__grid"],["theme","material"]],null,null,null,ke.b,ke.a)),t["\u0275prd"](512,null,ye.a,ye.a,[xe.a,Oe.a,we.a,d.j]),t["\u0275did"](13,4964352,[[1,4],["gridCmp",4]],0,Se.a,[De.a,ye.a,Re.a,Ie.a,Me.a,x.b,Pe.a],{data:[0,"data"],columns:[1,"columns"],theme:[2,"theme"]},null)],(function(e,n){var l=n.component;e(n,10,0,l.isEditMode&&l.isByMonths&&l.isDocs),e(n,13,0,l.data,l.columns,"material")}),(function(e,n){var l=n.component;e(n,4,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform(l.i18n+"step3.field.budget.label"))),e(n,7,0,t["\u0275unv"](n,7,0,t["\u0275nov"](n,8).transform(l.i18n+"step3.field.budget.item.by-store.label")))}))}var Ae=l("+RwI"),Be=l("3Pji"),Ne=l("EY2u"),Ge=l("LRne"),Le=l("SxV6"),Ke=l("UXun"),ze=l("DUlt");class Ue{constructor(e,n,l,t,i,a,o,r,u,d,s){this.dialogRef=e,this.changeDetectorRef=n,this.dialog=l,this.sessionService=t,this.translate=i,this.confirmDialog=a,this.ekdData=o,this.ekdForm=r,this.ekdApi=u,this.stepper=d,this.i18n=w.a,this.isMaximized=!1,this.isHAG=!1,this.sliderFormatter={to:e=>parseInt(String(e),10)+"%",from:e=>parseInt(e,10)},this.makeKPIPublic=!1,this.debug=s.factory(new.target.name,x.a.All)}ngOnInit(){this.currentUser=this.sessionService.getCurrentUser(),this.isHAG=this.currentUser.instance_name.indexOf("HAG")>=0,this.makeKPIPublic=this.currentUser.AccessLevel>=80,this.formGroup=this.ekdForm.form.get("data"),this.budgetByStores$=this.ekdData.budgetByStores$,this.isEditMode$=this.ekdData.isEditMode$,this.initBooleanStreams(),this.initKpiValueTypeListStream(),this.initSelectedReportStream(),this.initKpiNameDefaultValue(),this.initDropdownDataStreams(),this.initResizeSubscription(),this.ekdData.isEditMode$.pipe(Object(B.a)(e=>!e),Object(Fe.a)(()=>this.selectedReport$),Object(z.a)(this),Object(y.a)(e=>e.stores)).subscribe(e=>this.ekdData.setCreatingKpiBudgetByStores(e))}ngOnDestroy(){this.ekdData.isReportChanged$.next(!1)}deleteKpi(){this.translate.get(["step3.delete-confirm.title","step3.delete-confirm.text","step3.delete-confirm.button.cancel","step3.delete-confirm.button.delete"].map(e=>w.a+e)).pipe(Object(z.a)(this)).subscribe(e=>{this.confirmDialog.openDialog({title:e[w.a+"step3.delete-confirm.title"],text:e[w.a+"step3.delete-confirm.text"],cancelBtnText:e[w.a+"step3.delete-confirm.button.cancel"],okBtnText:e[w.a+"step3.delete-confirm.button.delete"]}).subscribe(e=>{"YES"===e&&this.ekdData.deleteEditingKpi().subscribe(()=>{this.dialog.successT(w.a+"message.delete.success"),this.dialogRef.close({deleted:!0})})})})}toggleSize(){this.isMaximized=!this.isMaximized,this.stepper.toggleSize(this.isMaximized)}setDropDownControlDefaultValue(e,n){const l=this.formGroup.get(e);if(!l)throw new Error(`setDropDownControlDefaultValue() Wrong control name: '${e}'`);null==l.value&&n.length&&(l.setValue("opsFilter"===e?n[1].id:n[0].id),l.updateValueAndValidity(),this.changeDetectorRef.detectChanges())}initSelectedReportStream(){const e=this.ekdForm.value.report.reportId;if(me.isNil(e))this.selectedReport$=Ne.a;else{const{kpiTypeId:n,docReportId:l}=this.ekdForm.value.kpiType;this.debug.log("ngOnInit() KPI Type ID: '%s', Doc Report ID: '%s'",n,l),this.selectedReport$=this.ekdData.getKpiSetupReportList(n,l).pipe(Object(y.a)(n=>n.find(n=>n.reportId===e)),Object(B.a)(e=>!!e))}}initKpiNameDefaultValue(){this.ekdData.isReportChanged$.subscribe(e=>{e&&this.isEditMode$.pipe(Object(Le.a)(),Object(z.a)(this)).subscribe(()=>{const e=this.formGroup.get("kpiName");this.selectedReport$.pipe(Object(Le.a)(),Object(z.a)(this)).subscribe(n=>{e.setValue(n&&n.reportName),e.updateValueAndValidity(),this.isSectionEqualsOpenParts=!(!this.isSectionEqualsOps||"6"!==n.reportId||this.isHAG)})})})}initKpiValueTypeListStream(){this.kpiValueTypeList$=Object(Ge.a)([new ze.a({id:S.e.Amount,name:"Amount"}),new ze.a({id:S.e.Count,name:"Count"})])}initBooleanStreams(){const e=e=>Object(y.a)(n=>n===e),n=this.ekdForm.form.get("kpiType").get("kpiTypeId"),l=this.ekdForm.form.get("report").get("reportId").value,t=n.valueChanges.pipe(Object(K.a)(n.value));this.isSectionEqualsDocs$=t.pipe(e(S.d.Docs)),this.isSectionEqualsDocs$.subscribe(e=>{this.stepper.isSectionEqualsDocs$.next(e),this.ekdData.isSectionEqualsDocs$.next(e)}),t.subscribe(e=>{this.isSectionEqualsOps=e===S.d.Operations}),this.isSectionEqualsOpenParts=!(!this.isSectionEqualsOps||"6"!==l||this.isHAG),this.isSectionEqualsSchedulesOrOperations$=t.pipe(Object(y.a)(e=>e===S.d.Schedules||e===S.d.Operations));const i=this.formGroup.get("budgetTypeId");this.selectedBudgetType$=i.valueChanges.pipe(Object(K.a)(i.value),Object(Ke.a)(1)),this.selectedBudgetType$.subscribe(e=>this.stepper.budgetType$.next(e));const a=this.selectedBudgetType$;this.isBudgetTypeEqualsSingleEntry$=a.pipe(e(S.c.SingleEntry)),this.isBudgetTypeEqualsByStore$=a.pipe(e(S.c.ByStore)),this.isBudgetTypeEqualsByStoreByMonth$=a.pipe(e(S.c.ByStoreByMonth)),this.isBudgetTypeEqualsBudgetFromDocs$=a.pipe(e(S.c.BudgetFromDocs)),this.isBudgetTypeComputed$=a.pipe(Object(y.a)(e=>e===S.c.ByStore||e===S.c.ByStoreByMonth))}initDropdownDataStreams(){this.kpiDocsBudgetList$=this.ekdApi.getKpiDocBudgets().pipe(Object(Ke.a)(1),Object(A.a)(this.setDropDownControlDefaultValue.bind(this,"budgetFromDocId"))),this.budgetTypeList$=this.ekdData.kpiBudgetTypeList$.pipe(Object(A.a)(this.setDropDownControlDefaultValue.bind(this,"budgetTypeId"))),this.opsFilterList$=this.ekdData.opsFilterList$.pipe(Object(A.a)(this.setDropDownControlDefaultValue.bind(this,"opsFilter")))}initResizeSubscription(){this.isBudgetTypeComputed$.pipe(Object(z.a)(this)).subscribe(e=>{e?this.dialogRef.updateSize("1000px","650px"):this.dialogRef.updateSize("700px","500px")}),this.stepper.isMaximized$.pipe(Object(M.a)(this.isBudgetTypeComputed$),Object(z.a)(this)).subscribe(([e])=>{e?this.dialogRef.updateSize("95vw","95vh"):this.dialogRef.updateSize("1000px","650px")})}}var Je=l("4asF"),Ze=t["\u0275crt"]({encapsulation:0,styles:[o,["[_nghost-%COMP%]{display:block}.ekd-name-container[_ngcontent-%COMP%]{transition:.2s ease all}.ekd-name-container--inline[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.ekd-name-container--inline[_ngcontent-%COMP%]   .ekd-kpi-options[_ngcontent-%COMP%]{padding:6px 0 0}.ekd-name-container--inline[_ngcontent-%COMP%]   .ekd-kpi-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]:not(:last-of-type){margin-right:35px}.ekd-kpi-options[_ngcontent-%COMP%]{padding:25px 0}.ekd-kpi-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]:not(:last-of-type){margin-right:35px}.ekd-kpi-options[_ngcontent-%COMP%]     .mat-slide-toggle-content{padding-top:3px}.ekd-kpi-budget[_ngcontent-%COMP%], .ekd-number-days-and-value-type[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.ekd-kpi-budget[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .ekd-number-days-and-value-type[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:calc(50% - 15px);flex:0 0 calc(50% - 15px)}.ekd-kpi-budget[_ngcontent-%COMP%]{margin-top:25px}.ekd--computed-budget[_ngcontent-%COMP%]   .ekd-kpi-budget[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;flex:0 0 100%}.ekd-number-days-and-value-type[_ngcontent-%COMP%]{margin-top:15px}.ekd-is-public-container[_ngcontent-%COMP%]{padding:35px 0}.ekd--computed-budget[_ngcontent-%COMP%]   .ekd-is-public-container[_ngcontent-%COMP%]{padding:20px 0}.ekd-form[_ngcontent-%COMP%]{padding-top:10px}.nouislider[_ngcontent-%COMP%]   .theme-alerts[_ngcontent-%COMP%]{margin:20px 0}.ekd--computed-budget[_ngcontent-%COMP%]   .nouislider[_ngcontent-%COMP%]   .theme-alerts[_ngcontent-%COMP%]{margin-bottom:10px}app-ekd-computed-budget[_ngcontent-%COMP%]{margin-left:-20px;margin-right:-20px}"]],data:{}});function He(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,16777216,null,null,2,"button",[["class","ekd-delete-kpi-btn"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,n,l){var i=!0,a=e.component;return"longpress"===n&&(i=!1!==t["\u0275nov"](e,1).show()&&i),"keydown"===n&&(i=!1!==t["\u0275nov"](e,1)._handleKeydown(l)&&i),"touchend"===n&&(i=!1!==t["\u0275nov"](e,1)._handleTouchend()&&i),"click"===n&&(i=!1!==a.deleteKpi()&&i),i}),null,null)),t["\u0275did"](1,212992,null,0,de.d,[se.c,t.ElementRef,b.e,t.ViewContainerRef,t.NgZone,g.a,_.c,_.h,de.b,[2,p.b],[2,de.a],[2,Q.f]],{message:[0,"message"]},null),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275and"](0,null,null,0))],(function(e,n){var l=n.component;e(n,1,0,t["\u0275unv"](n,1,0,t["\u0275nov"](n,2).transform(l.i18n+"step3.button.delete.tooltip")))}),null)}function Xe(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"mat-error",[["class","error mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),t["\u0275did"](1,16384,null,0,c.b,[],null,null)],null,(function(e,n){e(n,0,0,t["\u0275nov"](n,1).id)}))}function We(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,1)._selectViaInteraction()&&i),"keydown"===n&&(i=!1!==t["\u0275nov"](e,1)._handleKeydown(l)&&i),i}),r.b,r.a)),t["\u0275did"](1,8568832,[[19,4]],0,u.p,[t.ElementRef,t.ChangeDetectorRef,[2,u.j],[2,u.o]],{value:[0,"value"]},null),(e()(),t["\u0275ted"](2,0,[" "," "]))],(function(e,n){e(n,1,0,n.context.$implicit.id)}),(function(e,n){e(n,0,0,t["\u0275nov"](n,1)._getTabIndex(),t["\u0275nov"](n,1).selected,t["\u0275nov"](n,1).multiple,t["\u0275nov"](n,1).active,t["\u0275nov"](n,1).id,t["\u0275nov"](n,1)._getAriaSelected(),t["\u0275nov"](n,1).disabled.toString(),t["\u0275nov"](n,1).disabled),e(n,2,0,n.context.$implicit.label)}))}function Ye(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,24,"div",[],null,null,null,null,null)),(e()(),t["\u0275eld"](1,0,null,null,23,"mat-form-field",[["class","filter-group-item mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,s.b,s.a)),t["\u0275did"](2,7520256,null,9,c.c,[t.ElementRef,t.ChangeDetectorRef,[2,u.h],[2,p.b],[2,c.a],g.a,t.NgZone,[2,h.a]],null,null),t["\u0275qud"](603979776,10,{_controlNonStatic:0}),t["\u0275qud"](335544320,11,{_controlStatic:0}),t["\u0275qud"](603979776,12,{_labelChildNonStatic:0}),t["\u0275qud"](335544320,13,{_labelChildStatic:0}),t["\u0275qud"](603979776,14,{_placeholderChild:0}),t["\u0275qud"](603979776,15,{_errorChildren:1}),t["\u0275qud"](603979776,16,{_hintChildren:1}),t["\u0275qud"](603979776,17,{_prefixChildren:1}),t["\u0275qud"](603979776,18,{_suffixChildren:1}),(e()(),t["\u0275eld"](12,0,null,1,12,"mat-select",[["class","mat-select"],["formControlName","opsFilter"],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"keydown"],[null,"focus"],[null,"blur"]],(function(e,n,l){var i=!0;return"keydown"===n&&(i=!1!==t["\u0275nov"](e,17)._handleKeydown(l)&&i),"focus"===n&&(i=!1!==t["\u0275nov"](e,17)._onFocus()&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,17)._onBlur()&&i),i}),m.b,m.a)),t["\u0275prd"](6144,null,u.j,null,[f.c]),t["\u0275did"](14,671744,null,0,v.i,[[3,v.d],[8,null],[8,null],[8,null],[2,v.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,v.r,null,[v.i]),t["\u0275did"](16,16384,null,0,v.s,[[4,v.r]],null,null),t["\u0275did"](17,2080768,null,3,f.c,[b.i,t.ChangeDetectorRef,t.NgZone,u.b,t.ElementRef,[2,p.b],[2,v.u],[2,v.k],[2,c.c],[6,v.r],[8,null],f.a,_.j],{placeholder:[0,"placeholder"]},null),t["\u0275qud"](603979776,19,{options:1}),t["\u0275qud"](603979776,20,{optionGroups:1}),t["\u0275qud"](603979776,21,{customTrigger:0}),t["\u0275prd"](2048,[[10,4],[11,4]],c.d,null,[f.c]),(e()(),t["\u0275and"](16777216,null,1,2,null,We)),t["\u0275did"](23,278528,null,0,C.l,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef])],(function(e,n){var l=n.component;e(n,14,0,"opsFilter"),e(n,17,0,"Ops Filter"),e(n,23,0,t["\u0275unv"](n,23,0,t["\u0275nov"](n,24).transform(l.opsFilterList$)))}),(function(e,n){e(n,1,1,["standard"==t["\u0275nov"](n,2).appearance,"fill"==t["\u0275nov"](n,2).appearance,"outline"==t["\u0275nov"](n,2).appearance,"legacy"==t["\u0275nov"](n,2).appearance,t["\u0275nov"](n,2)._control.errorState,t["\u0275nov"](n,2)._canLabelFloat,t["\u0275nov"](n,2)._shouldLabelFloat(),t["\u0275nov"](n,2)._hasFloatingLabel(),t["\u0275nov"](n,2)._hideControlPlaceholder(),t["\u0275nov"](n,2)._control.disabled,t["\u0275nov"](n,2)._control.autofilled,t["\u0275nov"](n,2)._control.focused,"accent"==t["\u0275nov"](n,2).color,"warn"==t["\u0275nov"](n,2).color,t["\u0275nov"](n,2)._shouldForward("untouched"),t["\u0275nov"](n,2)._shouldForward("touched"),t["\u0275nov"](n,2)._shouldForward("pristine"),t["\u0275nov"](n,2)._shouldForward("dirty"),t["\u0275nov"](n,2)._shouldForward("valid"),t["\u0275nov"](n,2)._shouldForward("invalid"),t["\u0275nov"](n,2)._shouldForward("pending"),!t["\u0275nov"](n,2)._animationsEnabled]),e(n,12,1,[t["\u0275nov"](n,16).ngClassUntouched,t["\u0275nov"](n,16).ngClassTouched,t["\u0275nov"](n,16).ngClassPristine,t["\u0275nov"](n,16).ngClassDirty,t["\u0275nov"](n,16).ngClassValid,t["\u0275nov"](n,16).ngClassInvalid,t["\u0275nov"](n,16).ngClassPending,t["\u0275nov"](n,17).id,t["\u0275nov"](n,17).tabIndex,t["\u0275nov"](n,17)._getAriaLabel(),t["\u0275nov"](n,17)._getAriaLabelledby(),t["\u0275nov"](n,17).required.toString(),t["\u0275nov"](n,17).disabled.toString(),t["\u0275nov"](n,17).errorState,t["\u0275nov"](n,17).panelOpen?t["\u0275nov"](n,17)._optionIds:null,t["\u0275nov"](n,17).multiple,t["\u0275nov"](n,17)._ariaDescribedby||null,t["\u0275nov"](n,17)._getAriaActiveDescendant(),t["\u0275nov"](n,17).disabled,t["\u0275nov"](n,17).errorState,t["\u0275nov"](n,17).required,t["\u0275nov"](n,17).empty])}))}function Qe(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,16,"div",[["class","ekd-kpi-options"]],null,null,null,null,null)),(e()(),t["\u0275eld"](1,0,null,null,7,"mat-slide-toggle",[["class","mat-slide-toggle"],["formControlName","isUseProjection"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checked",null],[2,"mat-disabled",null],[2,"mat-slide-toggle-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"focus"]],(function(e,n,l){var i=!0;return"focus"===n&&(i=!1!==t["\u0275nov"](e,2)._inputElement.nativeElement.focus()&&i),i}),ce.b,ce.a)),t["\u0275did"](2,1228800,null,0,pe.b,[t.ElementRef,_.h,t.ChangeDetectorRef,[8,null],t.NgZone,pe.a,[2,h.a],[2,p.b]],null,null),t["\u0275prd"](1024,null,v.q,(function(e){return[e]}),[pe.b]),t["\u0275did"](4,671744,null,0,v.i,[[3,v.d],[8,null],[8,null],[6,v.q],[2,v.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,v.r,null,[v.i]),t["\u0275did"](6,16384,null,0,v.s,[[4,v.r]],null,null),(e()(),t["\u0275ted"](7,0,[" "," "])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](9,0,null,null,7,"mat-slide-toggle",[["class","mat-slide-toggle"],["formControlName","isUseProRate"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checked",null],[2,"mat-disabled",null],[2,"mat-slide-toggle-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"focus"]],(function(e,n,l){var i=!0;return"focus"===n&&(i=!1!==t["\u0275nov"](e,10)._inputElement.nativeElement.focus()&&i),i}),ce.b,ce.a)),t["\u0275did"](10,1228800,null,0,pe.b,[t.ElementRef,_.h,t.ChangeDetectorRef,[8,null],t.NgZone,pe.a,[2,h.a],[2,p.b]],null,null),t["\u0275prd"](1024,null,v.q,(function(e){return[e]}),[pe.b]),t["\u0275did"](12,671744,null,0,v.i,[[3,v.d],[8,null],[8,null],[6,v.q],[2,v.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,v.r,null,[v.i]),t["\u0275did"](14,16384,null,0,v.s,[[4,v.r]],null,null),(e()(),t["\u0275ted"](15,0,[" "," "])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef])],(function(e,n){e(n,4,0,"isUseProjection"),e(n,12,0,"isUseProRate")}),(function(e,n){var l=n.component;e(n,1,1,[t["\u0275nov"](n,2).id,t["\u0275nov"](n,2).disabled?null:-1,t["\u0275nov"](n,2).checked,t["\u0275nov"](n,2).disabled,"before"==t["\u0275nov"](n,2).labelPosition,"NoopAnimations"===t["\u0275nov"](n,2)._animationMode,t["\u0275nov"](n,6).ngClassUntouched,t["\u0275nov"](n,6).ngClassTouched,t["\u0275nov"](n,6).ngClassPristine,t["\u0275nov"](n,6).ngClassDirty,t["\u0275nov"](n,6).ngClassValid,t["\u0275nov"](n,6).ngClassInvalid,t["\u0275nov"](n,6).ngClassPending]),e(n,7,0,t["\u0275unv"](n,7,0,t["\u0275nov"](n,8).transform(l.i18n+"step3.field.use-projection.label"))),e(n,9,1,[t["\u0275nov"](n,10).id,t["\u0275nov"](n,10).disabled?null:-1,t["\u0275nov"](n,10).checked,t["\u0275nov"](n,10).disabled,"before"==t["\u0275nov"](n,10).labelPosition,"NoopAnimations"===t["\u0275nov"](n,10)._animationMode,t["\u0275nov"](n,14).ngClassUntouched,t["\u0275nov"](n,14).ngClassTouched,t["\u0275nov"](n,14).ngClassPristine,t["\u0275nov"](n,14).ngClassDirty,t["\u0275nov"](n,14).ngClassValid,t["\u0275nov"](n,14).ngClassInvalid,t["\u0275nov"](n,14).ngClassPending]),e(n,15,0,t["\u0275unv"](n,15,0,t["\u0275nov"](n,16).transform(l.i18n+"step3.field.use-prorated-budget.label")))}))}function en(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,3,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,1)._selectViaInteraction()&&i),"keydown"===n&&(i=!1!==t["\u0275nov"](e,1)._handleKeydown(l)&&i),i}),r.b,r.a)),t["\u0275did"](1,8568832,[[31,4]],0,u.p,[t.ElementRef,t.ChangeDetectorRef,[2,u.j],[2,u.o]],{value:[0,"value"]},null),(e()(),t["\u0275ted"](2,0,[" "," "])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef])],(function(e,n){e(n,1,0,n.context.$implicit.id)}),(function(e,n){var l=n.component;e(n,0,0,t["\u0275nov"](n,1)._getTabIndex(),t["\u0275nov"](n,1).selected,t["\u0275nov"](n,1).multiple,t["\u0275nov"](n,1).active,t["\u0275nov"](n,1).id,t["\u0275nov"](n,1)._getAriaSelected(),t["\u0275nov"](n,1).disabled.toString(),t["\u0275nov"](n,1).disabled),e(n,2,0,t["\u0275unv"](n,2,0,t["\u0275nov"](n,3).transform(l.i18n+"step1.field."+n.context.$implicit.name+".label")))}))}function nn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"mat-error",[["class","error mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),t["\u0275did"](1,16384,null,0,c.b,[],null,null)],null,(function(e,n){e(n,0,0,t["\u0275nov"](n,1).id)}))}function ln(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"mat-error",[["class","error mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),t["\u0275did"](1,16384,null,0,c.b,[],null,null)],null,(function(e,n){e(n,0,0,t["\u0275nov"](n,1).id)}))}function tn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,23,"div",[],null,null,null,null,null)),(e()(),t["\u0275eld"](1,0,null,null,20,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,s.b,s.a)),t["\u0275did"](2,7520256,null,9,c.c,[t.ElementRef,t.ChangeDetectorRef,[2,u.h],[2,p.b],[2,c.a],g.a,t.NgZone,[2,h.a]],null,null),t["\u0275qud"](603979776,34,{_controlNonStatic:0}),t["\u0275qud"](335544320,35,{_controlStatic:0}),t["\u0275qud"](603979776,36,{_labelChildNonStatic:0}),t["\u0275qud"](335544320,37,{_labelChildStatic:0}),t["\u0275qud"](603979776,38,{_placeholderChild:0}),t["\u0275qud"](603979776,39,{_errorChildren:1}),t["\u0275qud"](603979776,40,{_hintChildren:1}),t["\u0275qud"](603979776,41,{_prefixChildren:1}),t["\u0275qud"](603979776,42,{_suffixChildren:1}),(e()(),t["\u0275eld"](12,0,null,1,9,"input",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","budgetAmount"],["matInput",""],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"focus"]],(function(e,n,l){var i=!0;return"input"===n&&(i=!1!==t["\u0275nov"](e,13)._handleInput(l.target.value)&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,13).onTouched()&&i),"compositionstart"===n&&(i=!1!==t["\u0275nov"](e,13)._compositionStart()&&i),"compositionend"===n&&(i=!1!==t["\u0275nov"](e,13)._compositionEnd(l.target.value)&&i),"change"===n&&(i=!1!==t["\u0275nov"](e,14).onChange(l.target.value)&&i),"input"===n&&(i=!1!==t["\u0275nov"](e,14).onChange(l.target.value)&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,14).onTouched()&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,19)._focusChanged(!1)&&i),"focus"===n&&(i=!1!==t["\u0275nov"](e,19)._focusChanged(!0)&&i),"input"===n&&(i=!1!==t["\u0275nov"](e,19)._onInput()&&i),i}),null,null)),t["\u0275did"](13,16384,null,0,v.e,[t.Renderer2,t.ElementRef,[2,v.a]],null,null),t["\u0275did"](14,16384,null,0,v.x,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,v.q,(function(e,n){return[e,n]}),[v.e,v.x]),t["\u0275did"](16,671744,null,0,v.i,[[3,v.d],[8,null],[8,null],[6,v.q],[2,v.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,v.r,null,[v.i]),t["\u0275did"](18,16384,null,0,v.s,[[4,v.r]],null,null),t["\u0275did"](19,999424,null,0,ge.b,[t.ElementRef,g.a,[6,v.r],[2,v.u],[2,v.k],u.b,[8,null],he.a,t.NgZone],{placeholder:[0,"placeholder"],type:[1,"type"]},null),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),t["\u0275prd"](2048,[[34,4],[35,4]],c.d,null,[ge.b]),(e()(),t["\u0275and"](16777216,null,null,1,null,ln)),t["\u0275did"](23,737280,null,0,ve,[[3,v.d],t.ViewContainerRef,t.TemplateRef,t.Renderer2,be.a],{appValidationMessage:[0,"appValidationMessage"]},null)],(function(e,n){var l=n.component;e(n,16,0,"budgetAmount"),e(n,19,0,t["\u0275unv"](n,19,0,t["\u0275nov"](n,20).transform(l.i18n+"step3.field.budget.label")),"number"),e(n,23,0,"budgetAmount")}),(function(e,n){e(n,1,1,["standard"==t["\u0275nov"](n,2).appearance,"fill"==t["\u0275nov"](n,2).appearance,"outline"==t["\u0275nov"](n,2).appearance,"legacy"==t["\u0275nov"](n,2).appearance,t["\u0275nov"](n,2)._control.errorState,t["\u0275nov"](n,2)._canLabelFloat,t["\u0275nov"](n,2)._shouldLabelFloat(),t["\u0275nov"](n,2)._hasFloatingLabel(),t["\u0275nov"](n,2)._hideControlPlaceholder(),t["\u0275nov"](n,2)._control.disabled,t["\u0275nov"](n,2)._control.autofilled,t["\u0275nov"](n,2)._control.focused,"accent"==t["\u0275nov"](n,2).color,"warn"==t["\u0275nov"](n,2).color,t["\u0275nov"](n,2)._shouldForward("untouched"),t["\u0275nov"](n,2)._shouldForward("touched"),t["\u0275nov"](n,2)._shouldForward("pristine"),t["\u0275nov"](n,2)._shouldForward("dirty"),t["\u0275nov"](n,2)._shouldForward("valid"),t["\u0275nov"](n,2)._shouldForward("invalid"),t["\u0275nov"](n,2)._shouldForward("pending"),!t["\u0275nov"](n,2)._animationsEnabled]),e(n,12,1,[t["\u0275nov"](n,18).ngClassUntouched,t["\u0275nov"](n,18).ngClassTouched,t["\u0275nov"](n,18).ngClassPristine,t["\u0275nov"](n,18).ngClassDirty,t["\u0275nov"](n,18).ngClassValid,t["\u0275nov"](n,18).ngClassInvalid,t["\u0275nov"](n,18).ngClassPending,t["\u0275nov"](n,19)._isServer,t["\u0275nov"](n,19).id,t["\u0275nov"](n,19).placeholder,t["\u0275nov"](n,19).disabled,t["\u0275nov"](n,19).required,t["\u0275nov"](n,19).readonly&&!t["\u0275nov"](n,19)._isNativeSelect||null,t["\u0275nov"](n,19)._ariaDescribedby||null,t["\u0275nov"](n,19).errorState,t["\u0275nov"](n,19).required.toString()])}))}function an(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,1)._selectViaInteraction()&&i),"keydown"===n&&(i=!1!==t["\u0275nov"](e,1)._handleKeydown(l)&&i),i}),r.b,r.a)),t["\u0275did"](1,8568832,[[52,4]],0,u.p,[t.ElementRef,t.ChangeDetectorRef,[2,u.j],[2,u.o]],{value:[0,"value"]},null),(e()(),t["\u0275ted"](2,0,[" "," "]))],(function(e,n){e(n,1,0,n.context.$implicit.id)}),(function(e,n){e(n,0,0,t["\u0275nov"](n,1)._getTabIndex(),t["\u0275nov"](n,1).selected,t["\u0275nov"](n,1).multiple,t["\u0275nov"](n,1).active,t["\u0275nov"](n,1).id,t["\u0275nov"](n,1)._getAriaSelected(),t["\u0275nov"](n,1).disabled.toString(),t["\u0275nov"](n,1).disabled),e(n,2,0,n.context.$implicit.name)}))}function on(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"mat-error",[["class","error mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),t["\u0275did"](1,16384,null,0,c.b,[],null,null)],null,(function(e,n){e(n,0,0,t["\u0275nov"](n,1).id)}))}function rn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,30,"div",[],null,null,null,null,null)),(e()(),t["\u0275eld"](1,0,null,null,27,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,s.b,s.a)),t["\u0275did"](2,7520256,null,9,c.c,[t.ElementRef,t.ChangeDetectorRef,[2,u.h],[2,p.b],[2,c.a],g.a,t.NgZone,[2,h.a]],null,null),t["\u0275qud"](603979776,43,{_controlNonStatic:0}),t["\u0275qud"](335544320,44,{_controlStatic:0}),t["\u0275qud"](603979776,45,{_labelChildNonStatic:0}),t["\u0275qud"](335544320,46,{_labelChildStatic:0}),t["\u0275qud"](603979776,47,{_placeholderChild:0}),t["\u0275qud"](603979776,48,{_errorChildren:1}),t["\u0275qud"](603979776,49,{_hintChildren:1}),t["\u0275qud"](603979776,50,{_prefixChildren:1}),t["\u0275qud"](603979776,51,{_suffixChildren:1}),(e()(),t["\u0275eld"](12,0,null,3,3,"mat-label",[],null,null,null,null,null)),t["\u0275did"](13,16384,[[45,4],[46,4]],0,c.f,[],null,null),(e()(),t["\u0275ted"](14,null,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](16,0,null,1,12,"mat-select",[["class","mat-select"],["formControlName","budgetFromDocId"],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"keydown"],[null,"focus"],[null,"blur"]],(function(e,n,l){var i=!0;return"keydown"===n&&(i=!1!==t["\u0275nov"](e,21)._handleKeydown(l)&&i),"focus"===n&&(i=!1!==t["\u0275nov"](e,21)._onFocus()&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,21)._onBlur()&&i),i}),m.b,m.a)),t["\u0275prd"](6144,null,u.j,null,[f.c]),t["\u0275did"](18,671744,null,0,v.i,[[3,v.d],[8,null],[8,null],[8,null],[2,v.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,v.r,null,[v.i]),t["\u0275did"](20,16384,null,0,v.s,[[4,v.r]],null,null),t["\u0275did"](21,2080768,null,3,f.c,[b.i,t.ChangeDetectorRef,t.NgZone,u.b,t.ElementRef,[2,p.b],[2,v.u],[2,v.k],[2,c.c],[6,v.r],[8,null],f.a,_.j],null,null),t["\u0275qud"](603979776,52,{options:1}),t["\u0275qud"](603979776,53,{optionGroups:1}),t["\u0275qud"](603979776,54,{customTrigger:0}),t["\u0275prd"](2048,[[43,4],[44,4]],c.d,null,[f.c]),(e()(),t["\u0275and"](16777216,null,1,2,null,an)),t["\u0275did"](27,278528,null,0,C.l,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275and"](16777216,null,null,1,null,on)),t["\u0275did"](30,737280,null,0,ve,[[3,v.d],t.ViewContainerRef,t.TemplateRef,t.Renderer2,be.a],{appValidationMessage:[0,"appValidationMessage"]},null)],(function(e,n){var l=n.component;e(n,18,0,"budgetFromDocId"),e(n,21,0),e(n,27,0,t["\u0275unv"](n,27,0,t["\u0275nov"](n,28).transform(l.kpiDocsBudgetList$))),e(n,30,0,"budgetAmount")}),(function(e,n){var l=n.component;e(n,1,1,["standard"==t["\u0275nov"](n,2).appearance,"fill"==t["\u0275nov"](n,2).appearance,"outline"==t["\u0275nov"](n,2).appearance,"legacy"==t["\u0275nov"](n,2).appearance,t["\u0275nov"](n,2)._control.errorState,t["\u0275nov"](n,2)._canLabelFloat,t["\u0275nov"](n,2)._shouldLabelFloat(),t["\u0275nov"](n,2)._hasFloatingLabel(),t["\u0275nov"](n,2)._hideControlPlaceholder(),t["\u0275nov"](n,2)._control.disabled,t["\u0275nov"](n,2)._control.autofilled,t["\u0275nov"](n,2)._control.focused,"accent"==t["\u0275nov"](n,2).color,"warn"==t["\u0275nov"](n,2).color,t["\u0275nov"](n,2)._shouldForward("untouched"),t["\u0275nov"](n,2)._shouldForward("touched"),t["\u0275nov"](n,2)._shouldForward("pristine"),t["\u0275nov"](n,2)._shouldForward("dirty"),t["\u0275nov"](n,2)._shouldForward("valid"),t["\u0275nov"](n,2)._shouldForward("invalid"),t["\u0275nov"](n,2)._shouldForward("pending"),!t["\u0275nov"](n,2)._animationsEnabled]),e(n,14,0,t["\u0275unv"](n,14,0,t["\u0275nov"](n,15).transform(l.i18n+"step3.field.budget-from-docs.label"))),e(n,16,1,[t["\u0275nov"](n,20).ngClassUntouched,t["\u0275nov"](n,20).ngClassTouched,t["\u0275nov"](n,20).ngClassPristine,t["\u0275nov"](n,20).ngClassDirty,t["\u0275nov"](n,20).ngClassValid,t["\u0275nov"](n,20).ngClassInvalid,t["\u0275nov"](n,20).ngClassPending,t["\u0275nov"](n,21).id,t["\u0275nov"](n,21).tabIndex,t["\u0275nov"](n,21)._getAriaLabel(),t["\u0275nov"](n,21)._getAriaLabelledby(),t["\u0275nov"](n,21).required.toString(),t["\u0275nov"](n,21).disabled.toString(),t["\u0275nov"](n,21).errorState,t["\u0275nov"](n,21).panelOpen?t["\u0275nov"](n,21)._optionIds:null,t["\u0275nov"](n,21).multiple,t["\u0275nov"](n,21)._ariaDescribedby||null,t["\u0275nov"](n,21)._getAriaActiveDescendant(),t["\u0275nov"](n,21).disabled,t["\u0275nov"](n,21).errorState,t["\u0275nov"](n,21).required,t["\u0275nov"](n,21).empty])}))}function un(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,1)._selectViaInteraction()&&i),"keydown"===n&&(i=!1!==t["\u0275nov"](e,1)._handleKeydown(l)&&i),i}),r.b,r.a)),t["\u0275did"](1,8568832,[[64,4]],0,u.p,[t.ElementRef,t.ChangeDetectorRef,[2,u.j],[2,u.o]],{value:[0,"value"]},null),(e()(),t["\u0275ted"](2,0,[" "," "]))],(function(e,n){e(n,1,0,n.context.$implicit.id)}),(function(e,n){e(n,0,0,t["\u0275nov"](n,1)._getTabIndex(),t["\u0275nov"](n,1).selected,t["\u0275nov"](n,1).multiple,t["\u0275nov"](n,1).active,t["\u0275nov"](n,1).id,t["\u0275nov"](n,1)._getAriaSelected(),t["\u0275nov"](n,1).disabled.toString(),t["\u0275nov"](n,1).disabled),e(n,2,0,n.context.$implicit.name)}))}function dn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"mat-error",[["class","error mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),t["\u0275did"](1,16384,null,0,c.b,[],null,null)],null,(function(e,n){e(n,0,0,t["\u0275nov"](n,1).id)}))}function sn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"mat-error",[["class","error mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),t["\u0275did"](1,16384,null,0,c.b,[],null,null)],null,(function(e,n){e(n,0,0,t["\u0275nov"](n,1).id)}))}function cn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,55,"div",[["class","ekd-number-days-and-value-type"]],null,null,null,null,null)),(e()(),t["\u0275eld"](1,0,null,null,30,"div",[],null,null,null,null,null)),(e()(),t["\u0275eld"](2,0,null,null,27,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,s.b,s.a)),t["\u0275did"](3,7520256,null,9,c.c,[t.ElementRef,t.ChangeDetectorRef,[2,u.h],[2,p.b],[2,c.a],g.a,t.NgZone,[2,h.a]],null,null),t["\u0275qud"](603979776,55,{_controlNonStatic:0}),t["\u0275qud"](335544320,56,{_controlStatic:0}),t["\u0275qud"](603979776,57,{_labelChildNonStatic:0}),t["\u0275qud"](335544320,58,{_labelChildStatic:0}),t["\u0275qud"](603979776,59,{_placeholderChild:0}),t["\u0275qud"](603979776,60,{_errorChildren:1}),t["\u0275qud"](603979776,61,{_hintChildren:1}),t["\u0275qud"](603979776,62,{_prefixChildren:1}),t["\u0275qud"](603979776,63,{_suffixChildren:1}),(e()(),t["\u0275eld"](13,0,null,3,3,"mat-label",[],null,null,null,null,null)),t["\u0275did"](14,16384,[[57,4],[58,4]],0,c.f,[],null,null),(e()(),t["\u0275ted"](15,null,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](17,0,null,1,12,"mat-select",[["class","mat-select"],["formControlName","kpiValueTypeId"],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"keydown"],[null,"focus"],[null,"blur"]],(function(e,n,l){var i=!0;return"keydown"===n&&(i=!1!==t["\u0275nov"](e,22)._handleKeydown(l)&&i),"focus"===n&&(i=!1!==t["\u0275nov"](e,22)._onFocus()&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,22)._onBlur()&&i),i}),m.b,m.a)),t["\u0275prd"](6144,null,u.j,null,[f.c]),t["\u0275did"](19,671744,null,0,v.i,[[3,v.d],[8,null],[8,null],[8,null],[2,v.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,v.r,null,[v.i]),t["\u0275did"](21,16384,null,0,v.s,[[4,v.r]],null,null),t["\u0275did"](22,2080768,null,3,f.c,[b.i,t.ChangeDetectorRef,t.NgZone,u.b,t.ElementRef,[2,p.b],[2,v.u],[2,v.k],[2,c.c],[6,v.r],[8,null],f.a,_.j],null,null),t["\u0275qud"](603979776,64,{options:1}),t["\u0275qud"](603979776,65,{optionGroups:1}),t["\u0275qud"](603979776,66,{customTrigger:0}),t["\u0275prd"](2048,[[55,4],[56,4]],c.d,null,[f.c]),(e()(),t["\u0275and"](16777216,null,1,2,null,un)),t["\u0275did"](28,278528,null,0,C.l,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275and"](16777216,null,null,1,null,dn)),t["\u0275did"](31,737280,null,0,ve,[[3,v.d],t.ViewContainerRef,t.TemplateRef,t.Renderer2,be.a],{appValidationMessage:[0,"appValidationMessage"]},null),(e()(),t["\u0275eld"](32,0,null,null,23,"div",[],null,null,null,null,null)),(e()(),t["\u0275eld"](33,0,null,null,20,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,s.b,s.a)),t["\u0275did"](34,7520256,null,9,c.c,[t.ElementRef,t.ChangeDetectorRef,[2,u.h],[2,p.b],[2,c.a],g.a,t.NgZone,[2,h.a]],null,null),t["\u0275qud"](603979776,67,{_controlNonStatic:0}),t["\u0275qud"](335544320,68,{_controlStatic:0}),t["\u0275qud"](603979776,69,{_labelChildNonStatic:0}),t["\u0275qud"](335544320,70,{_labelChildStatic:0}),t["\u0275qud"](603979776,71,{_placeholderChild:0}),t["\u0275qud"](603979776,72,{_errorChildren:1}),t["\u0275qud"](603979776,73,{_hintChildren:1}),t["\u0275qud"](603979776,74,{_prefixChildren:1}),t["\u0275qud"](603979776,75,{_suffixChildren:1}),(e()(),t["\u0275eld"](44,0,null,1,9,"input",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","numberDays"],["matInput",""],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"focus"]],(function(e,n,l){var i=!0;return"input"===n&&(i=!1!==t["\u0275nov"](e,45)._handleInput(l.target.value)&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,45).onTouched()&&i),"compositionstart"===n&&(i=!1!==t["\u0275nov"](e,45)._compositionStart()&&i),"compositionend"===n&&(i=!1!==t["\u0275nov"](e,45)._compositionEnd(l.target.value)&&i),"change"===n&&(i=!1!==t["\u0275nov"](e,46).onChange(l.target.value)&&i),"input"===n&&(i=!1!==t["\u0275nov"](e,46).onChange(l.target.value)&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,46).onTouched()&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,51)._focusChanged(!1)&&i),"focus"===n&&(i=!1!==t["\u0275nov"](e,51)._focusChanged(!0)&&i),"input"===n&&(i=!1!==t["\u0275nov"](e,51)._onInput()&&i),i}),null,null)),t["\u0275did"](45,16384,null,0,v.e,[t.Renderer2,t.ElementRef,[2,v.a]],null,null),t["\u0275did"](46,16384,null,0,v.x,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,v.q,(function(e,n){return[e,n]}),[v.e,v.x]),t["\u0275did"](48,671744,null,0,v.i,[[3,v.d],[8,null],[8,null],[6,v.q],[2,v.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,v.r,null,[v.i]),t["\u0275did"](50,16384,null,0,v.s,[[4,v.r]],null,null),t["\u0275did"](51,999424,null,0,ge.b,[t.ElementRef,g.a,[6,v.r],[2,v.u],[2,v.k],u.b,[8,null],he.a,t.NgZone],{placeholder:[0,"placeholder"],type:[1,"type"]},null),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),t["\u0275prd"](2048,[[67,4],[68,4]],c.d,null,[ge.b]),(e()(),t["\u0275and"](16777216,null,null,1,null,sn)),t["\u0275did"](55,737280,null,0,ve,[[3,v.d],t.ViewContainerRef,t.TemplateRef,t.Renderer2,be.a],{appValidationMessage:[0,"appValidationMessage"]},null)],(function(e,n){var l=n.component;e(n,19,0,"kpiValueTypeId"),e(n,22,0),e(n,28,0,t["\u0275unv"](n,28,0,t["\u0275nov"](n,29).transform(l.kpiValueTypeList$))),e(n,31,0,"kpiValueTypeId"),e(n,48,0,"numberDays"),e(n,51,0,t["\u0275unv"](n,51,0,t["\u0275nov"](n,52).transform(l.i18n+"step3.field.filter-days-greater.label")),"number"),e(n,55,0,"numberDays")}),(function(e,n){var l=n.component;e(n,2,1,["standard"==t["\u0275nov"](n,3).appearance,"fill"==t["\u0275nov"](n,3).appearance,"outline"==t["\u0275nov"](n,3).appearance,"legacy"==t["\u0275nov"](n,3).appearance,t["\u0275nov"](n,3)._control.errorState,t["\u0275nov"](n,3)._canLabelFloat,t["\u0275nov"](n,3)._shouldLabelFloat(),t["\u0275nov"](n,3)._hasFloatingLabel(),t["\u0275nov"](n,3)._hideControlPlaceholder(),t["\u0275nov"](n,3)._control.disabled,t["\u0275nov"](n,3)._control.autofilled,t["\u0275nov"](n,3)._control.focused,"accent"==t["\u0275nov"](n,3).color,"warn"==t["\u0275nov"](n,3).color,t["\u0275nov"](n,3)._shouldForward("untouched"),t["\u0275nov"](n,3)._shouldForward("touched"),t["\u0275nov"](n,3)._shouldForward("pristine"),t["\u0275nov"](n,3)._shouldForward("dirty"),t["\u0275nov"](n,3)._shouldForward("valid"),t["\u0275nov"](n,3)._shouldForward("invalid"),t["\u0275nov"](n,3)._shouldForward("pending"),!t["\u0275nov"](n,3)._animationsEnabled]),e(n,15,0,t["\u0275unv"](n,15,0,t["\u0275nov"](n,16).transform(l.i18n+"step3.field.value.label"))),e(n,17,1,[t["\u0275nov"](n,21).ngClassUntouched,t["\u0275nov"](n,21).ngClassTouched,t["\u0275nov"](n,21).ngClassPristine,t["\u0275nov"](n,21).ngClassDirty,t["\u0275nov"](n,21).ngClassValid,t["\u0275nov"](n,21).ngClassInvalid,t["\u0275nov"](n,21).ngClassPending,t["\u0275nov"](n,22).id,t["\u0275nov"](n,22).tabIndex,t["\u0275nov"](n,22)._getAriaLabel(),t["\u0275nov"](n,22)._getAriaLabelledby(),t["\u0275nov"](n,22).required.toString(),t["\u0275nov"](n,22).disabled.toString(),t["\u0275nov"](n,22).errorState,t["\u0275nov"](n,22).panelOpen?t["\u0275nov"](n,22)._optionIds:null,t["\u0275nov"](n,22).multiple,t["\u0275nov"](n,22)._ariaDescribedby||null,t["\u0275nov"](n,22)._getAriaActiveDescendant(),t["\u0275nov"](n,22).disabled,t["\u0275nov"](n,22).errorState,t["\u0275nov"](n,22).required,t["\u0275nov"](n,22).empty]),e(n,33,1,["standard"==t["\u0275nov"](n,34).appearance,"fill"==t["\u0275nov"](n,34).appearance,"outline"==t["\u0275nov"](n,34).appearance,"legacy"==t["\u0275nov"](n,34).appearance,t["\u0275nov"](n,34)._control.errorState,t["\u0275nov"](n,34)._canLabelFloat,t["\u0275nov"](n,34)._shouldLabelFloat(),t["\u0275nov"](n,34)._hasFloatingLabel(),t["\u0275nov"](n,34)._hideControlPlaceholder(),t["\u0275nov"](n,34)._control.disabled,t["\u0275nov"](n,34)._control.autofilled,t["\u0275nov"](n,34)._control.focused,"accent"==t["\u0275nov"](n,34).color,"warn"==t["\u0275nov"](n,34).color,t["\u0275nov"](n,34)._shouldForward("untouched"),t["\u0275nov"](n,34)._shouldForward("touched"),t["\u0275nov"](n,34)._shouldForward("pristine"),t["\u0275nov"](n,34)._shouldForward("dirty"),t["\u0275nov"](n,34)._shouldForward("valid"),t["\u0275nov"](n,34)._shouldForward("invalid"),t["\u0275nov"](n,34)._shouldForward("pending"),!t["\u0275nov"](n,34)._animationsEnabled]),e(n,44,1,[t["\u0275nov"](n,50).ngClassUntouched,t["\u0275nov"](n,50).ngClassTouched,t["\u0275nov"](n,50).ngClassPristine,t["\u0275nov"](n,50).ngClassDirty,t["\u0275nov"](n,50).ngClassValid,t["\u0275nov"](n,50).ngClassInvalid,t["\u0275nov"](n,50).ngClassPending,t["\u0275nov"](n,51)._isServer,t["\u0275nov"](n,51).id,t["\u0275nov"](n,51).placeholder,t["\u0275nov"](n,51).disabled,t["\u0275nov"](n,51).required,t["\u0275nov"](n,51).readonly&&!t["\u0275nov"](n,51)._isNativeSelect||null,t["\u0275nov"](n,51)._ariaDescribedby||null,t["\u0275nov"](n,51).errorState,t["\u0275nov"](n,51).required.toString()])}))}function pn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","ekd-is-public-container"]],null,null,null,null,null)),(e()(),t["\u0275eld"](1,0,null,null,7,"mat-slide-toggle",[["class","mat-slide-toggle"],["formControlName","isPublicKpi"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checked",null],[2,"mat-disabled",null],[2,"mat-slide-toggle-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"focus"]],(function(e,n,l){var i=!0;return"focus"===n&&(i=!1!==t["\u0275nov"](e,2)._inputElement.nativeElement.focus()&&i),i}),ce.b,ce.a)),t["\u0275did"](2,1228800,null,0,pe.b,[t.ElementRef,_.h,t.ChangeDetectorRef,[8,null],t.NgZone,pe.a,[2,h.a],[2,p.b]],null,null),t["\u0275prd"](1024,null,v.q,(function(e){return[e]}),[pe.b]),t["\u0275did"](4,671744,null,0,v.i,[[3,v.d],[8,null],[8,null],[6,v.q],[2,v.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,v.r,null,[v.i]),t["\u0275did"](6,16384,null,0,v.s,[[4,v.r]],null,null),(e()(),t["\u0275ted"](7,0,[" "," "])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef])],(function(e,n){e(n,4,0,"isPublicKpi")}),(function(e,n){var l=n.component;e(n,1,1,[t["\u0275nov"](n,2).id,t["\u0275nov"](n,2).disabled?null:-1,t["\u0275nov"](n,2).checked,t["\u0275nov"](n,2).disabled,"before"==t["\u0275nov"](n,2).labelPosition,"NoopAnimations"===t["\u0275nov"](n,2)._animationMode,t["\u0275nov"](n,6).ngClassUntouched,t["\u0275nov"](n,6).ngClassTouched,t["\u0275nov"](n,6).ngClassPristine,t["\u0275nov"](n,6).ngClassDirty,t["\u0275nov"](n,6).ngClassValid,t["\u0275nov"](n,6).ngClassInvalid,t["\u0275nov"](n,6).ngClassPending]),e(n,7,0,t["\u0275unv"](n,7,0,t["\u0275nov"](n,8).transform(l.i18n+"step3.field.make-kpi-public.label")))}))}function gn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,8,"app-ekd-computed-budget",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"--maximized",null]],[[null,"submit"],[null,"reset"]],(function(e,n,l){var i=!0;return"submit"===n&&(i=!1!==t["\u0275nov"](e,1).onSubmit(l)&&i),"reset"===n&&(i=!1!==t["\u0275nov"](e,1).onReset()&&i),i}),Ve,je)),t["\u0275did"](1,540672,null,0,v.k,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,v.d,null,[v.k]),t["\u0275did"](3,16384,null,0,v.t,[[4,v.d]],null,null),t["\u0275did"](4,770048,[["grid",4]],0,Te,[L.a,Oe.a,P,d.j,x.b],{budgetType:[0,"budgetType"],budgetByStores:[1,"budgetByStores"],formGroup:[2,"formGroup"],isEditMode:[3,"isEditMode"],isDocs:[4,"isDocs"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef])],(function(e,n){var l=n.component;e(n,1,0,l.formGroup),e(n,4,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform(l.selectedBudgetType$)),t["\u0275unv"](n,4,1,t["\u0275nov"](n,6).transform(l.budgetByStores$)),l.formGroup,t["\u0275unv"](n,4,3,t["\u0275nov"](n,7).transform(l.isEditMode$)),t["\u0275unv"](n,4,4,t["\u0275nov"](n,8).transform(l.isSectionEqualsDocs$)))}),(function(e,n){e(n,0,0,t["\u0275nov"](n,3).ngClassUntouched,t["\u0275nov"](n,3).ngClassTouched,t["\u0275nov"](n,3).ngClassPristine,t["\u0275nov"](n,3).ngClassDirty,t["\u0275nov"](n,3).ngClassValid,t["\u0275nov"](n,3).ngClassInvalid,t["\u0275nov"](n,3).ngClassPending,t["\u0275nov"](n,4).isMaximized)}))}function hn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,10,null,null,null,null,null,null,null)),(e()(),t["\u0275eld"](1,0,null,null,4,"button",[["appEkdStepNav","previous"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,3).onClick()&&i),i}),E.b,E.a)),t["\u0275did"](2,180224,null,0,q.b,[t.ElementRef,_.h,[2,h.a]],null,null),t["\u0275did"](3,16384,null,0,V,[P,x.b],{appEkdStepNav:[0,"appEkdStepNav"]},null),(e()(),t["\u0275ted"](4,0,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](6,0,null,null,4,"button",[["appEkdStepNav","next"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,8).onClick()&&i),i}),E.b,E.a)),t["\u0275did"](7,180224,null,0,q.b,[t.ElementRef,_.h,[2,h.a]],{disabled:[0,"disabled"]},null),t["\u0275did"](8,16384,null,0,V,[P,x.b],{appEkdStepNav:[0,"appEkdStepNav"]},null),(e()(),t["\u0275ted"](9,0,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef])],(function(e,n){var l=n.component;e(n,3,0,"previous"),e(n,7,0,l.formGroup.invalid),e(n,8,0,"next")}),(function(e,n){var l=n.component;e(n,1,0,t["\u0275nov"](n,2).disabled||null,"NoopAnimations"===t["\u0275nov"](n,2)._animationMode),e(n,4,0,t["\u0275unv"](n,4,0,t["\u0275nov"](n,5).transform(l.i18n+"step3.button.back.label"))),e(n,6,0,t["\u0275nov"](n,7).disabled||null,"NoopAnimations"===t["\u0275nov"](n,7)._animationMode),e(n,9,0,t["\u0275unv"](n,9,0,t["\u0275nov"](n,10).transform(l.i18n+"step3.button.update.label")))}))}function mn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,4,"button",[["appEkdStepNav","previous"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,2).onClick()&&i),i}),E.b,E.a)),t["\u0275did"](1,180224,null,0,q.b,[t.ElementRef,_.h,[2,h.a]],null,null),t["\u0275did"](2,16384,null,0,V,[P,x.b],{appEkdStepNav:[0,"appEkdStepNav"]},null),(e()(),t["\u0275ted"](3,0,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](5,0,null,null,4,"button",[["appEkdStepNav","next"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,7).onClick()&&i),i}),E.b,E.a)),t["\u0275did"](6,180224,null,0,q.b,[t.ElementRef,_.h,[2,h.a]],{disabled:[0,"disabled"]},null),t["\u0275did"](7,16384,null,0,V,[P,x.b],{appEkdStepNav:[0,"appEkdStepNav"]},null),(e()(),t["\u0275ted"](8,0,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef])],(function(e,n){var l=n.component;e(n,2,0,"previous"),e(n,6,0,l.formGroup.invalid),e(n,7,0,"next")}),(function(e,n){var l=n.component;e(n,0,0,t["\u0275nov"](n,1).disabled||null,"NoopAnimations"===t["\u0275nov"](n,1)._animationMode),e(n,3,0,t["\u0275unv"](n,3,0,t["\u0275nov"](n,4).transform(l.i18n+"step3.button.back.label"))),e(n,5,0,t["\u0275nov"](n,6).disabled||null,"NoopAnimations"===t["\u0275nov"](n,6)._animationMode),e(n,8,0,t["\u0275unv"](n,8,0,t["\u0275nov"](n,9).transform(l.i18n+"step3.button.create.label")))}))}function fn(e){return t["\u0275vid"](2,[(e()(),t["\u0275eld"](0,0,null,null,12,"div",[["class","ekd-header"]],null,null,null,null,null)),t["\u0275prd"](512,null,C.A,C.B,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](2,278528,null,0,C.k,[C.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](3,{fullscreen:0}),(e()(),t["\u0275eld"](4,0,null,null,2,"h3",[["class","ekd-heading"]],null,null,null,null,null)),(e()(),t["\u0275ted"](5,null,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](7,0,null,null,5,"div",[["class","ekd-header-controls"]],null,null,null,null,null)),(e()(),t["\u0275eld"](8,16777216,null,null,2,"button",[["class","ekd-toggle-size-btn"],["type","button"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,n,l){var i=!0,a=e.component;return"longpress"===n&&(i=!1!==t["\u0275nov"](e,9).show()&&i),"keydown"===n&&(i=!1!==t["\u0275nov"](e,9)._handleKeydown(l)&&i),"touchend"===n&&(i=!1!==t["\u0275nov"](e,9)._handleTouchend()&&i),"click"===n&&(i=!1!==a.toggleSize()&&i),i}),null,null)),t["\u0275did"](9,212992,null,0,de.d,[se.c,t.ElementRef,b.e,t.ViewContainerRef,t.NgZone,g.a,_.c,_.h,de.b,[2,p.b],[2,de.a],[2,Q.f]],{message:[0,"message"]},null),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](11,0,null,null,1,"button",[["class","ekd-close-btn"],["mat-dialog-close",""],["type","button"]],[[1,"aria-label",0]],[[null,"click"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,12).dialogRef.close(t["\u0275nov"](e,12).dialogResult)&&i),i}),null,null)),t["\u0275did"](12,606208,null,0,k.g,[[2,k.l],t.ElementRef,k.e],{dialogResult:[0,"dialogResult"]},null),(e()(),t["\u0275eld"](13,0,null,null,8,"div",[["class","ekd-stepper-container"]],[[2,"with-delete-btn",null]],null,null,null,null)),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275eld"](15,0,null,null,3,"app-ekd-stepper",[],null,null,null,j,$)),t["\u0275did"](16,114688,null,0,D,[P,F.a,x.b],{budgetType:[0,"budgetType"],isDocs:[1,"isDocs"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275and"](16777216,null,null,2,null,He)),t["\u0275did"](20,16384,null,0,C.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275eld"](22,0,null,null,96,"div",[["class","ekd-body"]],[[2,"ekd-has-additional-controls",null]],null,null,null,null)),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275eld"](24,0,null,null,94,"form",[["class","ekd-form"],["novalidate",""]],[[2,"ekd--computed-budget",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,n,l){var i=!0;return"submit"===n&&(i=!1!==t["\u0275nov"](e,26).onSubmit(l)&&i),"reset"===n&&(i=!1!==t["\u0275nov"](e,26).onReset()&&i),i}),null,null)),t["\u0275did"](25,16384,null,0,v.I,[],null,null),t["\u0275did"](26,540672,null,0,v.k,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,v.d,null,[v.k]),t["\u0275did"](28,16384,null,0,v.t,[[4,v.d]],null,null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275eld"](30,0,null,null,32,"div",[["class","ekd-name-container"]],null,null,null,null,null)),(e()(),t["\u0275eld"](31,0,null,null,28,"div",[],null,null,null,null,null)),t["\u0275prd"](512,null,C.A,C.B,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](33,278528,null,0,C.k,[C.A],{ngClass:[0,"ngClass"]},null),t["\u0275pod"](34,{"ekd-kpi-budget":0}),(e()(),t["\u0275eld"](35,0,null,null,22,"div",[],null,null,null,null,null)),(e()(),t["\u0275eld"](36,0,null,null,19,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,s.b,s.a)),t["\u0275did"](37,7520256,null,9,c.c,[t.ElementRef,t.ChangeDetectorRef,[2,u.h],[2,p.b],[2,c.a],g.a,t.NgZone,[2,h.a]],null,null),t["\u0275qud"](603979776,1,{_controlNonStatic:0}),t["\u0275qud"](335544320,2,{_controlStatic:0}),t["\u0275qud"](603979776,3,{_labelChildNonStatic:0}),t["\u0275qud"](335544320,4,{_labelChildStatic:0}),t["\u0275qud"](603979776,5,{_placeholderChild:0}),t["\u0275qud"](603979776,6,{_errorChildren:1}),t["\u0275qud"](603979776,7,{_hintChildren:1}),t["\u0275qud"](603979776,8,{_prefixChildren:1}),t["\u0275qud"](603979776,9,{_suffixChildren:1}),(e()(),t["\u0275eld"](47,0,null,1,8,"input",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","kpiName"],["matInput",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],(function(e,n,l){var i=!0;return"input"===n&&(i=!1!==t["\u0275nov"](e,48)._handleInput(l.target.value)&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,48).onTouched()&&i),"compositionstart"===n&&(i=!1!==t["\u0275nov"](e,48)._compositionStart()&&i),"compositionend"===n&&(i=!1!==t["\u0275nov"](e,48)._compositionEnd(l.target.value)&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,53)._focusChanged(!1)&&i),"focus"===n&&(i=!1!==t["\u0275nov"](e,53)._focusChanged(!0)&&i),"input"===n&&(i=!1!==t["\u0275nov"](e,53)._onInput()&&i),i}),null,null)),t["\u0275did"](48,16384,null,0,v.e,[t.Renderer2,t.ElementRef,[2,v.a]],null,null),t["\u0275prd"](1024,null,v.q,(function(e){return[e]}),[v.e]),t["\u0275did"](50,671744,null,0,v.i,[[3,v.d],[8,null],[8,null],[6,v.q],[2,v.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,v.r,null,[v.i]),t["\u0275did"](52,16384,null,0,v.s,[[4,v.r]],null,null),t["\u0275did"](53,999424,null,0,ge.b,[t.ElementRef,g.a,[6,v.r],[2,v.u],[2,v.k],u.b,[8,null],he.a,t.NgZone],{placeholder:[0,"placeholder"]},null),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),t["\u0275prd"](2048,[[1,4],[2,4]],c.d,null,[ge.b]),(e()(),t["\u0275and"](16777216,null,null,1,null,Xe)),t["\u0275did"](57,737280,null,0,ve,[[3,v.d],t.ViewContainerRef,t.TemplateRef,t.Renderer2,be.a],{appValidationMessage:[0,"appValidationMessage"]},null),(e()(),t["\u0275and"](16777216,null,null,1,null,Ye)),t["\u0275did"](59,16384,null,0,C.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),t["\u0275and"](16777216,null,null,2,null,Qe)),t["\u0275did"](61,16384,null,0,C.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275eld"](63,0,null,null,37,"div",[["class","ekd-kpi-budget"]],null,null,null,null,null)),(e()(),t["\u0275eld"](64,0,null,null,30,"div",[],null,null,null,null,null)),(e()(),t["\u0275eld"](65,0,null,null,27,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,s.b,s.a)),t["\u0275did"](66,7520256,null,9,c.c,[t.ElementRef,t.ChangeDetectorRef,[2,u.h],[2,p.b],[2,c.a],g.a,t.NgZone,[2,h.a]],null,null),t["\u0275qud"](603979776,22,{_controlNonStatic:0}),t["\u0275qud"](335544320,23,{_controlStatic:0}),t["\u0275qud"](603979776,24,{_labelChildNonStatic:0}),t["\u0275qud"](335544320,25,{_labelChildStatic:0}),t["\u0275qud"](603979776,26,{_placeholderChild:0}),t["\u0275qud"](603979776,27,{_errorChildren:1}),t["\u0275qud"](603979776,28,{_hintChildren:1}),t["\u0275qud"](603979776,29,{_prefixChildren:1}),t["\u0275qud"](603979776,30,{_suffixChildren:1}),(e()(),t["\u0275eld"](76,0,null,3,3,"mat-label",[],null,null,null,null,null)),t["\u0275did"](77,16384,[[24,4],[25,4]],0,c.f,[],null,null),(e()(),t["\u0275ted"](78,null,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](80,0,null,1,12,"mat-select",[["class","mat-select"],["formControlName","budgetTypeId"],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"keydown"],[null,"focus"],[null,"blur"]],(function(e,n,l){var i=!0;return"keydown"===n&&(i=!1!==t["\u0275nov"](e,85)._handleKeydown(l)&&i),"focus"===n&&(i=!1!==t["\u0275nov"](e,85)._onFocus()&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,85)._onBlur()&&i),i}),m.b,m.a)),t["\u0275prd"](6144,null,u.j,null,[f.c]),t["\u0275did"](82,671744,null,0,v.i,[[3,v.d],[8,null],[8,null],[8,null],[2,v.G]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,v.r,null,[v.i]),t["\u0275did"](84,16384,null,0,v.s,[[4,v.r]],null,null),t["\u0275did"](85,2080768,null,3,f.c,[b.i,t.ChangeDetectorRef,t.NgZone,u.b,t.ElementRef,[2,p.b],[2,v.u],[2,v.k],[2,c.c],[6,v.r],[8,null],f.a,_.j],null,null),t["\u0275qud"](603979776,31,{options:1}),t["\u0275qud"](603979776,32,{optionGroups:1}),t["\u0275qud"](603979776,33,{customTrigger:0}),t["\u0275prd"](2048,[[22,4],[23,4]],c.d,null,[f.c]),(e()(),t["\u0275and"](16777216,null,1,2,null,en)),t["\u0275did"](91,278528,null,0,C.l,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275and"](16777216,null,null,1,null,nn)),t["\u0275did"](94,737280,null,0,ve,[[3,v.d],t.ViewContainerRef,t.TemplateRef,t.Renderer2,be.a],{appValidationMessage:[0,"appValidationMessage"]},null),(e()(),t["\u0275and"](16777216,null,null,2,null,tn)),t["\u0275did"](96,16384,null,0,C.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275and"](16777216,null,null,2,null,rn)),t["\u0275did"](99,16384,null,0,C.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275and"](16777216,null,null,2,null,cn)),t["\u0275did"](102,16384,null,0,C.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275eld"](104,0,null,null,9,"nouislider",[["class","nouislider theme-alerts"]],[[2,"ng2-nouislider",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ae.b,Ae.a)),t["\u0275prd"](512,null,C.A,C.B,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](106,278528,null,0,C.k,[C.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](107,{"old-design reversed":0}),t["\u0275did"](108,638976,null,0,Be.a,[t.ElementRef,t.Renderer2],{behaviour:[0,"behaviour"],connect:[1,"connect"],min:[2,"min"],max:[3,"max"],step:[4,"step"],format:[5,"format"],formControl:[6,"formControl"],tooltips:[7,"tooltips"]},null),t["\u0275pad"](109,4),t["\u0275prd"](1024,null,v.q,(function(e){return[e]}),[Be.a]),t["\u0275did"](111,540672,null,0,v.h,[[8,null],[8,null],[6,v.q],[2,v.G]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,v.r,null,[v.h]),t["\u0275did"](113,16384,null,0,v.s,[[4,v.r]],null,null),(e()(),t["\u0275and"](16777216,null,null,1,null,pn)),t["\u0275did"](115,16384,null,0,C.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),t["\u0275and"](16777216,null,null,2,null,gn)),t["\u0275did"](117,16384,null,0,C.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275eld"](119,0,null,null,4,"div",[["class","ekd-actions"]],null,null,null,null,null)),(e()(),t["\u0275and"](16777216,null,null,2,null,hn)),t["\u0275did"](121,16384,null,0,C.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275and"](0,[["createModeActions",2]],null,0,null,mn))],(function(e,n){var l=n.component,i=e(n,3,0,l.isMaximized);e(n,2,0,"ekd-header",i),e(n,9,0,t["\u0275unv"](n,9,0,t["\u0275nov"](n,10).transform(l.i18n+(l.isMaximized?"header.minimize.tooltip":"header.maximize.tooltip")))),e(n,12,0,""),e(n,16,0,t["\u0275unv"](n,16,0,t["\u0275nov"](n,17).transform(l.selectedBudgetType$)),t["\u0275unv"](n,16,1,t["\u0275nov"](n,18).transform(l.isSectionEqualsDocs$))),e(n,20,0,t["\u0275unv"](n,20,0,t["\u0275nov"](n,21).transform(l.isEditMode$))),e(n,26,0,l.formGroup);var a=e(n,34,0,l.isSectionEqualsOpenParts);e(n,33,0,a),e(n,50,0,"kpiName"),e(n,53,0,t["\u0275unv"](n,53,0,t["\u0275nov"](n,54).transform(l.i18n+"step3.field.kpi-name.label"))),e(n,57,0,"kpiName"),e(n,59,0,l.isSectionEqualsOpenParts),e(n,61,0,t["\u0275unv"](n,61,0,t["\u0275nov"](n,62).transform(l.isSectionEqualsDocs$))),e(n,82,0,"budgetTypeId"),e(n,85,0),e(n,91,0,t["\u0275unv"](n,91,0,t["\u0275nov"](n,92).transform(l.budgetTypeList$))),e(n,94,0,"budgetTypeId"),e(n,96,0,t["\u0275unv"](n,96,0,t["\u0275nov"](n,97).transform(l.isBudgetTypeEqualsSingleEntry$))),e(n,99,0,t["\u0275unv"](n,99,0,t["\u0275nov"](n,100).transform(l.isBudgetTypeEqualsBudgetFromDocs$))),e(n,102,0,t["\u0275unv"](n,102,0,t["\u0275nov"](n,103).transform(l.isSectionEqualsSchedulesOrOperations$)));var o=e(n,107,0,l.formGroup.get("isExpenseKpi").value);e(n,106,0,"nouislider theme-alerts",o);var r=l.sliderFormatter,u=l.formGroup.get("alerts"),d=e(n,109,0,!1,!0,!0,!1);e(n,108,0,"drag",!0,-100,100,1,r,u,d),e(n,111,0,l.formGroup.get("alerts")),e(n,115,0,l.makeKPIPublic),e(n,117,0,t["\u0275unv"](n,117,0,t["\u0275nov"](n,118).transform(l.isBudgetTypeComputed$))),e(n,121,0,t["\u0275unv"](n,121,0,t["\u0275nov"](n,122).transform(l.isEditMode$)),t["\u0275nov"](n,123))}),(function(e,n){var l=n.component;e(n,5,0,t["\u0275unv"](n,5,0,t["\u0275nov"](n,6).transform(l.i18n+"header.create.caption"))),e(n,11,0,t["\u0275nov"](n,12).ariaLabel||null),e(n,13,0,t["\u0275unv"](n,13,0,t["\u0275nov"](n,14).transform(l.isEditMode$))),e(n,22,0,t["\u0275unv"](n,22,0,t["\u0275nov"](n,23).transform(l.isSectionEqualsSchedulesOrOperations$))),e(n,24,0,t["\u0275unv"](n,24,0,t["\u0275nov"](n,29).transform(l.isBudgetTypeComputed$)),t["\u0275nov"](n,28).ngClassUntouched,t["\u0275nov"](n,28).ngClassTouched,t["\u0275nov"](n,28).ngClassPristine,t["\u0275nov"](n,28).ngClassDirty,t["\u0275nov"](n,28).ngClassValid,t["\u0275nov"](n,28).ngClassInvalid,t["\u0275nov"](n,28).ngClassPending),e(n,36,1,["standard"==t["\u0275nov"](n,37).appearance,"fill"==t["\u0275nov"](n,37).appearance,"outline"==t["\u0275nov"](n,37).appearance,"legacy"==t["\u0275nov"](n,37).appearance,t["\u0275nov"](n,37)._control.errorState,t["\u0275nov"](n,37)._canLabelFloat,t["\u0275nov"](n,37)._shouldLabelFloat(),t["\u0275nov"](n,37)._hasFloatingLabel(),t["\u0275nov"](n,37)._hideControlPlaceholder(),t["\u0275nov"](n,37)._control.disabled,t["\u0275nov"](n,37)._control.autofilled,t["\u0275nov"](n,37)._control.focused,"accent"==t["\u0275nov"](n,37).color,"warn"==t["\u0275nov"](n,37).color,t["\u0275nov"](n,37)._shouldForward("untouched"),t["\u0275nov"](n,37)._shouldForward("touched"),t["\u0275nov"](n,37)._shouldForward("pristine"),t["\u0275nov"](n,37)._shouldForward("dirty"),t["\u0275nov"](n,37)._shouldForward("valid"),t["\u0275nov"](n,37)._shouldForward("invalid"),t["\u0275nov"](n,37)._shouldForward("pending"),!t["\u0275nov"](n,37)._animationsEnabled]),e(n,47,1,[t["\u0275nov"](n,52).ngClassUntouched,t["\u0275nov"](n,52).ngClassTouched,t["\u0275nov"](n,52).ngClassPristine,t["\u0275nov"](n,52).ngClassDirty,t["\u0275nov"](n,52).ngClassValid,t["\u0275nov"](n,52).ngClassInvalid,t["\u0275nov"](n,52).ngClassPending,t["\u0275nov"](n,53)._isServer,t["\u0275nov"](n,53).id,t["\u0275nov"](n,53).placeholder,t["\u0275nov"](n,53).disabled,t["\u0275nov"](n,53).required,t["\u0275nov"](n,53).readonly&&!t["\u0275nov"](n,53)._isNativeSelect||null,t["\u0275nov"](n,53)._ariaDescribedby||null,t["\u0275nov"](n,53).errorState,t["\u0275nov"](n,53).required.toString()]),e(n,65,1,["standard"==t["\u0275nov"](n,66).appearance,"fill"==t["\u0275nov"](n,66).appearance,"outline"==t["\u0275nov"](n,66).appearance,"legacy"==t["\u0275nov"](n,66).appearance,t["\u0275nov"](n,66)._control.errorState,t["\u0275nov"](n,66)._canLabelFloat,t["\u0275nov"](n,66)._shouldLabelFloat(),t["\u0275nov"](n,66)._hasFloatingLabel(),t["\u0275nov"](n,66)._hideControlPlaceholder(),t["\u0275nov"](n,66)._control.disabled,t["\u0275nov"](n,66)._control.autofilled,t["\u0275nov"](n,66)._control.focused,"accent"==t["\u0275nov"](n,66).color,"warn"==t["\u0275nov"](n,66).color,t["\u0275nov"](n,66)._shouldForward("untouched"),t["\u0275nov"](n,66)._shouldForward("touched"),t["\u0275nov"](n,66)._shouldForward("pristine"),t["\u0275nov"](n,66)._shouldForward("dirty"),t["\u0275nov"](n,66)._shouldForward("valid"),t["\u0275nov"](n,66)._shouldForward("invalid"),t["\u0275nov"](n,66)._shouldForward("pending"),!t["\u0275nov"](n,66)._animationsEnabled]),e(n,78,0,t["\u0275unv"](n,78,0,t["\u0275nov"](n,79).transform(l.i18n+"step3.field.budget.label"))),e(n,80,1,[t["\u0275nov"](n,84).ngClassUntouched,t["\u0275nov"](n,84).ngClassTouched,t["\u0275nov"](n,84).ngClassPristine,t["\u0275nov"](n,84).ngClassDirty,t["\u0275nov"](n,84).ngClassValid,t["\u0275nov"](n,84).ngClassInvalid,t["\u0275nov"](n,84).ngClassPending,t["\u0275nov"](n,85).id,t["\u0275nov"](n,85).tabIndex,t["\u0275nov"](n,85)._getAriaLabel(),t["\u0275nov"](n,85)._getAriaLabelledby(),t["\u0275nov"](n,85).required.toString(),t["\u0275nov"](n,85).disabled.toString(),t["\u0275nov"](n,85).errorState,t["\u0275nov"](n,85).panelOpen?t["\u0275nov"](n,85)._optionIds:null,t["\u0275nov"](n,85).multiple,t["\u0275nov"](n,85)._ariaDescribedby||null,t["\u0275nov"](n,85)._getAriaActiveDescendant(),t["\u0275nov"](n,85).disabled,t["\u0275nov"](n,85).errorState,t["\u0275nov"](n,85).required,t["\u0275nov"](n,85).empty]),e(n,104,0,!0,t["\u0275nov"](n,113).ngClassUntouched,t["\u0275nov"](n,113).ngClassTouched,t["\u0275nov"](n,113).ngClassPristine,t["\u0275nov"](n,113).ngClassDirty,t["\u0275nov"](n,113).ngClassValid,t["\u0275nov"](n,113).ngClassInvalid,t["\u0275nov"](n,113).ngClassPending)}))}class vn{constructor(e,n,l,t,i){this.dialogRef=e,this.dialog=n,this.ekdData=l,this.ekdForm=t,this.i18n=w.a,this._searchTerm$=new R.a(void 0),this.debug=i.factory(new.target.name,x.a.All)}ngOnInit(){this.ekdData.save(this.ekdForm.value).subscribe(e=>{this.ekdData.openKpiToEdit(e,2020)})}}var bn=t["\u0275crt"]({encapsulation:0,styles:[o,["[_nghost-%COMP%]{display:block}.ekd-name-container[_ngcontent-%COMP%]{transition:.2s ease all}.ekd-name-container--inline[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.ekd-name-container--inline[_ngcontent-%COMP%]   .ekd-kpi-options[_ngcontent-%COMP%]{padding:6px 0 0}.ekd-name-container--inline[_ngcontent-%COMP%]   .ekd-kpi-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]:not(:last-of-type){margin-right:35px}.ekd-kpi-options[_ngcontent-%COMP%]{padding:25px 0}.ekd-kpi-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]:not(:last-of-type){margin-right:35px}.ekd-kpi-options[_ngcontent-%COMP%]     .mat-slide-toggle-content{padding-top:3px}.ekd-kpi-budget[_ngcontent-%COMP%], .ekd-number-days-and-value-type[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.ekd-kpi-budget[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .ekd-number-days-and-value-type[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:calc(50% - 15px);flex:0 0 calc(50% - 15px)}.ekd-kpi-budget[_ngcontent-%COMP%]{margin-top:25px}.ekd--computed-budget[_ngcontent-%COMP%]   .ekd-kpi-budget[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;flex:0 0 100%}.ekd-number-days-and-value-type[_ngcontent-%COMP%]{margin-top:15px}.ekd-is-public-container[_ngcontent-%COMP%]{padding:35px 0}.ekd--computed-budget[_ngcontent-%COMP%]   .ekd-is-public-container[_ngcontent-%COMP%]{padding:20px 0}.ekd-form[_ngcontent-%COMP%]{padding-top:10px}.nouislider[_ngcontent-%COMP%]   .theme-alerts[_ngcontent-%COMP%]{margin:20px 0}.ekd--computed-budget[_ngcontent-%COMP%]   .nouislider[_ngcontent-%COMP%]   .theme-alerts[_ngcontent-%COMP%]{margin-bottom:10px}app-ekd-computed-budget[_ngcontent-%COMP%]{margin-left:-20px;margin-right:-20px}"]],data:{}});function _n(e){return t["\u0275vid"](2,[(e()(),t["\u0275eld"](0,0,null,null,1,"app-ekd-step-3",[["style","height: 100%;"]],[[2,"--maximized",null]],null,null,fn,Ze)),t["\u0275did"](1,245760,null,0,Ue,[k.l,t.ChangeDetectorRef,Oe.a,Pe.a,d.j,Je.a,L.a,U,G.a,P,x.b],null,null)],(function(e,n){e(n,1,0)}),(function(e,n){e(n,0,0,t["\u0275nov"](n,1).isMaximized)}))}class Cn{constructor(e,n,l,t,i){this.dialogRef=e,this.dialog=n,this.ekdForm=l,this.ekdData=t,this.i18n=w.a,this.debug=i.factory(new.target.name,x.a.All)}ngOnInit(){this.ekdData.save(this.ekdForm.value).subscribe(e=>{e&&(this.dialog.successT(w.a+(this.ekdData.isEditing()?"message.update.success":"message.create.success")),this.debug.log("Closing Edit KPI Dialog with kpiId: '%s'",e)),this.dialogRef.close({kpiId:e})})}}var kn=t["\u0275crt"]({encapsulation:0,styles:[o,["[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]   app-loader[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,40px)}"]],data:{}});function yn(e){return t["\u0275vid"](2,[(e()(),t["\u0275eld"](0,0,null,null,6,"div",[["class","ekd-header"]],null,null,null,null,null)),(e()(),t["\u0275eld"](1,0,null,null,2,"h3",[["class","ekd-heading"]],null,null,null,null,null)),(e()(),t["\u0275ted"](2,null,["",""])),t["\u0275pid"](131072,d.i,[d.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](4,0,null,null,2,"div",[["class","ekd-header-controls"]],null,null,null,null,null)),(e()(),t["\u0275eld"](5,0,null,null,1,"button",[["class","ekd-close-btn"],["mat-dialog-close",""],["type","button"]],[[1,"aria-label",0]],[[null,"click"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,6).dialogRef.close(t["\u0275nov"](e,6).dialogResult)&&i),i}),null,null)),t["\u0275did"](6,606208,null,0,k.g,[[2,k.l],t.ElementRef,k.e],{dialogResult:[0,"dialogResult"]},null),(e()(),t["\u0275eld"](7,0,null,null,1,"app-loader",[],[[8,"className",0]],null,null,i.b,i.a)),t["\u0275did"](8,49152,null,0,a.a,[],null,null)],(function(e,n){e(n,6,0,"")}),(function(e,n){var l=n.component;e(n,2,0,t["\u0275unv"](n,2,0,t["\u0275nov"](n,3).transform(l.i18n+"header.create.caption"))),e(n,5,0,t["\u0275nov"](n,6).ariaLabel||null),e(n,7,0,t["\u0275nov"](n,8).cssClassByType)}))}class xn{constructor(e,n,l,t){this.templateRef=e,this.viewContainerRef=n,this.stepper=l,this.activated=!1,this.step$=new R.a(void 0),this.debug=t.factory(new.target.name,x.a.All)}set appEkdStep(e){this.debug.assert(Object(S.h)(e),"[appEkbStep] wrong step: '%s'",e),this.step$.next(e)}ngOnInit(){this.stepper.currentStep$.pipe(Object(M.a)(this.step$),Object(z.a)(this)).subscribe(([e,n])=>{e===n?this.activate():this.deactivate()})}ngOnDestroy(){}activate(){this.activated||(this.viewContainerRef.createEmbeddedView(this.templateRef),this.activated=!0)}deactivate(){this.viewContainerRef.clear(),this.activated=!1}}var On=l("f7BH");l.d(n,"a",(function(){return jn}));var wn=t["\u0275crt"]({encapsulation:0,styles:[[".edit-kpi-dialog-container{max-width:95vw!important}  .edit-kpi-dialog-container>mat-dialog-container{overflow:visible}[_nghost-%COMP%]{position:relative;display:block;height:calc(100% + 24px * 2);margin:-24px}.ekd-step-container[_ngcontent-%COMP%], .ekd-step-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .ekd-step-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{height:100%}"]],data:{}});function Sn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"app-loader",[["type","overlay"]],[[8,"className",0]],null,null,i.b,i.a)),t["\u0275did"](1,49152,null,0,a.a,[],{type:[0,"type"]},null)],(function(e,n){e(n,1,0,"overlay")}),(function(e,n){e(n,0,0,t["\u0275nov"](n,1).cssClassByType)}))}function Dn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"app-ekd-step-1",[],null,null,null,W,J)),t["\u0275did"](1,2211840,null,0,N,[G.a,L.a,U,t.ChangeDetectorRef,x.b],null,null)],(function(e,n){e(n,1,0)}),null)}function Rn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"app-ekd-step-2",[],null,null,null,ue,oe)),t["\u0275did"](1,114688,null,0,ae,[L.a,U,x.b],null,null)],(function(e,n){e(n,1,0)}),null)}function In(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"app-ekd-step-3",[],[[2,"--maximized",null]],null,null,fn,Ze)),t["\u0275did"](1,245760,null,0,Ue,[k.l,t.ChangeDetectorRef,Oe.a,Pe.a,d.j,Je.a,L.a,U,G.a,P,x.b],null,null)],(function(e,n){e(n,1,0)}),(function(e,n){e(n,0,0,t["\u0275nov"](n,1).isMaximized)}))}function Mn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"app-ekd-step-4",[],null,null,null,_n,bn)),t["\u0275did"](1,114688,null,0,vn,[k.l,Oe.a,L.a,U,x.b],null,null)],(function(e,n){e(n,1,0)}),null)}function Pn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"app-ekd-step-finally",[],null,null,null,yn,kn)),t["\u0275did"](1,114688,null,0,Cn,[k.l,Oe.a,U,L.a,x.b],null,null)],(function(e,n){e(n,1,0)}),null)}function Fn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,10,"div",[["class","ekd-step-container"]],null,null,null,null,null)),(e()(),t["\u0275and"](16777216,null,null,1,null,Dn)),t["\u0275did"](2,212992,null,0,xn,[t.TemplateRef,t.ViewContainerRef,P,x.b],{appEkdStep:[0,"appEkdStep"]},null),(e()(),t["\u0275and"](16777216,null,null,1,null,Rn)),t["\u0275did"](4,212992,null,0,xn,[t.TemplateRef,t.ViewContainerRef,P,x.b],{appEkdStep:[0,"appEkdStep"]},null),(e()(),t["\u0275and"](16777216,null,null,1,null,In)),t["\u0275did"](6,212992,null,0,xn,[t.TemplateRef,t.ViewContainerRef,P,x.b],{appEkdStep:[0,"appEkdStep"]},null),(e()(),t["\u0275and"](16777216,null,null,1,null,Mn)),t["\u0275did"](8,212992,null,0,xn,[t.TemplateRef,t.ViewContainerRef,P,x.b],{appEkdStep:[0,"appEkdStep"]},null),(e()(),t["\u0275and"](16777216,null,null,1,null,Pn)),t["\u0275did"](10,212992,null,0,xn,[t.TemplateRef,t.ViewContainerRef,P,x.b],{appEkdStep:[0,"appEkdStep"]},null)],(function(e,n){e(n,2,0,"first"),e(n,4,0,"second"),e(n,6,0,"third"),e(n,8,0,"fourth"),e(n,10,0,"finally")}),null)}function $n(e){return t["\u0275vid"](2,[(e()(),t["\u0275and"](16777216,null,null,2,null,Sn)),t["\u0275did"](1,16384,null,0,C.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),t["\u0275pid"](131072,C.b,[t.ChangeDetectorRef]),(e()(),t["\u0275and"](16777216,null,null,1,null,Fn)),t["\u0275did"](4,16384,null,0,C.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,t["\u0275unv"](n,1,0,t["\u0275nov"](n,2).transform(l.isLoading$))),e(n,4,0,l.dataloaded)}),null)}function Tn(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,3,"app-edit-kpi-dialog",[],null,null,null,$n,wn)),t["\u0275prd"](131584,null,U,U,[v.f,x.b,Pe.a]),t["\u0275prd"](512,null,P,P,[x.b,F.a]),t["\u0275did"](3,245760,null,0,On.a,[k.l,k.a,L.a,U,P,x.b],null,null)],(function(e,n){e(n,3,0)}),null)}var jn=t["\u0275ccf"]("app-edit-kpi-dialog",On.a,Tn,{},{},[])},SL3A:function(e,n,l){"use strict";l.d(n,"a",(function(){return u}));var t=l("/kTj"),i=l("DUlt"),a=l("tFIl"),o=l("LvDl"),r=l("+kfi");class u{constructor(e){this.rawCacheAvailableKpiSetupReports={},this.rawCacheGettedByOneKpi={},this.debug=e.factory(new.target.name,t.a.All)}kpiDocsToIdNameModel(e){const n={id:a.c.number(e.id),name:a.c.string(e.name)};return new i.a(n)}parseAvailableKpiSetupReportItemToModel(e){const n={reportId:this.makeKPISetupReportId(e),reportName:a.c.string(e.ld)};return e&&e.budgetByStores instanceof Array&&(n.stores=this.parseBudgetByStores(e.budgetByStores)),this.rawCacheAvailableKpiSetupReports[n.reportId]=e,new r.g(n)}makeCreateKPIRequestData(e,n,l){const t=this.rawCacheAvailableKpiSetupReports[e];if(!t)throw this.debug.warn("FormData: %O",n),new Error(`Have not raw data for the KpiSetupReportModel with reportId: '${e}'`);return this.makeSaveKPIRequestData(t,n,l)}makeUpdateKPIRequestData(e,n,l){const t=this.rawCacheGettedByOneKpi[e];if(!t)throw this.debug.warn("FormData: %O",n),new Error(`Have not raw data for the KPI with kpiIndex: '${e}'`);return this.makeSaveKPIRequestData(t,n,l)}retrieveFormSchemaFromGetOneKPIRequest(e,n){this.debug.assert(n.gval===n.yval,"gval is not equal yval. May be there is an error"),this.debug.assert(+n.kpiIndex===e,"requested kpiIndex doesn't equal response kpiIndex. Requested: '%s'. From Response: '%s'",e,n.kpiIndex);const l="true"===n.useProj,t={kpiName:a.c.string(n.kpiName),isUseProjection:a.c.boolean(l&&0==+n.projType),isUseProRate:a.c.boolean(l&&1==+n.projType),isPublicKpi:a.c.boolean(n.kpiIndex&&"0"===n.slno),isExpenseKpi:a.c.boolean(n.kpiIndex&&"-1"===n.kpiComp),numberDays:a.c.number(n.numDays),kpiValueTypeId:a.c.number(n.kpiValue),opsFilter:a.c.string(n.opsFilter),budgetTypeId:a.c.number(n.kpiBudgetType),budgetAmount:a.c.number(n.kpiBudAmt),alerts:[-100,a.c.number("-1"===n.kpiComp?n.gval:n.rval),a.c.number("-1"===n.kpiComp?n.rval:n.gval),100]};let i=[];n&&n.budgetByStores instanceof Array&&(i=this.parseBudgetByStores(n.budgetByStores));const o={kpiType:{docReportId:a.c.number(n.kpiSubType),kpiTypeId:a.c.number(n.kpiType)},report:{reportId:this.makeKPISetupReportId(n)},data:t};return this.rawCacheGettedByOneKpi[e]=n,{budget:i,formData:o}}getRawGettedByOneKpi(e){return this.rawCacheGettedByOneKpi[e]}parseBudgetByStores(e){const n=e.map(e=>{const n=new r.f({id:a.c.number(e.store_id),name:a.c.string(e.label),budget:a.c.number(e.budAmt)});return n.budgetByMonths=["JanAmt","FebAmt","MarAmt","AprAmt","MayAmt","JunAmt","JulAmt","AugAmt","SepAmt","OctAmt","NovAmt","DecAmt"].map(n=>a.c.number(e[n])),n});return o.sortBy(n,["name"])}makeKPISetupReportId(e){return"0"===e.kpiType?e.kpiIndex&&e.slno?e.kpiItem:a.c.string(e.ln):"1"===e.kpiType||"2"===e.kpiType?e.kpiIndex&&e.slno?e.kpiSubType:a.c.string(e.ln):void 0}makeSaveKPIRequestData(e,n,l){const t=o.cloneDeep(e);console.log(n.data.alerts,n.data.isExpenseKpi);const i={kpiName:a.c.string(n.data.kpiName),kpiType:a.c.string(n.kpiType.kpiTypeId),kpiSection:a.c.string(n.kpiType.kpiTypeId),kpiSubType:a.c.string(0===n.kpiType.kpiTypeId?n.kpiType.docReportId:n.report.reportId),kpiItem:a.c.string(n.report.reportId),useProj:a.c.string(n.data.isUseProjection),useProrate:a.c.string(n.data.isUseProRate),is_public:a.c.boolean(n.data.isPublicKpi),numDays:a.c.number(n.data.numberDays),kpiValue:a.c.string(n.data.kpiValueTypeId),opsFilter:a.c.string(n.data.opsFilter),kpiBudgetType:a.c.string(n.data.budgetTypeId),kpiBudAmt:a.c.string(n.data.budgetAmount),budByStore:{},budByStoreByMonth:{},rval:a.c.number(n.data.alerts[n.data.isExpenseKpi?2:1]),gval:a.c.number(n.data.alerts[n.data.isExpenseKpi?1:2]),yval:a.c.number(n.data.alerts[n.data.isExpenseKpi?1:2])};return n.data.budgetTypeId===r.c.ByStore?l.forEach(e=>{i.budByStore[e.id]=e.budget}):n.data.budgetTypeId===r.c.ByStoreByMonth&&l.forEach(e=>{["JanAmt","FebAmt","MarAmt","AprAmt","MayAmt","JunAmt","JulAmt","AugAmt","SepAmt","OctAmt","NovAmt","DecAmt"].forEach((n,l)=>{i.budByStoreByMonth[e.id+n]=e.budgetByMonths[l]})}),Object.assign(t,i),t}}},"V3/g":function(e,n,l){"use strict";l.d(n,"a",(function(){return o}));var t=l("z6cu"),i=l("lJxs"),a=l("JIr8");class o{constructor(e,n){this.api=e,this.dialog=n}getType(){return this.api.get("kpi/type").pipe(Object(i.a)(e=>Object.keys(e).filter(e=>0!=+e).map(n=>({label:e[n],value:String(n)}))))}getStoreGroups(){return this.api.get("storegroups").pipe(Object(i.a)(e=>e.map(e=>({label:e.name,value:e.groupIndex,value2:e.slno}))))}getLastRefreshedTime(e){return this.api.get("nrttimestamp",{params:{reportSection:e.reportSection}})}getDates(){return this.api.get("kpi/month")}isAccClient(){return this.api.get("dtoperations/useacctopsfilter").pipe(Object(i.a)(e=>e&&!!+e.num))}getSummary(e){return this.api.get("kpis",{params:{kpiLevel:e.kpiType,groupIndex:e.group,groupIndexSlno:e.groupSlno,dateindex:e.dateIndex,period:e.period}})}getDetails(e){return this.api.get("kpialerts",{params:{kpiLevel:e.kpiType,groupIndex:e.group,groupIndexSlno:e.groupSlno,dateindex:e.dateIndex,period:e.period},displayError:!0})}getStoreInfo(e){return this.api.get("store/detail",{params:{id:e}})}getStoreStatistic(e){return this.api.get("kpialerts/statisticbyshop",{params:{dateindex:e.dateIndex,groupIndex:e.group,groupIndexSlno:e.groupSlno,period:e.period,kpi_id:e.kpiIndex}})}updateStoreInfo(e,n){return this.api.put(`stores/${e}`,n)}getByStore(e){return this.api.get("kpi/detail",{params:{kpiLevel:e.kpiType,groupIndex:e.group,dateindex:e.dateIndex,period:e.period}})}getByStoreDetails(e){return this.api.get("kpi/detaildetail",{params:{dateindex:e.dateIndex,groupIndex:e.group,kpiSubType:e.kpiSubType,section_id:e.section_id,numDays:e.numDays,acccol:e.view}}).pipe(Object(a.a)(e=>(this.dialog.warning(e.error.message),Object(t.a)(e))))}getStoreTrendData(e){return this.api.get("kpi/trends",{params:{dateindex:e.dateIndex,kpiIndex:e.kpiIndex,groupIndex:e.group,storeId:e.store,period:e.period,acccol:e.view}}).pipe(Object(i.a)(e=>Object.keys(e).map(n=>e[n])))}getDrillDetails(e){return this.api.get("kpi/detaildrill",{params:{dateindex:e.dateIndex,store_id:e.storeId,rl:e.rl,rp:e.rp,control1:e.control1,kpiSubType:e.kpiSubType,section_id:e.section_id}})}getTransactionDetails(e){return this.api.get("kpi/detaildrilldrill",{params:{dateindex:e.dateIndex,store_id:e.storeId,gl:e.gl,section_id:e.sectionId}})}getJournalDetails(e){return this.api.get("kpi/detaildrilldrill3",{params:{store_id:e.storeId,ji:e.ji,ri:e.ri},displayError:!0})}}},VHTt:function(e,n,l){"use strict";var t=function(e){return e[e.XLS=0]="XLS",e[e.PDF=1]="PDF",e}({}),i=l("2Vo4"),a=l("PqYM"),o=l("EY2u"),r=l("lJxs"),u=l("eIep"),d=l("vkgz"),s=l("GyhO"),c=l("nYR2");class p{get decrementer(){return()=>this.decrement()}get incrementor(){return()=>this.increment()}get resetter(){return()=>this.reset()}constructor(e=0){this._value$=new i.a(e),this.value$=this._value$.asObservable(),this.is$=this._value$.pipe(Object(r.a)(e=>Boolean(e)))}increment(){this._value$.next(this._value$.getValue()+1)}decrement(){const e=this._value$.getValue();this._value$.next(e>0?e-1:0)}reset(){this._value$.next(0)}streamJoiner(e=!1){return n=>{return(e?Object(a.a)(0).pipe((l=o.a,Object(u.a)(()=>l))):o.a).pipe(Object(d.a)(()=>{},void 0,this.incrementor),function(...e){return n=>n.lift.call(Object(s.a)(n,...e))}(n),Object(c.a)(this.decrementer));var l}}}var g=l("6LW8");l.d(n,"a",(function(){return t})),l.d(n,"b",(function(){return p})),l.d(n,"c",(function(){return g.a}))},VeTh:function(e,n,l){"use strict";l.d(n,"a",(function(){return i}));var t=l("jmLE");class i{constructor(e){e.addLoaderWithPrefixedTranslations("/cabinet/kpi/widgets/edit-kpi-dialog",t.a)}}},W0XV:function(e,n,l){"use strict";l.d(n,"a",(function(){return a}));var t=l("8Y7J");const i=window.amplitude;class a{constructor(e){this.authService=e,this.filterChange=new t.EventEmitter,this.addItem=new t.EventEmitter,this.filterText={},this.isHAG=!1}set snapshot(e){e&&(this.snapshotVal=e,sessionStorage.getItem("opsfilter_Ops")&&"undefined"!==sessionStorage.getItem("opsfilter_Ops")?this.snapshotVal.opsfilter=sessionStorage.getItem("opsfilter_Ops"):this.isHAG?(sessionStorage.setItem("opsfilter_Ops","1"),this.snapshotVal.opsfilter="1"):(sessionStorage.setItem("opsfilter_Ops","2"),this.snapshotVal.opsfilter="2"))}filterItems(e,n){return e.filter(e=>!this.filterText[n]||e.label.toLowerCase().indexOf(this.filterText[n].toLowerCase())>=0)}ngOnChanges(){this.filters&&this.filters.map(e=>this.filterText[e.name]="")}ngOnInit(){this.currentUser=this.authService.getCurrentUser(),this.isHAG=this.currentUser.instance_name.indexOf("HAG")>=0,this.isHAG?sessionStorage.setItem("opsfilter_Ops","1"):sessionStorage.setItem("opsfilter_Ops","2")}onFilterChange(e,n,l){if(this.filterChange.emit({name:e,value:l}),n.items){const e=n.items.find(e=>e.value===l);i.getInstance().logEvent("BUDGET",{eventSource:this.sourceName,eventName:"SELECT",eventValue:e.label})}"opsfilter"===e&&(this.isHAG?sessionStorage.setItem("opsfilter_Ops","1"):sessionStorage.setItem("opsfilter_Ops",l))}onToggleFilterChange(e,n){e.checked!==n&&(e.checked=n,this.filterChange.emit({name:e.name,value:n?e.value2:e.value}))}onAddItem(e){this.addItem.emit(e)}}},aFUJ:function(e,n,l){"use strict";l("VeTh");var t=l("f7BH");l.d(n,"a",(function(){return t.a}))},dBrL:function(e,n,l){"use strict";l.d(n,"a",(function(){return b}));var t=l("2Vo4"),i=l("XNiG"),a=l("pLZG"),o=l("fFD9"),r=l("lJxs"),u=l("UXun"),d=l("SxV6"),s=l("Kj3r"),c=l("zp1y"),p=l("q92s"),g=l("/uUt"),h=l("vkgz"),m=l("LL99"),f=l("W+wd"),v=l("BXrA");class b{constructor(e,n,l){this.translate=e,this.sortingMeasures=n,this.dataApi=l,this.isCreate=!1,this._value$=new t.a(void 0),this._filtersDef$=new t.a(void 0),this._visibleFilters$=new t.a([]),this._dates$=new t.a(void 0),this._selectedCategory$=new t.a(void 0),this._selectedKpiType$=new t.a(void 0),this._selectedGroup$=new t.a(void 0),this._selectedKpi$=new t.a(void 0),this._selectedDate$=new t.a(void 0),this._selectedPeriod$=new t.a(void 0),this._selectedAccView$=new t.a(void 0),this._isAcc$=new t.a(void 0),this._currentPage$=new t.a(void 0),this._allMeasures$=new t.a(void 0),this._measures$=new t.a(void 0),this._dataRefresh$=new i.a,this.subs=[],this.initStreams()}set sub(e){this.subs.push(e)}init(){this.initSubscriptions()}destroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[],this._value$.next(void 0),this._filtersDef$.next(void 0),this._selectedCategory$.next(void 0),this._selectedKpiType$.next(void 0),this._selectedGroup$.next(void 0),this._selectedKpi$.next(void 0),this._selectedDate$.next(void 0),this._selectedPeriod$.next(void 0),this._selectedAccView$.next(void 0),this._allMeasures$.next(void 0),this._measures$.next(void 0),this._currentPage$.next(void 0),this.sortingMeasures.reset(!0)}setMeasures(e){this._allMeasures$.next(e)}setCurrentPage(e){this._currentPage$.next(e)}showFilters(e){this._visibleFilters$.next(e),this.showHideViewFilter()}updateFilter(e){switch(e.name){case"group":this.updateGroup({group:e.value});break;case"date":this.updateDate({date:e.value});break;default:this.updateValue({[e.name]:e.value})}}getFiltersListItems(){return Object(m.d)(this._filtersDef$.getValue(),this._value$.getValue(),this._visibleFilters$.getValue())}onBsChange(e){const n=this._filtersDef$.getValue(),l=this._selectedGroup$.getValue(),t=n.find(e=>"group"===e.name);switch(e.eventType){case"create":t.items.push({label:e.name,value:e.groupIndex,value2:e.slno});break;case"update":const n=t.items.find(n=>+n.value==+e.prevGroupIndex);n&&(n.label=e.name,n.value=e.groupIndex,n.value2=e.slno),+l==+e.prevGroupIndex&&(+l!=+e.groupIndex?this.updateValue({group:e.groupIndex,groupSlno:e.slno}):this.refreshData());break;case"delete":t.items=t.items.filter(n=>+n.value!=+e.groupIndex),+l==+e.groupIndex&&this.updateValue({group:t.items[0]&&t.items[0].value})}this._filtersDef$.next(n)}refreshData(){this._dataRefresh$.next(void 0)}setListBoxFilterItems(e,n){const l=this._filtersDef$.getValue(),t=l.find(n=>n.name===e&&n.type===m.b.List);t&&(t.items=n,this._filtersDef$.next(l))}updateGroup(e){const n=this._filtersDef$.getValue().find(e=>"group"===e.name).items.find(n=>+n.value==+e.group);n&&this.updateValue({group:e.group,groupSlno:n.value2})}updateDate(e){const n=this._dates$.getValue(),[l,t]=e.date.split("-"),i=n.find(e=>+e.year==+l&&+e.month==+t);i&&this.updateValue({date:e.date,dateIndex:i.dateIndex})}updateValue(e){const n=this._value$.getValue(),l=n?n.clone(e):new f.b(e);this.updateStreams(n,l),this._value$.next(l)}initStreams(){this.measures$=this._measures$.pipe(Object(a.a)(e=>!!e)),this.selectedCategory$=this._selectedCategory$.pipe(Object(a.a)(e=>!!e)),this.selectedKpi$=this._selectedKpi$.pipe(Object(a.a)(e=>!!e)),this.selectedGroup$=this._selectedGroup$.pipe(Object(a.a)(e=>!!e)),this.selectedDate$=this._selectedDate$.pipe(Object(a.a)(e=>!!e)),this.selectedPeriod$=this._selectedPeriod$.pipe(Object(a.a)(e=>!!e)),this.selectedAccView$=this._selectedAccView$.asObservable(),this.isAcc$=this._isAcc$.asObservable(),this.currentPage$=this._currentPage$.asObservable(),this.filtersDef$=this._filtersDef$.pipe(Object(a.a)(e=>!!e),Object(o.a)(this._visibleFilters$),Object(r.a)(([e,n])=>e.filter(e=>-1!==n.indexOf(e.name))),Object(u.a)(1)),this.value$=this._value$.pipe(Object(o.a)(this.filtersDef$.pipe(Object(d.a)())),Object(a.a)(([e,n])=>!!n&&!!e),Object(r.a)(([e])=>e)),this.change$=this.filtersDef$.pipe(Object(d.a)(),Object(o.a)(this._selectedKpiType$,this._selectedGroup$,this._selectedDate$,this._selectedPeriod$),Object(s.a)(100),Object(a.a)(([e,n,l,t,i])=>!!(e&&n&&l&&t&&i)),Object(c.a)(this.value$),Object(p.a)(this._dataRefresh$.pipe(Object(c.a)(this.value$))),Object(r.a)(([e,n])=>n)),this.measureCategories$=this.sortingMeasures.sortedCategories$.pipe(Object(o.a)(this.selectedCategory$,(e,n)=>n&&e instanceof Array&&-1!=+n?e.filter(e=>+e.id==+n):e),Object(r.a)(e=>e instanceof Array&&e.length?e:void 0),Object(u.a)(1)),this.selectedMeasure$=this.selectedKpi$.pipe(Object(o.a)(this.measures$),Object(r.a)(([e,n])=>n&&n.find(n=>+n.kpiIndex==+e)),Object(g.a)(),Object(a.a)(e=>!!e))}updateStreams(e,n){e?(e.category!==n.category&&this._selectedCategory$.next(n.category),e.kpiType!==n.kpiType&&this._selectedKpiType$.next(n.kpiType),e.group!==n.group&&this._selectedGroup$.next(n.group),e.kpiIndex!==n.kpiIndex&&this._selectedKpi$.next(n.kpiIndex),e.dateIndex!==n.dateIndex&&this._selectedDate$.next(n.dateIndex),e.period!==n.period&&this._selectedPeriod$.next(n.period),e.view!==n.view&&this._selectedAccView$.next(n.view)):(this._selectedCategory$.next(n.category),this._selectedKpiType$.next(n.kpiType),this._selectedGroup$.next(n.group),this._selectedKpi$.next(n.kpiIndex),this._selectedDate$.next(n.dateIndex),this._selectedPeriod$.next(n.period),this._selectedAccView$.next(n.view)),this.showHideViewFilter()}showHideViewFilter(){const e=this._currentPage$.getValue();if(!this._isAcc$.getValue()||e!==f.d.ByStore)return;const n=this._selectedCategory$.getValue();let l=this._visibleFilters$.getValue();n===f.a.Operarions?-1===l.indexOf("view")&&l.push("view"):l=l.filter(e=>"view"!==e),this._visibleFilters$.next(l)}initSubscriptions(){this.sub=this.dataApi.getStoreGroups().pipe(Object(o.a)(this.dataApi.getType(),this.dataApi.getDates(),this.dataApi.isAccClient(),this.translate.get(["filters-group.category.label","filters-group.kpi-type.label","filters-group.kpi.label","filters-group.business-segment.label","filters-group.business-segment.item.all.label","filters-group.month.label","filters-group.period.mtd.label","filters-group.period.ytd.label","filters-group.view.label","filters-group.view.item.summary","filters-group.view.item.accounting","filters-group.view.item.fi-only","filters-group.view.item.fi-only-not-delivered","filters-group.view.item.fi-only-acc-variance"].map(e=>v.a+e))),Object(r.a)(([e,n,l,t,i])=>(e.unshift({label:i[v.a+"filters-group.business-segment.item.all.label"],value:m.a}),{types:n,storeGroups:e,dates:l.map(e=>{const[n,l,t]=e.date_from.split("/");return{month:n,year:t,date:`${t}-${n}-${l}`,dateIndex:e.dateindex}}),accItems:t?this.getAccViewFilterItems(i):null,t:i})),Object(h.a)(({types:e,storeGroups:n,dates:l,accItems:t})=>this.updateValue({category:void 0,kpiType:e[0].value,group:n[0].value,groupSlno:n[0].value2,kpiIndex:void 0,dateIndex:l[0].dateIndex,date:l[0].date,period:"MTD",view:t&&t[0].value}))).subscribe(({types:e,storeGroups:n,dates:l,accItems:t,t:i})=>{this._dates$.next(l);const a=[Object(m.f)("category",[],i[v.a+"filters-group.category.label"]),Object(m.f)("kpiType",e,i[v.a+"filters-group.kpi-type.label"]),Object(m.f)("group",n,i[v.a+"filters-group.business-segment.label"],null,!0),Object(m.f)("kpiIndex",[],i[v.a+"filters-group.kpi.label"]),Object(m.e)("date",i[v.a+"filters-group.month.label"],m.b.DateMonth,l[l.length-1].date,l[0].date),Object(m.g)("period",!1,"MTD","YTD",i[v.a+"filters-group.period.mtd.label"],i[v.a+"filters-group.period.ytd.label"])];t&&a.push(Object(m.f)("view",t,i[v.a+"filters-group.view.label"])),this._filtersDef$.next(a)}),this.sub=this._allMeasures$.pipe(Object(a.a)(e=>!!e),Object(r.a)(e=>e.filter((()=>{const e=new Set;return n=>!e.has(n.section_id)&&e.add(n.section_id)})()).map(e=>({value:String(e.section_id),label:String(e.category)}))),Object(c.a)(this.translate.get(v.a+"filters-group.category.item.all.label"))).subscribe(([e,n])=>{const l={value:"-1",label:n};this.setListBoxFilterItems("category",e.length?[l,...e]:[]);const t=this._selectedCategory$.getValue();t&&e.find(e=>+e.value==+t)||this.updateValue({category:l.value})}),this.sub=this._allMeasures$.pipe(Object(a.a)(e=>!!e),Object(c.a)(this._selectedKpiType$)).subscribe(([e,n])=>{this.sortingMeasures.setPayload(e,+n)}),this.sub=this.currentPage$.pipe(Object(a.a)(e=>!!e),Object(g.a)()).subscribe(()=>{this._measures$.next(void 0)}),this.sub=this.sortingMeasures.sortedRawMeasures$.pipe(Object(o.a)(this.selectedCategory$,(e,n)=>n&&e instanceof Array&&-1!=+n?e.filter(e=>+e.section_id==+n):e),Object(s.a)(100),Object(r.a)(e=>e instanceof Array&&e.length?e:void 0)).subscribe(e=>{const n=e?e.map(e=>({label:e.name,value:e.kpiIndex})):[],l=this._selectedKpi$.getValue();l&&n.find(e=>+e.value==+l)||this.updateValue({kpiIndex:n[0]&&n[0].value}),this.setListBoxFilterItems("kpiIndex",n),this._measures$.next(e)})}getAccViewFilterItems(e){return[{label:e[v.a+"filters-group.view.item.summary"],value:f.e.Summary},{label:e[v.a+"filters-group.view.item.accounting"],value:f.e.Accounting},{label:e[v.a+"filters-group.view.item.fi-only"],value:f.e.FiOnly},{label:e[v.a+"filters-group.view.item.fi-only-not-delivered"],value:f.e.FiOnlyNotDelivered},{label:e[v.a+"filters-group.view.item.fi-only-acc-variance"],value:f.e.FiOnlyAccVariance}]}}},elxJ:function(e,n,l){"use strict";l.d(n,"d",(function(){return g})),l.d(n,"a",(function(){return o})),l.d(n,"c",(function(){return d})),l.d(n,"b",(function(){return p}));var t=l("KCVW"),i=l("8Y7J"),a=(l("s7LF"),l("Xd0L"));const o=new i.InjectionToken("mat-radio-default-options",{providedIn:"root",factory:function(){return{color:"accent"}}});let r=0;class u{constructor(e,n){this.source=e,this.value=n}}class d{constructor(e){this._changeDetector=e,this._value=null,this._name=`mat-radio-group-${r++}`,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new i.EventEmitter}get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition="before"===e?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=Object(t.b)(e),this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=Object(t.b)(e),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(e=>{e.checked=this.value===e.value,e.checked&&(this._selected=e)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new u(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}}class s{constructor(e){this._elementRef=e}}const c=Object(a.B)(Object(a.E)(s));class p extends c{constructor(e,n,l,t,a,o,u){super(n),this._changeDetector=l,this._focusMonitor=t,this._radioDispatcher=a,this._animationMode=o,this._providerOverride=u,this._uniqueId=`mat-radio-${++r}`,this.id=this._uniqueId,this.change=new i.EventEmitter,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=e,this._removeUniqueSelectionListener=a.listen((e,n)=>{e!==this.id&&n===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(e){const n=Object(t.b)(e);this._checked!==n&&(this._checked=n,n&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!n&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),n&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(e){const n=Object(t.b)(e);this._disabled!==n&&(this._disabled=n,this._changeDetector.markForCheck())}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){this._required=Object(t.b)(e)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(e){this._color=e}get inputId(){return`${this.id||this._uniqueId}-input`}focus(){this._focusMonitor.focusVia(this._inputElement,"keyboard")}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.name=this.radioGroup.name)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new u(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(e){e.stopPropagation()}_onInputChange(e){e.stopPropagation();const n=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),n&&this.radioGroup._emitChangeEvent())}}class g{}},f7BH:function(e,n,l){"use strict";l.d(n,"a",(function(){return a}));var t=l("/kTj"),i=l("+kfi");let a=(()=>{class e{constructor(e,n,l,i,a,o){this.dialogRef=e,this.openingData=n,this.ekdData=l,this.ekdForm=i,this.ekdStepper=a,this.dataloaded=!1,this.debug=o.factory(new.target.name,t.a.All)}ngOnInit(){this.dialogRef.updateSize("700px","500px"),this.isLoading$=this.ekdData.dataLoading.is$,this.openingData&&void 0!==this.openingData.kpiIndex?(this.debug.log("ngOnInit() Opening in edit mode. OpeningData: %O",this.openingData),this.ekdStepper.goToStep(i.a.Third),this.ekdData.openKpiToEdit(this.openingData.kpiIndex,this.openingData.selectedYear).subscribe(e=>{this.ekdForm.patch(e),this.debug.log("ngOnInit() Opening window. Form Data: %O",e),this.dataloaded=!0})):this.dataloaded=!0}ngOnDestroy(){this.ekdData.destroy()}}return e.panelClass="edit-kpi-dialog-container",e})()},gQiY:function(e,n,l){"use strict";l.d(n,"a",(function(){return t}));class t{}},h9HI:function(e,n,l){"use strict";l.d(n,"a",(function(){return c}));var t=l("LRne"),i=l("z6cu"),a=l("lJxs"),o=l("JIr8"),r=l("/kTj"),u=l("DUlt"),d=l("tFIl"),s=l("+kfi");class c{constructor(e,n,l,t){this.adapter=e,this.api=n,this.dialog=l,this.baseUrl="kpisetup",this.debug=t.factory(new.target.name,r.a.All)}getKpiTypes(){return Object(t.a)([new u.a({id:s.d.Docs,name:"Docs"}),new u.a({id:s.d.Schedules,name:"Schedules"}),new u.a({id:s.d.Operations,name:"Operations"})])}getKpiBudgetTypes(e){const n=[new u.a({id:s.c.SingleEntry,name:"singleentry"}),new u.a({id:s.c.ByStore,name:"bystore"})];return e&&n.push(new u.a({id:s.c.ByStoreByMonth,name:"bystorebymonth"})),Object(t.a)(n)}getKpiDocBudgets(){return Object(t.a)([new u.a({id:0,name:"Hyundai"}),new u.a({id:1,name:"California Budget"}),new u.a({id:2,name:"Banning Budget"})])}getKpiDocs(){return this.api.get(`${this.baseUrl}/doclist`).pipe(Object(a.a)(e=>e.map(e=>this.adapter.kpiDocsToIdNameModel(e))))}getOpsFilters(){return this.api.get("dtoperations/opsfilters").pipe(Object(a.a)(e=>e.data))}getAvailableKpiSetupReports(e,n=0){return this.api.get(`${this.baseUrl}/list`,{params:{comp:e,DocId:n}}).pipe(Object(a.a)(e=>e.map(e=>this.adapter.parseAvailableKpiSetupReportItemToModel(e))))}getOneKpi(e){return this.api.get(`${this.baseUrl}/getone`,{params:{kpiIndex:e}}).pipe(Object(a.a)(n=>this.adapter.retrieveFormSchemaFromGetOneKPIRequest(e,n)))}autoFillKpiBudgetByMonths(e,n,l,t){if("month"!==e&&"year"!==e)throw new Error(`getAutoFillingData(type: '${e}') Wrong type.`);return this.api.get(`${this.baseUrl}/autofill`,{params:{filltype:e,kpiIndex:n,perc:l,lastyear:t}}).pipe(Object(a.a)(e=>e&&e.budgetByStores&&this.adapter.parseBudgetByStores(e.budgetByStores)))}createKpi(e,n,l){const t=this.adapter.makeCreateKPIRequestData(e,n,l);return this.api.post(`${this.baseUrl}s`,t).pipe(Object(a.a)(e=>e&&d.c.number(e[0])))}updateKpi(e,n,l){const t=this.adapter.makeUpdateKPIRequestData(e,n,l);return this.api.put(`${this.baseUrl}s/${e}`,t).pipe(Object(a.a)(e=>{if(!e||!e.error)return e&&d.c.number(e[0]);this.dialog.warning(e.error)}),Object(o.a)(e=>(console.log("error",e),Object(i.a)(e))))}deleteKpi(e){const n=this.adapter.getRawGettedByOneKpi(e);return this.api.delete(`${this.baseUrl}s/${e}`,{params:{slno:n&&n.slno}})}}},jmLE:function(e,n,l){"use strict";l.d(n,"a",(function(){return t}));const t="cabinet.kpi.widgets.edit-kpi-dialog."},mIlg:function(e,n,l){"use strict";var t=l("8Y7J"),i=l("E5Rw"),a=l("H/aV"),o=l("JjoW"),r=l("s7LF"),u=l("MlvX"),d=l("Xd0L"),s=l("dJrM"),c=l("HsOI"),p=l("IP0z"),g=l("/HVE"),h=l("omvX"),m=l("Azqq"),f=l("hOhj"),v=l("5GAg"),b=l("SVse"),_=l("mN15"),C=l("fgD+"),k=l("ZCrk"),y=l("+2T5"),x=l("2F3X"),O=l("8CZ8"),w=l("bQ1K");l("W0XV"),l.d(n,"a",(function(){return S})),l.d(n,"b",(function(){return E}));var S=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     .mat-form-field-infix{width:150px}.mat-form-field[_ngcontent-%COMP%], app-datepicker-month[_ngcontent-%COMP%], app-datepicker-range[_ngcontent-%COMP%]{margin-right:20px}.mat-form-field-with-button[_ngcontent-%COMP%]{position:relative;padding-right:30px}.mat-form-field-with-button[_ngcontent-%COMP%]   .add-item-btn[_ngcontent-%COMP%]{position:absolute;right:15px;top:50%;transform:translate(200%,-50%)}.add-item-btn[_ngcontent-%COMP%]{display:inline-block;height:18px;width:18px;border-radius:50%;border:2px solid #3498db;background-color:#3498db;cursor:pointer;position:relative}.add-item-btn[_ngcontent-%COMP%]:before{content:'\\002B';color:#fff;font-family:\"Material Icons\";font-size:18px;font-weight:600;position:absolute;top:20%;left:50%;transform:translate(-50%,-50%)}.tab[_ngcontent-%COMP%]{display:inline-block;height:34px;line-height:34px;border-radius:17px;padding-left:10px;padding-right:10px;margin-right:12px;color:#404040;font-size:14px;font-weight:500;background-color:#e5e5e5;cursor:pointer}.tab.active[_ngcontent-%COMP%]{color:#3498db;background-color:#e2eff8}.tab[_ngcontent-%COMP%]:not(:last-of-type){margin-right:10px}"]],data:{}});function D(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,5,"mat-select-search",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],(function(e,n,l){var t=!0;return"ngModelChange"===n&&(t=!1!==(e.component.filterText[e.parent.parent.context.$implicit.name]=l)&&t),t}),i.b,i.a)),t["\u0275did"](1,4440064,null,0,a.a,[o.c,t.ChangeDetectorRef],null,null),t["\u0275prd"](1024,null,r.q,(function(e){return[e]}),[a.a]),t["\u0275did"](3,671744,null,0,r.v,[[8,null],[8,null],[8,null],[6,r.q]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,r.r,null,[r.v]),t["\u0275did"](5,16384,null,0,r.s,[[4,r.r]],null,null)],(function(e,n){var l=n.component;e(n,1,0),e(n,3,0,l.filterText[n.parent.parent.context.$implicit.name])}),(function(e,n){e(n,0,0,t["\u0275nov"](n,5).ngClassUntouched,t["\u0275nov"](n,5).ngClassTouched,t["\u0275nov"](n,5).ngClassPristine,t["\u0275nov"](n,5).ngClassDirty,t["\u0275nov"](n,5).ngClassValid,t["\u0275nov"](n,5).ngClassInvalid,t["\u0275nov"](n,5).ngClassPending)}))}function R(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,1)._selectViaInteraction()&&i),"keydown"===n&&(i=!1!==t["\u0275nov"](e,1)._handleKeydown(l)&&i),i}),u.b,u.a)),t["\u0275did"](1,8568832,[[10,4]],0,d.p,[t.ElementRef,t.ChangeDetectorRef,[2,d.j],[2,d.o]],{value:[0,"value"]},null),(e()(),t["\u0275ted"](2,0,[" "," "]))],(function(e,n){e(n,1,0,n.context.$implicit.value)}),(function(e,n){e(n,0,0,t["\u0275nov"](n,1)._getTabIndex(),t["\u0275nov"](n,1).selected,t["\u0275nov"](n,1).multiple,t["\u0275nov"](n,1).active,t["\u0275nov"](n,1).id,t["\u0275nov"](n,1)._getAriaSelected(),t["\u0275nov"](n,1).disabled.toString(),t["\u0275nov"](n,1).disabled),e(n,2,0,n.context.$implicit.label)}))}function I(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,0,"button",[["class","add-item-btn"],["type","button"]],null,[[null,"click"]],(function(e,n,l){var t=!0,i=e.component;return"click"===n&&(l.stopPropagation(),t=!1!==i.onAddItem(e.parent.parent.context.$implicit)&&t),t}),null,null))],null,null)}function M(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,26,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-with-button",null],[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,s.b,s.a)),t["\u0275did"](1,7520256,null,9,c.c,[t.ElementRef,t.ChangeDetectorRef,[2,d.h],[2,p.b],[2,c.a],g.a,t.NgZone,[2,h.a]],null,null),t["\u0275qud"](603979776,1,{_controlNonStatic:0}),t["\u0275qud"](335544320,2,{_controlStatic:0}),t["\u0275qud"](603979776,3,{_labelChildNonStatic:0}),t["\u0275qud"](335544320,4,{_labelChildStatic:0}),t["\u0275qud"](603979776,5,{_placeholderChild:0}),t["\u0275qud"](603979776,6,{_errorChildren:1}),t["\u0275qud"](603979776,7,{_hintChildren:1}),t["\u0275qud"](603979776,8,{_prefixChildren:1}),t["\u0275qud"](603979776,9,{_suffixChildren:1}),(e()(),t["\u0275eld"](11,0,null,1,13,"mat-select",[["class","mat-select"],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],(function(e,n,l){var i=!0,a=e.component;return"keydown"===n&&(i=!1!==t["\u0275nov"](e,16)._handleKeydown(l)&&i),"focus"===n&&(i=!1!==t["\u0275nov"](e,16)._onFocus()&&i),"blur"===n&&(i=!1!==t["\u0275nov"](e,16)._onBlur()&&i),"ngModelChange"===n&&(i=!1!==a.onFilterChange(e.parent.context.$implicit.name,e.parent.context.$implicit,l)&&i),i}),m.b,m.a)),t["\u0275prd"](6144,null,d.j,null,[o.c]),t["\u0275did"](13,671744,null,0,r.v,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,r.r,null,[r.v]),t["\u0275did"](15,16384,null,0,r.s,[[4,r.r]],null,null),t["\u0275did"](16,2080768,null,3,o.c,[f.i,t.ChangeDetectorRef,t.NgZone,d.b,t.ElementRef,[2,p.b],[2,r.u],[2,r.k],[2,c.c],[6,r.r],[8,null],o.a,v.j],{placeholder:[0,"placeholder"]},null),t["\u0275qud"](603979776,10,{options:1}),t["\u0275qud"](603979776,11,{optionGroups:1}),t["\u0275qud"](603979776,12,{customTrigger:0}),t["\u0275prd"](2048,[[1,4],[2,4]],c.d,null,[o.c]),(e()(),t["\u0275and"](16777216,null,1,1,null,D)),t["\u0275did"](22,16384,null,0,b.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),t["\u0275and"](16777216,null,1,1,null,R)),t["\u0275did"](24,278528,null,0,b.l,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),t["\u0275and"](16777216,null,1,1,null,I)),t["\u0275did"](26,16384,null,0,b.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,13,0,l.snapshotVal[n.parent.context.$implicit.name]),e(n,16,0,n.parent.context.$implicit.label),e(n,22,0,n.parent.context.$implicit.allowSearch),e(n,24,0,l.filterItems(n.parent.context.$implicit.items,n.parent.context.$implicit.name)),e(n,26,0,n.parent.context.$implicit.canAddItem)}),(function(e,n){e(n,0,1,[n.parent.context.$implicit.canAddItem,"standard"==t["\u0275nov"](n,1).appearance,"fill"==t["\u0275nov"](n,1).appearance,"outline"==t["\u0275nov"](n,1).appearance,"legacy"==t["\u0275nov"](n,1).appearance,t["\u0275nov"](n,1)._control.errorState,t["\u0275nov"](n,1)._canLabelFloat,t["\u0275nov"](n,1)._shouldLabelFloat(),t["\u0275nov"](n,1)._hasFloatingLabel(),t["\u0275nov"](n,1)._hideControlPlaceholder(),t["\u0275nov"](n,1)._control.disabled,t["\u0275nov"](n,1)._control.autofilled,t["\u0275nov"](n,1)._control.focused,"accent"==t["\u0275nov"](n,1).color,"warn"==t["\u0275nov"](n,1).color,t["\u0275nov"](n,1)._shouldForward("untouched"),t["\u0275nov"](n,1)._shouldForward("touched"),t["\u0275nov"](n,1)._shouldForward("pristine"),t["\u0275nov"](n,1)._shouldForward("dirty"),t["\u0275nov"](n,1)._shouldForward("valid"),t["\u0275nov"](n,1)._shouldForward("invalid"),t["\u0275nov"](n,1)._shouldForward("pending"),!t["\u0275nov"](n,1)._animationsEnabled]),e(n,11,1,[t["\u0275nov"](n,15).ngClassUntouched,t["\u0275nov"](n,15).ngClassTouched,t["\u0275nov"](n,15).ngClassPristine,t["\u0275nov"](n,15).ngClassDirty,t["\u0275nov"](n,15).ngClassValid,t["\u0275nov"](n,15).ngClassInvalid,t["\u0275nov"](n,15).ngClassPending,t["\u0275nov"](n,16).id,t["\u0275nov"](n,16).tabIndex,t["\u0275nov"](n,16)._getAriaLabel(),t["\u0275nov"](n,16)._getAriaLabelledby(),t["\u0275nov"](n,16).required.toString(),t["\u0275nov"](n,16).disabled.toString(),t["\u0275nov"](n,16).errorState,t["\u0275nov"](n,16).panelOpen?t["\u0275nov"](n,16)._optionIds:null,t["\u0275nov"](n,16).multiple,t["\u0275nov"](n,16)._ariaDescribedby||null,t["\u0275nov"](n,16)._getAriaActiveDescendant(),t["\u0275nov"](n,16).disabled,t["\u0275nov"](n,16).errorState,t["\u0275nov"](n,16).required,t["\u0275nov"](n,16).empty])}))}function P(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,3,"app-datepicker-month",[],null,[[null,"dateChange"]],(function(e,n,l){var t=!0;return"dateChange"===n&&(t=!1!==e.component.onFilterChange(e.parent.context.$implicit.name,e.parent.context.$implicit,l)&&t),t}),_.b,_.a)),t["\u0275prd"](512,null,d.a,C.a,[d.f]),t["\u0275did"](2,245760,null,0,k.a,[d.a,y.a],{placeholder:[0,"placeholder"],value:[1,"value"],min:[2,"min"],max:[3,"max"]},{dateChange:"dateChange"}),t["\u0275prd"](256,null,d.e,k.b,[])],(function(e,n){e(n,2,0,n.parent.context.$implicit.label,n.component.snapshotVal[n.parent.context.$implicit.name],n.parent.context.$implicit.min,n.parent.context.$implicit.max)}),null)}function F(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,3,"app-datepicker-range",[],null,[[null,"dateChange"]],(function(e,n,l){var t=!0;return"dateChange"===n&&(t=!1!==e.component.onFilterChange(e.parent.context.$implicit.name,e.parent.context.$implicit,l)&&t),t}),x.b,x.a)),t["\u0275prd"](4608,null,O.a,C.a,[O.e]),t["\u0275did"](2,114688,null,0,w.a,[],{placeholder:[0,"placeholder"],value:[1,"value"],min:[2,"min"],max:[3,"max"]},{dateChange:"dateChange"}),t["\u0275prd"](256,null,O.d,w.b,[])],(function(e,n){e(n,2,0,n.parent.context.$implicit.label,n.component.snapshotVal[n.parent.context.$implicit.name],n.parent.context.$implicit.min,n.parent.context.$implicit.max)}),null)}function $(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),t["\u0275eld"](1,0,null,null,1,"span",[["class","tab"]],[[2,"active",null]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.onToggleFilterChange(e.parent.context.$implicit,!1)&&t),t}),null,null)),(e()(),t["\u0275ted"](2,null,["",""])),(e()(),t["\u0275eld"](3,0,null,null,1,"span",[["class","tab"]],[[2,"active",null]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.onToggleFilterChange(e.parent.context.$implicit,!0)&&t),t}),null,null)),(e()(),t["\u0275ted"](4,null,["",""]))],null,(function(e,n){e(n,1,0,!n.parent.context.$implicit.checked),e(n,2,0,n.parent.context.$implicit.label),e(n,3,0,n.parent.context.$implicit.checked),e(n,4,0,n.parent.context.$implicit.label2)}))}function T(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,8,null,null,null,null,null,null,null)),(e()(),t["\u0275and"](16777216,null,null,1,null,M)),t["\u0275did"](2,16384,null,0,b.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),t["\u0275and"](16777216,null,null,1,null,P)),t["\u0275did"](4,16384,null,0,b.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),t["\u0275and"](16777216,null,null,1,null,F)),t["\u0275did"](6,16384,null,0,b.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),t["\u0275and"](16777216,null,null,1,null,$)),t["\u0275did"](8,16384,null,0,b.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),t["\u0275and"](0,null,null,0))],(function(e,n){e(n,2,0,"list"===n.context.$implicit.type&&!n.context.$implicit.hidden&&n.context.$implicit.items.length),e(n,4,0,"date-month"===n.context.$implicit.type&&!n.context.$implicit.hidden),e(n,6,0,"date-range"===n.context.$implicit.type&&!n.context.$implicit.hidden),e(n,8,0,"toggle"===n.context.$implicit.type&&!n.context.$implicit.hidden)}),null)}function j(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),t["\u0275and"](16777216,null,null,1,null,T)),t["\u0275did"](2,278528,null,0,b.l,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),t["\u0275and"](0,null,null,0))],(function(e,n){e(n,2,0,n.component.filters)}),null)}function E(e){return t["\u0275vid"](2,[(e()(),t["\u0275and"](16777216,null,null,1,null,j)),t["\u0275did"](1,16384,null,0,b.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component;e(n,1,0,l.snapshotVal&&l.filters)}),null)}},xEVN:function(e,n,l){"use strict";l.r(n);var t=l("8Y7J"),i=l("BXrA");class a{constructor(e){e.addLoaderWithPrefixedTranslations("/cabinet/kpi",i.a)}}var o=l("pMnS"),r=l("t68o"),u=l("zbXB"),d=l("SZ0J"),s=l("NcP4"),c=l("GsI2"),p=l("eliu"),g=l("0Xvm"),h=l("VOAG"),m=l("aYrz"),f=l("tfhy"),v=l("NFHq"),b=l("iInd"),_=l("SVse"),C=l("rWV4"),k=l("/HVE"),y=l("Xd0L"),x=l("5GAg"),O=l("omvX"),w=l("TSSN"),S=l("bUbq"),D=l("sFX2"),R=l("+2T5"),I=l("NxlO"),M=l("S+vS"),P=l("XpwZ"),F=l("uNm5"),$=l("5uTj"),T=l("mIlg"),j=l("W0XV");class E{constructor(e){this.filterData=e,this.sourceText="KPI",this.addBusinessSeg=new t.EventEmitter,this.subs=[]}set sub(e){this.subs.push(e)}ngOnInit(){this.setupStreams()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}onFilterChange(e){this.filterData.updateFilter(e)}onAddItem(e){switch(e.name){case"group":this.addBusinessSeg.emit()}}setupStreams(){this.sub=this.filterData.filtersDef$.subscribe(e=>this.filters=e),this.sub=this.filterData.value$.subscribe(e=>this.snapshot=e)}}var q=l("dBrL"),V=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}"]],data:{}});function A(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"app-filters-group",[],null,[[null,"filterChange"],[null,"addItem"]],(function(e,n,l){var t=!0,i=e.component;return"filterChange"===n&&(t=!1!==i.onFilterChange(l)&&t),"addItem"===n&&(t=!1!==i.onAddItem(l)&&t),t}),T.b,T.a)),t["\u0275did"](1,638976,null,0,j.a,[R.a],{filters:[0,"filters"],snapshot:[1,"snapshot"],sourceName:[2,"sourceName"]},{filterChange:"filterChange",addItem:"addItem"})],(function(e,n){var l=n.component;e(n,1,0,l.filters,l.snapshot,l.sourceText)}),null)}var B=l("bujt"),N=l("Fwaw"),G=l("Rlre"),L=l("IP0z"),K=l("hOhj"),z=l("JA3b"),U=l("JItt"),J=l("zp2H"),Z=l("v67E"),H=l("/kTj"),X=l("2v1Z"),W=l("cMRB"),Y=l("aFUJ");const Q=window.amplitude;class ee{constructor(e,n){this.matDialog=e,this.filterData=n,this.i18n=i.a,this.i18nBs=W.b,this.tabs=["summary","details","by-store"],this.sourceText=""}ngOnInit(){this.sourceText="KPI",this.filterData.init(),console.log("kpi page loaded .."),Q.getInstance().logEvent("kpi_page_load",{eventName:"page load",eventValue:!0})}ngOnDestroy(){this.filterData.destroy()}openBsFormModal(){this.bsFormModal.showModal()}onBsChange(e){this.bsFormModal.closeModal(),this.filterData.onBsChange(e)}openEditKpiDialog(){this.filterData.isCreate=!0,this.matDialog.open(Y.a,{panelClass:Y.a.panelClass}).afterClosed().subscribe(e=>{e instanceof Object&&this.filterData.refreshData()})}}var ne=l("s6ns"),le=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}app-content-header[_ngcontent-%COMP%]     .heading{margin-bottom:33px}.btn-open-form[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;text-transform:uppercase}"]],data:{}});function te(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,8,"a",[["class","mat-tab-link"],["mat-tab-link",""],["routerLinkActive",""]],[[1,"target",0],[8,"href",4],[1,"aria-current",0],[1,"aria-disabled",0],[1,"tabIndex",0],[2,"mat-tab-disabled",null],[2,"mat-tab-label-active",null]],[[null,"click"]],(function(e,n,l){var i=!0;return"click"===n&&(i=!1!==t["\u0275nov"](e,1).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&i),i}),null,null)),t["\u0275did"](1,671744,[[4,4]],0,b.r,[b.o,b.a,_.j],{routerLink:[0,"routerLink"]},null),t["\u0275pad"](2,1),t["\u0275did"](3,1720320,[["rla",4]],2,b.q,[b.o,t.ElementRef,t.Renderer2,[2,b.p],[2,b.r]],{routerLinkActive:[0,"routerLinkActive"]},null),t["\u0275qud"](603979776,3,{links:1}),t["\u0275qud"](603979776,4,{linksWithHrefs:1}),t["\u0275did"](6,147456,[[2,4]],0,C.j,[C.k,t.ElementRef,t.NgZone,k.a,[2,y.k],[8,null],x.h,[2,O.a]],{active:[0,"active"]},null),(e()(),t["\u0275ted"](7,null,[" "," "])),t["\u0275pid"](131072,w.i,[w.j,t.ChangeDetectorRef])],(function(e,n){var l=e(n,2,0,n.context.$implicit);e(n,1,0,l),e(n,3,0,""),e(n,6,0,t["\u0275nov"](n,3).isActive)}),(function(e,n){var l=n.component;e(n,0,0,t["\u0275nov"](n,1).target,t["\u0275nov"](n,1).href,t["\u0275nov"](n,6).active?"page":null,t["\u0275nov"](n,6).disabled,t["\u0275nov"](n,6).tabIndex,t["\u0275nov"](n,6).disabled,t["\u0275nov"](n,6).active),e(n,7,0,t["\u0275unv"](n,7,0,t["\u0275nov"](n,8).transform(l.i18n+"header.tab."+n.context.$implicit+".label")))}))}function ie(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"bs-form",[],null,[[null,"bsChange"]],(function(e,n,l){var t=!0;return"bsChange"===n&&(t=!1!==e.component.onBsChange(l)&&t),t}),S.b,S.a)),t["\u0275did"](1,770048,null,0,D.a,[R.a,I.a,M.a,w.j,P.a],{loadData:[0,"loadData"],sourceName:[1,"sourceName"]},{bsChange:"bsChange"})],(function(e,n){e(n,1,0,!0,n.component.sourceText)}),null)}function ae(e){return t["\u0275vid"](0,[t["\u0275qud"](402653184,1,{bsFormModal:0}),(e()(),t["\u0275eld"](1,0,null,null,16,"app-content-header",[],null,null,null,F.b,F.a)),t["\u0275prd"](512,null,_.A,_.B,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](3,278528,null,0,_.k,[_.A],{ngClass:[0,"ngClass"]},null),t["\u0275pad"](4,1),t["\u0275did"](5,114688,null,0,$.a,[],{caption:[0,"caption"]},null),t["\u0275pid"](131072,w.i,[w.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](7,0,null,0,1,"app-kpi-filters-group",[],null,[[null,"addBusinessSeg"]],(function(e,n,l){var t=!0;return"addBusinessSeg"===n&&(t=!1!==e.component.openBsFormModal()&&t),t}),A,V)),t["\u0275did"](8,245760,null,0,E,[q.a],null,{addBusinessSeg:"addBusinessSeg"}),(e()(),t["\u0275eld"](9,0,null,0,3,"button",[["class","btn-open-form"],["color","primary"],["mat-raised-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.openEditKpiDialog()&&t),t}),B.b,B.a)),t["\u0275did"](10,180224,null,0,N.b,[t.ElementRef,x.h,[2,O.a]],{color:[0,"color"]},null),(e()(),t["\u0275ted"](11,0,[" "," "])),t["\u0275pid"](131072,w.i,[w.j,t.ChangeDetectorRef]),(e()(),t["\u0275eld"](13,0,null,0,4,"nav",[["class","mat-tab-nav-bar mat-tab-header"],["mat-tab-nav-bar",""]],[[2,"mat-tab-header-pagination-controls-enabled",null],[2,"mat-tab-header-rtl",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null]],null,null,G.e,G.c)),t["\u0275did"](14,7520256,null,1,C.k,[t.ElementRef,[2,L.b],t.NgZone,t.ChangeDetectorRef,K.i,[2,k.a],[2,O.a]],null,null),t["\u0275qud"](603979776,2,{_items:1}),(e()(),t["\u0275and"](16777216,null,0,1,null,te)),t["\u0275did"](17,278528,null,0,_.l,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),t["\u0275eld"](18,0,null,null,6,"app-content-body",[],null,null,null,z.b,z.a)),t["\u0275prd"](512,null,_.A,_.B,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](20,278528,null,0,_.k,[_.A],{ngClass:[0,"ngClass"]},null),t["\u0275pad"](21,1),t["\u0275did"](22,114688,null,0,U.a,[],null,null),(e()(),t["\u0275eld"](23,16777216,null,0,1,"router-outlet",[],null,null,null,null,null)),t["\u0275did"](24,212992,null,0,b.t,[b.b,t.ViewContainerRef,t.ComponentFactoryResolver,[8,null],t.ChangeDetectorRef],null,null),(e()(),t["\u0275eld"](25,0,null,null,5,"app-modal",[["class","modal-bs-form"]],null,null,null,J.b,J.a)),t["\u0275prd"](512,null,Z.a,Z.a,[H.b]),t["\u0275did"](27,1228800,[[1,4],["bsFormModal",4]],0,X.a,[Z.a,_.d,t.ElementRef,t.Renderer2,H.b],{modalTitle:[0,"modalTitle"]},null),t["\u0275pid"](131072,w.i,[w.j,t.ChangeDetectorRef]),(e()(),t["\u0275and"](16777216,null,0,1,null,ie)),t["\u0275did"](30,16384,null,0,_.m,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(e,n){var l=n.component,i=e(n,4,0,"content-header-size-1");e(n,3,0,i),e(n,5,0,t["\u0275unv"](n,5,0,t["\u0275nov"](n,6).transform(l.i18n+"header.caption"))),e(n,8,0),e(n,10,0,"primary"),e(n,17,0,l.tabs);var a=e(n,21,0,"content-body-size-1");e(n,20,0,a),e(n,22,0),e(n,24,0),e(n,27,0,t["\u0275unv"](n,27,0,t["\u0275nov"](n,28).transform(l.i18nBs+"business-segment-form.title"))),e(n,30,0,t["\u0275nov"](n,27).displayed)}),(function(e,n){var l=n.component;e(n,9,0,t["\u0275nov"](n,10).disabled||null,"NoopAnimations"===t["\u0275nov"](n,10)._animationMode),e(n,11,0,t["\u0275unv"](n,11,0,t["\u0275nov"](n,12).transform(l.i18n+"header.add-kpi.button.label"))),e(n,13,0,t["\u0275nov"](n,14)._showPaginationControls,"rtl"==t["\u0275nov"](n,14)._getLayoutDirection(),"warn"!==t["\u0275nov"](n,14).color&&"accent"!==t["\u0275nov"](n,14).color,"accent"===t["\u0275nov"](n,14).color,"warn"===t["\u0275nov"](n,14).color)}))}function oe(e){return t["\u0275vid"](0,[(e()(),t["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,ae,le)),t["\u0275did"](1,245760,null,0,ee,[ne.e,q.a],null,null)],(function(e,n){e(n,1,0)}),null)}var re=t["\u0275ccf"]("ng-component",ee,oe,{},{},[]),ue=l("POq0"),de=l("s7LF"),se=l("EwA9"),ce=l("Qq/Z"),pe=l("QQfA"),ge=l("JjoW"),he=l("821u"),me=l("8CZ8"),fe=l("cUpR"),ve=l("gavF"),be=l("Mz6y"),_e=l("IheW"),Ce=l("TUN4"),ke=l("4asF"),ye=l("SL3A"),xe=l("h9HI"),Oe=l("zm+G"),we=l("Mc5n"),Se=l("V3/g"),De=l("zCXV"),Re=l("hCby"),Ie=l("zMNK"),Me=l("FIJs"),Pe=l("aBBA"),Fe=l("gQiY"),$e=l("iTUp"),Te=l("oiVm"),je=l("Fbhx"),Ee=l("HsOI"),qe=l("oapL"),Ve=l("ZwOa"),Ae=l("Xitx"),Be=l("wN6G"),Ne=l("Gi4r"),Ge=l("IkVo"),Le=l("LH5O");class Ke{}var ze=l("elxJ"),Ue=l("pBi1"),Je=l("3Pji"),Ze=l("l0Bn"),He=l("kPC6"),Xe=l("SXLW"),We=l("tdaM"),Ye=l("0sx3"),Qe=l("Ny1k"),en=l("81ID"),nn=l("VeTh"),ln=l("/Lwf"),tn=l("yotz"),an=l("T3zS");const on=()=>Promise.all([l.e(8),l.e(9),l.e(1),l.e(39)]).then(l.bind(null,"gO9G")).then(e=>e.SummaryModuleNgFactory),rn=()=>Promise.all([l.e(8),l.e(9),l.e(1),l.e(70)]).then(l.bind(null,"wlGG")).then(e=>e.DetailsModuleNgFactory),un=()=>Promise.all([l.e(8),l.e(9),l.e(1),l.e(58)]).then(l.bind(null,"hTFM")).then(e=>e.ByStoreModuleNgFactory);l.d(n,"KpiModuleNgFactory",(function(){return dn}));var dn=t["\u0275cmf"](a,[],(function(e){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,r.a,u.b,u.a,d.e,d.d,d.c,s.a,c.a,p.a,g.a,h.a,m.a,f.a,v.a,re]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,_.o,_.n,[t.LOCALE_ID,[2,_.F]]),t["\u0275mpd"](4608,ue.c,ue.c,[]),t["\u0275mpd"](4608,de.F,de.F,[]),t["\u0275mpd"](4608,se.a,se.a,[H.b]),t["\u0275mpd"](4608,I.a,I.a,[se.a,ce.a]),t["\u0275mpd"](4608,pe.c,pe.c,[pe.i,pe.e,t.ComponentFactoryResolver,pe.h,pe.f,t.Injector,t.NgZone,_.d,L.b,[2,_.i]]),t["\u0275mpd"](5120,pe.j,pe.k,[pe.c]),t["\u0275mpd"](5120,ge.a,ge.b,[pe.c]),t["\u0275mpd"](4608,y.b,y.b,[]),t["\u0275mpd"](5120,ne.c,ne.d,[pe.c]),t["\u0275mpd"](135680,ne.e,ne.e,[pe.c,t.Injector,[2,_.i],[2,ne.b],ne.c,[3,ne.e],pe.e]),t["\u0275mpd"](4608,he.i,he.i,[]),t["\u0275mpd"](5120,he.a,he.b,[pe.c]),t["\u0275mpd"](4608,y.a,y.v,[[2,y.f],k.a]),t["\u0275mpd"](4608,me.p,me.p,[]),t["\u0275mpd"](5120,me.b,me.c,[pe.c]),t["\u0275mpd"](4608,me.a,me.g,[[2,me.e],k.a]),t["\u0275mpd"](4608,de.f,de.f,[]),t["\u0275mpd"](4608,fe.e,y.c,[[2,y.g],[2,y.l]]),t["\u0275mpd"](5120,ve.c,ve.j,[pe.c]),t["\u0275mpd"](5120,be.b,be.c,[pe.c]),t["\u0275mpd"](4608,_e.k,_e.q,[_.d,t.PLATFORM_ID,_e.o]),t["\u0275mpd"](4608,_e.r,_e.r,[_e.k,_e.p]),t["\u0275mpd"](5120,_e.a,(function(e){return[e]}),[_e.r]),t["\u0275mpd"](4608,_e.n,_e.n,[]),t["\u0275mpd"](6144,_e.l,null,[_e.n]),t["\u0275mpd"](4608,_e.j,_e.j,[_e.l]),t["\u0275mpd"](6144,_e.b,null,[_e.j]),t["\u0275mpd"](4608,_e.f,_e.m,[_e.b,t.Injector]),t["\u0275mpd"](4608,_e.c,_e.c,[_e.f]),t["\u0275mpd"](4608,Ce.a,Ce.a,[H.b]),t["\u0275mpd"](4608,ke.a,ke.a,[ne.e]),t["\u0275mpd"](4608,ye.a,ye.a,[H.b]),t["\u0275mpd"](4608,xe.a,xe.a,[ye.a,ce.a,M.a,H.b]),t["\u0275mpd"](4608,Oe.a,Oe.a,[xe.a,H.b]),t["\u0275mpd"](4608,we.f,we.f,[_.d,t.NgZone,K.i,we.h]),t["\u0275mpd"](4608,Se.a,Se.a,[ce.a,M.a]),t["\u0275mpd"](4608,De.a,De.a,[H.b,M.a,P.a,Re.a,w.j]),t["\u0275mpd"](4608,q.a,q.a,[w.j,De.a,Se.a]),t["\u0275mpd"](1073742336,_.c,_.c,[]),t["\u0275mpd"](1073742336,b.s,b.s,[[2,b.x],[2,b.o]]),t["\u0275mpd"](1073742336,L.a,L.a,[]),t["\u0275mpd"](1073742336,y.l,y.l,[[2,y.d],[2,fe.f]]),t["\u0275mpd"](1073742336,Ie.g,Ie.g,[]),t["\u0275mpd"](1073742336,k.b,k.b,[]),t["\u0275mpd"](1073742336,y.u,y.u,[]),t["\u0275mpd"](1073742336,ue.d,ue.d,[]),t["\u0275mpd"](1073742336,x.a,x.a,[]),t["\u0275mpd"](1073742336,C.l,C.l,[]),t["\u0275mpd"](1073742336,N.c,N.c,[]),t["\u0275mpd"](1073742336,w.g,w.g,[]),t["\u0275mpd"](1073742336,Me.a,Me.a,[Pe.a]),t["\u0275mpd"](1073742336,Fe.a,Fe.a,[]),t["\u0275mpd"](1073742336,de.E,de.E,[]),t["\u0275mpd"](1073742336,de.m,de.m,[]),t["\u0275mpd"](1073742336,$e.a,$e.a,[]),t["\u0275mpd"](1073742336,Te.a,Te.a,[]),t["\u0275mpd"](1073742336,je.a,je.a,[Pe.a]),t["\u0275mpd"](1073742336,Ee.e,Ee.e,[]),t["\u0275mpd"](1073742336,K.f,K.f,[]),t["\u0275mpd"](1073742336,pe.g,pe.g,[]),t["\u0275mpd"](1073742336,y.s,y.s,[]),t["\u0275mpd"](1073742336,y.q,y.q,[]),t["\u0275mpd"](1073742336,ge.d,ge.d,[]),t["\u0275mpd"](1073742336,qe.c,qe.c,[]),t["\u0275mpd"](1073742336,Ve.c,Ve.c,[]),t["\u0275mpd"](1073742336,ne.k,ne.k,[]),t["\u0275mpd"](1073742336,he.j,he.j,[]),t["\u0275mpd"](1073742336,y.w,y.w,[]),t["\u0275mpd"](1073742336,y.n,y.n,[]),t["\u0275mpd"](1073742336,Ae.a,Ae.a,[]),t["\u0275mpd"](1073742336,me.q,me.q,[]),t["\u0275mpd"](1073742336,me.h,me.h,[]),t["\u0275mpd"](1073742336,me.t,me.t,[]),t["\u0275mpd"](1073742336,Be.a,Be.a,[]),t["\u0275mpd"](1073742336,Ne.c,Ne.c,[]),t["\u0275mpd"](1073742336,Ge.a,Ge.a,[]),t["\u0275mpd"](1073742336,Le.a,Le.a,[]),t["\u0275mpd"](1073742336,Ke,Ke,[]),t["\u0275mpd"](1073742336,de.A,de.A,[]),t["\u0275mpd"](1073742336,ze.d,ze.d,[]),t["\u0275mpd"](1073742336,Ue.d,Ue.d,[]),t["\u0275mpd"](1073742336,Ue.c,Ue.c,[]),t["\u0275mpd"](1073742336,ve.i,ve.i,[]),t["\u0275mpd"](1073742336,ve.f,ve.f,[]),t["\u0275mpd"](1073742336,be.e,be.e,[]),t["\u0275mpd"](1073742336,Je.b,Je.b,[]),t["\u0275mpd"](1073742336,_e.e,_e.e,[]),t["\u0275mpd"](1073742336,_e.d,_e.d,[]),t["\u0275mpd"](1073742336,Ze.a,Ze.a,[]),t["\u0275mpd"](1073742336,He.a,He.a,[]),t["\u0275mpd"](1073742336,Xe.AgGridModule,Xe.AgGridModule,[]),t["\u0275mpd"](1073742336,We.a,We.a,[]),t["\u0275mpd"](1073742336,Ye.a,Ye.a,[]),t["\u0275mpd"](1073742336,Qe.a,Qe.a,[Pe.a]),t["\u0275mpd"](1073742336,en.a,en.a,[]),t["\u0275mpd"](1073742336,nn.a,nn.a,[Pe.a]),t["\u0275mpd"](1073742336,we.g,we.g,[]),t["\u0275mpd"](1073742336,ln.a,ln.a,[]),t["\u0275mpd"](1073742336,tn.b,tn.b,[]),t["\u0275mpd"](1073742336,an.a,an.a,[]),t["\u0275mpd"](1073742336,a,a,[Pe.a]),t["\u0275mpd"](256,y.e,y.i,[]),t["\u0275mpd"](256,me.d,me.f,[]),t["\u0275mpd"](256,_e.o,"XSRF-TOKEN",[]),t["\u0275mpd"](256,_e.p,"X-XSRF-TOKEN",[]),t["\u0275mpd"](1024,b.m,(function(){return[[{path:"",component:ee,children:[{path:"summary",loadChildren:on},{path:"details",loadChildren:rn},{path:"by-store",loadChildren:un},{path:"",redirectTo:"summary",pathMatch:"full"}]}]]}),[])])}))},"zm+G":function(e,n,l){"use strict";l.d(n,"a",(function(){return h}));var t=l("2Vo4"),i=l("fFD9"),a=l("SxV6"),o=l("eIep"),r=l("lJxs"),u=l("pLZG"),d=l("UXun"),s=l("vkgz"),c=l("CqXF"),p=l("/kTj"),g=l("VHTt");class h{constructor(e,n){this.ekdApi=e,this.dataLoading=new g.b,this.isReportChanged$=new t.a(!1),this.isSectionEqualsDocs$=new t.a(!1),this.creatingKpiBudgetByStores$=new t.a(void 0),this.editingKpi$=new t.a(void 0),this.kpiSetupReportListCache={},this.getOneCache$=new t.a({}),this.debug=n.factory(new.target.name,p.a.All),this.initStreams()}destroy(){this.editingKpi$.next(void 0),this.creatingKpiBudgetByStores$.next(void 0)}isEditing(){return!!this.editingKpi$.getValue()}save(e){return this.editingKpi$.pipe(Object(i.a)(this.budgetByStores$),Object(a.a)(),Object(o.a)(([n,l])=>void 0===n?this.ekdApi.createKpi(e.report.reportId,e,l):(this.patchGetOneCache(n),this.ekdApi.updateKpi(n,e,l))))}openKpiToEdit(e,n){return this.editingKpi$.next(e),this.getOneCache$.getValue(),this.ekdApi.getOneKpi(e).pipe(Object(r.a)(e=>Object.assign({},e,{selectedYear:n})),this.dataLoading.streamJoiner(!0)).subscribe(n=>this.patchGetOneCache(e,n)),this.getOneCache$.pipe(Object(r.a)(n=>n[e]),Object(u.a)(e=>!!e),Object(a.a)(),Object(r.a)(({formData:e})=>e))}getKpiSetupReportList(e,n){const l=void 0===n?String(e):`${e}-${n}`;return this.kpiSetupReportListCache[l]||(this.kpiSetupReportListCache[l]=this.ekdApi.getAvailableKpiSetupReports(e,n).pipe(this.dataLoading.streamJoiner(!0),Object(d.a)(1))),this.kpiSetupReportListCache[l]}setCreatingKpiBudgetByStores(e){this.creatingKpiBudgetByStores$.next(e)}deleteEditingKpi(){return this.editingKpi$.pipe(Object(a.a)(),Object(u.a)(e=>!!e),Object(o.a)(e=>this.ekdApi.deleteKpi(e).pipe(Object(s.a)(()=>this.patchGetOneCache(void 0)))))}autoFill(e,n){return this.editingKpi$.pipe(Object(a.a)(),Object(s.a)(e=>void 0===e&&this.debug.warn("Can not apply autoFill to not saved kpi")),Object(u.a)(e=>void 0!==e),Object(o.a)(l=>this.getOneCache$.pipe(Object(r.a)(e=>e[l]),Object(a.a)(),Object(s.a)(e=>!e&&this.debug.warn("Can not find cached kpi to get selected year")),Object(u.a)(e=>!!e),Object(o.a)(({selectedYear:t})=>this.ekdApi.autoFillKpiBudgetByMonths(e,l,n,t)),Object(s.a)(e=>{const n=this.getOneCache$.getValue()[l];this.patchGetOneCache(l,Object.assign({},n,{budget:e}))}))),Object(c.a)(void 0))}initStreams(){this.kpiTypeList$=this.ekdApi.getKpiTypes().pipe(this.dataLoading.streamJoiner(!0),Object(d.a)(1)),this.isSectionEqualsDocs$.subscribe(e=>{this.kpiBudgetTypeList$=this.ekdApi.getKpiBudgetTypes(e).pipe(this.dataLoading.streamJoiner(!0),Object(d.a)(1))}),this.docReportList$=this.ekdApi.getKpiDocs().pipe(this.dataLoading.streamJoiner(!0),Object(d.a)(1)),this.opsFilterList$=this.ekdApi.getOpsFilters().pipe(Object(r.a)(e=>e.map(e=>({label:String(e.FilterName),id:String(e.FilterID)}))),this.dataLoading.streamJoiner(!0),Object(d.a)(1)),this.isEditMode$=this.editingKpi$.pipe(Object(r.a)(e=>void 0!==e)),this.budgetByStores$=this.isEditMode$.pipe(Object(o.a)(e=>e?this.editingKpi$.pipe(Object(u.a)(e=>void 0!==e),Object(o.a)(e=>this.getOneCache$.pipe(Object(r.a)(n=>n[e]))),Object(u.a)(e=>!!e),Object(r.a)(({budget:e})=>e)):this.creatingKpiBudgetByStores$.pipe(Object(u.a)(e=>!!e))),Object(d.a)(1))}patchGetOneCache(e,n){const l=this.getOneCache$.getValue(),t=Object.assign({},l,{[e]:n});this.getOneCache$.next(t)}}}}]);